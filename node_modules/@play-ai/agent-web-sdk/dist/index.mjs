var mo=Object.create;var vr=Object.defineProperty;var yo=Object.getOwnPropertyDescriptor;var bo=Object.getOwnPropertyNames;var vo=Object.getPrototypeOf,_o=Object.prototype.hasOwnProperty;var To=(b,i,l)=>i in b?vr(b,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):b[i]=l;var mi=(b,i)=>()=>(i||b((i={exports:{}}).exports,i),i.exports);var wo=(b,i,l,c)=>{if(i&&typeof i=="object"||typeof i=="function")for(let a of bo(i))!_o.call(b,a)&&a!==l&&vr(b,a,{get:()=>i[a],enumerable:!(c=yo(i,a))||c.enumerable});return b};var yi=(b,i,l)=>(l=b!=null?mo(vo(b)):{},wo(i||!b||!b.__esModule?vr(l,"default",{value:b,enumerable:!0}):l,b));var Y=(b,i,l)=>To(b,typeof i!="symbol"?i+"":i,l);var ro=mi((ml,no)=>{no.exports=Worker});var ao=mi((exports,module)=>{(function(b,i){typeof exports=="object"&&typeof module=="object"?module.exports=i():typeof define=="function"&&define.amd?define([],i):typeof exports=="object"?exports.ort=i():b.ort=i()})(self,()=>(()=>{var __webpack_modules__={5716:(b,i,l)=>{"use strict";i.R=void 0;let c=l(6027),a=l(1723);i.R=new class{async init(){}async createSessionHandler(f,p){let d=new c.Session(p);return await d.loadModel(f),new a.OnnxjsSessionHandler(d)}}},2818:(b,i,l)=>{"use strict";i.c8=i.rX=void 0;let c=l(2235),a=l(5381),f=l(9544),p=l(6640);i.rX=()=>{if((typeof c.env.wasm.initTimeout!="number"||c.env.wasm.initTimeout<0)&&(c.env.wasm.initTimeout=0),typeof c.env.wasm.simd!="boolean"&&(c.env.wasm.simd=!0),typeof c.env.wasm.proxy!="boolean"&&(c.env.wasm.proxy=!1),typeof c.env.wasm.numThreads!="number"||!Number.isInteger(c.env.wasm.numThreads)||c.env.wasm.numThreads<=0){let d=typeof navigator>"u"?(0,a.cpus)().length:navigator.hardwareConcurrency;c.env.wasm.numThreads=Math.min(4,Math.ceil((d||1)/2))}},i.c8=new class{async init(){(0,i.rX)(),await(0,f.initializeWebAssemblyInstance)()}async createSessionHandler(d,h){let u=new p.OnnxruntimeWebAssemblySessionHandler;return await u.loadModel(d,h),Promise.resolve(u)}}},1057:function(b,i,l){"use strict";var c=this&&this.__createBinding||(Object.create?function(d,h,u,o){o===void 0&&(o=u);var n=Object.getOwnPropertyDescriptor(h,u);n&&!("get"in n?!h.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return h[u]}}),Object.defineProperty(d,o,n)}:function(d,h,u,o){o===void 0&&(o=u),d[o]=h[u]}),a=this&&this.__exportStar||function(d,h){for(var u in d)u==="default"||Object.prototype.hasOwnProperty.call(h,u)||c(h,d,u)};Object.defineProperty(i,"__esModule",{value:!0}),a(l(2235),i);let f=l(2235),p=l(8408);{let d=l(5716).R;(0,f.registerBackend)("webgl",d,-10)}{let d=l(2818).c8;(0,f.registerBackend)("cpu",d,10),(0,f.registerBackend)("wasm",d,10),(0,f.registerBackend)("xnnpack",d,9),(0,f.registerBackend)("webnn",d,9)}f.env.versions.web=p.version},4910:(b,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.createAttributeWithCacheKey=void 0;class l{constructor(a){Object.assign(this,a)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(a=>`${this[a]}`).join(";")),this._cacheKey}}i.createAttributeWithCacheKey=c=>new l(c)},6874:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Attribute=void 0;let c=l(5127),a=l(2446),f=l(9240),p=l(7273);var d=c.onnxruntime.experimental.fbs;class h{constructor(o){if(this._attributes=new Map,o!=null){for(let n of o)n instanceof a.onnx.AttributeProto?this._attributes.set(n.name,[h.getValue(n),h.getType(n)]):n instanceof d.Attribute&&this._attributes.set(n.name(),[h.getValue(n),h.getType(n)]);if(this._attributes.size<o.length)throw new Error("duplicated attribute names")}}set(o,n,e){this._attributes.set(o,[e,n])}delete(o){this._attributes.delete(o)}getFloat(o,n){return this.get(o,"float",n)}getInt(o,n){return this.get(o,"int",n)}getString(o,n){return this.get(o,"string",n)}getTensor(o,n){return this.get(o,"tensor",n)}getFloats(o,n){return this.get(o,"floats",n)}getInts(o,n){return this.get(o,"ints",n)}getStrings(o,n){return this.get(o,"strings",n)}getTensors(o,n){return this.get(o,"tensors",n)}get(o,n,e){let t=this._attributes.get(o);if(t===void 0){if(e!==void 0)return e;throw new Error(`required attribute not found: ${o}`)}if(t[1]!==n)throw new Error(`type mismatch: expected ${n} but got ${t[1]}`);return t[0]}static getType(o){let n=o instanceof a.onnx.AttributeProto?o.type:o.type();switch(n){case a.onnx.AttributeProto.AttributeType.FLOAT:return"float";case a.onnx.AttributeProto.AttributeType.INT:return"int";case a.onnx.AttributeProto.AttributeType.STRING:return"string";case a.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case a.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case a.onnx.AttributeProto.AttributeType.INTS:return"ints";case a.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case a.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${a.onnx.AttributeProto.AttributeType[n]}`)}}static getValue(o){let n=o instanceof a.onnx.AttributeProto?o.type:o.type();if(n===a.onnx.AttributeProto.AttributeType.GRAPH||n===a.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");let e=this.getValueNoCheck(o);if(n===a.onnx.AttributeProto.AttributeType.INT&&p.LongUtil.isLong(e))return p.LongUtil.longToNumber(e);if(n===a.onnx.AttributeProto.AttributeType.INTS){let t=e,r=new Array(t.length);for(let s=0;s<t.length;s++){let g=t[s];r[s]=p.LongUtil.longToNumber(g)}return r}if(n===a.onnx.AttributeProto.AttributeType.TENSOR)return o instanceof a.onnx.AttributeProto?f.Tensor.fromProto(e):f.Tensor.fromOrtTensor(e);if(n===a.onnx.AttributeProto.AttributeType.TENSORS){if(o instanceof a.onnx.AttributeProto)return e.map(t=>f.Tensor.fromProto(t));if(o instanceof d.Attribute)return e.map(t=>f.Tensor.fromOrtTensor(t))}if(n===a.onnx.AttributeProto.AttributeType.STRING&&o instanceof a.onnx.AttributeProto){let t=e;return(0,p.decodeUtf8String)(t)}return n===a.onnx.AttributeProto.AttributeType.STRINGS&&o instanceof a.onnx.AttributeProto?e.map(p.decodeUtf8String):e}static getValueNoCheck(o){return o instanceof a.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(o):this.getValueNoCheckFromOrtFormat(o)}static getValueNoCheckFromOnnxFormat(o){switch(o.type){case a.onnx.AttributeProto.AttributeType.FLOAT:return o.f;case a.onnx.AttributeProto.AttributeType.INT:return o.i;case a.onnx.AttributeProto.AttributeType.STRING:return o.s;case a.onnx.AttributeProto.AttributeType.TENSOR:return o.t;case a.onnx.AttributeProto.AttributeType.GRAPH:return o.g;case a.onnx.AttributeProto.AttributeType.FLOATS:return o.floats;case a.onnx.AttributeProto.AttributeType.INTS:return o.ints;case a.onnx.AttributeProto.AttributeType.STRINGS:return o.strings;case a.onnx.AttributeProto.AttributeType.TENSORS:return o.tensors;case a.onnx.AttributeProto.AttributeType.GRAPHS:return o.graphs;default:throw new Error(`unsupported attribute type: ${a.onnx.AttributeProto.AttributeType[o.type]}`)}}static getValueNoCheckFromOrtFormat(o){switch(o.type()){case d.AttributeType.FLOAT:return o.f();case d.AttributeType.INT:return o.i();case d.AttributeType.STRING:return o.s();case d.AttributeType.TENSOR:return o.t();case d.AttributeType.GRAPH:return o.g();case d.AttributeType.FLOATS:return o.floatsArray();case d.AttributeType.INTS:{let n=[];for(let e=0;e<o.intsLength();e++)n.push(o.ints(e));return n}case d.AttributeType.STRINGS:{let n=[];for(let e=0;e<o.stringsLength();e++)n.push(o.strings(e));return n}case d.AttributeType.TENSORS:{let n=[];for(let e=0;e<o.tensorsLength();e++)n.push(o.tensors(e));return n}default:throw new Error(`unsupported attribute type: ${d.AttributeType[o.type()]}`)}}}i.Attribute=h},1975:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.resolveBackend=i.backend=void 0;let c=l(4418),a=new Map;async function f(p){let d=i.backend;if(d[p]!==void 0&&function(h){let u=h;return"initialize"in u&&typeof u.initialize=="function"&&"createSessionHandler"in u&&typeof u.createSessionHandler=="function"&&"dispose"in u&&typeof u.dispose=="function"}(d[p])){let h=d[p],u=h.initialize();if(typeof u=="object"&&"then"in u&&(u=await u),u)return a.set(p,h),h}}i.backend={webgl:new c.WebGLBackend},i.resolveBackend=async function p(d){if(!d)return p(["webgl"]);{let h=typeof d=="string"?[d]:d;for(let u of h){let o=a.get(u);if(o)return o;let n=await f(u);if(n)return n}}throw new Error("no available backend to use")}},4418:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.WebGLBackend=void 0;let c=l(2235),a=l(1315),f=l(2171),p=l(3389);i.WebGLBackend=class{get contextId(){return c.env.webgl.contextId}set contextId(d){c.env.webgl.contextId=d}get matmulMaxBatchSize(){return c.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(d){c.env.webgl.matmulMaxBatchSize=d}get textureCacheMode(){return c.env.webgl.textureCacheMode}set textureCacheMode(d){c.env.webgl.textureCacheMode=d}get pack(){return c.env.webgl.pack}set pack(d){c.env.webgl.pack=d}get async(){return c.env.webgl.async}set async(d){c.env.webgl.async=d}initialize(){try{return this.glContext=(0,p.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),a.Logger.setWithEnv(c.env),a.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(d){return a.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${d}`),!1}}createSessionHandler(d){return new f.WebGLSessionHandler(this,d)}dispose(){this.glContext.dispose()}}},6859:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.CoordsGlslLib=void 0;let c=l(7273),a=l(1997),f=l(6757),p=l(7618),d=l(432);class h extends a.GlslLib{constructor(o){super(o)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new a.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new a.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){let o=this.context.outputTextureLayout;return o.isPacked?this.getPackedOutputSamplingSnippet(o):this.getUnpackedOutputSamplingSnippet(o)}getPackedOutputSamplingSnippet(o){let n=o.unpackedShape,e=[o.width,o.height],t={},r="getOutputCoords";switch(n.length){case 0:t[r]=this.getOutputScalarCoords();break;case 1:t[r]=this.getOutputPacked1DCoords(n,e);break;case 2:t[r]=this.getOutputPacked2DCoords(n,e);break;case 3:t[r]=this.getOutputPacked3DCoords(n,e);break;default:t[r]=this.getOutputPackedNDCoords(n,e)}let s=`
      void setOutput(vec4 val) {
        ${(0,f.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return t.floatTextureSetRGBA=new a.GlslLibRoutine(s),t}getUnpackedOutputSamplingSnippet(o){let n=o.unpackedShape,e=[o.width,o.height],t={},r="getOutputCoords";switch(n.length){case 0:t[r]=this.getOutputScalarCoords();break;case 1:t[r]=this.getOutputUnpacked1DCoords(n,e);break;case 2:t[r]=this.getOutputUnpacked2DCoords(n,e);break;case 3:t[r]=this.getOutputUnpacked3DCoords(n,e);break;case 4:t[r]=this.getOutputUnpacked4DCoords(n,e);break;case 5:t[r]=this.getOutputUnpacked5DCoords(n,e);break;case 6:t[r]=this.getOutputUnpacked6DCoords(n,e);break;default:throw new Error(`Unsupported output dimensionality: ${n.length}`)}let s=`
        void setOutput(float val) {
          ${(0,f.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return t.floatTextureSetR=new a.GlslLibRoutine(s),t}getOutputScalarCoords(){return new a.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(o,n){let e=n,t="";return e[0]===1?(t=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${e[1]}.0);
          }
        `,new a.GlslLibRoutine(t)):e[1]===1?(t=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${e[0]}.0);
          }
        `,new a.GlslLibRoutine(t)):(t=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${e[0]}, ${e[1]}));
          return 2 * (resTexRC.y * ${e[0]} + resTexRC.x);
        }
      `,new a.GlslLibRoutine(t))}getOutputPacked2DCoords(o,n){let e="";if(c.ArrayUtil.arraysEqual(o,n))return e=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${n[0]}, ${n[1]}));
        }
      `,new a.GlslLibRoutine(e);let t=n,r=Math.ceil(o[1]/2);return e=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${t[0]}, ${t[1]}));

          int index = resTexRC.y * ${t[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${r}) * 2;
          int c = 2 * (index / ${r});

          return ivec2(r, c);
        }
      `,new a.GlslLibRoutine(e)}getOutputPacked3DCoords(o,n){let e=[n[0],n[1]],t=Math.ceil(o[2]/2),r=t*Math.ceil(o[1]/2),s=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;

          int b = index / ${r};
          index -= b * ${r};

          // reverse r and c order for packed texture
          int r = imod(index, ${t}) * 2;
          int c = 2 * (index / ${t});

          return ivec3(b, r, c);
        }
      `;return new a.GlslLibRoutine(s)}getOutputPackedNDCoords(o,n){let e=[n[0],n[1]],t=Math.ceil(o[o.length-1]/2),r=t*Math.ceil(o[o.length-2]/2),s=r,g="",m="b, r, c";for(let _=2;_<o.length-1;_++)s*=o[o.length-_-1],g=`
      int b${_} = index / ${s};
      index -= b${_} * ${s};
    `+g,m=`b${_}, `+m;let y=`
      ivec${o.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.y * ${e[0]} + resTexRC.x;

        ${g}

        int b = index / ${r};
        index -= b * ${r};

        // reverse r and c order for packed texture
        int r = imod(index, ${t}) * 2;
        int c = 2 * (index / ${t});

        return ivec${o.length}(${m});
      }
    `;return new a.GlslLibRoutine(y)}getOutputUnpacked1DCoords(o,n){let e=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${n[0]}, ${n[1]}));
          return resTexRC.y * ${n[0]} + resTexRC.x;
        }
      `;return new a.GlslLibRoutine(e)}getOutputUnpacked2DCoords(o,n){let e=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${n[0]}, ${n[1]}));
          int index = resTexRC.y * ${n[0]} + resTexRC.x;
          int r = index / ${o[1]};
          int c = index - r * ${o[1]};
          return ivec2(r, c);
        }
      `;return new a.GlslLibRoutine(e)}getOutputUnpacked3DCoords(o,n){let e="",t=o.length,r=null;t<2&&(r=[]),r=new Array(t-1),r[t-2]=o[t-1];for(let m=t-3;m>=0;--m)r[m]=r[m+1]*o[m+1];let s=["r","c","d"],g=r.map((m,y)=>`int ${s[y]} = index / ${m}; ${y===r.length-1?`int ${s[y+1]} = index - ${s[y]} * ${m}`:`index -= ${s[y]} * ${m}`};`).join("");return e=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${n[0]}, ${n[1]}));
          int index = resTexRC.y * ${n[0]} + resTexRC.x;
          ${g}
          return ivec3(r, c, d);
        }
      `,new a.GlslLibRoutine(e)}getOutputUnpacked4DCoords(o,n){let e="",t=o.length,r=null;t<2&&(r=[]),r=new Array(t-1),r[t-2]=o[t-1];for(let m=t-3;m>=0;--m)r[m]=r[m+1]*o[m+1];let s=["r","c","d","d2"],g=r.map((m,y)=>`int ${s[y]} = index / ${m}; ${y===r.length-1?`int ${s[y+1]} = index - ${s[y]} * ${m}`:`index -= ${s[y]} * ${m}`};`).join("");return e=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${n[0]}, ${n[1]}));
          int index = resTexRC.y * ${n[0]} + resTexRC.x;
          ${g}
          return ivec4(r, c, d, d2);
        }
      `,new a.GlslLibRoutine(e)}getOutputUnpacked5DCoords(o,n){let e="",t=o.length,r=null;t<2&&(r=[]),r=new Array(t-1),r[t-2]=o[t-1];for(let m=t-3;m>=0;--m)r[m]=r[m+1]*o[m+1];let s=["r","c","d","d2","d3"],g=r.map((m,y)=>`int ${s[y]} = index / ${m}; ${y===r.length-1?`int ${s[y+1]} = index - ${s[y]} * ${m}`:`index -= ${s[y]} * ${m}`};`).join("");return e=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${n[0]}, ${n[1]}));
          int index = resTexRC.y * ${n[0]} + resTexRC.x;
          ${g}
          return ivec5(r, c, d, d2, d3);
        }
      `,new a.GlslLibRoutine(e)}getOutputUnpacked6DCoords(o,n){let e="",t=o.length,r=null;t<2&&(r=[]),r=new Array(t-1),r[t-2]=o[t-1];for(let m=t-3;m>=0;--m)r[m]=r[m+1]*o[m+1];let s=["r","c","d","d2","d3","d4"],g=r.map((m,y)=>`int ${s[y]} = index / ${m}; ${y===r.length-1?`int ${s[y+1]} = index - ${s[y]} * ${m}`:`index -= ${s[y]} * ${m}`};`).join("");return e=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${n[0]}, ${n[1]}));
         int index = resTexRC.y * ${n[0]} + resTexRC.x;
         ${g}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new a.GlslLibRoutine(e)}getCommonUtilFuncs(){let o={},n="uvFromFlat";o[n]=new a.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),n="packedUVfrom1D",o[n]=new a.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),n="packedUVfrom2D",o[n]=new a.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),n="packedUVfrom3D",o[n]=new a.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),n="sampleTexture";let e=(0,f.getGlsl)(this.context.glContext.version);return o[n]=new a.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${e.texture2D}(textureSampler, uv).r;
        }`),o}getInputsSamplingSnippets(){let o={},n=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((e,t)=>{let r=this.context.inputTextureLayouts[t],s=(0,d.generateShaderFuncNameFromInputSamplerName)(e);r.isPacked?o[s]=this.getPackedSamplerFromInput(s,e,r):o[s]=this.getUnpackedSamplerFromInput(s,e,r);let g=(0,d.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(e);r.unpackedShape.length<=n.unpackedShape.length&&(r.isPacked?o[g]=this.getPackedSamplerAtOutputCoords(g,r,n,e):o[g]=this.getUnpackedSamplerAtOutputCoords(g,r,n,e))}),o}getPackedSamplerAtOutputCoords(o,n,e,t){let r=n.unpackedShape,s=e.unpackedShape,g=t,m=(0,d.generateShaderFuncNameFromInputSamplerName)(g),y=r.length,_=s.length,T=c.BroadcastUtil.getBroadcastDims(r,s),w=(0,d.getCoordsDataType)(_),x=_-y,S,P=(0,d.getGlChannels)();S=y===0?"":_<2&&T.length>=1?"coords = 0;":T.map(V=>`coords.${P[V+x]} = 0;`).join(`
`);let C="";C=_<2&&y>0?"coords":r.map((V,O)=>`coords.${P[O+x]}`).join(", ");let M="return outputValue;",j=c.ShapeUtil.size(r)===1,B=c.ShapeUtil.size(s)===1;if(y!==1||j||B){if(j&&!B)M=_===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(T.length){let V=y-2,O=y-1;T.indexOf(V)>-1&&T.indexOf(O)>-1?M="return vec4(outputValue.x);":T.indexOf(V)>-1?M="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":T.indexOf(O)>-1&&(M="return vec4(outputValue.xx, outputValue.zz);")}}else M=`
        return vec4(outputValue.xy, outputValue.xy);
      `;let E=`
      vec4 ${o}() {
        ${w} coords = getOutputCoords();
        
        int lastDim = coords.${P[_-1]};
        coords.${P[_-1]} = coords.${P[_-2]};
        coords.${P[_-2]} = lastDim;
      
        ${S}
        vec4 outputValue = ${m}(${C});
        ${M}
      }
    `;return new a.GlslLibRoutine(E,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(o,n,e,t){let r=[e.width,e.height],s=[n.width,n.height],g=n.unpackedShape.length,m=e.unpackedShape.length,y=n.unpackedShape,_=e.unpackedShape,T=(0,d.generateShaderFuncNameFromInputSamplerName)(t);if(g===m&&c.ArrayUtil.arraysEqual(s,r)){let B=`
          float ${o}() {
            return sampleTexture(${t}, TexCoords);
          }
        `;return new a.GlslLibRoutine(B,["coordinates.sampleTexture"])}let w=(0,d.getCoordsDataType)(m),x=c.BroadcastUtil.getBroadcastDims(y,_),S=m-g,P,C=(0,d.getGlChannels)();P=g===0?"":m<2&&x.length>=1?"coords = 0;":x.map(B=>`coords.${C[B+S]} = 0;`).join(`
`);let M="";M=m<2&&g>0?"coords":n.unpackedShape.map((B,E)=>`coords.${C[E+S]}`).join(", ");let j=`
        float ${o}() {
          ${w} coords = getOutputCoords();
          ${P}
          return ${T}(${M});
        }
      `;return new a.GlslLibRoutine(j,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(o,n,e){switch(e.unpackedShape.length){case 0:return this.getPackedSamplerScalar(o,n);case 1:return this.getPackedSampler1D(o,n,e);case 2:return this.getPackedSampler2D(o,n,e);case 3:return this.getPackedSampler3D(o,n,e);default:return this.getPackedSamplerND(o,n,e)}}getUnpackedSamplerFromInput(o,n,e){let t=e.unpackedShape;switch(t.length){case 0:return this.getUnpackedSamplerScalar(o,n,e);case 1:return this.getUnpackedSampler1D(o,n,e);case 2:return this.getUnpackedSampler2D(o,n,e);case 3:return this.getUnpackedSampler3D(o,n,e);case 4:return this.getUnpackedSampler4D(o,n,e);case 5:return this.getUnpackedSampler5D(o,n,e);case 6:return this.getUnpackedSampler6D(o,n,e);default:throw new Error(`Unsupported dimension ${t.length}-D`)}}getPackedSamplerScalar(o,n){let e=`
          vec4 ${o}() {
            return ${(0,f.getGlsl)(this.context.glContext.version).texture2D}(${n}, halfCR);
          }
        `;return new a.GlslLibRoutine(e)}getPackedSampler1D(o,n,e){let t=[e.width,e.height],r=[t[1],t[0]],s=(0,f.getGlsl)(this.context.glContext.version),g=`vec4 ${o}(int index) {
      vec2 uv = packedUVfrom1D(
      ${r[0]}, ${r[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }`;return new a.GlslLibRoutine(g,["coordinates.packedUVfrom1D"])}getPackedSampler2D(o,n,e){let t=e.unpackedShape,r=[e.width,e.height],s=(0,f.getGlsl)(this.context.glContext.version),g=r[0],m=r[1];if(r!=null&&c.ArrayUtil.arraysEqual(t,r)){let w=`vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${m}.0, ${g}.0);
        return ${s.texture2D}(${n}, uv);
      }`;return new a.GlslLibRoutine(w)}let y=r,_=Math.ceil(t[1]/2),T=`vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${y[1]}, ${y[0]}, ${_}, row, col);
      return ${s.texture2D}(${n}, uv);
    }`;return new a.GlslLibRoutine(T,["coordinates.packedUVfrom2D"])}getPackedSampler3D(o,n,e){let t=e.unpackedShape,r=[e.width,e.height],s=[r[0],r[1]],g=(0,f.getGlsl)(this.context.glContext.version);if(t[0]===1){let w=t.slice(1),x=[1,2],S=(0,d.squeezeInputShape)(t,w),P=["b","row","col"],C=JSON.parse(JSON.stringify(e));C.unpackedShape=S;let M=this.getPackedSamplerFromInput(o,n,C),j=`${M.routineBody}
      vec4 ${o}(int b, int row, int col) {
        return ${o}(${(0,d.getSqueezedParams)(P,x)});
      } `;return new a.GlslLibRoutine(j,M.dependencies)}let m=s[0],y=s[1],_=Math.ceil(t[2]/2),T=`vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${y}, ${m}, ${_*Math.ceil(t[1]/2)}, ${_}, b, row, col);
      return ${g.texture2D}(${n}, uv);}`;return new a.GlslLibRoutine(T,["coordinates.packedUVfrom3D"])}getPackedSamplerND(o,n,e){let t=e.unpackedShape,r=t.length,s=[e.width,e.height],g=(0,f.getGlsl)(this.context.glContext.version),m=[s[0],s[1]],y=m[1],_=m[0],T=Math.ceil(t[r-1]/2),w=T*Math.ceil(t[r-2]/2),x="int b, int row, int col",S=`b * ${w} + (row / 2) * ${T} + (col / 2)`;for(let C=2;C<r-1;C++)x=`int b${C}, `+x,w*=t[r-C-1],S=`b${C} * ${w} + `+S;let P=`vec4 ${o}(${x}) {
      int index = ${S};
      int texR = index / ${_};
      int texC = index - texR * ${_};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${_}, ${y});
      return ${g.texture2D}(${n}, uv);
    }`;return new a.GlslLibRoutine(P)}getUnpackedSamplerScalar(o,n,e){let[t,r]=[e.width,e.height];if(t===1&&r===1){let g=`
          float ${o}() {
            return sampleTexture(${n}, halfCR);
          }
        `;return new a.GlslLibRoutine(g,["coordinates.sampleTexture"])}let s=`
        float ${o}() {
          int offset_${n} = coordsToOffset(TexCoords, ${t}, ${r});
          vec2 uv = uvFromFlat(${t}, ${r}, offset_${n});
          return sampleTexture(${n}, uv);
        }
      `;return new a.GlslLibRoutine(s,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(o,n,e){let t=e.width,r=e.height;if(r===1&&t===1){let g=`
        float ${o}(int index) {
          return sampleTexture(${n}, halfCR);
        }
      `;return new a.GlslLibRoutine(g,["coordinates.sampleTexture"])}if(r===1){let g=`
          float ${o}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${t}.0, 0.5);
            return sampleTexture(${n}, uv);
          }
        `;return new a.GlslLibRoutine(g,["coordinates.sampleTexture"])}if(t===1){let g=`
          float ${o}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${r}.0);
            return sampleTexture(${n}, uv);
          }
        `;return new a.GlslLibRoutine(g,["coordinates.sampleTexture"])}let s=`
        float ${o}(int index) {
          vec2 uv = uvFromFlat(${t}, ${r}, index);
          return sampleTexture(${n}, uv);
        }
      `;return new a.GlslLibRoutine(s,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(o,n,e){let t=e.unpackedShape,r=[e.height,e.width];if(r!=null&&c.ArrayUtil.arraysEqual(t,r)){let w=`
          float ${o}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${r[1]}.0, ${r[0]}.0);
            return sampleTexture(${n}, uv);
          }
        `;return new a.GlslLibRoutine(w,["coordinates.sampleTexture"])}let{newShape:s,keptDims:g}=(0,p.squeezeShape)(t),m=s;if(m.length<t.length){let w=(0,d.squeezeInputShape)(t,m),x=JSON.parse(JSON.stringify(e));x.unpackedShape=w;let S=["col","row"],P=`
          ${this.getUnpackedSamplerFromInput(o,n,x).routineBody}
          float ${o}(int row, int col) {
            return ${o}(${(0,d.getSqueezedParams)(S,g)});
          }
        `;return new a.GlslLibRoutine(P,["coordinates.sampleTexture"])}let y=r[1],_=r[0];if(_===1){let w=`
          float ${o}(int row, int col) {
            int offset_${n} = coordsToOffset(TexCoords, ${y}, ${_});
            float index = dot(vec3(row, col, offset_${n}), vec3(${t[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${y}.0);
            return sampleTexture(${n}, uv);
          }
        `;return new a.GlslLibRoutine(w,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(y===1){let w=`
          float ${o}(int row, int col) {
            int offset_${n} = coordsToOffset(TexCoords, ${y}, ${_});
            float index = dot(vec3(row, col, offset_${n}), vec3(${t[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${_}.0, 0.5);
            return sampleTexture(${n}, uv);
          }
        `;return new a.GlslLibRoutine(w,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let T=`
        float ${o}(int row, int col) {
          int index = col * ${t[1]} + row;
          vec2 uv = uvFromFlat(${y}, ${_}, index);
          return sampleTexture(${n}, uv);
        }
      `;return new a.GlslLibRoutine(T,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(o,n,e){let t=e.unpackedShape,r=t[1]*t[2],s=t[2],{newShape:g,keptDims:m}=(0,p.squeezeShape)(t),y=g;if(y.length<t.length){let T=(0,d.squeezeInputShape)(t,y),w=["batch","col","row"],x=JSON.parse(JSON.stringify(e));x.unpackedShape=T;let S=this.getUnpackedSamplerFromInput(o,n,x),P=m.reverse(),C=`
          ${S.routineBody}
          float ${o}(int batch, int row, int col) {
            return ${o}(${(0,d.getSqueezedParams)(w,P)});
          }
        `;return new a.GlslLibRoutine(C,S.dependencies)}let _=`
          float ${o}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${r} + col * ${s} + row;
            vec2 uv = uvFromFlat(${e.width}, ${e.height}, index);
            return sampleTexture(${n}, uv);
          }
      `;return new a.GlslLibRoutine(_,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(o,n,e){let t=e.unpackedShape,r=t[3],s=t[2]*r,g=`
        float ${o}(int row, int col, int depth, int depth2) {
          int index = row * ${t[1]*s} + col * ${s} +
              depth2 * ${r} + depth;
          vec2 uv = uvFromFlat(${e.width}, ${e.height}, index);
          return sampleTexture(${n}, uv);
        }
      `;return new a.GlslLibRoutine(g,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(o,n,e){let t=e.unpackedShape,r=t[4],s=t[3]*r,g=t[2]*s,m=t[1]*g,{newShape:y,keptDims:_}=(0,p.squeezeShape)(t);if(y.length<t.length){let w=(0,d.squeezeInputShape)(t,y),x=["row","col","depth","depth2","depth3"],S=JSON.parse(JSON.stringify(e));S.unpackedShape=w;let P=`
          ${this.getUnpackedSamplerFromInput(o,n,S).routineBody}
          float ${o}(int row, int col, int depth, int depth2, int depth3) {
            return ${o}(${(0,d.getSqueezedParams)(x,_)});
          }
        `;return new a.GlslLibRoutine(P,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let T=`
        float ${o}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${m} + col * ${g} + depth * ${s} +
          depth3 * ${r} + depth2;
          vec2 uv = uvFromFlat(${e.width}, ${e.height}, index);
          return sampleTexture(${n}, uv);
        }
      `;return new a.GlslLibRoutine(T,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(o,n,e){let t=e.unpackedShape,r=t[5],s=t[4]*r,g=t[3]*s,m=t[2]*g,y=t[1]*m,{newShape:_,keptDims:T}=(0,p.squeezeShape)(t);if(_.length<t.length){let x=(0,d.squeezeInputShape)(t,_),S=["row","col","depth","depth2","depth3","depth4"],P=JSON.parse(JSON.stringify(e));P.unpackedShape=x;let C=`
            ${this.getUnpackedSamplerFromInput(o,n,P).routineBody}
            float ${o}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${o}(${(0,d.getSqueezedParams)(S,T)});
            }
          `;return new a.GlslLibRoutine(C,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let w=`
          float ${o}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${y} + col * ${m} + depth * ${g} +
            depth2 * ${s} + depth3 * ${r} + depth4;
            vec2 uv = uvFromFlat(${e.width}, ${e.height}, index);
            return sampleTexture(${n}, uv);
          }
        `;return new a.GlslLibRoutine(w,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let o=this.context.outputTextureLayout,n=o.shape.length,e=o.strides,t=o.width,r=o.height,s=[];for(let m=0;m<n-1;++m)s.push(`
        c[${m}] = offset / ${e[m]};`),s.push(`
        offset -= c[${m}] * ${e[m]};`);s.push(`
        c[${n-1}] = offset;`);let g=`
      void toVec(vec2 texCoords, out int c[${n}]) {
        int offset = coordsToOffset(texCoords, ${t}, ${r});
        ${s.join("")}
      }
      void toVec(int offset, out int c[${n}]) {
        ${s.join("")}
      }
    `;return{toVec:new a.GlslLibRoutine(g,["coordinates.coordsToOffset"])}}valueFrom(){let o={};return this.context.programInfo.inputNames.forEach((n,e)=>{let t=this.context.inputTextureLayouts[e],r=(t.unpackedShape.length>0?t.unpackedShape:t.shape).length,s=`_${n}`;o[s]=new a.GlslLibRoutine(this.getValueFromSingle(n,r,t.width,t.height,!1),[`shapeUtils.indicesToOffset${s}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),s+="_T",o[s]=new a.GlslLibRoutine(this.getValueFromSingle(n,r,t.width,t.height,!0),[`shapeUtils.indicesToOffset${s}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),o}getValueFromSingle(o,n,e,t,r){let s=`_${o}`;return r&&(s+="_T"),`
        float ${s}(int m[${n}]) {
          int offset = indicesToOffset${s}(m);
          vec2 coords = offsetToCoords(offset, ${e}, ${t});
          float value = getColorAsFloat(${(0,f.getGlsl)(this.context.glContext.version).texture2D}(${o}, coords));
          return value;
        }
        `}getPackedValueFrom(o,n,e,t,r){let s=`_${o}_Pack`;return r&&(s+="_T"),`
        vec4 ${s}(int m[${n}]) {
          int offset = indicesToOffset_${o}(m);
          vec2 coords = offsetToCoords(offset, ${e}, ${t});
          return ${(0,f.getGlsl)(this.context.glContext.version).texture2D}(${o}, coords);
        }
        `}}i.CoordsGlslLib=h},1997:(b,i)=>{"use strict";var l;Object.defineProperty(i,"__esModule",{value:!0}),i.TopologicalSortGlslRoutines=i.GlslLibRoutineNode=i.GlslLibRoutine=i.GlslLib=i.GlslContext=i.FunctionType=void 0,(l=i.FunctionType||(i.FunctionType={}))[l.ValueBased=0]="ValueBased",l[l.Positional=1]="Positional",i.GlslContext=class{constructor(c,a,f,p){this.glContext=c,this.programInfo=a,this.inputTextureLayouts=f,this.outputTextureLayout=p}},i.GlslLib=class{constructor(c){this.context=c}},i.GlslLibRoutine=class{constructor(c,a){this.routineBody=c,this.dependencies=a}},i.GlslLibRoutineNode=class{constructor(c,a,f){this.name=c,this.dependencies=f||[],a&&(this.routineBody=a)}addDependency(c){c&&this.dependencies.push(c)}},i.TopologicalSortGlslRoutines=class{static returnOrderedNodes(c){if(!c||c.length===0)return[];if(c.length===1)return c;let a=new Set,f=new Set,p=new Array;return this.createOrderedNodes(c,a,f,p),p}static createOrderedNodes(c,a,f,p){for(let d=0;d<c.length;++d)this.dfsTraverse(c[d],a,f,p)}static dfsTraverse(c,a,f,p){if(!c||f.has(c.name))return;if(a.has(c.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");a.add(c.name);let d=c.dependencies;if(d&&d.length>0)for(let h=0;h<d.length;++h)this.dfsTraverse(d[h],a,f,p);p.push(c),f.add(c.name),a.delete(c.name)}}},1371:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.EncodingGlslLib=void 0;let c=l(1997);class a extends c.GlslLib{constructor(p){super(p)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new c.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new c.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){let p=a.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new c.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${p}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){let p=a.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new c.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${p}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){let p=new ArrayBuffer(4),d=new Uint32Array(p),h=new Uint8Array(p);if(d[0]=3735928559,h[0]===239)return!0;if(h[0]===222)return!1;throw new Error("unknown endianness")}}i.EncodingGlslLib=a},2691:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FragColorGlslLib=void 0;let c=l(1997),a=l(6757);class f extends c.GlslLib{constructor(d){super(d)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){let d=(0,a.getGlsl)(this.context.glContext.version);return{setFragColor:new c.GlslLibRoutine(`
        void setFragColor(float value) {
            ${d.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new c.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}i.FragColorGlslLib=f},3878:(b,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.replaceInlines=void 0;let l=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;i.replaceInlines=function(c){let a={},f;for(;(f=l.exec(c))!==null;){let p=f[3].split(",").map(d=>{let h=d.trim().split(" ");return h&&h.length===2?{type:h[0],name:h[1]}:null}).filter(d=>d!==null);a[f[2]]={params:p,body:f[4]}}for(let p in a){let d="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",p),h=new RegExp(d,"gm");for(;(f=h.exec(c))!==null;){let u=f[1],o=f[2],n=f[3].split(","),e=u?`${u} ${o};`:"",t=a[p].body,r="";a[p].params.forEach((g,m)=>{g&&(r+=`${g.type} ${g.name} = ${n[m]};
`)}),t=`${r}
 ${t}`,t=t.replace("return",`${o} = `);let s=`
      ${e}
      {
        ${t}
      }
      `;c=c.replace(f[0],s)}}return c.replace(l,"")}},8897:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.GlslPreprocessor=void 0;let c=l(1997),a=l(3878),f=l(1248),p=l(6757);i.GlslPreprocessor=class{constructor(d,h,u,o){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new c.GlslContext(d,h,u,o),Object.keys(f.glslRegistry).forEach(e=>{let t=new f.glslRegistry[e](this.context);this.libs[e]=t});let n=this.glslLibRoutineDependencyGraph;for(let e in this.libs){let t=this.libs[e].getFunctions();for(let r in t){let s=e+"."+r,g;n[s]?(g=n[s],g.routineBody=t[r].routineBody):(g=new c.GlslLibRoutineNode(s,t[r].routineBody),n[s]=g);let m=t[r].dependencies;if(m)for(let y=0;y<m.length;++y)if(n[m[y]])g.addDependency(n[m[y]]);else{let _=new c.GlslLibRoutineNode(m[y]);n[m[y]]=_,g.addDependency(_)}}}}preprocess(){let d=this.context.programInfo,h=d.shaderSource;return this.context.programInfo.hasMain||(h=`${h}
      ${(0,p.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),h=(0,a.replaceInlines)(h),`${(0,p.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(d.inputNames,d.variables)}
    ${this.getImports(h)}
    ${h}`}getImports(d){let h=this.selectGlslLibRoutinesToBeIncluded(d);if(h.length===0)return"";let u="";for(let o=0;o<h.length;++o){if(!h[o].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${h[o].name}`);u+=h[o].routineBody+`
`}return u}selectGlslLibRoutinesToBeIncluded(d){let h=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(u=>{let o=u.split(".")[1];d.indexOf(o)!==-1&&h.push(this.glslLibRoutineDependencyGraph[u])}),c.TopologicalSortGlslRoutines.returnOrderedNodes(h)}getUniforms(d,h){let u=[];if(d)for(let o of d)u.push(`uniform sampler2D ${o};`);if(h)for(let o of h)u.push(`uniform ${o.type} ${o.name}${o.arrayLength?`[${o.arrayLength}]`:""};`);return u.join(`
`)}}},1248:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.glslRegistry=void 0;let c=l(6859),a=l(1371),f=l(2691),p=l(9183),d=l(9314);i.glslRegistry={encoding:a.EncodingGlslLib,fragcolor:f.FragColorGlslLib,vec:d.VecGlslLib,shapeUtils:p.ShapeUtilsGlslLib,coordinates:c.CoordsGlslLib}},9183:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ShapeUtilsGlslLib=void 0;let c=l(1997);class a extends c.GlslLib{constructor(p){super(p)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){let p=this.context.outputTextureLayout.shape.length,d={};return this.context.programInfo.inputNames.forEach((h,u)=>{let o=this.context.inputTextureLayouts[u].unpackedShape;if(o.length<=p){let n=o.length,e=p-n,t=`bcastIndices_${h}`,r="";for(let g=0;g<n;++g)r+=`
          realIndices[${g}] = int( mod(float(bcastedIndices[${e+g}]), ${o[g]}.0) );
          `;let s=`
        void ${t} (int bcastedIndices[${p}], out int realIndices[${n}]) {
          ${r}
        }
        `;d[t]=new c.GlslLibRoutine(s)}}),d}bcastMatmulIndex(){let p=this.context.outputTextureLayout.shape.length,d={};return this.context.programInfo.inputNames.forEach((h,u)=>{let o=this.context.inputTextureLayouts[u].shape;if(!(o.length<2||o.length>p)){let n=o.length,e=p-n,t=`bcastMatmulIndices_${h}`,r="";for(let g=0;g<n-2;++g)r+=`
          realIndices[${g}] = int( mod(float(bcastedIndices[${e+g}]), ${o[g]}.0) );
          `;let s=`
        void ${t}(int bcastedIndices[${p}], out int realIndices[${n}]) {
          ${r}
          realIndices[${n-1}] = bcastedIndices[${p-1}];
          realIndices[${n-2}] = bcastedIndices[${p-2}];
        }
        `;d[t]=new c.GlslLibRoutine(s)}}),d}indicesToOffset(){let p={};return this.context.programInfo.inputNames.forEach((d,h)=>{let u=this.context.inputTextureLayouts[h].shape,o=this.context.inputTextureLayouts[h].strides,n=u.length,e=`indicesToOffset_${d}`;p[e]=new c.GlslLibRoutine(a.indexToOffsetSingle(e,n,o)),e=`indicesToOffset_${d}_T`,p[e]=new c.GlslLibRoutine(a.indexToOffsetSingle(e,n,o.slice().reverse()))}),p}static indexToOffsetSingle(p,d,h){let u="";for(let o=d-1;o>=0;--o)u+=`
        offset += indices[${o}] * ${h[o]};
        `;return`
      int ${p}(int indices[${d}]) {
        int offset = 0;
        ${u}
        return offset;
      }
      `}offsetToIndices(){let p={};return this.context.programInfo.inputNames.forEach((d,h)=>{let u=this.context.inputTextureLayouts[h].shape,o=this.context.inputTextureLayouts[h].strides,n=u.length,e=`offsetToIndices_${d}`;p[e]=new c.GlslLibRoutine(a.offsetToIndicesSingle(e,n,o)),e=`offsetToIndices_${d}_T`,p[e]=new c.GlslLibRoutine(a.offsetToIndicesSingle(e,n,o.slice().reverse()))}),p}static offsetToIndicesSingle(p,d,h){let u=[];for(let o=0;o<d-1;++o)u.push(`
      indices[${o}] = offset / ${h[o]};`),u.push(`
        offset -= indices[${o}] * ${h[o]};`);return u.push(`
      indices[${d-1}] = offset;`),`
      void ${p}(int offset, out int indices[${d}]) {
        ${u.join("")}
      }
      `}incrementIndices(){let p={};return this.context.programInfo.inputNames.forEach((d,h)=>{let u=this.context.inputTextureLayouts[h].shape,o=u.length,n=`incrementIndices_${d}`,e="";for(let r=0;r<o;++r)e+=`
        shape[${r}] = ${u[r]};`;let t=`
        void ${n}(int axis, out int indices[${o}]) {
          int shape[${o}];
          ${e};
          for(int i = ${o} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;p[n]=new c.GlslLibRoutine(t)}),p}}i.ShapeUtilsGlslLib=a},6757:(b,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getDefaultFragShaderMain=i.getFragShaderPreamble=i.getVertexShaderSource=i.getGlsl=void 0;let l={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},c={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function a(f){return f===1?l:c}i.getGlsl=a,i.getVertexShaderSource=function(f){let p=a(f);return`${p.version}
      precision highp float;
      ${p.attribute} vec3 position;
      ${p.attribute} vec2 textureCoord;

      ${p.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},i.getFragShaderPreamble=function(f){let p=a(f);return`${p.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${p.varyingFrag} vec2 TexCoords;
    ${p.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},i.getDefaultFragShaderMain=function(f,p){return`
  void main() {
    int indices[${p}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${a(f).output} = result;
  }
  `}},9314:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.VecGlslLib=void 0;let c=l(1997);class a extends c.GlslLib{constructor(p){super(p)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){let p=this.context.outputTextureLayout.shape.length,d={add:"+=",sub:"-=",mul:"*=",div:"/="},h={};for(let u in d){let o=`${u}Vec`,n="";for(let t=0;t<p;++t)n+=`
          dest[${t}] ${d[u]} src[${t}];
          `;let e=`
        void ${o}(int src[${p}], out int dest[${p}]) {
          ${n}
        }
        `;h[o]=new c.GlslLibRoutine(e)}return h}copyVec(){let p=this.context.outputTextureLayout.shape.length,d="";for(let u=0;u<p;++u)d+=`
        dest[${u}] = src[${u}];
        `;let h=`
      void copyVec(int src[${p}], out int dest[${p}]) {
        ${d}
      }
      `;return{copyVec:new c.GlslLibRoutine(h)}}setVecItem(){let p=this.context.outputTextureLayout.shape.length,d=`
        if(index < 0)
            index =${p} + index;
        if (index == 0)
            m[0] = value;
        `;for(let u=1;u<p-1;++u)d+=`
        else if (index == ${u})
            m[${u}] = value;
            `;d+=`
        else
            m[${p-1}] = value;
        `;let h=`
      void setVecItem(out int m[${p}], int index, int value) {
        ${d}
      }
        `;return{setVecItem:new c.GlslLibRoutine(h)}}getVecItem(){let p=this.context.outputTextureLayout.shape.length,d=`
        if(index < 0)
            index = ${p} + index;
        if (index == 0)
            return m[0];
      `;for(let u=1;u<p-1;++u)d+=`
        else if (index == ${u})
            return m[${u}];
      `;d+=`
        else
            return m[${p-1}];
        `;let h=`
      int getVecItem(int m[${p}], int index) {
        ${d}
      }
    `;return{getVecItem:new c.GlslLibRoutine(h)}}}i.VecGlslLib=a},7860:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.WebGLInferenceHandler=void 0;let c=l(1315),a=l(9240),f=l(7273),p=l(9),d=l(7379),h=l(2488),u=l(540),o=l(3314),n=l(5639);i.WebGLInferenceHandler=class{constructor(e){this.session=e,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(e,t){return(0,o.calculateTextureWidthAndHeight)(this.session.layoutStrategy,e,t)}executeProgram(e,t){if(t.length<e.inputNames.length)throw new Error(`Input size mustn't be less than ${e.inputNames.length}.`);if(e.inputNames.length!==e.inputTypes.length)throw new Error("input names size does not match input types");let r=[];for(let T=0;T<e.inputNames.length;++T)r[T]=this.getOrCreateTextureData(t[T],e.inputTypes[T]);let s=((T,w)=>{let x=w.map(P=>`${P.unpackedShape.join(",")};${P.width}x${P.height}`).join("_"),S=T.name;return T.cacheHint&&(S+="["+T.cacheHint+"]"),S+=":"+x,S})(e,r),g=this.session.programManager.getArtifact(s),m=g?g.programInfo:typeof e.get=="function"?e.get():e,y=(0,o.createTextureLayoutFromTextureType)(this.session.layoutStrategy,m.output.dims,m.output.textureType),_=this.createTextureData(y,m.output.type);return g||(g=this.session.programManager.build(m,r,_),this.session.programManager.setArtifact(s,g)),this.runProgram(g,r,_),_}run(e,t){return this.executeProgram(e,t).tensor}runProgram(e,t,r){for(let s=0;s<t.length;++s)if(!!t[s].isPacked!=(e.programInfo.inputTypes[s]===n.TextureType.packed))throw new Error(`input[${s}] property packed inconsistent`);if(!!r.isPacked!=(e.programInfo.output.textureType===n.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(e,t,r)}getOrCreateTextureData(e,t){let r=this.getTextureData(e.dataId,t===n.TextureType.packed);if(!r&&(r=this.getTextureData(e.dataId,t!==n.TextureType.packed),r))return t===n.TextureType.packed?this.pack(r):this.unpack(r);if(!r){let s=(0,o.createTextureLayoutFromTextureType)(this.session.layoutStrategy,e.dims,t);if(t===n.TextureType.packedLastDimension){let y=e.dims;if(y.length===4){let _=[y[0],Math.ceil(y[1]*y[2]*y[3]/4)],T=(0,o.createTextureLayoutFromTextureType)(this.session.layoutStrategy,_,t),w=e.numberData;if(y[1]*y[2]*y[3]%4!=0){let x=y[0],S=y[1]*y[2]*y[3],P=Math.ceil(S*1/4)*4;w=new Float32Array(x*P);for(let C=0;C<x;++C){let M=C*S,j=C*P+C%1*S;w.set(e.numberData.subarray(M,M+S),j)}}return this.createTextureData(T,e.type,w,e,1)}}if(t===n.TextureType.packed){let g=(0,o.createTextureLayoutFromShape)(this.session.layoutStrategy,e.dims,1,[],{reverseWH:!0}),m=this.createTextureData(g,e.type,e.numberData,e,1);r=this.pack(m)}else r=this.createTextureData(s,e.type,e.numberData,e,1)}return r}createTextureDataFromLayoutBindTensor(e,t,r,s){return this.createTextureData(e,t,r,s,1)}createTextureData(e,t,r,s,g){c.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(e)}]`);let m=this.session.textureManager.createTextureFromLayout(t,e,r,g);return this.createTextureDataFromTexture(e,t,m,s)}reshapeUnpacked(e,t){let r=this.getOrCreateTextureData(e,n.TextureType.unpacked),s={channels:r.channels,height:r.height,width:r.width,shape:t.length!==0?t:[1],strides:f.ShapeUtil.computeStrides(t),unpackedShape:t};return this.createTextureDataFromTexture(s,e.type,r.texture).tensor}reshapePacked(e,t){let r=this.getOrCreateTextureData(e,n.TextureType.packed);if((0,d.isReshapeCheap)(e.dims,t)){let _={channels:r.channels,height:r.height,width:r.width,shape:t.length!==0?t:[1],strides:f.ShapeUtil.computeStrides(t),unpackedShape:t,isPacked:!0};return this.createTextureDataFromTexture(_,e.type,r.texture).tensor}let s=(0,d.processDims3D)(e.dims),g=(0,d.processDims3D)(t),m=this.reshapePacked(e,s),y=this.run((0,d.createPackedReshape3DProgramInfoLoader)(this,m,g),[m]);return this.reshapePacked(y,t)}cast(e,t){let r=this.getOrCreateTextureData(e,n.TextureType.unpacked);return this.createTextureDataFromTexture(r,t,r.texture).tensor}createTextureDataFromTexture(e,t,r,s,g){let m=Object.assign(Object.assign({},e),{tensor:s||new a.Tensor(e.unpackedShape,t,y=>this.readTexture(m),async y=>this.readTextureAsync(m),void 0,g),texture:r});return this.setTextureData(m.tensor.dataId,m,e.isPacked),m}getTextureData(e,t=!1){return this.session.isInitializer(e)?this.session.getTextureData(e,t):t?this.packedTextureDataCache.get(e):this.unpackedTextureDataCache.get(e)}setTextureData(e,t,r=!1){this.session.isInitializer(e)?this.session.setTextureData(e,t,r):(r?this.packedTextureDataCache:this.unpackedTextureDataCache).set(e,t)}isTextureLayoutCached(e,t=!1){return!!this.getTextureData(e.dataId,t)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(e=>this.session.textureManager.releaseTexture(e)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(e=>this.session.textureManager.releaseTexture(e)),this.unpackedTextureDataCache=new Map}readTexture(e){return e.isPacked?this.readTexture(this.unpack(e)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(e,e.tensor.type,e.channels):this.session.textureManager.readUint8TextureAsFloat((0,h.encodeAsUint8)(this,e))}async readTextureAsync(e){return e.isPacked?this.readTextureAsync(this.unpack(e)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(e,e.tensor.type,e.channels):this.session.textureManager.readUint8TextureAsFloat((0,h.encodeAsUint8)(this,e))}pack(e){return this.executeProgram((0,p.createPackProgramInfoLoader)(this,e.tensor),[e.tensor])}unpack(e){return this.executeProgram((0,u.createUnpackProgramInfoLoader)(this,e.tensor),[e.tensor])}}},4110:function(b,i,l){"use strict";var c=this&&this.__createBinding||(Object.create?function(J,Z,Q,ne){ne===void 0&&(ne=Q);var re=Object.getOwnPropertyDescriptor(Z,Q);re&&!("get"in re?!Z.__esModule:re.writable||re.configurable)||(re={enumerable:!0,get:function(){return Z[Q]}}),Object.defineProperty(J,ne,re)}:function(J,Z,Q,ne){ne===void 0&&(ne=Q),J[ne]=Z[Q]}),a=this&&this.__setModuleDefault||(Object.create?function(J,Z){Object.defineProperty(J,"default",{enumerable:!0,value:Z})}:function(J,Z){J.default=Z}),f=this&&this.__importStar||function(J){if(J&&J.__esModule)return J;var Z={};if(J!=null)for(var Q in J)Q!=="default"&&Object.prototype.hasOwnProperty.call(J,Q)&&c(Z,J,Q);return a(Z,J),Z};Object.defineProperty(i,"__esModule",{value:!0}),i.WEBGL_OP_RESOLVE_RULES=void 0;let p=l(8817),d=f(l(5194)),h=l(4752),u=l(6668),o=l(9754),n=l(5042),e=l(6742),t=l(4125),r=l(6149),s=l(5378),g=l(6981),m=l(7413),y=l(7006),_=l(8276),T=l(5565),w=l(2834),x=l(1010),S=l(8126),P=l(2801),C=l(565),M=l(2444),j=l(815),B=l(564),E=l(5416),V=l(1240),O=l(5944),k=l(5707),N=f(l(9087)),L=l(7862),z=l(3980);i.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",N.abs],["Acos","","7+",N.acos],["Add","","7+",d.add],["And","","7+",d.and],["Asin","","7+",N.asin],["Atan","","7+",N.atan],["AveragePool","","7+",w.averagePool,w.parseAveragePoolAttributes],["BatchNormalization","","7+",p.batchNormalization,p.parseBatchNormalizationAttributes],["Cast","","6+",h.cast,h.parseCastAttributes],["Ceil","","6+",N.ceil],["Clip","","6-10",N.clip,N.parseClipAttributes],["Clip","","11+",N.clipV11],["Concat","","4+",u.concat,u.parseConcatAttributes],["Conv","","1+",o.conv,o.parseConvAttributes],["ConvTranspose","","1+",n.convTranspose,n.parseConvTransposeAttributes],["Cos","","7+",N.cos],["Div","","7+",d.div],["Dropout","","7+",N.identity],["DepthToSpace","","1+",e.depthToSpace,e.parseDepthToSpaceAttributes],["Equal","","7+",d.equal],["Elu","","6+",N.elu,N.parseEluAttributes],["Exp","","6+",N.exp],["Flatten","","1+",t.flatten,t.parseFlattenAttributes],["Floor","","6+",N.floor],["FusedConv","com.microsoft","1+",o.conv,o.parseConvAttributes],["Gather","","1+",r.gather,r.parseGatherAttributes],["Gemm","","7-10",s.gemm,s.parseGemmAttributesV7],["Gemm","","11+",s.gemm,s.parseGemmAttributesV11],["GlobalAveragePool","","1+",w.globalAveragePool,w.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",w.globalMaxPool],["Greater","","7+",d.greater],["Identity","","1+",N.identity],["ImageScaler","","1+",g.imageScaler,g.parseImageScalerAttributes],["InstanceNormalization","","6+",m.instanceNormalization,m.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",N.leakyRelu,N.parseLeakyReluAttributes],["Less","","7+",d.less],["LRN","","1+",y.lrn,y.parseLrnAttributes],["Log","","6+",N.log],["MatMul","","1+",_.matMul,_.parseMatMulAttributes],["MaxPool","","1+",w.maxPool,w.parseMaxPoolAttributes],["Mul","","7+",d.mul],["Neg","","6+",N.neg],["Not","","1+",N.not],["Or","","7+",d.or],["Pad","","2-10",T.padV2,T.parsePadAttributesV2],["Pad","","11+",T.padV11,T.parsePadAttributesV11],["Pow","","7+",d.pow],["PRelu","","7+",d.pRelu],["ReduceLogSum","","1+",x.reduceLogSum,x.parseReduceAttributes],["ReduceMax","","1+",x.reduceMax,x.parseReduceAttributes],["ReduceMean","","1+",x.reduceMean,x.parseReduceAttributes],["ReduceMin","","1+",x.reduceMin,x.parseReduceAttributes],["ReduceProd","","1+",x.reduceProd,x.parseReduceAttributes],["ReduceSum","","1-12",x.reduceSum,x.parseReduceAttributes],["ReduceSumSquare","","1+",x.reduceLogSumSquare,x.parseReduceAttributes],["Relu","","6+",N.relu],["Reshape","","5+",S.reshape],["Resize","","10",P.resize,P.parseResizeAttributesV10],["Resize","","11+",P.resize,P.parseResizeAttributesV11],["Shape","","1+",C.shape],["Sigmoid","","6+",N.sigmoid],["Sin","","7+",N.sin],["Slice","","10+",M.sliceV10],["Slice","","1-9",M.slice,M.parseSliceAttributes],["Softmax","","1-12",j.softmax,j.parseSoftmaxAttributes],["Softmax","","13+",j.softmaxV13,j.parseSoftmaxAttributesV13],["Split","","2-12",B.split,B.parseSplitAttributes],["Sqrt","","6+",N.sqrt],["Squeeze","","1-12",E.squeeze,E.parseSqueezeAttributes],["Squeeze","","13+",E.squeezeV13],["Sub","","7+",d.sub],["Sum","","6+",V.sum],["Tan","","7+",N.tan],["Tanh","","6+",N.tanh],["Tile","","6+",O.tile],["Transpose","","1+",k.transpose,k.parseTransposeAttributes],["Upsample","","7-8",z.upsample,z.parseUpsampleAttributesV7],["Upsample","","9",z.upsample,z.parseUpsampleAttributesV9],["Unsqueeze","","1-12",L.unsqueeze,L.parseUnsqueezeAttributes],["Unsqueeze","","13+",L.unsqueezeV13],["Xor","","7+",d.xor]]},8817:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseBatchNormalizationAttributes=i.batchNormalization=void 0;let c=l(4910),a=l(6757),f=l(5639),p={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[f.TextureType.unpacked,f.TextureType.unpacked,f.TextureType.unpacked,f.TextureType.unpacked,f.TextureType.unpacked]};i.batchNormalization=(u,o,n)=>(h(o),[u.run(Object.assign(Object.assign({},p),{cacheHint:n.cacheKey,get:()=>d(u,o,n)}),o)]),i.parseBatchNormalizationAttributes=u=>{let o=u.attributes.getFloat("epsilon",1e-5),n=u.attributes.getFloat("momentum",.9),e=u.attributes.getInt("spatial",1);return(0,c.createAttributeWithCacheKey)({epsilon:o,momentum:n,spatial:e})};let d=(u,o,n)=>{let e=(0,a.getGlsl)(u.session.backend.glContext.version),t=o[0].dims.length,[r,s]=u.calculateTextureWidthAndHeight(o[1].dims,f.TextureType.unpacked),g=`
  float process(int[${t}] indices) {
    vec2 position = offsetToCoords(indices[1], ${r}, ${s});
    float scale = getColorAsFloat(${e.texture2D}(Scale, position));
    float mean = getColorAsFloat(${e.texture2D}(Mean, position));
    float variance = getColorAsFloat(${e.texture2D}(Variance, position));
    float b = getColorAsFloat(${e.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${n.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},p),{output:{dims:o[0].dims,type:o[0].type,textureType:f.TextureType.unpacked},shaderSource:g})},h=u=>{if(!u||u.length!==5)throw new Error("BatchNormalization requires 5 inputs.");let o=u[0],n=u[1],e=u[2],t=u[3],r=u[4];if(o.dims.length<3||n.dims.length!==1||e.dims.length!==1||t.dims.length!==1||r.dims.length!==1)throw new Error("invalid input shape.");if(n.dims[0]!==o.dims[1]||e.dims[0]!==o.dims[1]||t.dims[0]!==o.dims[1]||r.dims[0]!==o.dims[1])throw new Error("invalid input shape.");if(o.type!=="float32"&&o.type!=="float64"||n.type!=="float32"&&n.type!=="float64"||e.type!=="float32"&&e.type!=="float64"||t.type!=="float32"&&t.type!=="float64"||r.type!=="float32"&&r.type!=="float64")throw new Error("invalid input tensor types.")}},5194:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.xor=i.sub=i.pRelu=i.pow=i.or=i.mul=i.less=i.greater=i.equal=i.div=i.and=i.add=i.glslPRelu=i.glslPow=i.glslXor=i.glslOr=i.glslAnd=i.glslLess=i.glslGreater=i.glslEqual=i.glslSub=i.glslMul=i.glslDiv=i.glslAdd=void 0;let c=l(7273),a=l(1997),f=l(6757),p=l(5639);function d(){let w="add_";return{body:`
  float ${w}(float a, float b) {
    return a + b;
  }
  vec4 ${w}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:w,type:a.FunctionType.ValueBased}}function h(){let w="div_";return{body:`
  float ${w}(float a, float b) {
    return a / b;
  }
  vec4 ${w}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:w,type:a.FunctionType.ValueBased}}function u(){let w="mul_";return{body:`
  float ${w}(float a, float b) {
    return a * b;
  }
  vec4 ${w}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:w,type:a.FunctionType.ValueBased}}function o(){let w="sub_";return{body:`
  float ${w}(float a, float b) {
    return a - b;
  }
  vec4 ${w}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:w,type:a.FunctionType.ValueBased}}function n(){let w="equal_";return{body:`
  float ${w}(float a, float b) {
    return float(a == b);
  }
  vec4 ${w}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:w,type:a.FunctionType.ValueBased}}function e(){let w="greater_";return{body:`
  float ${w}(float a, float b) {
    return float(a > b);
  }
  vec4 ${w}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:w,type:a.FunctionType.ValueBased}}function t(){let w="less_";return{body:`
  float ${w}(float a, float b) {
    return float(a < b);
  }
  vec4 ${w}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:w,type:a.FunctionType.ValueBased}}function r(){let w="and_";return{body:`
  float ${w}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${w}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:w,type:a.FunctionType.ValueBased}}function s(){let w="or_";return{body:`
  float ${w}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${w}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:w,type:a.FunctionType.ValueBased}}function g(){let w="xor_";return{body:`
  float ${w}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${w}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:w,type:a.FunctionType.ValueBased}}function m(){return function(w){let x=`${w}_`;return{body:`
  float ${x}(float a, float b) {
    return ${w}(a, b);
  }
  vec4 ${x}(vec4 v1, vec4 v2) {
    return ${w}(v1, v2);
  }
  `,name:x,type:a.FunctionType.ValueBased}}("pow")}function y(){let w="prelu_";return{body:`
  float ${w}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${w}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:w,type:a.FunctionType.ValueBased}}i.glslAdd=d,i.glslDiv=h,i.glslMul=u,i.glslSub=o,i.glslEqual=n,i.glslGreater=e,i.glslLess=t,i.glslAnd=r,i.glslOr=s,i.glslXor=g,i.glslPow=m,i.glslPRelu=y;let _=(w,x,S,P=x[0].type,C)=>{let M=w.session.pack?p.TextureType.packed:p.TextureType.unpacked;return{name:S.name,inputNames:["A","B"],inputTypes:[M,M],cacheHint:C,get:()=>T(w,x,S,P)}},T=(w,x,S,P=x[0].type)=>{let C=w.session.pack?p.TextureType.packed:p.TextureType.unpacked,M=!c.ShapeUtil.areEqual(x[0].dims,x[1].dims),j=x[0].dims,B=w.session.pack;if(M){let O=c.BroadcastUtil.calcShape(x[0].dims,x[1].dims,!1);if(!O)throw new Error("Can't perform binary op on the given tensors");j=O;let k=j.length,N=x[0].dims.length!==0?x[0].dims.length:1,L=x[1].dims.length!==0?x[1].dims.length:1,z=x[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",J=x[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",Z=(0,f.getGlsl)(w.session.backend.glContext.version),Q=B?`
      ${S.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${S.name}(a, b);
        ${Z.output} = result;
      }`:`
      ${S.body}
      float process(int indices[${k}]) {
        int aindices[${N}];
        int bindices[${L}];
        ${z}
        ${J}
        return ${S.name}(_A(aindices), _B(bindices));
      }`;return{name:S.name,inputNames:["A","B"],inputTypes:[C,C],output:{dims:j,type:P,textureType:C},shaderSource:Q,hasMain:B}}let E=(0,f.getGlsl)(w.session.backend.glContext.version),V=`
    ${S.body}
    void main() {
      vec4 v1 = ${E.texture2D}(A, TexCoords);
      vec4 v2 = ${E.texture2D}(B, TexCoords);
      vec4 result = ${S.name}(v1, v2);
      ${E.output} = result;
    }
    `;return{name:S.name,inputNames:["A","B"],inputTypes:[C,C],output:{dims:x[0].dims,type:P,textureType:C},shaderSource:V,hasMain:!0}};i.add=(w,x)=>[w.run(_(w,x,d()),x)],i.and=(w,x)=>[w.run(_(w,x,r(),"bool"),x)],i.div=(w,x)=>[w.run(_(w,x,h()),x)],i.equal=(w,x)=>[w.run(_(w,x,n(),"bool"),x)],i.greater=(w,x)=>[w.run(_(w,x,e(),"bool"),x)],i.less=(w,x)=>[w.run(_(w,x,t(),"bool"),x)],i.mul=(w,x)=>[w.run(_(w,x,u()),x)],i.or=(w,x)=>[w.run(_(w,x,s(),"bool"),x)],i.pow=(w,x)=>[w.run(_(w,x,m()),x)],i.pRelu=(w,x)=>[w.run(_(w,x,y()),x)],i.sub=(w,x)=>[w.run(_(w,x,o()),x)],i.xor=(w,x)=>[w.run(_(w,x,g(),"bool"),x)]},4752:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseCastAttributes=i.cast=void 0;let c=l(7273);i.cast=(f,p,d)=>(a(p),[f.cast(p[0],d)]),i.parseCastAttributes=f=>c.ProtoUtil.tensorDataTypeFromProto(f.attributes.getInt("to"));let a=f=>{if(!f||f.length!==1)throw new Error("Cast requires 1 input.");if(f[0].type==="string")throw new Error("Invalid input type.")}},4595:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.createPackedConcatProgramInfoLoader=void 0;let c=l(6757),a=l(5639),f=l(432),p=l(5614);i.createPackedConcatProgramInfoLoader=(h,u,o)=>{let n=(e=u.length,t=o.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:e},(r,s)=>`X${s}`),inputTypes:Array(e).fill(a.TextureType.packed),cacheHint:t});var e,t;return Object.assign(Object.assign({},n),{get:()=>((r,s,g,m)=>{let y=g[0].dims.slice();if(m>=y.length||m<-1*y.length)throw new Error("axis specified for concat doesn't match input dimensionality");m<0&&(m=y.length+m);let _=y.slice(0);for(let z=1;z<g.length;z++){let J=g[z].dims.slice();for(let Z=0;Z<y.length;Z++)if(Z===m)_[m]+=J[Z];else if(y[Z]!==J[Z])throw new Error("non concat dimensions must match")}let T=_.length,w=(0,p.getChannels)("coords",T),x=(0,f.getCoordsDataType)(T),S=(0,p.unpackFromChannel)(),P=g.map(z=>z.dims),C=(0,f.getGlChannels)(T),M=new Array(P.length-1);M[0]=P[0][m];for(let z=1;z<M.length;z++)M[z]=M[z-1]+P[z][m];let j=C[m],B=C.slice(-2),E=C.join(),V=`if (${j} < ${M[0]}) {
        return getChannel(
            getX0(${E}), vec2(${B.join()}));
        }`;for(let z=1;z<M.length;z++){let J=M[z-1];V+=`
            if (${j} < ${M[z]}  && ${j} >= ${M[z-1]}) {
              return getChannel(
                getX${z}(${d(C,j,J)}),
                vec2(${d(B,j,J)}));
            }`}let O=M.length,k=M[M.length-1];V+=`
            return getChannel(
              getX${O}(${d(C,j,k)}),
              vec2(${d(B,j,k)}));`;let N=(0,c.getGlsl)(r.session.backend.glContext.version),L=`
          ${S}
          float getValue(${C.map(z=>"int "+z)}) {
            ${V}
          }

          void main() {
            ${x} coords = getOutputCoords();
            int lastDim = coords.${C[T-1]};
            coords.${C[T-1]} = coords.${C[T-2]};
            coords.${C[T-2]} = lastDim;

            vec4 result = vec4(getValue(${w}), 0., 0., 0.);

            ${w[T-1]} = ${w[T-1]} + 1;
            if (${w[T-1]} < ${_[T-1]}) {
              result.g = getValue(${w});
            }

            ${w[T-2]} = ${w[T-2]} + 1;
            if (${w[T-2]} < ${_[T-2]}) {
              result.a = getValue(${w});
            }

            ${w[T-1]} = ${w[T-1]} - 1;
            if (${w[T-2]} < ${_[T-2]} &&
                ${w[T-1]} < ${_[T-1]}) {
              result.b = getValue(${w});
            }
            ${N.output} = result;
          }
        `;return Object.assign(Object.assign({},s),{output:{dims:_,type:g[0].type,textureType:a.TextureType.packed},shaderSource:L,hasMain:!0})})(h,n,u,o.axis)})};let d=(h,u,o)=>{let n=h.indexOf(u);return h.map((e,t)=>t===n?`${e} - ${o}`:e).join()}},6668:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseConcatAttributes=i.concat=void 0;let c=l(4910),a=l(5639),f=l(4595);i.concat=(e,t,r)=>(n(t),e.session.pack&&t[0].dims.length>1?[e.run((0,f.createPackedConcatProgramInfoLoader)(e,t,r),t)]:[e.run(p(e,t,r),t)]);let p=(e,t,r)=>{let s=(g=t.length,m=r.cacheKey,{name:"Concat",inputNames:Array.from({length:g},(y,_)=>`X${_}`),inputTypes:Array(g).fill(a.TextureType.unpacked),cacheHint:m});var g,m;return Object.assign(Object.assign({},s),{get:()=>((y,_,T,w)=>{let x=T[0].dims.slice();if(w>=x.length||w<-1*x.length)throw new Error("axis specified for concat doesn't match input dimensionality");w<0&&(w=x.length+w);let S=x.slice(0);for(let E=1;E<T.length;E++){let V=T[E].dims.slice();for(let O=0;O<x.length;O++)if(O===w)S[w]+=V[O];else if(x[O]!==V[O])throw new Error("non concat dimensions must match")}let P=S.length,C=new Array(T.length),M=0;for(let E=0;E<C.length;++E)M+=T[E].dims[w],C[E]=M;let j="";j=T.length<5?d(C):h(C);let B=`
        ${u(T.length,P)}
        ${o(C)}
        ${j}
        float process(int indices[${P}]) {
          int textureIndex = getTextureWhereDataResides (indices[${w}]);

          if(textureIndex != 0) {
            indices[${w}] = indices[${w}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},_),{output:{dims:S,type:T[0].type,textureType:a.TextureType.unpacked},shaderSource:B})})(0,s,t,r.axis)})},d=e=>`int getTextureWhereDataResides(int index) {
      ${e.map((t,r)=>`if(index<${t}) {return ${r};}
`).join("")}
    }`,h=e=>d(e),u=(e,t)=>{let r=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${t}]) {`];for(let s=0;s<e;++s)s===0?r.push(`	if (textureIndex == ${s}) { return _X${s}(indices); }`):s===e-1?r.push(`	else { return _X${s}(indices); }`):r.push(`	else if (textureIndex == ${s}) { return _X${s}(indices); }`);return r.push("	}"),r.join(`
`)},o=e=>{let t=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let r=0;r<e.length;++r)r===0?t.push(`	if (index == ${r}) { return ${e[r]}; }`):r===e.length-1?t.push(`	else { return ${e[r]}; }`):t.push(`	else if (index == ${r}) { return ${e[r]}; }`);return t.push("	}"),t.join(`
`)};i.parseConcatAttributes=e=>(0,c.createAttributeWithCacheKey)({axis:e.attributes.getInt("axis")});let n=e=>{if(!e||e.length<1)throw new Error("too few inputs");let t=e[0].type,r=e[0].dims.length;if(t==="string")throw new Error("string tensor is not supported yet");for(let s of e){if(s.type!==t)throw new Error("input tensors should be one type");if(s.dims.length!==r)throw new Error("input tensors should have the same shape")}}},7825:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.createUnpackedGroupedConvProgramInfoLoader=void 0;let c=l(1315),a=l(6757),f=l(5639),p=l(9754),d=l(2150);i.createUnpackedGroupedConvProgramInfoLoader=(h,u,o)=>{let n=(e=u.length>2,t=o.cacheKey,{name:"GroupedConv",inputNames:e?["X","W","Bias"]:["X","W"],inputTypes:e?[f.TextureType.unpacked,f.TextureType.unpacked,f.TextureType.unpacked]:[f.TextureType.unpacked,f.TextureType.unpacked],cacheHint:t});var e,t;return Object.assign(Object.assign({},n),{get:()=>((r,s,g,m)=>{let y=s.length>2?"value += getBias(output_channel);":"",_=s[0].dims.slice(),T=s[1].dims.slice(),w=T[0]/m.group;c.Logger.verbose("GroupedConv",`autpPad:${m.autoPad}, dilations:${m.dilations}, group:${m.group}, kernelShape:${m.kernelShape}, pads:${m.pads}, strides:${m.strides}`);let x=(0,p.calculateOutputShape)(_,T,m.dilations,m.pads,m.strides),S=(0,a.getGlsl)(r.session.backend.glContext.version),{activationFunction:P,applyActivation:C}=(0,d.getActivationSnippet)(m),M=`
  const ivec2 strides = ivec2(${m.strides[0]}, ${m.strides[1]});
  const ivec2 pads = ivec2(${m.pads[0]}, ${m.pads[1]});
  ${P}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${w};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${T[1]}; wInChannel++) {
      int input_channel = group_id * ${T[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${T[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${m.dilations[0]};

        if (xHeight < 0 || xHeight >= ${_[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${T[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${m.dilations[1]};
          if (xWidth < 0 || xWidth >= ${_[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${y}
    ${C}
    ${S.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},g),{output:{dims:x,type:s[0].type,textureType:f.TextureType.unpacked},shaderSource:M,hasMain:!0})})(h,u,n,o)})}},7708:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.conv2DPacked=i.conv2DPackedPointwise=void 0;let c=l(9754),a=l(5950),f=l(5632);i.conv2DPackedPointwise=(p,d,h)=>{let u=d[0].dims,o=d[1].dims,n=(0,c.calculateOutputShape)(u,o,h.dilations,h.pads,h.strides),e=p.reshapePacked(d[0],[u[1],u[2]*u[3]]),t=p.reshapePacked(d[1],[o[0],o[1]]),r=d.length>2?[t,e,d[2]]:[t,e],s=p.run((0,f.createPackedMatmulProgramInfoLoader)(p,r,h),r);return p.reshapePacked(s,n)},i.conv2DPacked=(p,d,h)=>{let u=d[0].dims,o=d[1].dims,n=(0,c.calculateOutputShape)(u,o,h.dilations,h.pads,h.strides),e=p.run((0,a.createPackedIm2ColProgramInfoLoader)(p,d[0],d[1],n,h),[d[0]]),t=p.reshapePacked(d[1],[o[0],o[1]*o[2]*o[3]]),r=d.length===3?[t,e,d[2]]:[t,e],s=p.run((0,f.createPackedMatmulProgramInfoLoader)(p,r,h),r);return p.reshapePacked(s,n)}},5042:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseConvTransposeAttributes=i.convTranspose=void 0;let c=l(4910),a=l(6757),f=l(5639),p=l(2150),d=(t,r,s,g,m,y)=>(t-1)*r+s+(g-1)*m+1-y,h=(t,r,s,g,m)=>{let y=Math.floor(t/2);r==="SAME_UPPER"?(s[g]=y,s[m]=t-y):r==="SAME_LOWER"&&(s[g]=t-y,s[m]=y)};i.convTranspose=(t,r,s)=>(e(r,s),u(t,r,s));let u=(t,r,s)=>{let g=n(s,r);return[o(t,r,g)]},o=(t,r,s)=>t.run(((g,m,y)=>{let _=(T=m.length>2,w=y.cacheKey,{name:"ConvTranspose",inputNames:T?["X","W","B"]:["X","W"],inputTypes:T?[f.TextureType.unpacked,f.TextureType.unpacked,f.TextureType.unpacked]:[f.TextureType.unpacked,f.TextureType.unpacked],cacheHint:w});var T,w;return Object.assign(Object.assign({},_),{get:()=>((x,S,P,C)=>{let M=S.length>2?"getB(output_channel)":"0.0",j=S[0].dims,B=S[1].dims,E=B[1],V=B[0]/C.group,O=[S[0].dims[0],S[1].dims[1]*C.group,...C.outputShape],k=(0,a.getGlsl)(x.session.backend.glContext.version),{activationFunction:N,applyActivation:L}=(0,p.getActivationSnippet)(C),z=`
  const ivec2 strides = ivec2(${C.strides[0]}, ${C.strides[1]});
  const ivec2 pads = ivec2(${C.pads[0]}, ${C.pads[1]});
  ${N}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${E};
    int wOutChannel = output_channel - group_id * ${E};

    float value = ${M};
    for (int inChannelOffset = 0; inChannelOffset < ${V}; inChannelOffset++) {
      int input_channel = group_id * ${V} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${B[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${B[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${C.dilations[0]}, wHOff * ${C.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${j[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${j[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${L}
    ${k.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},P),{output:{dims:O,type:S[0].type,textureType:f.TextureType.unpacked},shaderSource:z,hasMain:!0})})(g,m,_,y)})})(t,r,s),r),n=(t,r)=>{let s=t.kernelShape.slice();if(t.kernelShape.length===0)for(let _=2;_<r[1].dims.length;++_)s.push(r[1].dims[_]);let g=t.pads.slice(),m=t.outputShape.slice();((_,T,w,x,S,P,C,M)=>{let j=_.length-2,B=M.length===0;for(let E=0;E<j;++E){let V=B?_[E+2]*P[E]:M[E],O=d(_[E+2],P[E],S[E],T[E],w[E],V);h(O,x,S,E,E+j),B&&M.push(P[E]*(_[E+2]-1)+C[E]+(T[E]-1)*w[E]+1-S[E]-S[E+j])}})(r[0].dims,s,t.dilations,t.autoPad,g,t.strides,t.outputPadding,m);let y=Object.assign({},t);return Object.assign(y,{kernelShape:s,pads:g,outputShape:m,cacheKey:t.cacheKey}),y};i.parseConvTransposeAttributes=t=>{let r=t.attributes,s=(0,p.parseInternalActivationAttributes)(r),g=r.getString("auto_pad","NOTSET"),m=r.getInts("dilations",[1,1]),y=r.getInt("group",1),_=r.getInts("kernel_shape",[]),T=r.getInts("output_padding",[0,0]),w=r.getInts("output_shape",[]),x=r.getInts("pads",[0,0,0,0]),S=r.getInts("strides",[1,1]);return(0,c.createAttributeWithCacheKey)(Object.assign({autoPad:g,dilations:m,group:y,kernelShape:_,outputPadding:T,outputShape:w,pads:x,strides:S},s))};let e=(t,r)=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(t[0].dims.length!==4||t[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(t[0].dims[1]!==t[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let s=t[1].dims[1]*r.group;if(t.length===3&&(t[2].dims.length!==1||t[2].dims[0]!==s))throw new Error("invalid bias");let g=t[0].dims.length-2;if(r.dilations.length!==g)throw new Error(`dilations should be ${g}D`);if(r.strides.length!==g)throw new Error(`strides should be ${g}D`);if(r.pads.length!==2*g)throw new Error(`pads should be ${2*g}D`);if(r.outputPadding.length!==g)throw new Error(`output_padding should be ${g}D`);if(r.kernelShape.length!==0&&r.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(r.outputShape.length!==0&&r.outputShape.length!==t[0].dims.length-2)throw new Error("invalid output shape");if(t[0].type!=="float32"||t[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(t.length===3&&t[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},9754:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseConvAttributes=i.conv=i.calculateOutputShape=void 0;let c=l(4910),a=l(7273),f=l(7825),p=l(7708),d=l(3281),h=l(2150),u=l(1625),o=l(8276);i.calculateOutputShape=(g,m,y,_,T)=>{let w=g[0],x=g.slice(2),S=x.length,P=m[0],C=m.slice(2).map((j,B)=>j+(j-1)*(y[B]-1)),M=x.map((j,B)=>j+_[B]+_[B+S]).map((j,B)=>Math.floor((j-C[B]+T[B])/T[B]));return[w,P].concat(...M)},i.conv=(g,m,y)=>(s(m,y),n(g,m,y));let n=(g,m,y)=>{let _=r(y,m),T=g.session.pack,w=_.kernelShape[0]===1&&_.kernelShape[1]===1;return _.group>1?[g.run((0,f.createUnpackedGroupedConvProgramInfoLoader)(g,m,_),m)]:w&&T?[e(g,m,_)]:T&&m[0].dims.length===4&&m[0].dims[0]===1&&!w?[(0,p.conv2DPacked)(g,m,_)]:[t(g,m,_)]},e=(g,m,y)=>{let _=m[0].dims,T=m[1].dims,w=(0,i.calculateOutputShape)(_,T,y.dilations,y.pads,y.strides),x=g.reshapeUnpacked(m[0],[_[1],_[2]*_[3]]),S=g.reshapeUnpacked(m[1],[T[0],T[1]]),P=m.length>2?[S,x,m[2]]:[S,x],C=g.run((0,o.createMatmulProgramInfoLoader)(P,y),P);return g.reshapeUnpacked(C,w)},t=(g,m,y)=>{let _=m[0].dims,T=m[1].dims,w=(0,i.calculateOutputShape)(_,T,y.dilations,y.pads,y.strides),x=g.run((0,u.createIm2ColProgramInfoLoader)(g,m[0],m[1],w,y),[m[0]]),S=m.length===3?[x,m[1],m[2]]:[x,m[1]];return g.run((0,d.createDotProductProgramInfoLoader)(g,m,w,y),S)},r=(g,m)=>{let y=g.kernelShape.slice();if(g.kernelShape.length===0)for(let w=2;w<m[1].dims.length;++w)y.push(m[1].dims[w]);let _=g.pads.slice();a.PoolConvUtil.adjustPadsBasedOnAutoPad(m[0].dims,g.strides,g.dilations,y,_,g.autoPad);let T=Object.assign({},g);return Object.assign(T,{kernelShape:y,pads:_,cacheKey:g.cacheKey}),T};i.parseConvAttributes=g=>{let m=g.attributes,y=(0,h.parseInternalActivationAttributes)(m),_=m.getString("auto_pad","NOTSET"),T=m.getInts("dilations",[1,1]),w=m.getInt("group",1),x=m.getInts("kernel_shape",[]),S=m.getInts("pads",[0,0,0,0]),P=m.getInts("strides",[1,1]);return(0,c.createAttributeWithCacheKey)(Object.assign({autoPad:_,dilations:T,group:w,kernelShape:x,pads:S,strides:P},y))};let s=(g,m)=>{if(!g||g.length!==2&&g.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(g[0].dims.length!==4||g[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(g[0].dims[1]!==g[1].dims[1]*m.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(g.length===3&&(g[2].dims.length!==1||g[1].dims[0]!==g[2].dims[0]))throw new Error("invalid bias");let y=g[0].dims.length-2;if(m.dilations.length!==y)throw new Error(`dilations should be ${y}D`);if(m.strides.length!==y)throw new Error(`strides should be ${y}D`);if(m.pads.length!==2*y)throw new Error(`pads should be ${2*y}D`);if(m.kernelShape.length!==0&&m.kernelShape.length!==g[1].dims.length-2)throw new Error("invalid kernel shape");if(g[0].type!=="float32"||g[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(g.length===3&&g[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},6742:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseDepthToSpaceAttributes=i.depthToSpace=void 0;let c=l(5707);i.depthToSpace=(f,p,d)=>{a(p);let h=d.blocksize,u=h*h,o=d.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],n=d.mode==="DCR"?[p[0].dims[0],h,h,p[0].dims[1]/u,p[0].dims[2],p[0].dims[3]]:[p[0].dims[0],p[0].dims[1]/u,h,h,p[0].dims[2],p[0].dims[3]],e=f.reshapeUnpacked(p[0],n),t={perm:o,cacheKey:`${o}`},[r]=(0,c.transpose)(f,[e],t),s=[p[0].dims[0],p[0].dims[1]/u,p[0].dims[2]*h,p[0].dims[3]*h];return[f.reshapeUnpacked(r,s)]},i.parseDepthToSpaceAttributes=f=>{let p=f.attributes.getInt("blocksize");if(p<1)throw new Error(`blocksize must be >= 1, but got : ${p} for DepthToSpace`);let d=f.attributes.getString("mode","DCR");if(d!=="DCR"&&d!=="CRD")throw new Error(`unrecognized mode: ${d} for DepthToSpace`);return{mode:d,blocksize:p}};let a=f=>{if(f.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${f.length}`);if(f[0].type==="string"||f[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},3281:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.createDotProductProgramInfoLoader=void 0;let c=l(7273),a=l(6757),f=l(5639),p=l(2150),d=l(1625);i.createDotProductProgramInfoLoader=(h,u,o,n)=>{let e=((t,r)=>({name:"ConvDotProduct",inputNames:t?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:t?[f.TextureType.unpacked,f.TextureType.packedLastDimension,f.TextureType.unpacked]:[f.TextureType.unpacked,f.TextureType.packedLastDimension],cacheKey:r.activationCacheKey}))(u.length>2,n);return Object.assign(Object.assign({},e),{get:()=>((t,r,s,g,m)=>{let y=s[0].dims,_=s[1].dims,T=[_[0],Math.ceil(y[1]*_[2]*_[3]/4)],w=(0,d.calculateIm2ColDims)(y,_,g),[x,S]=t.calculateTextureWidthAndHeight(T,f.TextureType.packedLastDimension),P=c.ShapeUtil.computeStrides(w),[C,M]=t.calculateTextureWidthAndHeight(w,f.TextureType.packedLastDimension),j=g.length,B=s.length<3?"0.0":"_B(b)",E=Math.ceil(y[1]*_[2]*_[3]/4),{activationFunction:V,applyActivation:O}=(0,p.getActivationSnippet)(m),k=(0,a.getGlsl)(t.session.backend.glContext.version),N=`
${V}
float process(int indices[${j}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${P[0]} + im2col[1] * ${P[1]} + im2col[2] * ${P[2]};
  int kernelOffset = indices[1] * ${T[1]};
  float value = ${B};
  for (int i = 0; i < ${E}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${C}, ${M});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${x}, ${S});
    value += dot(${k.texture2D}(Im2Col, im2colCoords), ${k.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${O}
  return value;
}`;return Object.assign(Object.assign({},r),{output:{dims:g,type:s[0].type,textureType:f.TextureType.unpacked},shaderSource:N})})(h,e,u,o,n)})}},4125:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseFlattenAttributes=i.flatten=void 0;let c=l(7273);i.flatten=(f,p,d)=>{a(p,d);let h=c.ShapeUtil.flattenShape(p[0].dims,d);return[f.reshapeUnpacked(p[0],h)]},i.parseFlattenAttributes=f=>f.attributes.getInt("axis",1);let a=(f,p)=>{if(!f||f.length!==1)throw new Error("Flatten requires 1 input.");let d=f[0].dims.length;if(d===0)throw new Error("scalar tensor is not supported.");if(p<-d||p>d)throw new Error("Invalid axis");if(f[0].type==="string")throw new Error("string tensor is not supported.")}},2150:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseInternalActivationAttributes=i.getActivationSnippet=void 0;let c=l(7273),a=l(9087);i.getActivationSnippet=function(f){let p;switch(f.activation){case"Relu":p=(0,a.glslRelu)();break;case"Sigmoid":p=(0,a.glslSigmoid)();break;case"Clip":p=(0,a.glslClip)(f.clipMin,f.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let d=p.name;return{activationFunction:p.body,applyActivation:`value = ${d}_(value);`}},i.parseInternalActivationAttributes=f=>{let p=f.getString("activation","");if(p==="Clip"){let[d,h]=f.getFloats("activation_params",[c.MIN_CLIP,c.MAX_CLIP]);return{activation:p,clipMax:h,clipMin:d,activationCacheKey:`${p}:${d},${h}`}}return{activation:p,activationCacheKey:p}}},6149:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseGatherAttributes=i.gather=void 0;let c=l(4910),a=l(6145),f=l(7273),p=l(5639);i.gather=(o,n,e)=>(u(n,e.axis),[o.run(h(o,n,e),n)]),i.parseGatherAttributes=o=>(0,c.createAttributeWithCacheKey)({axis:o.attributes.getInt("axis",0)});let d={name:"Gather",inputNames:["A","B"],inputTypes:[p.TextureType.unpacked,p.TextureType.unpacked]},h=(o,n,e)=>{let t=Object.assign(Object.assign({},d),{cacheHint:e.cacheKey});return Object.assign(Object.assign({},t),{get:()=>((r,s,g,m)=>{let y=g[0].dims.slice(),_=g[1].dims.slice(),T=new Array(y.length+_.length-1);m=f.ShapeUtil.normalizeAxis(m,y.length);let w=[];for(let S=0;S<T.length;S++)S<m?(T[S]=y[S],w.push(`inputIdx[${S}] = outputIdx[${S}];`)):S<m+_.length?(T[S]=_[S-m],w.push(`indexDataIdx[${S-m}] = outputIdx[${S}];`)):(T[S]=y[S-_.length+1],w.push(`inputIdx[${S-_.length+1}] = outputIdx[${S}];`));let x=`
      float process(int outputIdx[${T.length||1}]) {
        int inputIdx[${y.length}];
        int indexDataIdx[${_.length||1}];
        indexDataIdx[0] = 0;
        ${w.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${m}] = idx < 0 ? idx + ${y[m]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},s),{output:{dims:T,type:g[0].type,textureType:p.TextureType.unpacked},shaderSource:x})})(0,t,n,e.axis)})},u=(o,n)=>{if(!o||o.length!==2)throw new Error("Gather requires 2 inputs.");let e=o[0].dims.length;if(e<1)throw new Error("Invalid input shape.");if(n<-e||n>e-1)throw new Error("Invalid axis.");if(a.NUMBER_TYPES.indexOf(o[0].type)===-1)throw new Error("Invaid input type.");if(o[1].type!=="int32"&&o[1].type!=="int16")throw new Error("Invaid input type.")}},5378:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseGemmAttributesV11=i.parseGemmAttributesV7=i.gemm=void 0;let c=l(4910),a=l(7273),f=l(5639);i.gemm=(o,n,e)=>(u(n,e),[o.run(d(n,e),n)]);let p=(o,n)=>{let e=o.attributes.getInt("transA",0)!==0,t=o.attributes.getInt("transB",0)!==0,r=o.attributes.getFloat("alpha",1),s=o.attributes.getFloat("beta",1);return(0,c.createAttributeWithCacheKey)({transA:e,transB:t,alpha:r,beta:s,isOptionalC:n})};i.parseGemmAttributesV7=o=>p(o,!1),i.parseGemmAttributesV11=o=>p(o,!0);let d=(o,n)=>{let e={name:"Gemm",inputNames:o.length===3?["A","B","C"]:["A","B"],inputTypes:o.length===3?[f.TextureType.unpacked,f.TextureType.unpacked,f.TextureType.unpacked]:[f.TextureType.unpacked,f.TextureType.unpacked],key:n.cacheKey};return Object.assign(Object.assign({},e),{get:()=>h(e,o,n)})},h=(o,n,e)=>{let t=n[0].dims.slice(),r=n[1].dims.slice(),[s,g]=a.GemmUtil.getShapeOfGemmResult(t,e.transA,r,e.transB,n.length===3?n[2].dims:void 0),m=[s,g];if(!m)throw new Error("Can't use gemm on the given tensors");let y=t[t.length-1],_="";e.transA&&(y=t[0]),e.transA&&e.transB?_="value += _A_T(a) * _B_T(b);":e.transA&&!e.transB?_="value += _A_T(a) * _B(b);":!e.transA&&e.transB?_="value += _A(a) * _B_T(b);":e.transA||e.transB||(_="value += _A(a) * _B(b);");let T=m.length,w=`
      float process(int indices[${T}]) {
          int a[${T}];
          int b[${T}];
          ${n.length===3?`int c[${n[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${n.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${y}; ++k) {
              a[${T-1}] = k;
              b[${T-2}] = k;
              ${_}
          }

          value = value * alpha;
          ${n.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},o),{output:{dims:m,type:n[0].type,textureType:f.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:e.alpha},{name:"beta",type:"float",data:e.beta}],shaderSource:w})},u=(o,n)=>{if(!o)throw new Error("Input is missing");if(n.isOptionalC&&(o.length<2||o.length>3))throw new Error("Invaid input shape.");if(!n.isOptionalC&&o.length!==3)throw new Error("Gemm requires 3 inputs");if(o.length===3&&o[2].dims.length!==1&&o[2].dims.length!==2)throw new Error("Invalid input shape of C");if(o[0].type!=="float32"&&o[0].type!=="float64"||o[1].type!=="float32"&&o[1].type!=="float64"||o.length===3&&o[2].type!=="float32"&&o[2].type!=="float64")throw new Error("Invalid input type.");if(o[0].type!==o[1].type||o.length===3&&o[0].type!==o[2].type)throw new Error("Input types are mismatched")}},5950:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.createPackedIm2ColProgramInfoLoader=void 0;let c=l(6757),a=l(5639),f=l(5614);i.createPackedIm2ColProgramInfoLoader=(p,d,h,u,o)=>{let n=(e=o.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[a.TextureType.packed],cacheHint:e});var e;return Object.assign(Object.assign({},n),{get:()=>((t,r,s,g,m,y)=>{let _=s.dims,T=g.dims,w=m.length,x=[T[1]*T[2]*T[3],m[2]*m[3]],S=T[2]*T[3],P=(0,f.unpackFromChannel)(),C=(0,c.getGlsl)(t.session.backend.glContext.version),M="";for(let B=0;B<=1;B++)for(let E=0;E<=1;E++)M+=`
            blockIndex = rc.x + ${E};
            pos = rc.y + ${B};

            if(blockIndex < ${x[1]} && pos < ${x[0]}) {
              offsetY = int(blockIndex / (${m[w-1]})) * ${y.strides[0]} -
                ${y.pads[0]};
              d0 = offsetY + ${y.dilations[0]} * (imod(pos, ${S}) / ${T[2]});

              if(d0 < ${_[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${m[w-1]}) * ${y.strides[1]} -
                  ${y.pads[1]};
                d1 = offsetX + ${y.dilations[1]} * imod(imod(pos, ${S}), ${T[2]});

                if(d1 < ${_[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${S}.);
                    innerDims = vec2(d0, d1);
                    result[${2*B+E}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;let j=`
      ${P}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${M}
          ${C.output} = result;
      }
            `;return Object.assign(Object.assign({},r),{output:{dims:x,type:s.type,textureType:a.TextureType.packed},shaderSource:j,hasMain:!0})})(p,n,d,h,u,o)})}},1625:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.calculateIm2ColDims=i.createIm2ColProgramInfoLoader=void 0;let c=l(5639);i.createIm2ColProgramInfoLoader=(a,f,p,d,h)=>{let u=(o=h.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[c.TextureType.unpacked],cacheHint:o});var o;return Object.assign(Object.assign({},u),{get:()=>((n,e,t,r,s,g)=>{let m=t.dims,y=r.dims,_=s.length,T=(0,i.calculateIm2ColDims)(m,y,s,4),w=`
        const int XC = ${m[1]};
        const int XH = ${m[2]};
        const int XW = ${m[3]};
        const int KH = ${g.kernelShape[0]};
        const int KW = ${g.kernelShape[1]};
        const int dilationH = ${g.dilations[0]};
        const int dilationW = ${g.dilations[1]};
        const int strideH = ${g.strides[0]};
        const int strideW = ${g.strides[1]};
        const int padH = ${g.pads[0]};
        const int padW = ${g.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${_}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${m.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},e),{output:{dims:T,type:t.type,textureType:c.TextureType.packedLastDimension},shaderSource:w})})(0,u,f,p,d,h)})},i.calculateIm2ColDims=(a,f,p,d=4)=>[p[0],p[2],p[3],Math.ceil(a[1]*f[2]*f[3]/d)]},6981:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseImageScalerAttributes=i.imageScaler=void 0;let c=l(4910),a=l(5639);i.imageScaler=(u,o,n)=>(h(o),[u.run(p(u,o,n),o)]),i.parseImageScalerAttributes=u=>{let o=u.attributes.getFloat("scale"),n=u.attributes.getFloats("bias");return(0,c.createAttributeWithCacheKey)({scale:o,bias:n})};let f={name:"ImageScaler",inputNames:["X"],inputTypes:[a.TextureType.unpacked]},p=(u,o,n)=>{let e=Object.assign(Object.assign({},f),{cacheHint:n.cacheKey});return Object.assign(Object.assign({},e),{get:()=>((t,r,s,g)=>{let m=s[0].dims.slice(),y=m.length,_=`
      ${d(g.bias.length)}
      float process(int indices[${y}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},r),{output:{dims:m,type:s[0].type,textureType:a.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:g.bias.length,data:g.bias},{name:"scale",type:"float",data:g.scale}],shaderSource:_})})(0,e,o,n)})},d=u=>{let o=[`float getBias(float bias[${u}], int channel) {`];for(let n=0;n<u;++n)n===0?o.push(`	if (channel == ${n}) { return bias[${n}]; }`):n===u-1?o.push(`	else { return bias[${n}]; }`):o.push(`	else if (channel == ${n}) { return bias[${n}]; }`);return o.push("	}"),o.join(`
`)},h=u=>{if(!u||u.length!==1)throw new Error("ImageScaler requires 1 input.");if(u[0].dims.length!==4)throw new Error("Invalid input shape.");if(u[0].type!=="float32"&&u[0].type!=="float64")throw new Error("Invalid input type.")}},7413:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseInstanceNormalizationAttributes=i.instanceNormalization=void 0;let c=l(6757),a=l(5639);i.instanceNormalization=(o,n,e)=>{u(n);let t=o.run(p(n[0]),n);return[o.run(h(o,n[0],e,t.dims),[n[0],t,n[1],n[2]])]},i.parseInstanceNormalizationAttributes=o=>o.attributes.getFloat("epsilon",1e-5);let f={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[a.TextureType.unpacked]},p=o=>Object.assign(Object.assign({},f),{get:()=>((n,e)=>{let t=e.dims.slice(),r=t[1],s=t[2]*t[3],g=[t[0],r],m=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${t[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${t[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${s});
        temp = 0.0;
        for(int a2=0; a2<${t[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${t[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${s});

        return v;
      }`;return Object.assign(Object.assign({},n),{output:{dims:g,type:e.type,textureType:a.TextureType.packedLastDimension},shaderSource:m})})(f,o)}),d={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[a.TextureType.unpacked,a.TextureType.packedLastDimension,a.TextureType.unpacked,a.TextureType.unpacked]},h=(o,n,e,t)=>{let r=Object.assign(Object.assign({},d),{cacheHint:`${e}`});return Object.assign(Object.assign({},r),{get:()=>((s,g,m,y,_)=>{let T=(0,c.getGlsl)(s.session.backend.glContext.version),[w,x]=s.calculateTextureWidthAndHeight(_,a.TextureType.packedLastDimension),[S,P]=[w/4,x],C=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${S}, ${P});
        return ${T.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},g),{output:{dims:m.dims,type:m.type,textureType:a.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:y}],shaderSource:C})})(o,r,n,e,t)})},u=o=>{if(!o||o.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");let n=o[0],e=o[1],t=o[2];if(n.dims.length<3||e.dims.length!==1||t.dims.length!==1)throw new Error("Invalid input shape.");if(e.dims[0]!==n.dims[1]||t.dims[0]!==n.dims[1])throw new Error("Input shapes are mismatched.");if(n.type!=="float32"&&n.type!=="float64"||e.type!=="float32"&&e.type!=="float64"||t.type!=="float32"&&t.type!=="float64")throw new Error("Invalid input type.");if(o[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},7006:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.createLrnProgramInfoLoader=i.parseLrnAttributes=i.lrn=void 0;let c=l(4910),a=l(5639);i.lrn=(h,u,o)=>(d(u),[h.run(p(u,o),u)]),i.parseLrnAttributes=h=>{let u=h.attributes.getFloat("alpha",1e-4),o=h.attributes.getFloat("beta",.75),n=h.attributes.getFloat("bias",1),e=h.attributes.getInt("size");return(0,c.createAttributeWithCacheKey)({alpha:u,beta:o,bias:n,size:e})};let f={name:"LRN",inputNames:["X"],inputTypes:[a.TextureType.unpacked]};function p(h,u){return Object.assign(Object.assign({},f),{cacheHint:u.cacheKey,get:()=>function(o,n){let e=o[0].dims[1],t=o[0].dims.length,r=-Math.floor((n.size-1)/2),s=Math.ceil((n.size-1)/2),g=`float(${n.alpha}) / float(${n.size})`,m=`
    float process(int indices[${t}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${r}; i <= ${s}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${e}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(float(${n.bias}) + ${g} * square_sum, float(${n.beta}));
    }`;return Object.assign(Object.assign({},f),{cacheHint:n.cacheKey,output:{dims:o[0].dims,type:o[0].type,textureType:a.TextureType.unpacked},shaderSource:m})}(h,u)})}i.createLrnProgramInfoLoader=p;let d=h=>{if(!h||h.length!==1)throw new Error("LRN requires 1 input.");if(h[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(h[0].type!=="float32")throw new Error("input should be float type")}},5632:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.createPackedMatmulProgramInfoLoader=void 0;let c=l(7273),a=l(6757),f=l(5639),p=l(432),d=l(2150),h=l(8276);i.createPackedMatmulProgramInfoLoader=(u,o,n)=>{let e=(t=o.length>2,r=n.activationCacheKey,{name:"MatMul (packed)",inputNames:t?["A","B","Bias"]:["A","B"],inputTypes:t?[f.TextureType.packed,f.TextureType.packed,f.TextureType.packed]:[f.TextureType.packed,f.TextureType.packed],cacheHint:r});var t,r;return Object.assign(Object.assign({},e),{get:()=>((s,g,m,y)=>{let _=m.length>2,T=_?"value += getBiasForMatmul();":"",w=m[0].dims,x=m[1].dims,S=c.BroadcastUtil.calcShape(w,x,!0),P=!c.ShapeUtil.areEqual(m[0].dims,m[1].dims);if(!S)throw new Error("Can't use matmul on the given tensors");let C=w[w.length-1],M=Math.ceil(C/2),j=w.length,B=x.length,E=(0,a.getGlsl)(s.session.backend.glContext.version),V=(0,p.getCoordsDataType)(S.length),O=S.length,k=(0,p.getGlChannels)(),{activationFunction:N,applyActivation:L}=(0,d.getActivationSnippet)(y),z=_?`${(0,h.getBiasForMatmul)(V,k,m[2].dims,S,!0)}`:"",J=P?`${function(re,se,ge,X){let ae=[],ve=[],Ae=ge[0].dims,Se=ge[1].dims,De=Ae.length,Oe=Se.length,Ce=X.length,Fe=Ce-De,He=Ce-Oe;ae=Ae.map((ot,Je)=>`coords.${se[Je+Fe]}`),ae[De-1]="i*2",ae.join(", "),ve=Se.map((ot,Je)=>`coords.${se[Je+He]}`),ve[Oe-2]="i*2",ve.join(", ");let qe=c.BroadcastUtil.getBroadcastDims(Ae,X),Ke=c.BroadcastUtil.getBroadcastDims(Se,X),pt=qe.map(ot=>`coords.${se[ot+Fe]} = 0;`).join(`
`),Ye=Ke.map(ot=>`coords.${se[ot+He]} = 0;`).join(`
`),yt=`int lastDim = coords.${se[Ce-1]};
  coords.${se[Ce-1]} = coords.${se[Ce-2]};
  coords.${se[Ce-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${re} coords = getOutputCoords();
  ${yt}
  ${pt}
  vec4 outputValue = getA(${ae});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${re} coords = getOutputCoords();
  ${yt}
  ${Ye}
  vec4 outputValue = getB(${ve});
  return outputValue;
}`}(V,k,m,S)}`:"",Z=P?"getAAtOutCoordsMatmul(i)":`getA(${function(re,se){let ge="";for(let X=0;X<se-2;X++)ge+=`rc.${re[X]}, `;return ge+=`rc.${re[se-2]}, i*2`,ge}(k,j)})`,Q=P?"getBAtOutCoordsMatmul(i)":`getB(${function(re,se){let ge="";for(let X=0;X<se-2;X++)ge+=`rc.${re[X]}, `;return ge+=`i*2, rc.${re[se-1]}`,ge}(k,B)})`,ne=`
            ${J}
            ${z}
            ${N}
            void main() {
              ${P?"":`${V} rc =
          getOutputCoords(); int lastDim = rc.${k[O-1]}; rc.${k[O-1]} =
          rc.${k[O-2]}; rc.${k[O-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${M}; i++) {
                vec4 a = ${Z};
                vec4 b = ${Q};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${T}
              ${L}
              ${E.output} = value;
            }`;return Object.assign(Object.assign({},g),{output:{dims:S,type:m[0].type,textureType:f.TextureType.packed},shaderSource:ne,hasMain:!0})})(u,e,o,n)})}},8276:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getBiasForMatmul=i.createMatmulProgramInfoLoader=i.parseMatMulAttributes=i.matMul=void 0;let c=l(7273),a=l(5639),f=l(432),p=l(2150),d=l(5632);i.matMul=(e,t,r)=>(o(t),e.session.pack?[e.run((0,d.createPackedMatmulProgramInfoLoader)(e,t,r),t)]:[e.run(u(t,r),t)]),i.parseMatMulAttributes=e=>(0,p.parseInternalActivationAttributes)(e.attributes);let h=(e,t)=>({name:"MatMul",inputNames:e?["A","B","Bias"]:["A","B"],inputTypes:e?[a.TextureType.unpacked,a.TextureType.unpacked,a.TextureType.unpacked]:[a.TextureType.unpacked,a.TextureType.unpacked],cacheHint:t});function u(e,t){let r=h(e.length>2,t.activationCacheKey);return Object.assign(Object.assign({},r),{get:()=>function(s,g,m){let y=g[0].dims,_=g[1].dims,T=c.BroadcastUtil.calcShape(y,_,!0);if(!T)throw new Error("Can't use matmul on the given tensors");let w=(0,f.getCoordsDataType)(T.length),x=(0,f.getGlChannels)(),{activationFunction:S,applyActivation:P}=(0,p.getActivationSnippet)(m),C=g.length>2,M=C?"value += getBiasForMatmul();":"",j=C?`${n(w,x,g[2].dims,T,!1)}`:"",B=T.length,E=y.length,V=_.length,O=`
    ${S}
    ${j}
    float process(int indices[${B}]) {
        int a[${E}];
        int b[${V}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${y[y.length-1]}; ++k) {
            a[${E-1}] = k;
            b[${V-2}] = k;
            value += _A(a) * _B(b);
        }
        ${M}
        ${P}
        return value;
    }`;return Object.assign(Object.assign({},s),{output:{dims:T,type:g[0].type,textureType:a.TextureType.unpacked},shaderSource:O})}(r,e,t)})}i.createMatmulProgramInfoLoader=u;let o=e=>{if(!e||e.length!==2)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.");if(e[0].type!=="float32"&&e[0].type!=="float64"||e[1].type!=="float32"&&e[1].type!=="float64")throw new Error("inputs should be float type");if(e[0].type!==e[1].type)throw new Error("inputs types should match")};function n(e,t,r,s,g){let m="",y=r.length,_=s.length,T=_-y;m=_<2&&y>0?"coords":r.map((S,P)=>`coords.${t[P+T]}`).join(", ");let w=c.BroadcastUtil.getBroadcastDims(r,s).map(S=>`coords.${t[S+T]} = 0;`).join(`
`),x="vec4(outputValue.xx, outputValue.yy)";return c.ShapeUtil.size(r)===1&&(x="vec4(outputValue.x)"),g?`
vec4 getBiasForMatmul() {
  ${e} coords = getOutputCoords();
  ${w}
  vec4 outputValue = getBias(${m});
  return ${x};
}`:`
float getBiasForMatmul() {
  ${e} coords = getOutputCoords();
  ${w}
  return getBias(coords.x);
}`}i.getBiasForMatmul=n},9:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.createPackProgramInfoLoader=void 0;let c=l(6757),a=l(5639),f=l(432),p=l(5614),d={name:"pack",inputNames:["A"],inputTypes:[a.TextureType.unpackedReversed]};i.createPackProgramInfoLoader=(h,u)=>Object.assign(Object.assign({},d),{get:()=>((o,n)=>{let e=(0,c.getGlsl)(o.session.backend.glContext.version),t=n.dims,r=t.length,s=n.dims.length,g=(0,f.getCoordsDataType)(s),m=(0,p.getChannels)("rc",s),y=(_=s,T=m,w=t[t.length-2],x=t[t.length-1],_===0||_===1?"":`
    int r = ${T[_-2]};
    int c = ${T[_-1]};
    int rp1 = ${T[_-2]} + 1;
    int cp1 = ${T[_-1]} + 1;
    bool rEdge = rp1 >= ${x};
    bool cEdge = cp1 >= ${w};
    `);var _,T,w,x;let S;S=r===0?[1,1]:r===1?[t[0],1]:[t[s-1],t[s-2]];let P=function(j,B,E){if(j===0)return"false";if(j===1)return`rc > ${B[0]}`;let V="";for(let O=j-2;O<j;O++)V+=`${E[O]} >= ${B[O-j+2]}`,O<j-1&&(V+="||");return V}(s,S,m),C=function(j,B){let E=j.length;if(E===0)return"getA(), 0, 0, 0";if(E===1)return`getA(rc),
            rc + 1 >= ${j[0]} ? 0. : getA(rc + 1),
            0, 0`;let V="";if(E>2)for(let O=0;O<E-2;++O)V+=`${B[O]},`;return`getA(${V}r, c),
          rEdge ? 0. : getA(${V}rp1, c),
          cEdge ? 0. : getA(${V}r, cp1),
          rEdge || cEdge ? 0. : getA(${V}rp1, cp1)`}(t,m),M=`
        void main() {
          ${g} rc = getOutputCoords();

          if(${P}) {
            ${e.output} = vec4(0);
          } else {
            ${y}

            ${e.output} = vec4(${C});
          }
        }
      `;return Object.assign(Object.assign({},d),{hasMain:!0,output:{dims:n.dims,type:n.type,textureType:a.TextureType.packed},shaderSource:M})})(h,u)})},5614:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.unpackFromChannel=i.getChannels=i.getVecChannels=void 0;let c=l(432);function a(f,p){return(0,c.getGlChannels)(p).map(d=>`${f}.${d}`)}i.getVecChannels=a,i.getChannels=function(f,p){return p===1?[f]:a(f,p)},i.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},5565:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parsePadAttributesV11=i.padV11=i.parsePadAttributesV2=i.padV2=void 0;let c=l(4910),a=l(7273),f=l(6757),p=l(5639),d={name:"Pad",inputNames:["A"],inputTypes:[p.TextureType.unpacked]};i.padV2=(g,m,y)=>(o(m),[g.run(Object.assign(Object.assign({},d),{cacheHint:y.cacheKey,get:()=>u(g,m[0],y)}),m)]),i.parsePadAttributesV2=g=>{let m=g.attributes.getString("mode","constant"),y=g.attributes.getFloat("value",0),_=g.attributes.getInts("pads");return(0,c.createAttributeWithCacheKey)({mode:m,value:y,pads:_})},i.padV11=(g,m,y)=>{n(m);let _=h(g,m,y);return(0,i.padV2)(g,[m[0]],_)},i.parsePadAttributesV11=g=>g.attributes.getString("mode","constant");let h=(g,m,y)=>{if(!g.session.isInitializer(m[1].dataId)||m.length>=3&&!g.session.isInitializer(m[2].dataId))throw new Error("dynamic pad attributes are not allowed");let _=Array.from(m[1].integerData),T=m.length>=3?m[2].floatData[0]:0;return(0,c.createAttributeWithCacheKey)({mode:y,pads:_,value:T})},u=(g,m,y)=>{let _=a.ShapeUtil.padShape(m.dims.slice(),y.pads),T=_.length,w=`
      ${e(g,m,y)}
      float process(int[${T}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[p.TextureType.unpacked],output:{dims:_,type:m.type,textureType:p.TextureType.unpacked},shaderSource:w}},o=g=>{if(!g||g.length!==1)throw new Error("Pad requires 1 input");if(g[0].type!=="float32"&&g[0].type!=="float64")throw new Error("Invalid input type.")},n=g=>{if(!g||g.length!==2&&g.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(g[1].type!=="int32")throw new Error("Invalid input type.");if(g.length>=3&&g[2].type==="string")throw new Error("Invalid input type.")},e=(g,m,y)=>{let _=(0,f.getGlsl)(g.session.backend.glContext.version),[T,w]=g.calculateTextureWidthAndHeight(m.dims,p.TextureType.unpacked),x=a.ShapeUtil.computeStrides(m.dims);switch(y.mode){case"constant":return t(_,m.dims,x,T,w,y.pads,y.value);case"reflect":return r(_,m.dims,x,T,w,y.pads);case"edge":return s(_,m.dims,x,T,w,y.pads);default:throw new Error("Invalid mode")}},t=(g,m,y,_,T,w,x)=>{let S=m.length,P="";for(let C=S-1;C>=0;--C)P+=`
        k = m[${C}] - ${w[C]};
        if (k < 0)  return constant;
        if (k >= ${m[C]}) return constant;
        offset += k * ${y[C]};
        `;return`
      float padA(int m[${S}]) {
        const float constant = float(${x});
        int offset = 0;
        int k = 0;
        ${P}
        vec2 coords = offsetToCoords(offset, ${_}, ${T});
        float value = getColorAsFloat(${g.texture2D}(A, coords));
        return value;
      }
      `},r=(g,m,y,_,T,w)=>{let x=m.length,S="";for(let P=x-1;P>=0;--P)S+=`
        k = m[${P}] - ${w[P]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(m[P]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${m[P]}) { k = _2n_1 - k; }
        }
        offset += k * ${y[P]};
        `;return`
      float padA(int m[${x}]) {
        int offset = 0;
        int k = 0;
        ${S}
        vec2 coords = offsetToCoords(offset, ${_}, ${T});
        float value = getColorAsFloat(${g.texture2D}(A, coords));
        return value;
      }
      `},s=(g,m,y,_,T,w)=>{let x=m.length,S="";for(let P=x-1;P>=0;--P)S+=`
        k = m[${P}] - ${w[P]};
        if (k < 0)  k = 0;
        if (k >= ${m[P]}) k = ${m[P]-1};
        offset += k * ${y[P]};
      `;return`
      float padA(int m[${x}]) {
        int offset = 0;
        int k = 0;
        ${S}
        vec2 coords = offsetToCoords(offset, ${_}, ${T});
        float value = getColorAsFloat(${g.texture2D}(A, coords));
        return value;
      }
      `}},2834:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.globalMaxPool=i.parseMaxPoolAttributes=i.maxPool=i.parseGlobalAveragePoolAttributes=i.globalAveragePool=i.parseAveragePoolAttributes=i.averagePool=void 0;let c=l(4910),a=l(7273),f=l(5639);i.averagePool=(s,g,m)=>{n(g);let y={name:"AveragePool",inputNames:["X"],inputTypes:[f.TextureType.unpacked],cacheHint:m.cacheKey};return[s.run(Object.assign(Object.assign({},y),{get:()=>p(g,y,!1,m)}),g)]},i.parseAveragePoolAttributes=s=>{let g=s.attributes.getString("auto_pad","NOTSET"),m=s.attributes.getInt("ceil_mode",0),y=s.attributes.getInt("count_include_pad",0)!==0,_=s.attributes.getInts("kernel_shape"),T=s.attributes.getInts("strides",[]),w=s.attributes.getInts("pads",[]);if(m!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,c.createAttributeWithCacheKey)({autoPad:g,ceilMode:m,countIncludePad:y,kernelShape:_,strides:T,pads:w})};let p=(s,g,m,y)=>{let[_,T]=h(s,y,m),w=a.ShapeUtil.size(_.kernelShape),x="";_.countIncludePad?x+=`value /= float(${w});`:x+=`value /= float(${w} - pad);`;let S=`
        ${e(s[0].dims,_,"value += _X(x);",x,"0.0")}
      `;return Object.assign(Object.assign({},g),{output:{dims:T,type:s[0].type,textureType:f.TextureType.unpacked},shaderSource:S})};i.globalAveragePool=(s,g,m)=>{n(g);let y={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[f.TextureType.unpacked],cacheHint:`${m.countIncludePad}`};return[s.run(Object.assign(Object.assign({},y),{get:()=>p(g,y,!0,m)}),g)]},i.parseGlobalAveragePoolAttributes=s=>{let g=s.attributes.getInt("count_include_pad",0)!==0;return(0,c.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:g,kernelShape:[],strides:[],pads:[]})},i.maxPool=(s,g,m)=>{n(g);let y={name:"MaxPool",inputNames:["X"],inputTypes:[f.TextureType.unpacked],cacheHint:m.cacheKey};return[s.run(Object.assign(Object.assign({},y),{get:()=>d(g,y,!1,m)}),g)]},i.parseMaxPoolAttributes=s=>{let g=s.attributes.getString("auto_pad","NOTSET"),m=s.attributes.getInt("ceil_mode",0),y=s.attributes.getInts("kernel_shape"),_=s.attributes.getInts("strides",[]),T=s.attributes.getInts("pads",[]),w=s.attributes.getInt("storage_order",0),x=s.attributes.getInts("dilations",[]);if(w!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(m!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,c.createAttributeWithCacheKey)({autoPad:g,ceilMode:m,countIncludePad:!1,kernelShape:y,strides:_,pads:T,storageOrder:w,dilations:x})};let d=(s,g,m,y)=>{let[_,T]=h(s,y,m),w=`
      ${e(s[0].dims,_,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},g),{output:{dims:T,type:s[0].type,textureType:f.TextureType.unpacked},shaderSource:w})},h=(s,g,m)=>{let y=s[0].dims.slice(),_=Object.hasOwnProperty.call(g,"dilations"),T=g.kernelShape.slice(),w=g.strides.slice(),x=_?g.dilations.slice():[],S=g.pads.slice();a.PoolConvUtil.adjustPoolAttributes(m,y,T,w,x,S);let P=a.PoolConvUtil.computePoolOutputShape(m,y,w,x,T,S,g.autoPad),C=Object.assign({},g);return _?Object.assign(C,{kernelShape:T,strides:w,pads:S,dilations:x,cacheKey:g.cacheKey}):Object.assign(C,{kernelShape:T,strides:w,pads:S,cacheKey:g.cacheKey}),[C,P]},u={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},o={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[f.TextureType.unpacked]};i.globalMaxPool=(s,g)=>(n(g),[s.run(Object.assign(Object.assign({},o),{get:()=>d(g,o,!0,u)}),g)]);let n=s=>{if(!s||s.length!==1)throw new Error("Pool ops requires 1 input.");if(s[0].type!=="float32"&&s[0].type!=="float64")throw new Error("Invalid input type.")},e=(s,g,m,y,_)=>{let T=s.length;if(g.kernelShape.length<=2){let w=g.kernelShape[g.kernelShape.length-1],x=g.strides[g.strides.length-1],S=g.pads[g.pads.length/2-1],P=g.pads[g.pads.length-1],C=s[T-1],M="",j="",B="";if(M=S+P!==0?`
          for (int i = 0; i < ${w}; i++) {
            x[${T} - 1] = indices[${T} - 1] * ${x} - ${S} + i;
            if (x[${T} - 1] < 0 || x[${T} - 1] >= ${C}) {
              pad++;
              continue;
            }
            ${m}
          }`:`
          for (int i = 0; i < ${w}; i++) {
            x[${T} - 1] = indices[${T} - 1] * ${x} - ${S} + i;
            ${m}
          }`,g.kernelShape.length===2){let E=g.kernelShape[g.kernelShape.length-2],V=g.strides[g.strides.length-2],O=g.pads[g.pads.length/2-2],k=g.pads[g.pads.length-2],N=s[T-2];j=O+k!==0?`
            for (int j = 0; j < ${E}; j++) {
              x[${T} - 2] = indices[${T} - 2] * ${V} - ${O} + j;
              if (x[${T} - 2] < 0 || x[${T} - 2] >= ${N}) {
                pad+= ${w};
                continue;
              }
          `:`
            for (int j = 0; j < ${E}; j++) {
              x[${T} - 2] = indices[${T} - 2] * ${V} - ${O} + j;
            `,B=`
          }
        `}return`
        float process(int indices[${T}]) {
          int x[${T}];
          copyVec(indices, x);

          float value = ${_};
          int pad = 0;
          ${j}
          ${M}
          ${B}
          ${y}
          return value;
        }
      `}{let w=a.ShapeUtil.size(g.kernelShape),x=a.ShapeUtil.computeStrides(g.kernelShape),S=x.length,P=g.pads.length,C=r(S),M=t(s,"inputDims"),j=t(g.pads,"pads"),B=t(x,"kernelStrides"),E=t(g.strides,"strides"),V="";return V=g.pads.reduce((O,k)=>O+k)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${m}
          }`:`
          }
          ${m}
        `,`
        ${C}
        float process(int indices[${T}]) {
          int x[${T}];
          copyVec(indices, x);
          int offset[${S}];
          int pads[${P}];
          int inputDims[${T}];
          int kernelStrides[${S}];
          int strides[${S}];
          ${j}
          ${M}
          ${E}
          ${B}

          float value = ${_};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${w}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${T} - ${S}; j < ${T}; j++) {
              x[j] = indices[j] * strides[j - ${T} + ${S}]
                + offset[j - ${T} + ${S}] - pads[j - 2];
              ${V}
          }
          ${y}

          return value;
        }
      `}},t=(s,g)=>{let m="";for(let y=0;y<s.length;y++)m+=`
      ${g}[${y}] = ${s[y]};
    `;return m},r=s=>`
  void offsetToIndices(int offset, int[${s}] strides, out int[${s}] indices) {
    if (${s} == 0) {
      return;
    }
    for (int i = 0; i < ${s} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${s} - 1] = offset;
  }`},1010:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.reduceLogSumSquare=i.reduceLogSum=i.reduceProd=i.reduceMin=i.reduceMax=i.reduceMean=i.reduceSum=i.parseReduceAttributes=void 0;let c=l(4910),a=l(6145),f=l(7273),p=l(5639),d=(o,n,e,t,r)=>{u(n);let s={name:t,inputNames:["A"],inputTypes:[p.TextureType.unpacked]};return[o.run(Object.assign(Object.assign({},s),{cacheHint:e.cacheKey,get:()=>h(o,n,e,t,r,s)}),n)]};i.parseReduceAttributes=o=>{let n=o.attributes.getInts("axes",[]),e=o.attributes.getInt("keepdims",1)===1;return(0,c.createAttributeWithCacheKey)({axes:n,keepDims:e})};let h=(o,n,e,t,r,s)=>{let g=[],m=n[0].dims.length||1,y=[],_=f.ShapeUtil.normalizeAxes(e.axes,n[0].dims.length),T=r(n,_),w=T[1];for(let S=0;S<n[0].dims.length;S++)_.indexOf(S)>=0||_.length===0?(e.keepDims&&g.push(1),w=`
          for(int j${S} = 0; j${S} < ${n[0].dims[S]}; j${S}++) {
            inputIdx[${S}] = j${S};
            ${w}
          }`):(y.push(`inputIdx[${S}] = outputIdx[${g.length}];`),g.push(n[0].dims[S]));let x=`
      float process(int outputIdx[${g.length||1}]) {
        float value;                 // final result
        int inputIdx[${m}];      // addressing input data
        ${y.join(`
`)}
        ${T[0]}       // init ops for reduce max/min
        ${w}
        ${T[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},s),{output:{dims:g,type:n[0].type,textureType:p.TextureType.unpacked},shaderSource:x})},u=o=>{if(!o||o.length!==1)throw new Error("Reduce op requires 1 input.");if(a.NUMBER_TYPES.indexOf(o[0].type)===-1)throw new Error("Invalid input type.")};i.reduceSum=(o,n,e)=>d(o,n,e,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),i.reduceMean=(o,n,e)=>d(o,n,e,"ReduceMean",(t,r)=>{let s=1;for(let g=0;g<t[0].dims.length;g++)(r.indexOf(g)>=0||r.length===0)&&(s*=t[0].dims[g]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${s}.;`]}),i.reduceMax=(o,n,e)=>d(o,n,e,"ReduceMax",(t,r)=>{let s=[];for(let g=0;g<t[0].dims.length;g++)(r.indexOf(g)>=0||r.length===0)&&s.push(`inputIdx[${g}] = 0;`);return[`${s.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),i.reduceMin=(o,n,e)=>d(o,n,e,"ReduceMin",(t,r)=>{let s=[];for(let g=0;g<t[0].dims.length;g++)(r.indexOf(g)>=0||r.length===0)&&s.push(`inputIdx[${g}] = 0;`);return[`${s.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),i.reduceProd=(o,n,e)=>d(o,n,e,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),i.reduceLogSum=(o,n,e)=>d(o,n,e,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),i.reduceLogSumSquare=(o,n,e)=>d(o,n,e,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7379:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.isReshapeCheap=i.processDims3D=i.createPackedReshape3DProgramInfoLoader=void 0;let c=l(7273),a=l(6757),f=l(5639),p=l(5614);i.createPackedReshape3DProgramInfoLoader=(d,h,u)=>{let o=(n=>({name:"Reshape (packed)",inputTypes:[f.TextureType.packed],inputNames:["A"],cacheHint:`${n}`}))(u);return Object.assign(Object.assign({},o),{get:()=>((n,e,t,r)=>{let s=e.dims,g=r,m="";for(let T=0;T<4;T++){let w="";switch(T){case 0:w="outputCoords = rc;";break;case 1:w="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:w="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:w="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}m+=`
        ${w}
        ${T>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${T}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${T>0?"}":""}
      `}let y=(0,a.getGlsl)(n.session.backend.glContext.version),_=`
      ${function(T){let w=c.ShapeUtil.computeStrides(T),x=["b","r","c"],S="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${w.map((P,C)=>`int ${x[C]} = ${S} / ${P}; ${C===w.length-1?`int ${x[C+1]} = ${S} - ${x[C]} * ${P}`:`index -= ${x[C]} * ${P}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(s)}
      ${function(T){let w=c.ShapeUtil.computeStrides(T);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${w[0]} + coords.z * ${w[1]} + coords.y;
  }
`}(g)}
      ${(0,p.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${g[2]};
        int cols = ${g[1]};

        ${m}
        ${y.output} = result;
      }
    `;return Object.assign(Object.assign({},t),{output:{dims:g,type:e.type,textureType:f.TextureType.packed},shaderSource:_,hasMain:!0})})(d,h,o,u)})},i.processDims3D=function(d){if(d.length===0)return[1,1,1];let h=1;for(let u=0;u<d.length-2;++u)h*=d[u];return[h,d.length>1?d[d.length-2]:1,d[d.length-1]]},i.isReshapeCheap=function(d,h){let u=!1;return u=d.length===0||h.length===0||(d.length<2||h.length<2?d[d.length-1]===h[h.length-1]:d[d.length-1]===h[h.length-1]&&d[d.length-2]===h[h.length-2]),u}},8126:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.reshape=void 0;let c=l(7273);i.reshape=(a,f)=>{let p=c.ShapeUtil.calculateReshapedDims(f[0].dims,f[1].integerData);return a.session.pack?[a.reshapePacked(f[0],p)]:[a.reshapeUnpacked(f[0],p)]}},2801:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseResizeAttributesV11=i.parseResizeAttributesV10=i.resize=void 0;let c=l(6757),a=l(5639),f=l(432),p=l(5614),d=l(3980),h={name:"Resize",inputNames:["A"],inputTypes:[a.TextureType.packed]};i.resize=(t,r,s)=>((0,d.validateInputs)(r,s),[t.run(Object.assign(Object.assign({},h),{cacheHint:s.cacheKey,get:()=>u(t,r,s)}),r)]),i.parseResizeAttributesV10=t=>(0,d.parseUpsampleAttributes)(t,10),i.parseResizeAttributesV11=t=>(0,d.parseUpsampleAttributes)(t,11);let u=(t,r,s)=>{let g=(0,c.getGlsl)(t.session.backend.glContext.version),[m,y]=o(r,s);if(m.every(V=>V===1)&&s.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},h),{output:{dims:y,type:r[0].type,textureType:a.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${g.texture2D}(X, TexCoords);
                    ${g.output} = v;
                }`});let _=y.length;if(_<2)throw new Error(`output dimension should be at least 2, but got ${_}`);let T=y[_-2],w=y[_-1],x=r[0].dims;if(_!==x.length)throw new Error(`output dimension should match input ${x.length}, but got ${_}`);let S=x[_-2],P=x[_-1],C=m[_-2],M=m[_-1],j="";if(s.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${s.mode}'`);switch(s.coordinateTransformMode){case"asymmetric":j=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":j=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":j=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${w}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${T}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${w}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${T}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":j=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${w}.0 - 1.0, ${T}.0 - 1.0, ${w}.0 - 1.0,
                            ${T}.0 - 1.0);
                        vec4 original = vec4(${P}.0 - 1.0, ${S}.0 - 1.0, ${P}.0 - 1.0,
                            ${S}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${s.coordinateTransformMode}'`)}let B=(0,f.getCoordsDataType)(_),E=`
            const vec2 inputWH = vec2(${S}.0, ${P}.0);
            const vec4 scaleWHWH = vec4(float(${C}), float(${M}), float(${C}), float(${M}));
            ${(0,p.unpackFromChannel)()}
            ${j}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${B} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${T-1};
                bool hasNextCol = rc.z < ${w-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${g.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},h),{output:{dims:y,type:r[0].type,textureType:a.TextureType.packed},hasMain:!0,shaderSource:E})},o=(t,r)=>{let s=t[0].dims,g,m=r.scales;if(m.length===0){let _=t[r.scalesInputIdx];if(_&&_.size!==0){if(t[r.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");m=n(_,r.mode,r.isResize)}else{let T=t[r.sizesInputIdx];if(!T||T.size===0)throw new Error("Either scales or sizes MUST be provided as input.");g=Array.from(T.integerData),m=e(g,s,r.mode,r.isResize)}}else if(t[r.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");let y=g||s.map((_,T)=>Math.floor(_*m[T]));return[m,y]},n=(t,r,s)=>{let g=Array.from(t.floatData);return(0,d.scalesValidation)(g,r,s),g},e=(t,r,s,g)=>{let m=r.length,y=new Array(m);for(let _=0,T=m;_<T;_++)if(r[_]===0){if(t[_]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");y[_]=1}else y[_]=t[_]/r[_];return(0,d.scalesValidation)(y,s,g),y}},565:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shape=void 0;let c=l(9240);i.shape=(f,p)=>(a(p),[new c.Tensor([p[0].dims.length],"int32",void 0,void 0,new Int32Array(p[0].dims))]);let a=f=>{if(!f||f.length!==1)throw new Error("Shape requires 1 input.")}},2444:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.sliceV10=i.parseSliceAttributes=i.slice=void 0;let c=l(4910),a=l(6145),f=l(7273),p=l(5639),d={name:"Slice",inputNames:["A"],inputTypes:[p.TextureType.unpacked]};i.slice=(e,t,r)=>(u(t),[e.run(Object.assign(Object.assign({},d),{cacheHint:r.cacheKey,get:()=>h(e,t[0],r)}),t)]),i.parseSliceAttributes=e=>{let t=e.attributes.getInts("starts"),r=e.attributes.getInts("ends"),s=e.attributes.getInts("axes",[]);return(0,c.createAttributeWithCacheKey)({starts:t,ends:r,axes:s})};let h=(e,t,r)=>{let s=r.axes.length===0?t.dims.slice(0).map((x,S)=>S):r.axes,g=f.ShapeUtil.normalizeAxes(s,t.dims.length),m=r.starts.map((x,S)=>x>t.dims[g[S]]-1?t.dims[g[S]]:f.ShapeUtil.normalizeAxis(x,t.dims[g[S]])),y=r.ends.map((x,S)=>x>t.dims[g[S]]-1?t.dims[g[S]]:f.ShapeUtil.normalizeAxis(x,t.dims[g[S]])),_=t.dims.slice(),T=[];for(let x=0;x<g.length;x++)_[g[x]]=y[x]-m[x],m[x]>0&&T.push(`outputIdx[${g[x]}] += ${m[x]};`);let w=`
      float process(int outputIdx[${_.length}]) {
        ${T.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},d),{output:{dims:_,type:t.type,textureType:p.TextureType.unpacked},shaderSource:w})},u=e=>{if(!e||e.length!==1)throw new Error("Slice requires 1 input.");if(a.NUMBER_TYPES.indexOf(e[0].type)===-1)throw new Error("Invalid input type.")};i.sliceV10=(e,t)=>{n(t);let r=o(e,t);return[e.run(Object.assign(Object.assign({},d),{cacheHint:r.cacheKey,get:()=>h(e,t[0],r)}),[t[0]])]};let o=(e,t)=>{if(!e.session.isInitializer(t[1].dataId)||!e.session.isInitializer(t[2].dataId)||t.length>=4&&!e.session.isInitializer(t[3].dataId)||t.length>=5&&!e.session.isInitializer(t[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(t.length>=5&&t[4].integerData.some(m=>m!==1))throw new Error("currently non-1 steps is not supported for Slice");let r=Array.from(t[1].integerData),s=Array.from(t[2].integerData),g=t.length>=4?Array.from(t[3].integerData):[];return{starts:r,ends:s,axes:g,cacheKey:`${g};${r};${s}`}},n=e=>{if(!e||e.length<3||e.length>5)throw new Error("Invalid input number.");if(e[1].type!=="int32"||e[1].dims.length!==1)throw new Error("Invalid input type.");if(e[2].type!=="int32"||e[2].dims.length!==1)throw new Error("Invalid input type.");if(e.length>=4&&(e[3].type!=="int32"||e[3].dims.length!==1))throw new Error("Invalid input type.");if(e.length>=5&&(e[4].type!=="int32"||e[4].dims.length!==1))throw new Error("Invalid input type.")}},815:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.softmaxV13=i.parseSoftmaxAttributesV13=i.parseSoftmaxAttributes=i.softmax=void 0;let c=l(4910),a=l(7273),f=l(6757),p=l(5639),d=l(5707),h={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[p.TextureType.unpacked]},u={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[p.TextureType.unpacked,p.TextureType.unpacked]},o={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[p.TextureType.unpacked,p.TextureType.unpacked,p.TextureType.unpacked]};i.softmax=(g,m,y)=>{s(m);let _=m[0].dims.slice(),T=a.ShapeUtil.normalizeAxis(y.axis,_.length),w=a.ShapeUtil.sizeToDimension(_,T),x=a.ShapeUtil.sizeFromDimension(_,T);return n(g,m,y,w,x)},i.parseSoftmaxAttributes=g=>(0,c.createAttributeWithCacheKey)({axis:g.attributes.getInt("axis",1)}),i.parseSoftmaxAttributesV13=g=>(0,c.createAttributeWithCacheKey)({axis:g.attributes.getInt("axis",-1)}),i.softmaxV13=(g,m,y)=>{s(m);let _=m[0].dims.slice(),T=a.ShapeUtil.normalizeAxis(y.axis,_.length),w=_.length,x=T!==w-1,S=[],P,C=[],M=[];x&&(C=Array.from({length:w}).map((V,O)=>O),C[T]=w-1,C[w-1]=T,C.map(V=>S.push(_[V])),P=(0,c.createAttributeWithCacheKey)({perm:C}),M=(0,d.transpose)(g,m,P));let j=x?a.ShapeUtil.sizeToDimension(S,w-1):a.ShapeUtil.sizeToDimension(_,w-1),B=x?a.ShapeUtil.sizeFromDimension(S,w-1):a.ShapeUtil.sizeFromDimension(_,w-1),E=n(g,x?M:m,y,j,B);return x?(0,d.transpose)(g,E,P):E};let n=(g,m,y,_,T)=>{let w=e(g,m[0],_,T,[_]),x=g.run(Object.assign(Object.assign({},h),{cacheHint:y.cacheKey,get:()=>w}),m),S=t(g,m[0],_,T,w.output.dims,[_]),P=g.run(Object.assign(Object.assign({},u),{cacheHint:y.cacheKey,get:()=>S}),[m[0],x]),C=r(g,m[0],_,T,w.output.dims,S.output.dims);return[g.run(Object.assign(Object.assign({},o),{cacheHint:y.cacheKey,get:()=>C}),[m[0],x,P])]},e=(g,m,y,_,T)=>{let[w,x]=g.calculateTextureWidthAndHeight(m.dims,p.TextureType.unpacked),S=T.length;if(y<1||_<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(T.length!==1)throw new Error("Dimensionality of the output should be 1");if(T[0]!==y)throw new Error("Shape of the output should be equal to logical row count");let P=(0,f.getGlsl)(g.session.backend.glContext.version),C=`
      float process(int[${S}] indices) {
        int logical_row_start_offset = indices[0] * ${_};

        float max = getColorAsFloat(${P.texture2D}(A, offsetToCoords(logical_row_start_offset, ${w},
        ${x} )));
        for(int i=1; i<${_}; ++i)
        {
          float current = getColorAsFloat(${P.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${w}, ${x})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},h),{output:{dims:T,type:m.type,textureType:p.TextureType.unpacked},shaderSource:C})},t=(g,m,y,_,T,w)=>{let[x,S]=g.calculateTextureWidthAndHeight(m.dims,p.TextureType.unpacked),P=w.length;if(y<1||_<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(w.length!==1)throw new Error("Dimensionality of the output should be 1");if(w[0]!==y)throw new Error("Shape of the output should be equal to logical row count");if(T.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(T[0]!==y)throw new Error("Shape of the intermediate results should be equal to logical row count");let C=`
      float process(int[${P}] indices) {
        int logical_row_start_offset = indices[0] * ${_};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${_}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,f.getGlsl)(g.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${x}, ${S}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},u),{output:{dims:w,type:m.type,textureType:p.TextureType.unpacked},shaderSource:C})},r=(g,m,y,_,T,w)=>{let[x,S]=g.calculateTextureWidthAndHeight(m.dims,p.TextureType.unpacked),P=m.dims.length;if(y<1||_<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(T.length!==1||w.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(T[0]!==y||w[0]!==y)throw new Error("Shape of the intermediate results should be equal to logical row count");let C=`
      float process(int[${P}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${x}, ${S});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${_};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},o),{output:{dims:m.dims,type:m.type,textureType:p.TextureType.unpacked},shaderSource:C})},s=g=>{if(!g||g.length!==1)throw new Error("Softmax requires 1 input.");if(g[0].type!=="float32"&&g[0].type!=="float64")throw new Error("Invalid input type")}},564:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseSplitAttributes=i.split=void 0;let c=l(4910),a=l(7273),f=l(5639),p={name:"Split",inputNames:["A"],inputTypes:[f.TextureType.unpacked]};i.split=(o,n,e)=>{u(n);let t=a.ShapeUtil.normalizeAxis(e.axis,n[0].dims.length),r=d(o,n,t,e),s=[];for(let g=0;g<r;++g)s.push(o.run(Object.assign(Object.assign({},p),{cacheHint:`${e.cacheKey};${g}`,get:()=>h(o,n[0],e,t,g)}),n));return s},i.parseSplitAttributes=o=>{let n=o.attributes.getInt("axis",0),e=o.attributes.getInts("split",[]),t=o.outputs.length;return(0,c.createAttributeWithCacheKey)({axis:n,split:e,numOutputs:t})};let d=(o,n,e,t)=>{let[,r]=a.SplitUtil.splitShape(n[0].dims,e,t.split,t.numOutputs);return r.length},h=(o,n,e,t,r)=>{let[s,g]=a.SplitUtil.splitShape(n.dims,t,e.split,e.numOutputs),m=g[r],y=s[r],_=`
      float process(int indices[${y.length}]) {
        indices[${t}] += ${m};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},p),{cacheHint:`${e.cacheKey}:${r}`,output:{dims:y,type:n.type,textureType:f.TextureType.unpacked},shaderSource:_})},u=o=>{if(!o||o.length!==1)throw new Error("Split requires one input.");if(o[0].type!=="int8"&&o[0].type!=="uint8"&&o[0].type!=="int16"&&o[0].type!=="uint16"&&o[0].type!=="int32"&&o[0].type!=="uint32"&&o[0].type!=="float32"&&o[0].type!=="float64"&&o[0].type!=="bool")throw new Error("Invalid input type.")}},5416:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseSqueezeAttributes=i.squeezeV13=i.squeeze=void 0;let c=l(7273);i.squeeze=(p,d,h)=>{a(d);let u=c.ShapeUtil.squeezeShape(d[0].dims,h);return[p.reshapeUnpacked(d[0],u)]},i.squeezeV13=(p,d)=>(f(d),(0,i.squeeze)(p,[d[0]],Array.from(d[1].integerData))),i.parseSqueezeAttributes=p=>p.attributes.getInts("axes");let a=p=>{if(!p||p.length!==1)throw new Error("Squeeze requires 1 input.");if(p[0].type==="string")throw new Error("invalid input tensor types.")},f=p=>{if(!p||p.length!==2)throw new Error("Squeeze requires 2 inputs.");if(p[1].type!=="int32")throw new Error("Invalid input type.")}},1240:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.sum=void 0;let c=l(6757),a=l(5639);i.sum=(d,h)=>{p(h);let u={name:"Sum",inputNames:h.map((o,n)=>`X${n}`),inputTypes:new Array(h.length).fill(a.TextureType.unpacked)};return[d.run(Object.assign(Object.assign({},u),{get:()=>f(d,h,u)}),h)]};let f=(d,h,u)=>{let o=(0,c.getGlsl)(d.session.backend.glContext.version),n=h[0].dims.slice(),e=`
      void main() {
        vec4 result = ${h.map((t,r)=>`${o.texture2D}(X${r},TexCoords)`).join(" + ")};
        ${o.output} = result;
      }
    `;return Object.assign(Object.assign({},u),{output:{dims:n,type:h[0].type,textureType:a.TextureType.unpacked},hasMain:!0,shaderSource:e})},p=d=>{if(!d||d.length===0)throw new Error("Sum requires inputs.");let h=d[0].dims.length;for(let u=1;u<d.length;u++){if(h!==d[u].dims.length)throw new Error("Input shapes are mismatched.");for(let o=0;o<h;o++)if(d[0].dims[o]!==d[u].dims[o])throw new Error("Input shapes are not matched.")}if(d[0].type!=="float32"&&d[0].type!=="float64")throw new Error("Invalid input type.");for(let u=1;u<d.length;u++)if(d[0].type!==d[u].type)throw new Error("Input types are not matched.")}},5944:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.tile=void 0;let c=l(6145),a=l(5639);i.tile=(d,h)=>{p(h);let u={name:"Tile",inputNames:["A"],inputTypes:[a.TextureType.unpacked]};return[d.run(Object.assign(Object.assign({},u),{get:()=>f(d,h,u)}),h)]};let f=(d,h,u)=>{let o=h[0].dims.slice(),n=new Array(o.length),e=[];for(let s=0;s<o.length;s++)n[s]=o[s]*h[1].numberData[s],e.push(`inputIdx[${s}] = int(mod(float(outputIdx[${s}]), ${o[s]}.));`);let t=n.length,r=`
      float process(int outputIdx[${t}]) {
        int inputIdx[${t}];
        ${e.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},u),{output:{dims:n,type:h[0].type,textureType:a.TextureType.unpacked},shaderSource:r})},p=d=>{if(!d||d.length!==2)throw new Error("Tile requires 2 input.");if(d[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(d[1].dims[0]!==d[0].dims.length)throw new Error("Invalid input shape.");if(c.NUMBER_TYPES.indexOf(d[0].type)===-1)throw new Error("Invalid input type.");if(d[1].type!=="int32"&&d[1].type!=="int16")throw new Error("Invalid repeat type.")}},5707:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseTransposeAttributes=i.transpose=void 0;let c=l(4910),a=l(7273),f=l(5639),p={name:"Transpose",inputNames:["A"],inputTypes:[f.TextureType.unpacked]};i.transpose=(e,t,r)=>(n(t),[e.run(Object.assign(Object.assign({},p),{cacheHint:r.cacheKey,get:()=>d(e,t[0],r.perm)}),t)]),i.parseTransposeAttributes=e=>(0,c.createAttributeWithCacheKey)({perm:e.attributes.getInts("perm",[])});let d=(e,t,r)=>{let s=t.dims;r=h(s,r);let g=u(s,r),m=s.length,y=`
      ${o("perm",r,m)}
      float process(int indices[${m}]) {
        int a[${m}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},p),{output:{dims:g,type:t.type,textureType:f.TextureType.unpacked},shaderSource:y})},h=(e,t)=>(t&&t.length!==e.length&&(t=[...e.keys()].reverse()),t),u=(e,t)=>(t=h(e,t),a.ShapeUtil.sortBasedOnPerm(e,t)),o=(e,t,r)=>{let s=[];s.push(`void ${e}(out int a[${r}], int src[${r}]) {`);for(let g=0;g<r;++g)s.push(`	a[${t[g]}]=src[${g}];`);return s.push("	}"),s.join(`
`)},n=e=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.");if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("input should be float tensor")}},2488:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.encodeAsUint8=void 0;let c=l(6757),a=l(5639);i.encodeAsUint8=(f,p)=>{let d=p.shape,h=(0,c.getGlsl)(f.session.backend.glContext.version),u=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${h.texture2D}(X,TexCoords).r;
      ${h.output} = encodeAsUint8(value);
    }`,o={name:"Uint8Encode",inputTypes:[a.TextureType.unpacked],inputNames:["X"],output:{dims:d,type:p.tensor.type,textureType:a.TextureType.downloadUint8AsFloat},shaderSource:u,hasMain:!0};return f.executeProgram(o,[p.tensor])}},9087:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.tanh=i.tan=i.sqrt=i.sin=i.sigmoid=i.relu=i.not=i.neg=i.log=i.parseLeakyReluAttributes=i.leakyRelu=i.identity=i.floor=i.exp=i.parseEluAttributes=i.elu=i.cos=i.ceil=i.clipV11=i.parseClipAttributes=i.clip=i.atan=i.asin=i.acos=i.abs=i.glslTanh=i.glslTan=i.glslSqrt=i.glslSigmoid=i.glslRelu=i.glslSin=i.glslNot=i.glslNeg=i.glslLog=i.glslLeakyRelu=i.glslIdentity=i.glslClip=i.glslFloor=i.glslExp=i.glslElu=i.glslCos=i.glslCeil=i.glslAtan=i.glslAsin=i.glslAcos=i.glslAbs=void 0;let c=l(4910),a=l(7273),f=l(1997),p=l(6757),d=l(5639);function h(){return E("abs")}function u(){return E("acos")}function o(){return E("asin")}function n(){return E("atan")}function e(){return E("ceil")}function t(){return E("cos")}function r(k){let N="elu";return{body:`
  const float alpha = float(${k});

  float ${N}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${N}_(vec4 v) {
    return vec4(${N}_(v.x), ${N}_(v.y), ${N}_(v.z), ${N}_(v.w));
  }
  `,name:N,type:f.FunctionType.ValueBased}}function s(){return E("exp")}function g(){return E("floor")}function m(k,N){let L="clip";return{body:`
  const float min = float(${k});
  const float max = float(${N});

  float ${L}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${L}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:L,type:f.FunctionType.ValueBased}}function y(){let k="indentity";return{body:`
  float ${k}_(float a) {
    return a;
  }
  vec4 ${k}_(vec4 v) {
    return v;
  }
  `,name:k,type:f.FunctionType.ValueBased}}function _(k){let N="leakyRelu";return{body:`
  const float alpha = float(${k});

  float ${N}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${N}_(vec4 v) {
    return vec4(${N}_(v.x), ${N}_(v.y), ${N}_(v.z), ${N}_(v.w));
  }
  `,name:N,type:f.FunctionType.ValueBased}}function T(){return E("log")}function w(){let k="neg";return{body:`
  float ${k}_(float a) {
    return -a;
  }
  vec4 ${k}_(vec4 v) {
    return -v;
  }
  `,name:k,type:f.FunctionType.ValueBased}}function x(){let k="not";return{body:`
  float ${k}_(float a) {
    return float( ! bool(a) );
  }
  bool ${k}_(bool a) {
    return !a;
  }
  vec4 ${k}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${k}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:k,type:f.FunctionType.ValueBased}}function S(){return E("sin")}function P(){let k="relu";return{body:`
  float ${k}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${k}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:k,type:f.FunctionType.ValueBased}}function C(){let k="sigmoid";return{body:`
  float ${k}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${k}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:k,type:f.FunctionType.ValueBased}}function M(){return E("sqrt")}function j(){return E("tan")}function B(){let k="tanh";return{body:`
  float ${k}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${k}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:k,type:f.FunctionType.ValueBased}}function E(k){return{body:`
  float ${k}_(float a) {
    return ${k}(a);
  }
  vec4 ${k}_(vec4 v) {
    return ${k}(v);
  }
  `,name:k,type:f.FunctionType.ValueBased}}i.glslAbs=h,i.glslAcos=u,i.glslAsin=o,i.glslAtan=n,i.glslCeil=e,i.glslCos=t,i.glslElu=r,i.glslExp=s,i.glslFloor=g,i.glslClip=m,i.glslIdentity=y,i.glslLeakyRelu=_,i.glslLog=T,i.glslNeg=w,i.glslNot=x,i.glslSin=S,i.glslRelu=P,i.glslSigmoid=C,i.glslSqrt=M,i.glslTan=j,i.glslTanh=B;let V=(k,N,L,z)=>{let J=k.session.pack?d.TextureType.packed:d.TextureType.unpacked,Z={name:L.name,inputTypes:[J],inputNames:["A"],cacheHint:z};return Object.assign(Object.assign({},Z),{get:()=>((Q,ne,re,se)=>{let ge=Q.session.pack?d.TextureType.packed:d.TextureType.unpacked,X=(0,p.getGlsl)(Q.session.backend.glContext.version);return Object.assign(Object.assign({},ne),{output:{dims:re.dims,type:re.type,textureType:ge},shaderSource:`
     ${se.body}
     void main() {
       vec4 v = ${X.texture2D}(A, TexCoords);
       v = ${se.name}_(v);
       ${X.output} = v;
     }
     `,hasMain:!0})})(k,Z,N,L)})};i.abs=(k,N)=>[k.run(V(k,N[0],h()),N)],i.acos=(k,N)=>[k.run(V(k,N[0],u()),N)],i.asin=(k,N)=>[k.run(V(k,N[0],o()),N)],i.atan=(k,N)=>[k.run(V(k,N[0],n()),N)],i.clip=(k,N,L)=>[k.run(V(k,N[0],m(L.min,L.max),L.cacheKey),N)],i.parseClipAttributes=k=>(0,c.createAttributeWithCacheKey)({min:k.attributes.getFloat("min",a.MIN_CLIP),max:k.attributes.getFloat("max",a.MAX_CLIP)}),i.clipV11=(k,N)=>{let L=O(k,N);return(0,i.clip)(k,[N[0]],L)};let O=(k,N)=>{if(N.length>=3&&(!k.session.isInitializer(N[1].dataId)||!k.session.isInitializer(N[2].dataId)))throw new Error("dynamic clip attributes are not allowed");let L=N.length>=3?N[1].numberData[0]:a.MIN_CLIP,z=N.length>=3?N[2].numberData[0]:a.MAX_CLIP;return(0,c.createAttributeWithCacheKey)({min:L,max:z})};i.ceil=(k,N)=>[k.run(V(k,N[0],e()),N)],i.cos=(k,N)=>[k.run(V(k,N[0],t()),N)],i.elu=(k,N,L)=>[k.run(V(k,N[0],r(L.alpha),L.cacheKey),N)],i.parseEluAttributes=k=>(0,c.createAttributeWithCacheKey)({alpha:k.attributes.getFloat("alpha",1)}),i.exp=(k,N)=>[k.run(V(k,N[0],s()),N)],i.floor=(k,N)=>[k.run(V(k,N[0],g()),N)],i.identity=(k,N)=>[k.run(V(k,N[0],y()),N)],i.leakyRelu=(k,N,L)=>[k.run(V(k,N[0],_(L.alpha),L.cacheKey),N)],i.parseLeakyReluAttributes=k=>(0,c.createAttributeWithCacheKey)({alpha:k.attributes.getFloat("alpha",.01)}),i.log=(k,N)=>[k.run(V(k,N[0],T()),N)],i.neg=(k,N)=>[k.run(V(k,N[0],w()),N)],i.not=(k,N)=>[k.run(V(k,N[0],x()),N)],i.relu=(k,N)=>[k.run(V(k,N[0],P()),N)],i.sigmoid=(k,N)=>[k.run(V(k,N[0],C()),N)],i.sin=(k,N)=>[k.run(V(k,N[0],S()),N)],i.sqrt=(k,N)=>[k.run(V(k,N[0],M()),N)],i.tan=(k,N)=>[k.run(V(k,N[0],j()),N)],i.tanh=(k,N)=>[k.run(V(k,N[0],B()),N)]},540:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.createUnpackProgramInfoLoader=i.createUnpackProgramInfo=void 0;let c=l(6757),a=l(5639),f=l(432),p=l(5614),d={name:"unpack",inputNames:["A"],inputTypes:[a.TextureType.packed]};i.createUnpackProgramInfo=(h,u)=>{let o=u.dims.length,n=(0,p.getChannels)("rc",o),e=n.slice(-2),t=(0,f.getCoordsDataType)(o),r=(0,p.unpackFromChannel)(),s=u.dims.length===0?"":function(y,_){if(y===1)return"rc";let T="";for(let w=0;w<y;w++)T+=_[w],w<y-1&&(T+=",");return T}(o,n),g=o<=1?"rc":`vec2(${e.join(",")})`,m=`
    ${r}
    void main() {
      ${t} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${s});

       ${(0,c.getGlsl)(h.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${g}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},d),{hasMain:!0,output:{dims:u.dims,type:u.type,textureType:a.TextureType.unpacked},shaderSource:m})},i.createUnpackProgramInfoLoader=(h,u)=>Object.assign(Object.assign({},d),{get:()=>(0,i.createUnpackProgramInfo)(h,u)})},7862:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseUnsqueezeAttributes=i.unsqueezeV13=i.unsqueeze=void 0;let c=l(7273);i.unsqueeze=(p,d,h)=>{a(d);let u=c.ShapeUtil.unsqueezeShape(d[0].dims,h);return[p.reshapeUnpacked(d[0],u)]},i.unsqueezeV13=(p,d)=>(f(d),(0,i.unsqueeze)(p,[d[0]],Array.from(d[1].integerData))),i.parseUnsqueezeAttributes=p=>p.attributes.getInts("axes");let a=p=>{if(!p||p.length!==1)throw new Error("Unsqueeze requires 1 input.");if(p[0].type==="string")throw new Error("invalid input tensor types.")},f=p=>{if(!p||p.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(p[1].type!=="int32")throw new Error("Invalid input type.")}},3980:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.scalesValidation=i.validateInputs=i.parseUpsampleAttributes=i.parseUpsampleAttributesV9=i.parseUpsampleAttributesV7=i.upsample=void 0;let c=l(4910),a=l(6757),f=l(5639),p={name:"Upsample",inputNames:["X"],inputTypes:[f.TextureType.unpacked]};i.upsample=(h,u,o)=>((0,i.validateInputs)(u,o),[h.run(Object.assign(Object.assign({},p),{cacheHint:o.cacheKey,get:()=>d(h,u,o)}),u)]),i.parseUpsampleAttributesV7=h=>(0,i.parseUpsampleAttributes)(h,7),i.parseUpsampleAttributesV9=h=>(0,i.parseUpsampleAttributes)(h,9),i.parseUpsampleAttributes=(h,u)=>{let o=u>=10,n=h.attributes.getString("mode","nearest");if(n!=="nearest"&&n!=="linear"&&(u<11||n!=="cubic"))throw new Error(`unrecognized mode: ${n}`);let e=[];u<9&&(e=h.attributes.getFloats("scales"),(0,i.scalesValidation)(e,n,o));let t=h.attributes.getFloat("extrapolation_value",0),r=u>10?h.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(r)===-1)throw new Error(`coordinate_transform_mode '${r}' is not supported`);let s=r==="tf_crop_and_resize",g=s,m=n==="nearest"&&u>=11?h.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(m)===-1)throw new Error(`nearest_mode '${m}' is not supported`);let y=h.attributes.getFloat("cubic_coeff_a",-.75),_=h.attributes.getInt("exclude_outside",0)!==0;if(_&&n!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let T=u<11||n==="nearest"&&r==="asymmetric"&&m==="floor",w=0,x=0,S=0;return u>10?h.inputs.length>2?(w=1,x=2,S=3):(x=1,S=2):u===9&&(x=1),(0,c.createAttributeWithCacheKey)({opset:u,isResize:o,mode:n,scales:e,extrapolationValue:t,coordinateTransformMode:r,useExtrapolation:g,needRoiInput:s,nearestMode:m,cubicCoefficientA:y,excludeOutside:_,useNearest2xOptimization:T,roiInputIdx:w,scalesInputIdx:x,sizesInputIdx:S})};let d=(h,u,o)=>{let n=(0,a.getGlsl)(h.session.backend.glContext.version),[e,t]=h.calculateTextureWidthAndHeight(u[0].dims,f.TextureType.unpacked),r=u[0].dims.map((S,P)=>Math.floor(S*o.scales[P])),[s,g]=h.calculateTextureWidthAndHeight(r,f.TextureType.unpacked),m=r.length,y=new Array(m),_=new Array(m),T=`
      int output_pitches[${m}];
      int input_pitches[${m}];
      `;for(let S=m-1;S>=0;S--)y[S]=S===m-1?1:y[S+1]*r[S+1],_[S]=S===m-1?1:_[S+1]*u[0].dims[S+1],T+=`
        output_pitches[${S}] = ${y[S]};
        input_pitches[${S}] = ${_[S]};
        `;let w=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${e}, ${t});
        float value = getColorAsFloat(${n.texture2D}(X, coords));
        return value;
      }
      `,x=o.mode==="nearest"?`
    ${w}
    float process(int indices[${m}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${s}, ${g});

      ${T}

      int d, m;
      for (int dim = 0; dim < ${m}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:m===4?`
    ${w}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${s}, ${g});

      ${T}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${u[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${w}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${s}, ${g});

      ${T}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${u[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},p),{output:{dims:r,type:u[0].type,textureType:f.TextureType.unpacked},shaderSource:x,variables:[{name:"scales",type:"int",arrayLength:o.scales.length,data:o.scales.map(S=>Math.ceil(S))}]})};i.validateInputs=(h,u)=>{if(!h||u.opset<9&&h.length!==1||u.opset>=9&&u.opset<11&&h.length!==2||u.opset>=11&&h.length<2)throw new Error("invalid inputs.");if(u.scales.length>0&&h[0].dims.length!==u.scales.length)throw new Error("Invalid input shape.");if(h[0].type==="string")throw new Error("Invalid input tensor types.")},i.scalesValidation=(h,u,o)=>{if(o){for(let n of h)if(n<=0)throw new Error("Scale value should be greater than 0.")}else for(let n of h)if(n<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(u!=="linear"&&u!=="cubic"||h.length===2||h.length===4&&h[0]===1&&h[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${o?"Resize":"Upsample"} opeartor.`)}},2757:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ProgramManager=void 0;let c=l(2235),a=l(1315),f=l(8897),p=l(6757);i.ProgramManager=class{constructor(d,h,u){this.profiler=d,this.glContext=h,this.textureLayoutStrategy=u,this.repo=new Map,this.attributesBound=!1}getArtifact(d){return this.repo.get(d)}setArtifact(d,h){this.repo.set(d,h)}run(d,h,u){var o;this.profiler.event("op",`ProgramManager.run ${(o=d.programInfo.name)!==null&&o!==void 0?o:"unknown kernel"}`,()=>{var n;let e=this.glContext.gl,t=d.program;e.useProgram(t);try{this.bindOutput(u),this.attributesBound||this.bindAttributes(d.attribLocations),this.bindUniforms(d.uniformLocations,(n=d.programInfo.variables)!==null&&n!==void 0?n:[],h)}catch(r){throw a.Logger.error("ProgramManager",d.programInfo.shaderSource),r}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(d=>this.glContext.deleteProgram(d.program))}build(d,h,u){return this.profiler.event("backend","ProgramManager.build",()=>{let o=new f.GlslPreprocessor(this.glContext,d,h,u),n=o.preprocess(),e=this.compile(n);return{programInfo:d,program:e,uniformLocations:this.getUniformLocations(e,o.context.programInfo.inputNames,o.context.programInfo.variables),attribLocations:this.getAttribLocations(e)}})}compile(d){if(!this.vertexShader){a.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let o=(0,p.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(o,this.glContext.gl.VERTEX_SHADER)}c.env.debug&&a.Logger.verbose("ProrgramManager",`FragShader:
${d}
`);let h=this.glContext.compileShader(d,this.glContext.gl.FRAGMENT_SHADER),u=this.glContext.createProgram(this.vertexShader,h);return this.glContext.deleteShader(h),u}bindOutput(d){let h=d.width,u=d.height;a.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${h}/${u}, shape=${d.shape}, type=${d.tensor.type}`),this.glContext.attachFramebuffer(d.texture,h,u)}bindAttributes(d){let h=d.position,u=d.textureCoord;this.glContext.setVertexAttributes(h,u),this.attributesBound=!0}bindUniforms(d,h,u){var o;let n=this.glContext.gl,e=0;for(let{name:t,type:r,location:s,arrayLength:g}of d){let m=(o=h.find(y=>y.name===t))===null||o===void 0?void 0:o.data;if(r!=="sampler2D"&&!m)throw new Error(`variable '${t}' does not have data defined in program info`);switch(r){case"sampler2D":this.bindTexture(u[e],s,e),e++;break;case"float":g?n.uniform1fv(s,m):n.uniform1f(s,m);break;case"int":g?n.uniform1iv(s,m):n.uniform1i(s,m);break;default:throw new Error(`Uniform not implemented: ${r}`)}}}bindTexture(d,h,u){this.glContext.bindTextureToUniform(d.texture,u,h)}getAttribLocations(d){return{position:this.getAttribLocation(d,"position"),textureCoord:this.getAttribLocation(d,"textureCoord")}}getUniformLocations(d,h,u){let o=[];if(h)for(let n of h)o.push({name:n,type:"sampler2D",location:this.getUniformLocation(d,n)});if(u)for(let n of u)o.push(Object.assign(Object.assign({},n),{location:this.getUniformLocation(d,n.name)}));return o}getUniformLocation(d,h){let u=this.glContext.gl.getUniformLocation(d,h);if(u===null)throw new Error(`Uniform ${h} not found.`);return u}getAttribLocation(d,h){return this.glContext.gl.getAttribLocation(d,h)}}},2171:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.WebGLSessionHandler=void 0;let c=l(1315),a=l(5881),f=l(7860),p=l(4110),d=l(2757),h=l(7618),u=l(5243);i.WebGLSessionHandler=class{constructor(o,n){this.backend=o,this.context=n,this.layoutStrategy=new h.PreferLogicalStrategy(o.glContext.maxTextureSize),this.programManager=new d.ProgramManager(this.context.profiler,o.glContext,this.layoutStrategy),this.textureManager=new u.TextureManager(o.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:o.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=o.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new f.WebGLInferenceHandler(this)}onGraphInitialized(o){let n=o.getValues().filter(e=>e.from===-1&&e.tensor).map(e=>e.tensor.dataId);this.initializers=new Set(n)}isInitializer(o){return!!this.initializers&&this.initializers.has(o)}addInitializer(o){this.initializers.add(o)}getTextureData(o,n){return n?this.packedTextureDataCache.get(o):this.unpackedTextureDataCache.get(o)}setTextureData(o,n,e=!1){c.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),e?this.packedTextureDataCache.set(o,n):this.unpackedTextureDataCache.set(o,n)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(o=>this.textureManager.releaseTexture(o,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(o=>this.textureManager.releaseTexture(o,!0)),this.unpackedTextureDataCache=new Map}resolve(o,n,e){let t=(0,a.resolveOperator)(o,n,p.WEBGL_OP_RESOLVE_RULES);return{impl:t.opImpl,context:t.opInit?t.opInit(o,e):o}}}},9622:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Uint8DataEncoder=i.RGBAFloatDataEncoder=i.RedFloat32DataEncoder=void 0;let c=l(1315);i.RedFloat32DataEncoder=class{constructor(a,f=1){if(f===1)this.internalFormat=a.R32F,this.format=a.RED,this.textureType=a.FLOAT,this.channelSize=f;else{if(f!==4)throw new Error(`Invalid number of channels: ${f}`);this.internalFormat=a.RGBA32F,this.format=a.RGBA,this.textureType=a.FLOAT,this.channelSize=f}}encode(a,f){let p,d;return a.constructor!==Float32Array&&(c.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),d=new Float32Array(a)),f*this.channelSize>a.length?(c.Logger.warning("Encoder","Source data too small. Allocating larger array"),d=a,p=this.allocate(f*this.channelSize),d.forEach((h,u)=>p[u]=h)):(d=a,p=d),p}allocate(a){return new Float32Array(4*a)}decode(a,f){return this.channelSize===1?a.filter((p,d)=>d%4==0).subarray(0,f):a.subarray(0,f)}},i.RGBAFloatDataEncoder=class{constructor(a,f=1,p){if(f!==1&&f!==4)throw new Error(`Invalid number of channels: ${f}`);this.internalFormat=a.RGBA,this.format=a.RGBA,this.channelSize=f,this.textureType=p||a.FLOAT}encode(a,f){let p=a;return this.channelSize===1&&(c.Logger.verbose("Encoder","Exploding into a larger array"),p=this.allocate(f),a.forEach((d,h)=>p[4*h]=d)),p}allocate(a){return new Float32Array(4*a)}decode(a,f){return this.channelSize===1?a.filter((p,d)=>d%4==0).subarray(0,f):a.subarray(0,f)}},i.Uint8DataEncoder=class{constructor(a,f=1){if(this.channelSize=4,f===1)this.internalFormat=a.ALPHA,this.format=a.ALPHA,this.textureType=a.UNSIGNED_BYTE,this.channelSize=f;else{if(f!==4)throw new Error(`Invalid number of channels: ${f}`);this.internalFormat=a.RGBA,this.format=a.RGBA,this.textureType=a.UNSIGNED_BYTE,this.channelSize=f}}encode(a,f){return new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}allocate(a){return new Uint8Array(a*this.channelSize)}decode(a,f){if(a instanceof Uint8Array)return a.subarray(0,f);throw new Error(`Invalid array type: ${a.constructor}`)}}},7618:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getBatchDim=i.sizeToSquarishShape=i.getRowsCols=i.sizeFromShape=i.isInt=i.parseAxisParam=i.squeezeShape=i.PreferLogicalStrategy=i.AlwaysKeepOriginalSizeStrategy=void 0;let c=l(1315),a=l(7273);function f(o,n){let e=[],t=[],r=n!=null&&Array.isArray(n)&&n.length===0,s=n==null||r?null:p(n,o).sort(),g=0;for(let m=0;m<o.length;++m){if(s!=null){if(s[g]===m&&o[m]!==1)throw new Error(`Can't squeeze axis ${m} since its dim '${o[m]}' is not 1`);(s[g]==null||s[g]>m)&&o[m]===1&&(e.push(o[m]),t.push(m)),s[g]<=m&&g++}o[m]!==1&&(e.push(o[m]),t.push(m))}return{newShape:e,keptDims:t}}function p(o,n){let e=n.length;return o=o==null?n.map((t,r)=>r):[].concat(o),(0,a.assert)(o.every(t=>t>=-e&&t<e),()=>`All values in axis param must be in range [-${e}, ${e}) but got axis ${o}`),(0,a.assert)(o.every(d),()=>`All values in axis param must be integers but got axis ${o}`),o.map(t=>t<0?e+t:t)}function d(o){return o%1==0}function h(o){if(o.length===0)return 1;let n=o[0];for(let e=1;e<o.length;e++)n*=o[e];return n}function u(o){let n=Math.ceil(Math.sqrt(o));return[n,Math.ceil(o/n)]}i.AlwaysKeepOriginalSizeStrategy=class{constructor(o){this.maxTextureSize=o}computeTextureWH(o,n){if(o.length===0)return[1,1];let e=this.maxTextureSize;if(n&&n.breakAxis!==void 0){let s=n.breakAxis>=o.length?1:o.slice(n.breakAxis).reduce((m,y)=>m*y),g=n.breakAxis<=0?1:o.slice(0,n.breakAxis).reduce((m,y)=>m*y);if(!(s>e||g>e))return[s,g];c.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${o}, breakAxis:${n.breakAxis}`)}let t=o.reduce((s,g)=>s*g),r=Math.floor(Math.sqrt(t));for(;r<e&&r<t&&t%r!=0;r++);if(r>=e||t%r!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${o}`);return[r,t/r]}},i.PreferLogicalStrategy=class{constructor(o){this.maxTextureSize=o}computeTextureWH(o,n){let e=this.computeTexture(o,n);return n&&n.isPacked&&(e[0]/=2,e[1]/=2),n&&n.reverseWH?[e[1],e[0]]:e}computeTexture(o,n){let e=n&&n.isPacked;if(o.length===0)return e?[2,2]:[1,1];let t=this.maxTextureSize;if(n&&n.breakAxis!==void 0){let g=n.breakAxis>=o.length?1:o.slice(n.breakAxis).reduce((y,_)=>y*_),m=n.breakAxis<=0?1:o.slice(0,n.breakAxis).reduce((y,_)=>y*_);if(!(g>t||m>t))return[g,m];c.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${o}, breakAxis:${n.breakAxis}`)}let r=o.slice(0);e&&(t*=2,r=r.map((g,m)=>m>=r.length-2?r[m]%2==0?r[m]:r[m]+1:r[m]),r.length===1&&(r=[2,r[0]])),r.length!==2&&(r=f(r).newShape);let s=h(r);return r.length<=1&&s<=t?[1,s]:r.length===2&&r[0]<=t&&r[1]<=t?r:r.length===3&&r[0]*r[1]<=t&&r[2]<=t?[r[0]*r[1],r[2]]:r.length===3&&r[0]<=t&&r[1]*r[2]<=t?[r[0],r[1]*r[2]]:r.length===4&&r[0]*r[1]*r[2]<=t&&r[3]<=t?[r[0]*r[1]*r[2],r[3]]:r.length===4&&r[0]<=t&&r[1]*r[2]*r[3]<=t?[r[0],r[1]*r[2]*r[3]]:e?u(s/4).map(g=>2*g):u(s)}},i.squeezeShape=f,i.parseAxisParam=p,i.isInt=d,i.sizeFromShape=h,i.getRowsCols=function(o){if(o.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[o.length>1?o[o.length-2]:1,o[o.length-1]]},i.sizeToSquarishShape=u,i.getBatchDim=function(o,n=2){return h(o.slice(0,o.length-n))}},3314:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.createTextureLayoutFromShape=i.calculateTextureWidthAndHeight=i.createTextureLayoutFromTextureType=void 0;let c=l(7273),a=l(5639);i.createTextureLayoutFromTextureType=(f,p,d)=>{let h=d===a.TextureType.unpacked||d===a.TextureType.unpackedReversed?1:4,u=d===a.TextureType.packed,o=d===a.TextureType.unpackedReversed||d===a.TextureType.packed,n=d===a.TextureType.packedLastDimension?p.length-1:void 0,e=d===a.TextureType.packedLastDimension?p.map((t,r)=>r===p.length-1?4*t:t):void 0;return(0,i.createTextureLayoutFromShape)(f,p,h,e,{isPacked:u,reverseWH:o,breakAxis:n})},i.calculateTextureWidthAndHeight=(f,p,d)=>{let h=(0,i.createTextureLayoutFromTextureType)(f,p,d);return[h.width,h.height]},i.createTextureLayoutFromShape=(f,p,d=1,h,u)=>{let o=!(!u||!u.isPacked),[n,e]=f.computeTextureWH(o&&h||p,u),t=p.length,r=p.slice(0);if(t===0&&(r=[1]),d===1)h=p;else if(o){if(d!==4)throw new Error("a packed texture must be 4-channel");h=p,t>0&&(r[t-1]=Math.ceil(r[t-1]/2)),t>1&&(r[t-2]=Math.ceil(r[t-2]/2))}else if(!h)throw new Error("Unpacked shape is needed when using channels > 1");return{width:n,height:e,channels:d,isPacked:o,shape:r,strides:c.ShapeUtil.computeStrides(r),unpackedShape:h,reversedWH:u&&u.reverseWH}}},5243:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TextureManager=void 0;let c=l(1315);i.TextureManager=class{constructor(a,f,p,d){this.glContext=a,this.layoutStrategy=f,this.profiler=p,this.config=d,this.pendingRead=new Map,d.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(a,f,p,d){let h=this.toEncoderType(a),u=this.glContext.getEncoder(h,f.channels||1,d);if(f.isPacked&&d===1)throw new Error("not implemented");let o=f.width,n=f.height,e,t;if(this.config.reuseTextures){e=`${o}x${n}_${u.format}_${u.internalFormat}_${u.textureType}`,t=this.inUseTextures.get(e),t||(t=[],this.inUseTextures.set(e,t));let s=this.idleTextures.get(e);if(s&&s.length>0){let g=s.pop();return t.push(g),d===1&&this.glContext.updateTexture(g,o,n,u,this.toTextureData(a,p)),g}}c.Logger.verbose("TextureManager",`Creating new texture of size ${f.width}x${f.height}`);let r=this.glContext.allocateTexture(o,n,u,this.toTextureData(a,p));return this.config.reuseTextures&&(t.push(r),this.textureLookup.set(r,e)),r}readTexture(a,f,p){return p||(p=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let d=a.shape.reduce((u,o)=>u*o)*p,h=this.glContext.readTexture(a.texture,a.width,a.height,d,this.toEncoderType(f),p);return this.toTensorData(f,h)})}async readTextureAsync(a,f,p){let d=a.tensor.dataId;if(p||(p=1),this.pendingRead.has(d)){let h=this.pendingRead.get(d);return new Promise(u=>h?.push(u))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(d,[]);let h=a.shape.reduce((e,t)=>e*t)*p;await this.glContext.createAndWaitForFence();let u=this.glContext.readTexture(a.texture,a.width,a.height,h,this.toEncoderType(f),p),o=this.toTensorData(f,u),n=this.pendingRead.get(d);return this.pendingRead.delete(d),n?.forEach(e=>e(o)),o})}readUint8TextureAsFloat(a){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let f=a.shape.reduce((d,h)=>d*h),p=this.glContext.readTexture(a.texture,a.width,a.height,4*f,"byte",4);return new Float32Array(p.buffer,p.byteOffset,f)})}releaseTexture(a,f){let p;if(this.config.reuseTextures&&(p=this.textureLookup.get(a.texture),p)){f&&this.textureLookup.delete(p);let d=this.inUseTextures.get(p);if(d){let h=d.indexOf(a.texture);if(h!==-1){d.splice(h,1);let u=this.idleTextures.get(p);u||(u=[],this.idleTextures.set(p,u)),u.push(a.texture)}}}p&&!f||(c.Logger.verbose("TextureManager",`Deleting texture of size ${a.width}x${a.height}`),this.glContext.deleteTexture(a.texture))}toTensorData(a,f){switch(a){case"int16":return f instanceof Int16Array?f:Int16Array.from(f);case"int32":return f instanceof Int32Array?f:Int32Array.from(f);case"int8":return f instanceof Int8Array?f:Int8Array.from(f);case"uint16":return f instanceof Uint16Array?f:Uint16Array.from(f);case"uint32":return f instanceof Uint32Array?f:Uint32Array.from(f);case"uint8":case"bool":return f instanceof Uint8Array?f:Uint8Array.from(f);case"float32":return f instanceof Float32Array?f:Float32Array.from(f);case"float64":return f instanceof Float64Array?f:Float64Array.from(f);default:throw new Error(`TensorData type ${a} is not supported`)}}toTextureData(a,f){if(f)return f instanceof Float32Array?f:new Float32Array(f)}toEncoderType(a){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},5639:(b,i)=>{"use strict";var l;Object.defineProperty(i,"__esModule",{value:!0}),i.TextureType=void 0,(l=i.TextureType||(i.TextureType={}))[l.unpacked=0]="unpacked",l[l.unpackedReversed=1]="unpackedReversed",l[l.packed=2]="packed",l[l.downloadUint8AsFloat=3]="downloadUint8AsFloat",l[l.packedLastDimension=4]="packedLastDimension"},432:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getGlChannels=i.getCoordsDataType=i.getSqueezedParams=i.squeezeInputShape=i.generateShaderFuncNameFromInputSamplerNameAtOutCoords=i.generateShaderFuncNameFromInputSamplerName=i.repeatedTry=i.getPackedShape=void 0;let c=l(7273);i.getPackedShape=function(a){let f=a.length;return a.slice(0,f-1).concat(a[f-1]/4)},i.repeatedTry=async function(a,f=d=>0,p){return new Promise((d,h)=>{let u=0,o=()=>{if(a())return void d();u++;let n=f(u);p!=null&&u>=p?h():setTimeout(o,n)};o()})},i.generateShaderFuncNameFromInputSamplerName=function(a){return(0,c.assert)(a!==void 0&&a.length!==0,()=>"empty string found for sampler name"),"get"+a.charAt(0).toUpperCase()+a.slice(1)},i.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(a){return(0,c.assert)(a!==void 0&&a.length!==0,()=>"empty string found for sampler name"),"get"+a.charAt(0).toUpperCase()+a.slice(1)+"AtOutCoords"},i.squeezeInputShape=function(a,f){let p=JSON.parse(JSON.stringify(a));return p=f,p},i.getSqueezedParams=function(a,f){return f.map(p=>a[p]).join(", ")},i.getCoordsDataType=function(a){if(a<=1)return"int";if(a===2)return"ivec2";if(a===3)return"ivec3";if(a===4)return"ivec4";if(a===5)return"ivec5";if(a===6)return"ivec6";throw Error(`GPU for rank ${a} is not yet supported`)},i.getGlChannels=function(a=6){return["x","y","z","w","u","v"].slice(0,a)}},3389:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.createNewWebGLContext=i.createWebGLContext=void 0;let c=l(1315),a=l(3524),f={};function p(d,h){let u,o={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!h||h==="webgl2")&&(u=d.getContext("webgl2",o),u))try{return new a.WebGLContext(u,2)}catch(n){c.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${n}`)}if((!h||h==="webgl")&&(u=d.getContext("webgl",o)||d.getContext("experimental-webgl",o),u))try{return new a.WebGLContext(u,1)}catch(n){c.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${n}`)}throw new Error("WebGL is not supported")}i.createWebGLContext=function d(h){let u;if(h&&h!=="webgl2"||!("webgl2"in f)?h&&h!=="webgl"||!("webgl"in f)||(u=f.webgl):u=f.webgl2,!u)try{u=p(function(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}(),h)}catch{u=p(function(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");let e=document.createElement("canvas");return e.width=1,e.height=1,e}(),h)}h=h||u.version===1?"webgl":"webgl2";let o=u.gl;return f[h]=u,o.isContextLost()?(delete f[h],d(h)):(o.disable(o.DEPTH_TEST),o.disable(o.STENCIL_TEST),o.disable(o.BLEND),o.disable(o.DITHER),o.disable(o.POLYGON_OFFSET_FILL),o.disable(o.SAMPLE_COVERAGE),o.enable(o.SCISSOR_TEST),o.enable(o.CULL_FACE),o.cullFace(o.BACK),u)},i.createNewWebGLContext=p},3524:function(b,i,l){"use strict";var c=this&&this.__createBinding||(Object.create?function(o,n,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(n,e);r&&!("get"in r?!n.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return n[e]}}),Object.defineProperty(o,t,r)}:function(o,n,e,t){t===void 0&&(t=e),o[t]=n[e]}),a=this&&this.__setModuleDefault||(Object.create?function(o,n){Object.defineProperty(o,"default",{enumerable:!0,value:n})}:function(o,n){o.default=n}),f=this&&this.__importStar||function(o){if(o&&o.__esModule)return o;var n={};if(o!=null)for(var e in o)e!=="default"&&Object.prototype.hasOwnProperty.call(o,e)&&c(n,o,e);return a(n,o),n};Object.defineProperty(i,"__esModule",{value:!0}),i.WebGLContext=i.linearSearchLastTrue=void 0;let p=l(2235),d=f(l(9622)),h=l(432);function u(o){let n=0;for(;n<o.length&&o[n]();++n);return n-1}i.linearSearchLastTrue=u,i.WebGLContext=class{constructor(o,n){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=o,this.version=n,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(o,n,e,t){let r=this.gl,s=r.createTexture();r.bindTexture(r.TEXTURE_2D,s),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE);let g=t?e.encode(t,o*n):null;return r.texImage2D(r.TEXTURE_2D,0,e.internalFormat,o,n,0,e.format,e.textureType,g),this.checkError(),s}updateTexture(o,n,e,t,r){let s=this.gl;s.bindTexture(s.TEXTURE_2D,o);let g=t.encode(r,n*e);s.texSubImage2D(s.TEXTURE_2D,0,0,0,n,e,t.format,t.textureType,g),this.checkError()}attachFramebuffer(o,n,e){let t=this.gl;t.bindTexture(t.TEXTURE_2D,o),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0),this.checkError(),t.viewport(0,0,n,e),t.scissor(0,0,n,e)}readTexture(o,n,e,t,r,s){let g=this.gl;s||(s=1),this.frameBufferBound||this.attachFramebuffer(o,n,e);let m=this.getEncoder(r,s),y=m.allocate(n*e);return g.bindTexture(g.TEXTURE_2D,o),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,o,0),g.readPixels(0,0,n,e,g.RGBA,m.textureType,y),this.checkError(),m.decode(y,t)}isFramebufferReady(){return!0}getActiveTexture(){let o=this.gl;return"TEXTURE"+(o.getParameter(this.gl.ACTIVE_TEXTURE)-o.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(o,n){let e=this.gl;e.vertexAttribPointer(o,3,e.FLOAT,!1,20,0),e.enableVertexAttribArray(o),n!==-1&&(e.vertexAttribPointer(n,2,e.FLOAT,!1,20,12),e.enableVertexAttribArray(n)),this.checkError()}createProgram(o,n){let e=this.gl,t=e.createProgram();return e.attachShader(t,o),e.attachShader(t,n),e.linkProgram(t),t}compileShader(o,n){let e=this.gl,t=e.createShader(n);if(!t)throw new Error(`createShader() returned null with type ${n}`);if(e.shaderSource(t,o),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${e.getShaderInfoLog(t)}
Shader source:
${o}`);return t}deleteShader(o){this.gl.deleteShader(o)}bindTextureToUniform(o,n,e){let t=this.gl;t.activeTexture(t.TEXTURE0+n),this.checkError(),t.bindTexture(t.TEXTURE_2D,o),this.checkError(),t.uniform1i(e,n),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(p.env.debug){let o=this.gl,n=o.getError(),e="";switch(n){case o.NO_ERROR:return;case o.INVALID_ENUM:e="INVALID_ENUM";break;case o.INVALID_VALUE:e="INVALID_VALUE";break;case o.INVALID_OPERATION:e="INVALID_OPERATION";break;case o.INVALID_FRAMEBUFFER_OPERATION:e="INVALID_FRAMEBUFFER_OPERATION";break;case o.OUT_OF_MEMORY:e="OUT_OF_MEMORY";break;case o.CONTEXT_LOST_WEBGL:e="CONTEXT_LOST_WEBGL";break;default:e=`Unknown WebGL Error: ${n.toString(16)}`}throw new Error(e)}}deleteTexture(o){this.gl.deleteTexture(o)}deleteProgram(o){this.gl.deleteProgram(o)}getEncoder(o,n,e=0){if(this.version===2)return new d.RedFloat32DataEncoder(this.gl,n);switch(o){case"float":return e===1||this.isRenderFloat32Supported?new d.RGBAFloatDataEncoder(this.gl,n):new d.RGBAFloatDataEncoder(this.gl,n,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new d.Uint8DataEncoder(this.gl,n);default:throw new Error(`Invalid dataType: ${o}`)}}clearActiveTextures(){let o=this.gl;for(let n=0;n<this.maxTextureImageUnits;++n)o.activeTexture(o.TEXTURE0+n),o.bindTexture(o.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,null),o.deleteFramebuffer(this.framebuffer),o.bindBuffer(o.ARRAY_BUFFER,null),o.deleteBuffer(this.vertexbuffer),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null),o.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let o=this.gl,n=o.createBuffer();if(!n)throw new Error("createBuffer() returned null");let e=this.createDefaultGeometry();return o.bindBuffer(o.ARRAY_BUFFER,n),o.bufferData(o.ARRAY_BUFFER,e,o.STATIC_DRAW),this.checkError(),n}createFramebuffer(){let o=this.gl.createFramebuffer();if(!o)throw new Error("createFramebuffer returned null");return o}queryVitalParameters(){let o=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let o=this.gl,n=o.createTexture();o.bindTexture(o.TEXTURE_2D,n);let e=this.version===2?o.RGBA32F:o.RGBA;o.texImage2D(o.TEXTURE_2D,0,e,1,1,0,o.RGBA,o.FLOAT,null);let t=o.createFramebuffer();o.bindFramebuffer(o.FRAMEBUFFER,t),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,n,0);let r=o.checkFramebufferStatus(o.FRAMEBUFFER)===o.FRAMEBUFFER_COMPLETE;return o.bindTexture(o.TEXTURE_2D,null),o.bindFramebuffer(o.FRAMEBUFFER,null),o.deleteTexture(n),o.deleteFramebuffer(t),r}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let o=this.gl,n,e,t,r,s;try{n=o.createTexture(),e=o.createFramebuffer(),o.bindTexture(o.TEXTURE_2D,n);let g=this.version===2?o.RGBA32F:o.RGBA;return o.texImage2D(o.TEXTURE_2D,0,g,1,1,0,o.RGBA,o.FLOAT,null),o.bindFramebuffer(o.FRAMEBUFFER,e),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,n,0),o.enable(o.BLEND),t=o.createShader(o.VERTEX_SHADER),!!t&&(o.shaderSource(t,"void main(){}"),o.compileShader(t),r=o.createShader(o.FRAGMENT_SHADER),!!r&&(o.shaderSource(r,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),o.compileShader(r),s=o.createProgram(),!!s&&(o.attachShader(s,t),o.attachShader(s,r),o.linkProgram(s),o.useProgram(s),o.drawArrays(o.POINTS,0,1),o.getError()===o.NO_ERROR)))}finally{o.disable(o.BLEND),s&&o.deleteProgram(s),t&&o.deleteShader(t),r&&o.deleteShader(r),e&&(o.bindFramebuffer(o.FRAMEBUFFER,null),o.deleteFramebuffer(e)),n&&(o.bindTexture(o.TEXTURE_2D,null),o.deleteTexture(n))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let o=this.gl,n=this.disjointTimerQueryWebgl2Extension,e=o.createQuery();return o.beginQuery(n.TIME_ELAPSED_EXT,e),e}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{let o=this.gl,n=this.disjointTimerQueryWebgl2Extension;o.endQuery(n.TIME_ELAPSED_EXT)}}isTimerResultAvailable(o){let n=!1,e=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{let t=this.gl,r=this.disjointTimerQueryWebgl2Extension;n=t.getQueryParameter(o,t.QUERY_RESULT_AVAILABLE),e=t.getParameter(r.GPU_DISJOINT_EXT)}return n&&!e}getTimerResult(o){let n=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{let e=this.gl;n=e.getQueryParameter(o,e.QUERY_RESULT),e.deleteQuery(o)}return n/1e6}async waitForQueryAndGetTime(o){return await(0,h.repeatedTry)(()=>this.isTimerResultAvailable(o)),this.getTimerResult(o)}async createAndWaitForFence(){let o=this.createFence(this.gl);return this.pollFence(o)}createFence(o){let n,e=o,t=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return o.flush(),n=t===null?()=>!0:()=>{let r=e.clientWaitSync(t,0,0);return r===e.ALREADY_SIGNALED||r===e.CONDITION_SATISFIED},{query:t,isFencePassed:n}}async pollFence(o){return new Promise(n=>{this.addItemToPoll(()=>o.isFencePassed(),()=>n())})}pollItems(){let o=u(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=o;++n){let{resolveFn:e}=this.itemsToPoll[n];e()}this.itemsToPoll=this.itemsToPoll.slice(o+1)}async addItemToPoll(o,n){this.itemsToPoll.push({isDoneFn:o,resolveFn:n}),this.itemsToPoll.length>1||await(0,h.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},6496:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ExecutionPlan=void 0;let c=l(1315);class a{constructor(p,d){this.op=p,this.node=d}}i.ExecutionPlan=class{constructor(f,p,d){this.graph=f,this.profiler=d,this.initialize(p)}initialize(f){this.profiler.event("session","ExecutionPlan.initialize",()=>{let p=this.graph.getNodes();if(p.length!==f.length)throw new Error("The size of nodes and OPs do not match.");this._ops=f.map((d,h)=>new a(d,p[h])),this.reset(),this._starter=[],this._ops.forEach((d,h)=>{let u=!0;for(let o of d.node.inputs)if(!this._values[o]&&this.graph.getInputIndices().indexOf(o)===-1){u=!1;break}u&&this._starter.push(h)})})}reset(){this._values=this.graph.getValues().map(f=>f.tensor)}async execute(f,p){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();let d=f.createInferenceHandler(),h=this.graph.getInputIndices();if(p.length!==h.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${p.length} expected: ${h.length}`);p.forEach((r,s)=>{let g=h[s];this._values[g]=r});let u=this._starter.slice(0),o=this.graph.getValues(),n=this.graph.getNodes(),e=0;for(;e<u.length;){let r=u[e++],s=this._ops[r],g=s.node.inputs.map(T=>this._values[T]);if(g.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${s.node}`);let m=g;c.Logger.verbose("ExecPlan",`Runing op:${s.node.name} (${m.map((T,w)=>`'${s.node.inputs[w]}': ${T.type}[${T.dims.join(",")}]`).join(", ")})`);let y=await this.profiler.event("node",s.node.name,async()=>s.op.impl(d,m,s.op.context));if(y.length!==s.node.outputs.length)throw new Error("the size of output does not match model definition.");y.forEach((T,w)=>{let x=s.node.outputs[w];if(this._values[x])throw new Error(`output [${x}] already has value: op:${s.node.name}`);this._values[x]=T});let _=new Set;y.forEach((T,w)=>{let x=s.node.outputs[w];for(let S of o[x].to){let P=n[S],C=!0;for(let M of P.inputs)if(!this._values[M]){C=!1;break}C&&_.add(S)}}),u.push(..._)}let t=[];for(let r=0;r<this.graph.getOutputIndices().length;r++){let s=this.graph.getOutputIndices()[r],g=this._values[s];if(g===void 0)throw new Error(`required output [${s}] does not have value`);s===0?await g.getData():g.data,t.push(g)}return c.Logger.verbose("ExecPlan","disposing of inferenceHandler"),d.dispose(),t})}}},4662:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Graph=void 0;let c=l(6874),a=l(5127),f=l(2446),p=l(9240),d=l(7273);var h=a.onnxruntime.experimental.fbs;i.Graph={from:(e,t)=>new n(e,t)};class u{constructor(t){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,t&&(this.type=d.ProtoUtil.tensorValueTypeFromProto(t.type.tensorType))}get from(){return this._from}get to(){return this._to}}class o{constructor(t,r){t instanceof f.onnx.NodeProto?(this.name=t.name,this.opType=t.opType,this.attributes=new c.Attribute(t.attribute)):t instanceof h.Node&&(this.name=r??t.name(),this.opType=t.opType(),this.attributes=new c.Attribute(d.ProtoUtil.tensorAttributesFromORTFormat(t))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class n{constructor(t,r){if(!t)throw new TypeError("graph is empty");this.buildGraph(t),this.transformGraph(r),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(t){if(t instanceof f.onnx.GraphProto)this.buildGraphFromOnnxFormat(t);else{if(!(t instanceof h.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(t)}}buildGraphFromOnnxFormat(t){let r=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let s=new Map;if(!t.input)throw new Error("missing information in graph: input");let g=[];for(let m of t.input){if(r.has(m.name))throw new Error(`duplicated input name: ${m.name}`);let y=this._allData.push(new u(m))-1;r.set(m.name,y),g.push(m.name)}if(!t.initializer)throw new Error("missing information in graph: initializer");for(let m of t.initializer){let y=r.get(m.name);if(y===void 0){let _=new u;_.type={shape:{dims:d.ProtoUtil.tensorDimsFromProto(m.dims)},tensorType:d.ProtoUtil.tensorDataTypeFromProto(m.dataType)},y=this._allData.push(_)-1,r.set(m.name,y)}this._allData[y]._from=-1,this._allData[y].tensor=p.Tensor.fromProto(m)}for(let m=0;m<this._allData.length;m++)this._allData[m].tensor||(this._allInputIndices.push(m),this._allInputNames.push(g[m]));if(!t.output)throw new Error("missing information in graph: output");for(let m of t.output){if(r.has(m.name))throw new Error(`duplicated output name: ${m.name}`);let y=this._allData.push(new u(m))-1;r.set(m.name,y),this._allOutputIndices.push(y),this._allOutputNames.push(m.name)}if(!t.node)throw new Error("missing information in graph: node");for(let m of t.node){if(!m.name)for(let _=0;;_++){let T=`unnamed_${m.opType}_${_}`;if(!s.has(T)){m.name=T;break}}if(s.has(m.name))throw new Error(`duplicated node name: ${m.name}`);let y=this._nodes.push(new o(m))-1;s.set(m.name,y)}for(let m=0;m<this._nodes.length;m++){let y=this._nodes[m],_=t.node[m];if(!_.output)throw new Error(`missing output for node: ${_.name}`);for(let T of _.output){let w=r.get(T);if(w===void 0&&(w=this._allData.push(new u)-1,r.set(T,w)),y.outputs.push(w),this._allData[w]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${w}`);if(this._allData[w]._from=m,_.opType==="Constant"){if(!_.attribute||_.attribute.length!==1||!_.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!_.output||_.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");y.outputs.pop(),y.executeNode=!1,this._allData[w]._from=-1,this._allData[w].tensor=p.Tensor.fromProto(_.attribute[0].t)}}}for(let m=0;m<this._nodes.length;m++){let y=this._nodes[m],_=t.node[m];if(!_.input)throw new Error(`missing input for node: ${_.name}`);for(let T of _.input){let w=r.get(T);if(w===void 0){if(T===""&&(_.input.length===3||_.input.length===4)&&_.opType==="Resize")continue;throw new Error(`unrecognized input '${T}' for node: ${_.name}`)}y.inputs.push(w),this._allData[w]._to.push(m)}}return!0}buildGraphFromOrtFormat(t){var r,s,g;let m=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let y=new Map,_=[];for(let T=0;T<t.inputsLength();T++){let w=t.inputs(T);if(m.has(w))throw new Error(`duplicated input name: ${w}`);for(let x=0;x<t.nodeArgsLength();x++)if(((r=t.nodeArgs(x))===null||r===void 0?void 0:r.name())===w){let S=new u;if(((g=(s=t.nodeArgs(x))===null||s===void 0?void 0:s.type())===null||g===void 0?void 0:g.valueType())!==h.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");let P=t.nodeArgs(x).type().value(new h.TensorTypeAndShape),C=d.ProtoUtil.tensorDataTypeFromProto(P.elemType()),M=P.shape(),j=[];for(let E=0;E<M.dimLength();E++)j.push(d.LongUtil.longToNumber(M.dim(E).value().dimValue()));S.type={shape:{dims:j},tensorType:C};let B=this._allData.push(S)-1;m.set(w,B),_.push(w)}}for(let T=0;T<t.initializersLength();T++){let w=t.initializers(T),x=m.get(w.name());if(x===void 0){let S=new u,P=d.ProtoUtil.tensorDimsFromORTFormat(w),C=d.ProtoUtil.tensorDataTypeFromProto(w.dataType());S.type={shape:{dims:P},tensorType:C},x=this._allData.push(S)-1,m.set(w.name(),x)}this._allData[x]._from=-1,this._allData[x].tensor=p.Tensor.fromOrtTensor(w)}for(let T=0;T<this._allData.length;T++)this._allData[T].tensor||(this._allInputIndices.push(T),this._allInputNames.push(_[T]));for(let T=0;T<t.outputsLength();T++){let w=t.outputs(T);if(m.has(w))throw new Error(`duplicated output name: ${w}`);let x=this._allData.push(new u)-1;m.set(w,x),this._allOutputIndices.push(x),this._allOutputNames.push(w)}if(!t.nodes)throw new Error("missing information in graph: node");for(let T=0;T<t.nodesLength();T++){let w=t.nodes(T),x=w.name();if(!x)for(let P=0;x=`unnamed_${w.opType()}_${P}`,y.has(x);P++);if(y.has(x))throw new Error(`duplicated node name: ${x}`);let S=this._nodes.push(new o(w,x))-1;y.set(x,S)}for(let T=0;T<this._nodes.length;T++){let w=this._nodes[T],x=t.nodes(T);if(x==null)throw new Error(`No node exists at index ${T}`);if(x?.outputsLength()===0)throw new Error(`missing output for node: ${x.name}`);for(let S=0;S<x?.outputsLength();S++){let P=x?.outputs(S),C=m.get(P);if(C===void 0&&(C=this._allData.push(new u)-1,m.set(P,C)),w.outputs.push(C),this._allData[C]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${C}`);if(this._allData[C]._from=T,x.opType()==="Constant"){if(x.attributesLength()!==1||!x.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(x.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");w.outputs.pop(),w.executeNode=!1,this._allData[C]._from=-1,this._allData[C].tensor=p.Tensor.fromOrtTensor(x.attributes(0).t())}}}for(let T=0;T<this._nodes.length;T++){let w=this._nodes[T],x=t.nodes(T);if(x.inputsLength()===0)throw new Error(`missing input for node: ${x.name}`);for(let S=0;S<x.inputsLength();S++){let P=x.inputs(S),C=m.get(P);if(C===void 0)throw new Error(`unrecognized input '${P}' for node: ${x.name()}`);w.inputs.push(C),this._allData[C]._to.push(T)}}}checkIsAcyclic(){let t=new Set;this._allInputIndices.forEach(g=>{this._allData[g]._to.forEach(m=>{t.add(m)})});let r=Array.from(t),s=new Array(this._nodes.length).fill("white");for(;r.length>0;){let g=r.pop();s[g]==="gray"?s[g]="black":(r.push(g),s[g]="gray",this._nodes[g].outputs.forEach(m=>{let y=this._allData[m];if(y.tensor!==void 0)throw new Error("node outputs should not be initialized");if(y._from!==g)throw new Error("from property of the Value object doesn't match index of Node being processed");y._to.forEach(_=>{if(s[_]==="gray")throw new Error("model graph is cyclic");s[_]==="white"&&r.push(_)})}))}}transformGraph(t){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),t&&t.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let t=0,r=new Array(this._nodes.length,0),s=0;for(let g=0;g<this._nodes.length;g++)r[g]=s,this._nodes[g].executeNode?(s!==g&&(this._nodes[s]=this._nodes[g]),s++):this._nodes[g].outputs.forEach(m=>{this._allData[m]._from=-2});this._nodes.splice(s,this._nodes.length-s);for(let g=0;g<this._allData.length;g++){let m=this._allData[g];m._from!==void 0&&m._from!==-1&&m._from!==-2&&(m._from=r[m._from]);for(let y=0;y<m._to.length;y++){if(!(m._to[y]>=0))throw new Error("Trying to update a removed node");m._to[y]=r[m._to[y]]}}t=0;for(let g=0;g<this._allData.length;g++)if(this._allData[g].from!==-2||this._allOutputIndices.indexOf(g+t)!==-1){if(t>0){let m=-1;this._allData[g].from!==void 0&&this._allData[g].from!==-1?(m=this._nodes[this._allData[g].from].outputs.indexOf(g+t),m!==-1&&(this._nodes[this._allData[g].from].outputs[m]=g)):(m=this._allInputIndices.indexOf(g+t),m!==-1&&(this._allInputIndices[m]=g)),this._allData[g].to.forEach(y=>{m=this._nodes[y].inputs.indexOf(g+t),m!==-1&&(this._nodes[y].inputs[m]=g)}),this._allData[g].to.length===0&&(m=this._allOutputIndices.indexOf(g+t),m!==-1&&(this._allOutputIndices[m]=g))}}else t++,this._allData.splice(g,1),g--}deleteNode(t){let r=this._nodes[t];if(r.outputs.length>1){for(let _=1;_<r.outputs.length;_++)if(this._allData[r.outputs[_]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}r.executeNode=!1;let s=r.inputs[0],g=r.outputs[0],m=this._allData[g].to;for(let _=0;_<r.inputs.length;_++){let T=this._allData[r.inputs[_]].to.indexOf(t);if(T===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[r.inputs[_]].to.splice(T,1)}this._allData[g]._to=[];let y=this._allOutputIndices.indexOf(g);if(y!==-1&&(this._allOutputIndices[y]=s),m&&m.length>0)for(let _ of m){let T=this._nodes[_].inputs.indexOf(g);if(T===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[_].inputs[T]=s,this._allData[s].to.push(_)}}removeAllDropoutNodes(){let t=0;for(let r of this._nodes){if(r.opType==="Dropout"){if(r.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(r.outputs.length!==1&&r.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(r.outputs.length===2&&this._allData[r.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(t)}t++}}removeAllIdentityNodes(){let t=0;for(let r of this._nodes)r.opType==="Identity"&&this.deleteNode(t),t++}isActivation(t){switch(t.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let t of this._nodes)if(t.opType==="Conv"){let r=this._allData[t.outputs[0]]._to;if(r.length===1&&this.isActivation(this._nodes[r[0]])){let s=this._nodes[r[0]];if(s.opType==="Clip")if(s.inputs.length===1)try{t.attributes.set("activation_params","floats",[s.attributes.getFloat("min"),s.attributes.getFloat("max")])}catch{t.attributes.set("activation_params","floats",[d.MIN_CLIP,d.MAX_CLIP])}else{if(!(s.inputs.length>=3&&this._allData[s.inputs[1]].tensor!==void 0&&this._allData[s.inputs[2]].tensor!==void 0))continue;t.attributes.set("activation_params","floats",[this._allData[s.inputs[1]].tensor.floatData[0],this._allData[s.inputs[2]].tensor.floatData[0]])}t.attributes.set("activation","string",s.opType),this.deleteNode(r[0])}}}}},1315:(b,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.now=i.Profiler=i.Logger=void 0;let l={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},c={none:new class{log(o,n,e){}},console:new class{log(o,n,e){console.log(`${this.color(o)} ${e?"\x1B[35m"+e+"\x1B[0m ":""}${n}`)}color(o){switch(o){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${o}`)}}}},a={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},f={"":a};function p(o,n,e,t){if(n===void 0)return r=o,{verbose:p.verbose.bind(null,r),info:p.info.bind(null,r),warning:p.warning.bind(null,r),error:p.error.bind(null,r),fatal:p.fatal.bind(null,r)};if(e===void 0)d(o,n);else if(typeof e=="number"&&t===void 0)d(o,n);else if(typeof e=="string"&&t===void 0)d(o,e,0,n);else{if(typeof e!="string"||typeof t!="number")throw new TypeError("input is valid");d(o,e,0,n)}var r}function d(o,n,e,t){let r=f[t||""]||f[""];l[o]<l[r.minimalSeverity]||(r.logDateTime&&(n=`${new Date().toISOString()}|${n}`),r.logSourceLocation,c[r.provider].log(o,n,t))}(function(o){function n(t){f={},e("",t||{})}function e(t,r){if(t==="*")n(r);else{let s=f[t]||a;f[t]={provider:r.provider||s.provider,minimalSeverity:r.minimalSeverity||s.minimalSeverity,logDateTime:r.logDateTime===void 0?s.logDateTime:r.logDateTime,logSourceLocation:r.logSourceLocation===void 0?s.logSourceLocation:r.logSourceLocation}}}o.verbose=function(t,r){o("verbose",t,r)},o.info=function(t,r){o("info",t,r)},o.warning=function(t,r){o("warning",t,r)},o.error=function(t,r){o("error",t,r)},o.fatal=function(t,r){o("fatal",t,r)},o.reset=n,o.set=e,o.setWithEnv=function(t){let r={};t.logLevel&&(r.minimalSeverity=t.logLevel),e("",r)}})(p||(p={})),i.Logger=p;class h{constructor(n,e,t,r,s,g){this.category=n,this.name=e,this.startTime=t,this.endCallback=r,this.timer=s,this.ctx=g}async end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class u{constructor(n,e,t,r){this.category=n,this.name=e,this.startTime=t,this.endTime=r}}i.Profiler=class{static create(o){return o===void 0?new this:new this(o.maxNumberEvents,o.flushBatchSize,o.flushIntervalInMilliseconds)}constructor(o,n,e){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=o===void 0?1e4:o,this._flushBatchSize=n===void 0?10:n,this._flushIntervalInMilliseconds=e===void 0?5e3:e}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,i.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(o,n,e,t){let r=this._started?this.begin(o,n,t):void 0,s=!1,g=e();if(g&&typeof g.then=="function")return s=!0,new Promise((m,y)=>{g.then(async _=>{r&&await r.end(),m(_)},async _=>{r&&await r.end(),y(_)})});if(!s&&r){let m=r.end();if(m&&typeof m.then=="function")return new Promise((y,_)=>{m.then(()=>{y(g)},T=>{_(T)})})}return g}begin(o,n,e){if(!this._started)throw new Error("profiler is not started yet");if(e===void 0){let t=(0,i.now)();return this.flush(t),new h(o,n,t,r=>this.endSync(r))}{let t=e.beginTimer();return new h(o,n,0,async r=>this.end(r),t,e)}}async end(o){let n=await o.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new u(o.category,o.name,o.startTime,n)),this.flush(n))}endSync(o){let n=(0,i.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new u(o.category,o.name,o.startTime,n)),this.flush(n))}logOneEvent(o){i.Logger.verbose(`Profiler.${o.category}`,`${(o.endTime-o.startTime).toFixed(2)}ms on event '${o.name}' at ${o.endTime.toFixed(2)}`)}flush(o){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||o-this._flushTime>=this._flushIntervalInMilliseconds){for(let n=this._flushPointer;this._flushPointer<n+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,i.now)()}}get started(){return this._started}},i.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},1745:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Model=void 0;let c=l(5686),a=l(4662),f=l(5127),p=l(2446),d=l(7273);var h=f.onnxruntime.experimental.fbs;i.Model=class{constructor(){}load(u,o,n){if(!n)try{return void this.loadFromOnnxFormat(u,o)}catch(e){if(n!==void 0)throw e}this.loadFromOrtFormat(u,o)}loadFromOnnxFormat(u,o){let n=p.onnx.ModelProto.decode(u);if(d.LongUtil.longToNumber(n.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=n.opsetImport.map(e=>({domain:e.domain,version:d.LongUtil.longToNumber(e.version)})),this._graph=a.Graph.from(n.graph,o)}loadFromOrtFormat(u,o){let n=new c.flatbuffers.ByteBuffer(u),e=h.InferenceSession.getRootAsInferenceSession(n).model();if(d.LongUtil.longToNumber(e.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let t=0;t<e.opsetImportLength();t++){let r=e.opsetImport(t);this._opsets.push({domain:r?.domain(),version:d.LongUtil.longToNumber(r.version())})}this._graph=a.Graph.from(e.graph(),o)}get graph(){return this._graph}get opsets(){return this._opsets}}},6145:(b,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FLOAT_TYPES=i.INT_TYPES=i.NUMBER_TYPES=void 0,i.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],i.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],i.FLOAT_TYPES=["float32","float64"]},5881:(b,i)=>{"use strict";function l(c,a){if(a.endsWith("+")){let f=Number.parseInt(a.substring(0,a.length-1),10);return!isNaN(f)&&f<=c}if(a.split("-").length===2){let f=a.split("-"),p=Number.parseInt(f[0],10),d=Number.parseInt(f[1],10);return!isNaN(p)&&!isNaN(d)&&p<=c&&c<=d}return Number.parseInt(a,10)===c}Object.defineProperty(i,"__esModule",{value:!0}),i.resolveOperator=void 0,i.resolveOperator=function(c,a,f){for(let p of f){let d=p[0],h=p[1],u=p[2],o=p[3],n=p[4];if(c.opType===d){for(let e of a)if((e.domain===h||e.domain==="ai.onnx"&&h==="")&&l(e.version,u))return{opImpl:o,opInit:n}}}throw new TypeError(`cannot resolve operator '${c.opType}' with opsets: ${a.map(p=>`${p.domain||"ai.onnx"} v${p.version}`).join(", ")}`)}},5127:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.onnxruntime=void 0;let c=l(5686);var a,f;a=i.onnxruntime||(i.onnxruntime={}),function(p){let d;(function(h){h[h.UNDEFINED=0]="UNDEFINED",h[h.FLOAT=1]="FLOAT",h[h.INT=2]="INT",h[h.STRING=3]="STRING",h[h.TENSOR=4]="TENSOR",h[h.GRAPH=5]="GRAPH",h[h.FLOATS=6]="FLOATS",h[h.INTS=7]="INTS",h[h.STRINGS=8]="STRINGS",h[h.TENSORS=9]="TENSORS",h[h.GRAPHS=10]="GRAPHS",h[h.SPARSE_TENSOR=11]="SPARSE_TENSOR",h[h.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(d=p.AttributeType||(p.AttributeType={}))}((f=a.experimental||(a.experimental={})).fbs||(f.fbs={})),function(p){(function(d){(function(h){let u;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.VALUE=1]="VALUE",o[o.PARAM=2]="PARAM"})(u=h.DimensionValueType||(h.DimensionValueType={}))})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){let u;(function(o){o[o.UNDEFINED=0]="UNDEFINED",o[o.FLOAT=1]="FLOAT",o[o.UINT8=2]="UINT8",o[o.INT8=3]="INT8",o[o.UINT16=4]="UINT16",o[o.INT16=5]="INT16",o[o.INT32=6]="INT32",o[o.INT64=7]="INT64",o[o.STRING=8]="STRING",o[o.BOOL=9]="BOOL",o[o.FLOAT16=10]="FLOAT16",o[o.DOUBLE=11]="DOUBLE",o[o.UINT32=12]="UINT32",o[o.UINT64=13]="UINT64",o[o.COMPLEX64=14]="COMPLEX64",o[o.COMPLEX128=15]="COMPLEX128",o[o.BFLOAT16=16]="BFLOAT16",o[o.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",o[o.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",o[o.FLOAT8E5M2=19]="FLOAT8E5M2",o[o.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"})(u=h.TensorDataType||(h.TensorDataType={}))})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){let u;(function(o){o[o.Primitive=0]="Primitive",o[o.Fused=1]="Fused"})(u=h.NodeType||(h.NodeType={}))})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){let u;(function(o){o[o.NONE=0]="NONE",o[o.tensor_type=1]="tensor_type",o[o.sequence_type=2]="sequence_type",o[o.map_type=3]="map_type"})(u=h.TypeInfoValue||(h.TypeInfoValue={}))})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsShape(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsShape(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}dim(n,e){let t=this.bb.__offset(this.bb_pos,4);return t?(e||new p.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+t)+4*n),this.bb):null}dimLength(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__vector_len(this.bb_pos+n):0}static startShape(n){n.startObject(1)}static addDim(n,e){n.addFieldOffset(0,e,0)}static createDimVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addOffset(e[t]);return n.endVector()}static startDimVector(n,e){n.startVector(4,e,4)}static endShape(n){return n.endObject()}static createShape(n,e){return u.startShape(n),u.addDim(n,e),u.endShape(n)}}h.Shape=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsDimension(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsDimension(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}value(n){let e=this.bb.__offset(this.bb_pos,4);return e?(n||new p.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}denotation(n){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,n):null}static startDimension(n){n.startObject(2)}static addValue(n,e){n.addFieldOffset(0,e,0)}static addDenotation(n,e){n.addFieldOffset(1,e,0)}static endDimension(n){return n.endObject()}static createDimension(n,e,t){return u.startDimension(n),u.addValue(n,e),u.addDenotation(n,t),u.endDimension(n)}}h.Dimension=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsDimensionValue(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsDimensionValue(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}dimType(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt8(this.bb_pos+n):p.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt64(this.bb_pos+n):this.bb.createLong(0,0)}dimParam(n){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,n):null}static startDimensionValue(n){n.startObject(3)}static addDimType(n,e){n.addFieldInt8(0,e,p.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(n,e){n.addFieldInt64(1,e,n.createLong(0,0))}static addDimParam(n,e){n.addFieldOffset(2,e,0)}static endDimensionValue(n){return n.endObject()}static createDimensionValue(n,e,t,r){return u.startDimensionValue(n),u.addDimType(n,e),u.addDimValue(n,t),u.addDimParam(n,r),u.endDimensionValue(n)}}h.DimensionValue=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsTensorTypeAndShape(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsTensorTypeAndShape(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}elemType(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt32(this.bb_pos+n):p.experimental.fbs.TensorDataType.UNDEFINED}shape(n){let e=this.bb.__offset(this.bb_pos,6);return e?(n||new p.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startTensorTypeAndShape(n){n.startObject(2)}static addElemType(n,e){n.addFieldInt32(0,e,p.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(n,e){n.addFieldOffset(1,e,0)}static endTensorTypeAndShape(n){return n.endObject()}static createTensorTypeAndShape(n,e,t){return u.startTensorTypeAndShape(n),u.addElemType(n,e),u.addShape(n,t),u.endTensorTypeAndShape(n)}}h.TensorTypeAndShape=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsMapType(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsMapType(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}keyType(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt32(this.bb_pos+n):p.experimental.fbs.TensorDataType.UNDEFINED}valueType(n){let e=this.bb.__offset(this.bb_pos,6);return e?(n||new p.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startMapType(n){n.startObject(2)}static addKeyType(n,e){n.addFieldInt32(0,e,p.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(n,e){n.addFieldOffset(1,e,0)}static endMapType(n){return n.endObject()}static createMapType(n,e,t){return u.startMapType(n),u.addKeyType(n,e),u.addValueType(n,t),u.endMapType(n)}}h.MapType=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsSequenceType(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsSequenceType(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}elemType(n){let e=this.bb.__offset(this.bb_pos,4);return e?(n||new p.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startSequenceType(n){n.startObject(1)}static addElemType(n,e){n.addFieldOffset(0,e,0)}static endSequenceType(n){return n.endObject()}static createSequenceType(n,e){return u.startSequenceType(n),u.addElemType(n,e),u.endSequenceType(n)}}h.SequenceType=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(d.fbs||(d.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(h,u){return this.bb_pos=h,this.bb=u,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(h,u,o,n){return h.prep(4,12),h.writeInt32(n),h.writeInt32(o),h.writeInt32(u),h.offset()}}})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsNodeEdge(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsNodeEdge(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}nodeIndex(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readUint32(this.bb_pos+n):0}inputEdges(n,e){let t=this.bb.__offset(this.bb_pos,6);return t?(e||new p.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+t)+12*n,this.bb):null}inputEdgesLength(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__vector_len(this.bb_pos+n):0}outputEdges(n,e){let t=this.bb.__offset(this.bb_pos,8);return t?(e||new p.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+t)+12*n,this.bb):null}outputEdgesLength(){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__vector_len(this.bb_pos+n):0}static startNodeEdge(n){n.startObject(3)}static addNodeIndex(n,e){n.addFieldInt32(0,e,0)}static addInputEdges(n,e){n.addFieldOffset(1,e,0)}static startInputEdgesVector(n,e){n.startVector(12,e,4)}static addOutputEdges(n,e){n.addFieldOffset(2,e,0)}static startOutputEdgesVector(n,e){n.startVector(12,e,4)}static endNodeEdge(n){return n.endObject()}static createNodeEdge(n,e,t,r){return u.startNodeEdge(n),u.addNodeIndex(n,e),u.addInputEdges(n,t),u.addOutputEdges(n,r),u.endNodeEdge(n)}}h.NodeEdge=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsNode(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsNode(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}name(n){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,n):null}docString(n){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,n):null}domain(n){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,n):null}sinceVersion(){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt32(this.bb_pos+n):0}index(){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.readUint32(this.bb_pos+n):0}opType(n){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,n):null}type(){let n=this.bb.__offset(this.bb_pos,16);return n?this.bb.readInt32(this.bb_pos+n):p.experimental.fbs.NodeType.Primitive}executionProviderType(n){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__string(this.bb_pos+e,n):null}inputs(n,e){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__string(this.bb.__vector(this.bb_pos+t)+4*n,e):null}inputsLength(){let n=this.bb.__offset(this.bb_pos,20);return n?this.bb.__vector_len(this.bb_pos+n):0}outputs(n,e){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__string(this.bb.__vector(this.bb_pos+t)+4*n,e):null}outputsLength(){let n=this.bb.__offset(this.bb_pos,22);return n?this.bb.__vector_len(this.bb_pos+n):0}attributes(n,e){let t=this.bb.__offset(this.bb_pos,24);return t?(e||new p.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+t)+4*n),this.bb):null}attributesLength(){let n=this.bb.__offset(this.bb_pos,24);return n?this.bb.__vector_len(this.bb_pos+n):0}inputArgCounts(n){let e=this.bb.__offset(this.bb_pos,26);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*n):0}inputArgCountsLength(){let n=this.bb.__offset(this.bb_pos,26);return n?this.bb.__vector_len(this.bb_pos+n):0}inputArgCountsArray(){let n=this.bb.__offset(this.bb_pos,26);return n?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+n),this.bb.__vector_len(this.bb_pos+n)):null}implicitInputs(n,e){let t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__string(this.bb.__vector(this.bb_pos+t)+4*n,e):null}implicitInputsLength(){let n=this.bb.__offset(this.bb_pos,28);return n?this.bb.__vector_len(this.bb_pos+n):0}static startNode(n){n.startObject(13)}static addName(n,e){n.addFieldOffset(0,e,0)}static addDocString(n,e){n.addFieldOffset(1,e,0)}static addDomain(n,e){n.addFieldOffset(2,e,0)}static addSinceVersion(n,e){n.addFieldInt32(3,e,0)}static addIndex(n,e){n.addFieldInt32(4,e,0)}static addOpType(n,e){n.addFieldOffset(5,e,0)}static addType(n,e){n.addFieldInt32(6,e,p.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(n,e){n.addFieldOffset(7,e,0)}static addInputs(n,e){n.addFieldOffset(8,e,0)}static createInputsVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addOffset(e[t]);return n.endVector()}static startInputsVector(n,e){n.startVector(4,e,4)}static addOutputs(n,e){n.addFieldOffset(9,e,0)}static createOutputsVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addOffset(e[t]);return n.endVector()}static startOutputsVector(n,e){n.startVector(4,e,4)}static addAttributes(n,e){n.addFieldOffset(10,e,0)}static createAttributesVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addOffset(e[t]);return n.endVector()}static startAttributesVector(n,e){n.startVector(4,e,4)}static addInputArgCounts(n,e){n.addFieldOffset(11,e,0)}static createInputArgCountsVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addInt32(e[t]);return n.endVector()}static startInputArgCountsVector(n,e){n.startVector(4,e,4)}static addImplicitInputs(n,e){n.addFieldOffset(12,e,0)}static createImplicitInputsVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addOffset(e[t]);return n.endVector()}static startImplicitInputsVector(n,e){n.startVector(4,e,4)}static endNode(n){return n.endObject()}static createNode(n,e,t,r,s,g,m,y,_,T,w,x,S,P){return u.startNode(n),u.addName(n,e),u.addDocString(n,t),u.addDomain(n,r),u.addSinceVersion(n,s),u.addIndex(n,g),u.addOpType(n,m),u.addType(n,y),u.addExecutionProviderType(n,_),u.addInputs(n,T),u.addOutputs(n,w),u.addAttributes(n,x),u.addInputArgCounts(n,S),u.addImplicitInputs(n,P),u.endNode(n)}}h.Node=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsValueInfo(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsValueInfo(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}name(n){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,n):null}docString(n){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,n):null}type(n){let e=this.bb.__offset(this.bb_pos,8);return e?(n||new p.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startValueInfo(n){n.startObject(3)}static addName(n,e){n.addFieldOffset(0,e,0)}static addDocString(n,e){n.addFieldOffset(1,e,0)}static addType(n,e){n.addFieldOffset(2,e,0)}static endValueInfo(n){return n.endObject()}static createValueInfo(n,e,t,r){return u.startValueInfo(n),u.addName(n,e),u.addDocString(n,t),u.addType(n,r),u.endValueInfo(n)}}h.ValueInfo=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsTypeInfo(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsTypeInfo(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}denotation(n){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,n):null}valueType(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readUint8(this.bb_pos+n):p.experimental.fbs.TypeInfoValue.NONE}value(n){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(n,this.bb_pos+e):null}static startTypeInfo(n){n.startObject(3)}static addDenotation(n,e){n.addFieldOffset(0,e,0)}static addValueType(n,e){n.addFieldInt8(1,e,p.experimental.fbs.TypeInfoValue.NONE)}static addValue(n,e){n.addFieldOffset(2,e,0)}static endTypeInfo(n){return n.endObject()}static createTypeInfo(n,e,t,r){return u.startTypeInfo(n),u.addDenotation(n,e),u.addValueType(n,t),u.addValue(n,r),u.endTypeInfo(n)}}h.TypeInfo=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsOperatorSetId(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsOperatorSetId(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}domain(n){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,n):null}version(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt64(this.bb_pos+n):this.bb.createLong(0,0)}static startOperatorSetId(n){n.startObject(2)}static addDomain(n,e){n.addFieldOffset(0,e,0)}static addVersion(n,e){n.addFieldInt64(1,e,n.createLong(0,0))}static endOperatorSetId(n){return n.endObject()}static createOperatorSetId(n,e,t){return u.startOperatorSetId(n),u.addDomain(n,e),u.addVersion(n,t),u.endOperatorSetId(n)}}h.OperatorSetId=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsTensor(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsTensor(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}name(n){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,n):null}docString(n){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,n):null}dims(n){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*n):this.bb.createLong(0,0)}dimsLength(){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__vector_len(this.bb_pos+n):0}dataType(){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt32(this.bb_pos+n):p.experimental.fbs.TensorDataType.UNDEFINED}rawData(n){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+n):0}rawDataLength(){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.__vector_len(this.bb_pos+n):0}rawDataArray(){let n=this.bb.__offset(this.bb_pos,12);return n?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+n),this.bb.__vector_len(this.bb_pos+n)):null}stringData(n,e){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb.__vector(this.bb_pos+t)+4*n,e):null}stringDataLength(){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__vector_len(this.bb_pos+n):0}static startTensor(n){n.startObject(6)}static addName(n,e){n.addFieldOffset(0,e,0)}static addDocString(n,e){n.addFieldOffset(1,e,0)}static addDims(n,e){n.addFieldOffset(2,e,0)}static createDimsVector(n,e){n.startVector(8,e.length,8);for(let t=e.length-1;t>=0;t--)n.addInt64(e[t]);return n.endVector()}static startDimsVector(n,e){n.startVector(8,e,8)}static addDataType(n,e){n.addFieldInt32(3,e,p.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(n,e){n.addFieldOffset(4,e,0)}static createRawDataVector(n,e){n.startVector(1,e.length,1);for(let t=e.length-1;t>=0;t--)n.addInt8(e[t]);return n.endVector()}static startRawDataVector(n,e){n.startVector(1,e,1)}static addStringData(n,e){n.addFieldOffset(5,e,0)}static createStringDataVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addOffset(e[t]);return n.endVector()}static startStringDataVector(n,e){n.startVector(4,e,4)}static endTensor(n){return n.endObject()}static createTensor(n,e,t,r,s,g,m){return u.startTensor(n),u.addName(n,e),u.addDocString(n,t),u.addDims(n,r),u.addDataType(n,s),u.addRawData(n,g),u.addStringData(n,m),u.endTensor(n)}}h.Tensor=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsSparseTensor(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsSparseTensor(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}values(n){let e=this.bb.__offset(this.bb_pos,4);return e?(n||new p.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}indices(n){let e=this.bb.__offset(this.bb_pos,6);return e?(n||new p.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dims(n){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*n):this.bb.createLong(0,0)}dimsLength(){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__vector_len(this.bb_pos+n):0}static startSparseTensor(n){n.startObject(3)}static addValues(n,e){n.addFieldOffset(0,e,0)}static addIndices(n,e){n.addFieldOffset(1,e,0)}static addDims(n,e){n.addFieldOffset(2,e,0)}static createDimsVector(n,e){n.startVector(8,e.length,8);for(let t=e.length-1;t>=0;t--)n.addInt64(e[t]);return n.endVector()}static startDimsVector(n,e){n.startVector(8,e,8)}static endSparseTensor(n){return n.endObject()}static createSparseTensor(n,e,t,r){return u.startSparseTensor(n),u.addValues(n,e),u.addIndices(n,t),u.addDims(n,r),u.endSparseTensor(n)}}h.SparseTensor=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsAttribute(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsAttribute(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}name(n){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,n):null}docString(n){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,n):null}type(){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.readInt32(this.bb_pos+n):p.experimental.fbs.AttributeType.UNDEFINED}f(){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readFloat32(this.bb_pos+n):0}i(){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.readInt64(this.bb_pos+n):this.bb.createLong(0,0)}s(n){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,n):null}t(n){let e=this.bb.__offset(this.bb_pos,16);return e?(n||new p.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}g(n){let e=this.bb.__offset(this.bb_pos,18);return e?(n||new p.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}floats(n){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readFloat32(this.bb.__vector(this.bb_pos+e)+4*n):0}floatsLength(){let n=this.bb.__offset(this.bb_pos,20);return n?this.bb.__vector_len(this.bb_pos+n):0}floatsArray(){let n=this.bb.__offset(this.bb_pos,20);return n?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+n),this.bb.__vector_len(this.bb_pos+n)):null}ints(n){let e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*n):this.bb.createLong(0,0)}intsLength(){let n=this.bb.__offset(this.bb_pos,22);return n?this.bb.__vector_len(this.bb_pos+n):0}strings(n,e){let t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__string(this.bb.__vector(this.bb_pos+t)+4*n,e):null}stringsLength(){let n=this.bb.__offset(this.bb_pos,24);return n?this.bb.__vector_len(this.bb_pos+n):0}tensors(n,e){let t=this.bb.__offset(this.bb_pos,26);return t?(e||new p.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+t)+4*n),this.bb):null}tensorsLength(){let n=this.bb.__offset(this.bb_pos,26);return n?this.bb.__vector_len(this.bb_pos+n):0}graphs(n,e){let t=this.bb.__offset(this.bb_pos,28);return t?(e||new p.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+t)+4*n),this.bb):null}graphsLength(){let n=this.bb.__offset(this.bb_pos,28);return n?this.bb.__vector_len(this.bb_pos+n):0}static startAttribute(n){n.startObject(13)}static addName(n,e){n.addFieldOffset(0,e,0)}static addDocString(n,e){n.addFieldOffset(1,e,0)}static addType(n,e){n.addFieldInt32(2,e,p.experimental.fbs.AttributeType.UNDEFINED)}static addF(n,e){n.addFieldFloat32(3,e,0)}static addI(n,e){n.addFieldInt64(4,e,n.createLong(0,0))}static addS(n,e){n.addFieldOffset(5,e,0)}static addT(n,e){n.addFieldOffset(6,e,0)}static addG(n,e){n.addFieldOffset(7,e,0)}static addFloats(n,e){n.addFieldOffset(8,e,0)}static createFloatsVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addFloat32(e[t]);return n.endVector()}static startFloatsVector(n,e){n.startVector(4,e,4)}static addInts(n,e){n.addFieldOffset(9,e,0)}static createIntsVector(n,e){n.startVector(8,e.length,8);for(let t=e.length-1;t>=0;t--)n.addInt64(e[t]);return n.endVector()}static startIntsVector(n,e){n.startVector(8,e,8)}static addStrings(n,e){n.addFieldOffset(10,e,0)}static createStringsVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addOffset(e[t]);return n.endVector()}static startStringsVector(n,e){n.startVector(4,e,4)}static addTensors(n,e){n.addFieldOffset(11,e,0)}static createTensorsVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addOffset(e[t]);return n.endVector()}static startTensorsVector(n,e){n.startVector(4,e,4)}static addGraphs(n,e){n.addFieldOffset(12,e,0)}static createGraphsVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addOffset(e[t]);return n.endVector()}static startGraphsVector(n,e){n.startVector(4,e,4)}static endAttribute(n){return n.endObject()}static createAttribute(n,e,t,r,s,g,m,y,_,T,w,x,S,P){return u.startAttribute(n),u.addName(n,e),u.addDocString(n,t),u.addType(n,r),u.addF(n,s),u.addI(n,g),u.addS(n,m),u.addT(n,y),u.addG(n,_),u.addFloats(n,T),u.addInts(n,w),u.addStrings(n,x),u.addTensors(n,S),u.addGraphs(n,P),u.endAttribute(n)}}h.Attribute=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsGraph(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsGraph(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}initializers(n,e){let t=this.bb.__offset(this.bb_pos,4);return t?(e||new p.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+t)+4*n),this.bb):null}initializersLength(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__vector_len(this.bb_pos+n):0}nodeArgs(n,e){let t=this.bb.__offset(this.bb_pos,6);return t?(e||new p.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+t)+4*n),this.bb):null}nodeArgsLength(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__vector_len(this.bb_pos+n):0}nodes(n,e){let t=this.bb.__offset(this.bb_pos,8);return t?(e||new p.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+t)+4*n),this.bb):null}nodesLength(){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__vector_len(this.bb_pos+n):0}maxNodeIndex(){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readUint32(this.bb_pos+n):0}nodeEdges(n,e){let t=this.bb.__offset(this.bb_pos,12);return t?(e||new p.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+t)+4*n),this.bb):null}nodeEdgesLength(){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.__vector_len(this.bb_pos+n):0}inputs(n,e){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb.__vector(this.bb_pos+t)+4*n,e):null}inputsLength(){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__vector_len(this.bb_pos+n):0}outputs(n,e){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__string(this.bb.__vector(this.bb_pos+t)+4*n,e):null}outputsLength(){let n=this.bb.__offset(this.bb_pos,16);return n?this.bb.__vector_len(this.bb_pos+n):0}sparseInitializers(n,e){let t=this.bb.__offset(this.bb_pos,18);return t?(e||new p.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+t)+4*n),this.bb):null}sparseInitializersLength(){let n=this.bb.__offset(this.bb_pos,18);return n?this.bb.__vector_len(this.bb_pos+n):0}static startGraph(n){n.startObject(8)}static addInitializers(n,e){n.addFieldOffset(0,e,0)}static createInitializersVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addOffset(e[t]);return n.endVector()}static startInitializersVector(n,e){n.startVector(4,e,4)}static addNodeArgs(n,e){n.addFieldOffset(1,e,0)}static createNodeArgsVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addOffset(e[t]);return n.endVector()}static startNodeArgsVector(n,e){n.startVector(4,e,4)}static addNodes(n,e){n.addFieldOffset(2,e,0)}static createNodesVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addOffset(e[t]);return n.endVector()}static startNodesVector(n,e){n.startVector(4,e,4)}static addMaxNodeIndex(n,e){n.addFieldInt32(3,e,0)}static addNodeEdges(n,e){n.addFieldOffset(4,e,0)}static createNodeEdgesVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addOffset(e[t]);return n.endVector()}static startNodeEdgesVector(n,e){n.startVector(4,e,4)}static addInputs(n,e){n.addFieldOffset(5,e,0)}static createInputsVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addOffset(e[t]);return n.endVector()}static startInputsVector(n,e){n.startVector(4,e,4)}static addOutputs(n,e){n.addFieldOffset(6,e,0)}static createOutputsVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addOffset(e[t]);return n.endVector()}static startOutputsVector(n,e){n.startVector(4,e,4)}static addSparseInitializers(n,e){n.addFieldOffset(7,e,0)}static createSparseInitializersVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addOffset(e[t]);return n.endVector()}static startSparseInitializersVector(n,e){n.startVector(4,e,4)}static endGraph(n){return n.endObject()}static createGraph(n,e,t,r,s,g,m,y,_){return u.startGraph(n),u.addInitializers(n,e),u.addNodeArgs(n,t),u.addNodes(n,r),u.addMaxNodeIndex(n,s),u.addNodeEdges(n,g),u.addInputs(n,m),u.addOutputs(n,y),u.addSparseInitializers(n,_),u.endGraph(n)}}h.Graph=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsModel(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsModel(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}irVersion(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt64(this.bb_pos+n):this.bb.createLong(0,0)}opsetImport(n,e){let t=this.bb.__offset(this.bb_pos,6);return t?(e||new p.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+t)+4*n),this.bb):null}opsetImportLength(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__vector_len(this.bb_pos+n):0}producerName(n){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,n):null}producerVersion(n){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,n):null}domain(n){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,n):null}modelVersion(){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.readInt64(this.bb_pos+n):this.bb.createLong(0,0)}docString(n){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__string(this.bb_pos+e,n):null}graph(n){let e=this.bb.__offset(this.bb_pos,18);return e?(n||new p.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}graphDocString(n){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__string(this.bb_pos+e,n):null}static startModel(n){n.startObject(9)}static addIrVersion(n,e){n.addFieldInt64(0,e,n.createLong(0,0))}static addOpsetImport(n,e){n.addFieldOffset(1,e,0)}static createOpsetImportVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addOffset(e[t]);return n.endVector()}static startOpsetImportVector(n,e){n.startVector(4,e,4)}static addProducerName(n,e){n.addFieldOffset(2,e,0)}static addProducerVersion(n,e){n.addFieldOffset(3,e,0)}static addDomain(n,e){n.addFieldOffset(4,e,0)}static addModelVersion(n,e){n.addFieldInt64(5,e,n.createLong(0,0))}static addDocString(n,e){n.addFieldOffset(6,e,0)}static addGraph(n,e){n.addFieldOffset(7,e,0)}static addGraphDocString(n,e){n.addFieldOffset(8,e,0)}static endModel(n){return n.endObject()}static createModel(n,e,t,r,s,g,m,y,_,T){return u.startModel(n),u.addIrVersion(n,e),u.addOpsetImport(n,t),u.addProducerName(n,r),u.addProducerVersion(n,s),u.addDomain(n,g),u.addModelVersion(n,m),u.addDocString(n,y),u.addGraph(n,_),u.addGraphDocString(n,T),u.endModel(n)}}h.Model=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsKernelCreateInfos(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsKernelCreateInfos(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}nodeIndices(n){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*n):0}nodeIndicesLength(){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__vector_len(this.bb_pos+n):0}nodeIndicesArray(){let n=this.bb.__offset(this.bb_pos,4);return n?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+n),this.bb.__vector_len(this.bb_pos+n)):null}kernelDefHashes(n){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*n):this.bb.createLong(0,0)}kernelDefHashesLength(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__vector_len(this.bb_pos+n):0}static startKernelCreateInfos(n){n.startObject(2)}static addNodeIndices(n,e){n.addFieldOffset(0,e,0)}static createNodeIndicesVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addInt32(e[t]);return n.endVector()}static startNodeIndicesVector(n,e){n.startVector(4,e,4)}static addKernelDefHashes(n,e){n.addFieldOffset(1,e,0)}static createKernelDefHashesVector(n,e){n.startVector(8,e.length,8);for(let t=e.length-1;t>=0;t--)n.addInt64(e[t]);return n.endVector()}static startKernelDefHashesVector(n,e){n.startVector(8,e,8)}static endKernelCreateInfos(n){return n.endObject()}static createKernelCreateInfos(n,e,t){return u.startKernelCreateInfos(n),u.addNodeIndices(n,e),u.addKernelDefHashes(n,t),u.endKernelCreateInfos(n)}}h.KernelCreateInfos=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsSubGraphSessionState(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsSubGraphSessionState(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}graphId(n){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,n):null}sessionState(n){let e=this.bb.__offset(this.bb_pos,6);return e?(n||new p.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startSubGraphSessionState(n){n.startObject(2)}static addGraphId(n,e){n.addFieldOffset(0,e,0)}static addSessionState(n,e){n.addFieldOffset(1,e,0)}static endSubGraphSessionState(n){let e=n.endObject();return n.requiredField(e,4),e}static createSubGraphSessionState(n,e,t){return u.startSubGraphSessionState(n),u.addGraphId(n,e),u.addSessionState(n,t),u.endSubGraphSessionState(n)}}h.SubGraphSessionState=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsSessionState(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsSessionState(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}kernels(n){let e=this.bb.__offset(this.bb_pos,4);return e?(n||new p.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}subGraphSessionStates(n,e){let t=this.bb.__offset(this.bb_pos,6);return t?(e||new p.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+t)+4*n),this.bb):null}subGraphSessionStatesLength(){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__vector_len(this.bb_pos+n):0}static startSessionState(n){n.startObject(2)}static addKernels(n,e){n.addFieldOffset(0,e,0)}static addSubGraphSessionStates(n,e){n.addFieldOffset(1,e,0)}static createSubGraphSessionStatesVector(n,e){n.startVector(4,e.length,4);for(let t=e.length-1;t>=0;t--)n.addOffset(e[t]);return n.endVector()}static startSubGraphSessionStatesVector(n,e){n.startVector(4,e,4)}static endSessionState(n){return n.endObject()}static createSessionState(n,e,t){return u.startSessionState(n),u.addKernels(n,e),u.addSubGraphSessionStates(n,t),u.endSessionState(n)}}h.SessionState=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={})),function(p){(function(d){(function(h){class u{constructor(){this.bb=null,this.bb_pos=0}__init(n,e){return this.bb_pos=n,this.bb=e,this}static getRootAsInferenceSession(n,e){return(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsInferenceSession(n,e){return n.setPosition(n.position()+c.flatbuffers.SIZE_PREFIX_LENGTH),(e||new u).__init(n.readInt32(n.position())+n.position(),n)}static bufferHasIdentifier(n){return n.__has_identifier("ORTM")}ortVersion(n){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,n):null}model(n){let e=this.bb.__offset(this.bb_pos,6);return e?(n||new p.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}sessionState(n){let e=this.bb.__offset(this.bb_pos,8);return e?(n||new p.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startInferenceSession(n){n.startObject(3)}static addOrtVersion(n,e){n.addFieldOffset(0,e,0)}static addModel(n,e){n.addFieldOffset(1,e,0)}static addSessionState(n,e){n.addFieldOffset(2,e,0)}static endInferenceSession(n){return n.endObject()}static finishInferenceSessionBuffer(n,e){n.finish(e,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(n,e){n.finish(e,"ORTM",!0)}static createInferenceSession(n,e,t,r){return u.startInferenceSession(n),u.addOrtVersion(n,e),u.addModel(n,t),u.addSessionState(n,r),u.endInferenceSession(n)}}h.InferenceSession=u})(d.fbs||(d.fbs={}))})(p.experimental||(p.experimental={}))}(i.onnxruntime||(i.onnxruntime={}))},1723:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.OnnxjsSessionHandler=void 0;let c=l(2235),a=l(9240);i.OnnxjsSessionHandler=class{constructor(f){this.session=f,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(f,p,d){let h=new Map;for(let n in f)if(Object.hasOwnProperty.call(f,n)){let e=f[n];h.set(n,new a.Tensor(e.dims,e.type,void 0,void 0,e.data))}let u=await this.session.run(h),o={};return u.forEach((n,e)=>{o[e]=new c.Tensor(n.type,n.data,n.dims)}),o}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6027:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Session=void 0;let c=l(7067),a=l(1296),f=l(1975),p=l(6496),d=l(1315),h=l(1745);i.Session=class{constructor(u={}){this._initialized=!1,this.backendHint=u.backendHint,this.profiler=d.Profiler.create(u.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(u,o,n){await this.profiler.event("session","Session.loadModel",async()=>{let e=await(0,f.resolveBackend)(this.backendHint);if(this.sessionHandler=e.createSessionHandler(this.context),this._model=new h.Model,typeof u=="string"){let t=u.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){let r=await(0,a.promisify)(c.readFile)(u);this.initialize(r,t)}else{let r=await fetch(u),s=await r.arrayBuffer();this.initialize(new Uint8Array(s),t)}}else if(ArrayBuffer.isView(u))this.initialize(u);else{let t=new Uint8Array(u,o||0,n||u.byteLength);this.initialize(t)}})}initialize(u,o){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let n=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(u,n,o),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new p.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(u){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{let o=this.normalizeAndValidateInputs(u),n=await this._executionPlan.execute(this.sessionHandler,o);return this.createOutput(n)})}normalizeAndValidateInputs(u){let o=this._model.graph.getInputNames();if(Array.isArray(u)){if(u.length!==o.length)throw new Error(`incorrect input array length: expected ${o.length} but got ${u.length}`)}else{if(u.size!==o.length)throw new Error(`incorrect input map size: expected ${o.length} but got ${u.size}`);let n=new Array(u.size),e=0;for(let t=0;t<o.length;++t){let r=u.get(o[t]);if(!r)throw new Error(`missing input tensor for: '${name}'`);n[e++]=r}u=n}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,u,!1);else{let n=this._model.graph.getInputIndices(),e=this._model.graph.getValues(),t=new Array(n.length);for(let r=0;r<n.length;++r){let s=e[n[r]];t[r]=s.type.shape.dims,this.context.graphInputTypes.push(s.type.tensorType),this.context.graphInputDims.push(u[r].dims)}this.validateInputTensorDims(t,u,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,u),u}validateInputTensorTypes(u,o){for(let n=0;n<o.length;n++){let e=u[n],t=o[n].type;if(e!==t)throw new Error(`input tensor[${n}] check failed: expected type '${e}' but got ${t}`)}}validateInputTensorDims(u,o,n){for(let e=0;e<o.length;e++){let t=u[e],r=o[e].dims;if(!this.compareTensorDims(t,r,n))throw new Error(`input tensor[${e}] check failed: expected shape '[${t.join(",")}]' but got [${r.join(",")}]`)}}compareTensorDims(u,o,n){if(u.length!==o.length)return!1;for(let e=0;e<u.length;++e)if(u[e]!==o[e]&&(!n||u[e]!==0))return!1;return!0}createOutput(u){let o=this._model.graph.getOutputNames();if(u.length!==o.length)throw new Error("expected number of outputs do not match number of generated outputs");let n=new Map;for(let e=0;e<o.length;++e)n.set(o[e],u[e]);return n}initializeOps(u){let o=u.getNodes();this._ops=new Array(o.length);for(let n=0;n<o.length;n++)this._ops[n]=this.sessionHandler.resolve(o[n],this._model.opsets,u)}}},9240:function(b,i,l){"use strict";var c=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(i,"__esModule",{value:!0}),i.Tensor=void 0;let a=l(3442),f=c(l(1583)),p=l(5127),d=l(2446),h=l(7273);var u=p.onnxruntime.experimental.fbs;class o{get data(){if(this.cache===void 0){let g=this.dataProvider(this.dataId);if(g.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=g}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(g){return this.data[h.ShapeUtil.indicesToOffset(g,this.strides)]}set(g,m){this.data[h.ShapeUtil.indicesToOffset(g,this.strides)]=m}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=h.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(g,m,y,_,T,w=a.Guid.create()){this.dims=g,this.type=m,this.dataProvider=y,this.asyncDataProvider=_,this.cache=T,this.dataId=w,this.size=h.ShapeUtil.validateDimsAndCalcSize(g);let x=this.size,S=y===void 0&&_===void 0&&T===void 0;if(T!==void 0&&T.length!==x)throw new RangeError("Input dims doesn't match data length.");if(m==="string"){if(!(T===void 0||Array.isArray(T)&&T.every(P=>typeof P=="string")))throw new TypeError("cache should be a string array");S&&(this.cache=new Array(x))}else{if(T!==void 0){let P=e(m);if(!(T instanceof P))throw new TypeError(`cache should be type ${P.name}`)}if(S){let P=new ArrayBuffer(x*function(C){switch(C){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${C}`)}}(m));this.cache=function(C,M){return new(e(M))(C)}(P,m)}}}static fromProto(g){if(!g)throw new Error("cannot construct Value from an empty tensor");let m=h.ProtoUtil.tensorDataTypeFromProto(g.dataType),y=h.ProtoUtil.tensorDimsFromProto(g.dims),_=new o(y,m);if(m==="string")g.stringData.forEach((T,w)=>{_.data[w]=(0,h.decodeUtf8String)(T)});else if(g.rawData&&typeof g.rawData.byteLength=="number"&&g.rawData.byteLength>0){let T=_.data,w=new DataView(g.rawData.buffer,g.rawData.byteOffset,g.rawData.byteLength),x=n(g.dataType),S=g.rawData.byteLength/x;if(g.rawData.byteLength%x!=0)throw new Error("invalid buffer length");if(T.length!==S)throw new Error("buffer length mismatch");for(let P=0;P<S;P++){let C=r(w,g.dataType,P*x);T[P]=C}}else{let T;switch(g.dataType){case d.onnx.TensorProto.DataType.FLOAT:T=g.floatData;break;case d.onnx.TensorProto.DataType.INT32:case d.onnx.TensorProto.DataType.INT16:case d.onnx.TensorProto.DataType.UINT16:case d.onnx.TensorProto.DataType.INT8:case d.onnx.TensorProto.DataType.UINT8:case d.onnx.TensorProto.DataType.BOOL:T=g.int32Data;break;case d.onnx.TensorProto.DataType.INT64:T=g.int64Data;break;case d.onnx.TensorProto.DataType.DOUBLE:T=g.doubleData;break;case d.onnx.TensorProto.DataType.UINT32:case d.onnx.TensorProto.DataType.UINT64:T=g.uint64Data;break;default:throw new Error("unspecific error")}if(T==null)throw new Error("failed to populate data from a tensorproto value");let w=_.data;if(w.length!==T.length)throw new Error("array length mismatch");for(let x=0;x<T.length;x++){let S=T[x];f.default.isLong(S)?w[x]=t(S,g.dataType):w[x]=S}}return _}static fromData(g,m,y){return new o(m,y,void 0,void 0,g)}static fromOrtTensor(g){if(!g)throw new Error("cannot construct Value from an empty tensor");let m=h.ProtoUtil.tensorDimsFromORTFormat(g),y=h.ProtoUtil.tensorDataTypeFromProto(g.dataType()),_=new o(m,y);if(y==="string")for(let T=0;T<g.stringDataLength();T++)_.data[T]=g.stringData(T);else if(g.rawDataArray()&&typeof g.rawDataLength()=="number"&&g.rawDataLength()>0){let T=_.data,w=new DataView(g.rawDataArray().buffer,g.rawDataArray().byteOffset,g.rawDataLength()),x=n(g.dataType()),S=g.rawDataLength()/x;if(g.rawDataLength()%x!=0)throw new Error("invalid buffer length");if(T.length!==S)throw new Error("buffer length mismatch");for(let P=0;P<S;P++){let C=r(w,g.dataType(),P*x);T[P]=C}}return _}}function n(s){switch(s){case d.onnx.TensorProto.DataType.UINT8:case d.onnx.TensorProto.DataType.INT8:case d.onnx.TensorProto.DataType.BOOL:return 1;case d.onnx.TensorProto.DataType.UINT16:case d.onnx.TensorProto.DataType.INT16:return 2;case d.onnx.TensorProto.DataType.FLOAT:case d.onnx.TensorProto.DataType.INT32:case d.onnx.TensorProto.DataType.UINT32:return 4;case d.onnx.TensorProto.DataType.INT64:case d.onnx.TensorProto.DataType.DOUBLE:case d.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${d.onnx.TensorProto.DataType[s]}`)}}function e(s){switch(s){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function t(s,g){if(g===d.onnx.TensorProto.DataType.INT64||g===u.TensorDataType.INT64){if(s.greaterThanOrEqual(2147483648)||s.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(g!==d.onnx.TensorProto.DataType.UINT32&&g!==u.TensorDataType.UINT32&&g!==d.onnx.TensorProto.DataType.UINT64&&g!==u.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${d.onnx.TensorProto.DataType[g]}`);if(s.greaterThanOrEqual(4294967296)||s.lessThan(0))throw new TypeError("uint64 is not supported")}return s.toNumber()}function r(s,g,m){switch(g){case d.onnx.TensorProto.DataType.BOOL:case d.onnx.TensorProto.DataType.UINT8:return s.getUint8(m);case d.onnx.TensorProto.DataType.INT8:return s.getInt8(m);case d.onnx.TensorProto.DataType.UINT16:return s.getUint16(m,!0);case d.onnx.TensorProto.DataType.INT16:return s.getInt16(m,!0);case d.onnx.TensorProto.DataType.FLOAT:return s.getFloat32(m,!0);case d.onnx.TensorProto.DataType.INT32:return s.getInt32(m,!0);case d.onnx.TensorProto.DataType.UINT32:return s.getUint32(m,!0);case d.onnx.TensorProto.DataType.INT64:return t(f.default.fromBits(s.getUint32(m,!0),s.getUint32(m+4,!0),!1),g);case d.onnx.TensorProto.DataType.DOUBLE:return s.getFloat64(m,!0);case d.onnx.TensorProto.DataType.UINT64:return t(f.default.fromBits(s.getUint32(m,!0),s.getUint32(m+4,!0),!0),g);default:throw new Error(`cannot read from DataView for type ${d.onnx.TensorProto.DataType[g]}`)}}i.Tensor=o},7273:function(b,i,l){"use strict";var c=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(i,"__esModule",{value:!0}),i.decodeUtf8String=i.MAX_CLIP=i.MIN_CLIP=i.PoolConvUtil=i.ReduceUtil=i.SplitUtil=i.MathUtil=i.ShapeUtil=i.LongUtil=i.ProtoUtil=i.GemmUtil=i.arrayCopyHelper=i.BroadcastUtil=i.MatMulUtil=i.ArrayUtil=i.assert=i.checkInputsShape=void 0;let a=l(5686),f=c(l(1583)),p=l(2446),d=l(9240);i.checkInputsShape=function(g,...m){if(!g||g.length!==m.length)return!1;for(let y=0;y<g.length;y++)if(!g[y].dims||g[y].dims.length!==m[y])return!1;return!0},i.assert=function(g,m){if(!g)throw new Error(typeof m=="string"?m:m())},i.ArrayUtil=class{static arraysEqual(g,m){if(g.length!==m.length)return!1;for(let y=0;y<g.length;y++)if(g[y]!==m[y])return!1;return!0}};class h{static preprocessInputShapes(m,y){return[m.length===1?[1,m[0]]:m,y.length===1?[y[0],1]:y]}static postprocessOutputShape(m,y,_){y===1&&m.splice(m.length-2,1),_===1&&m.pop()}static calcMatMulShape(m,y){return m[1]!==y[0]?void 0:[m[0],y[1]]}}i.MatMulUtil=h;class u{static calcShape(m,y,_=!1){let T=m.length,w=y.length;if(T===0)return y;if(w===0)return m;let x=Math.max(m.length,y.length),S=new Array(x);if(_){if(T<2||w<2)return;let P=h.calcMatMulShape([m[T-2],m[T-1]],[y[w-2],y[w-1]]);if(P===void 0)return;[S[x-2],S[x-1]]=P}for(let P=_?3:1;P<=x;P++){let C=T-P<0?1:m[T-P],M=w-P<0?1:y[w-P];if(C!==M&&C>1&&M>1)return;S[x-P]=Math.max(C,M)}return S}static index(m,y){let _=new Array(y.length);return u.fillIndex(m,y,_),_}static fillIndex(m,y,_){let T=m.length-y.length;for(let w=0;w<y.length;w++)_[w]=m[T+w]%y[w]}static calc(m,y,_,T,w){let x=u.calcShape(m.dims,y.dims);if(x){if(T&&!e.areEqual(x,m.dims))return;let S=e.size(x),P=T?m:new d.Tensor(x,w||m.type);if(x.length===0)P.set([],_(m.get([]),y.get([])));else{let C=new Array(x.length),M=new Array(m.dims.length),j=new Array(y.dims.length),B,E=0,V=0,O=!1,k=!1;m.dims.length===0&&(E=m.get([]),O=!0),y.dims.length===0&&(V=y.get([]),k=!0);for(let N=0;N<S;N++){B=N;for(let L=x.length-1;L>=0;L--)C[L]=B%x[L],B=Math.floor(B/x[L]);O||(u.fillIndex(C,m.dims,M),E=m.get(M)),k||(u.fillIndex(C,y.dims,j),V=y.get(j)),P.set(C,_(E,V))}}return P}}static isValidBroadcast(m,y){let _=m.length,T=y.length;if(_>T)return!1;for(let w=1;w<=_;w++)if(m[_-w]!==1&&m[_-w]!==y[T-w])return!1;return!0}static getBroadcastDims(m,y){let _=m.length,T=[];for(let w=0;w<_;w++){let x=_-1-w,S=m[x]||1;(y[y.length-1-w]||1)>1&&S===1&&T.unshift(x)}return T}}i.BroadcastUtil=u,i.arrayCopyHelper=function(g,m,y,_,T){if(_<0||_>=m.length)throw new Error("sourceIndex out of bounds");if(y<0||y>=g.length)throw new Error("targetIndex out of bounds");if(_+T>m.length)throw new Error("source indices to be copied are outside bounds");if(y+T>g.length)throw new Error("target array is too small to hold result");for(let w=0;w<T;w++)g[y+w]=m[_+w]},i.GemmUtil=class{static getShapeOfGemmResult(g,m,y,_,T){if(g.length!==2||y.length!==2)throw new Error("shape need to be of size 2");let w,x,S;m?(w=g[1],x=g[0]):(w=g[0],x=g[1]);let P=-1;if(_?(S=y[0],P=1):(S=y[1],P=0),y[P]!==x)throw new Error("dimension mismatch");if(w<=0||S<=0||x<=0)throw new Error("invalid shape specified");if(T&&!u.isValidBroadcast(T,[w,S]))throw new Error("gemm: invalid bias shape for broadcast");return[w,S,x]}};class o{static tensorDataTypeFromProto(m){switch(m){case p.onnx.TensorProto.DataType.INT8:return"int8";case p.onnx.TensorProto.DataType.UINT8:return"uint8";case p.onnx.TensorProto.DataType.BOOL:return"bool";case p.onnx.TensorProto.DataType.INT16:return"int16";case p.onnx.TensorProto.DataType.UINT16:return"uint16";case p.onnx.TensorProto.DataType.INT32:return"int32";case p.onnx.TensorProto.DataType.UINT32:return"uint32";case p.onnx.TensorProto.DataType.FLOAT:return"float32";case p.onnx.TensorProto.DataType.DOUBLE:return"float64";case p.onnx.TensorProto.DataType.STRING:return"string";case p.onnx.TensorProto.DataType.INT64:return"int32";case p.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${p.onnx.TensorProto.DataType[m]}`)}}static tensorDataTypeStringToEnum(m){switch(m){case"int8":return p.onnx.TensorProto.DataType.INT8;case"uint8":return p.onnx.TensorProto.DataType.UINT8;case"bool":return p.onnx.TensorProto.DataType.BOOL;case"int16":return p.onnx.TensorProto.DataType.INT16;case"uint16":return p.onnx.TensorProto.DataType.UINT16;case"int32":return p.onnx.TensorProto.DataType.INT32;case"uint32":return p.onnx.TensorProto.DataType.UINT32;case"float32":return p.onnx.TensorProto.DataType.FLOAT;case"float64":return p.onnx.TensorProto.DataType.DOUBLE;case"string":return p.onnx.TensorProto.DataType.STRING;case"int64":return p.onnx.TensorProto.DataType.INT64;case"uint64":return p.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${m}`)}}static tensorDimsFromProto(m){return m.map(y=>f.default.isLong(y)?y.toNumber():y)}static tensorValueTypeFromProto(m){return{tensorType:o.tensorDataTypeFromProto(m.elemType),shape:{dims:o.tensorDimsFromProto(m.shape.dim.map(y=>y.dimValue))}}}static tensorDimsFromORTFormat(m){let y=[];for(let _=0;_<m.dimsLength();_++)y.push(n.longToNumber(m.dims(_)));return y}static tensorAttributesFromORTFormat(m){let y=[];for(let _=0;_<m.attributesLength();_++)y.push(m.attributes(_));return y}}i.ProtoUtil=o;class n{static longToNumber(m,y){return f.default.isLong(m)?m.toNumber():m instanceof a.flatbuffers.Long?f.default.fromValue({low:m.low,high:m.high,unsigned:y!=null&&y}).toNumber():m}static isLong(m){return f.default.isLong(m)||m instanceof a.flatbuffers.Long}}i.LongUtil=n;class e{static size(m){return e.getSizeFromDimensionRange(m,0,m.length)}static sizeFromDimension(m,y){if(y<0||y>m.length)throw new Error(`invalid dimension of ${y} for sizeFromDimension as Tensor has ${m.length} dimensions.`);return e.getSizeFromDimensionRange(m,y,m.length)}static sizeToDimension(m,y){if(y<0||y>m.length)throw new Error(`invalid dimension of ${y} for sizeToDimension as Tensor has ${m.length} dimensions.`);return e.getSizeFromDimensionRange(m,0,y)}static getSizeFromDimensionRange(m,y,_){let T=1;for(let w=y;w<_;w++){if(m[w]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");T*=m[w]}return T}static computeStrides(m){let y=m.length;if(y===0)return[];if(y===1)return[1];let _=new Array(y);_[y-1]=1,_[y-2]=m[y-1];for(let T=y-3;T>=0;--T)_[T]=_[T+1]*m[T+1];return _}static transpose(m){return m.slice().reverse()}static indicesToOffset(m,y,_){_===void 0&&(_=m.length);let T=0;for(let w=0;w<_;++w)T+=y[w]*m[w];return T}static offsetToIndices(m,y){let _=y.length;if(_===0)return[];if(_===1)return[m*y[0]];let T=new Array(y.length);for(let w=0;w<T.length-1;++w)T[w]=Math.floor(m/y[w]),m-=T[w]*y[w];return T[T.length-1]=m,T}static normalizeAxis(m,y){if(m<-y&&m>=y)throw new Error("unsupported axis for this operation.");return m<0?m+y:m}static normalizeAxes(m,y){return m.map(_=>this.normalizeAxis(_,y))}static incrementIndex(m,y,_){if(y.length===0||m.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(_===void 0)_=y.length;else if(_<=0||_>y.length)throw new Error("Incorrect axis to increment on");for(let T=_-1;T>=0&&(m[T]++,!(m[T]<y[T]));--T)m[T]=0}static calculateReshapedDims(m,y){if(y.length===0){if(m.length===0||e.size(m)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}let _=y.length,T=new Array(_),w=-1,x=1;for(let P=0;P<_;P++){if(y[P]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(y[P]===-1){if(w!==-1)throw new Error("at most one dimension in shape hints can be -1");w=P}else{if(y[P]===0){if(P>=m.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");T[P]=m[P]}else T[P]=y[P];x*=T[P]}}let S=e.size(m);if(w!==-1){if(S%x!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${m}] Output shape: [${y}]`);T[w]=S/x}else if(x!==S)throw new Error("reshapedDims and originalDims don't have matching sizes");return T}static sortBasedOnPerm(m,y){return y?y.map(_=>m[_]):m.slice().reverse()}static padShape(m,y){let _=m.length;return m.map((T,w)=>T+y[w]+y[w+_])}static areEqual(m,y){return m.length===y.length&&m.every((_,T)=>_===y[T])}static validateDimsAndCalcSize(m){if(m.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let y=1;for(let _ of m){if(!Number.isInteger(_))throw new TypeError(`Invalid shape: ${_} is not an integer`);if(_<0||_>2147483647)throw new TypeError(`Invalid shape: length ${_} is not allowed`);y*=_}return y}static flattenShape(m,y){y<0&&(y+=m.length);let _=m.reduce((w,x)=>w*x,1),T=m.slice(y).reduce((w,x)=>w*x,1);return[_/T,T]}static squeezeShape(m,y){let _=new Array;y=e.normalizeAxes(y,m.length);for(let T=0;T<m.length;T++){let w=y.indexOf(T)>=0;if(w&&m[T]!==1)throw new Error("squeeze an axis of size different than 1");(y.length===0&&m[T]>1||y.length>0&&!w)&&_.push(m[T])}return _}static unsqueezeShape(m,y){let _=new Array(m.length+y.length);_.fill(0);for(let w=0;w<y.length;w++){let x=e.normalizeAxis(y[w],_.length);if(x>=_.length)throw new Error("'axes' has an out of range axis");if(_[x]!==0)throw new Error("'axes' has a duplicate axis");_[x]=1}let T=0;for(let w=0;w<_.length;w++)_[w]===0&&(_[w]=m[T++]);if(T!==m.length)throw new Error("the unsqueezed dimension could not be established");return _}}i.ShapeUtil=e,i.MathUtil=class{static sqr(g,m,y,_,T){if(_<0||_>=m.length)throw new Error("sourceIndex out of bounds");if(y<0||y>=g.length)throw new Error("targetIndex out of bounds");if(_+T>m.length)throw new Error("source indices to be copied are outside bounds");if(y+T>g.length)throw new Error("target array is too small to hold result");for(let w=0;w<T;w++)g[y+w]+=Math.pow(m[_+w],2)}static axpy(g,m,y,_,T,w){if(_<0||_>=m.length)throw new Error("sourceIndex out of bounds");if(y<0||y>=g.length)throw new Error("targetIndex out of bounds");if(_+T>m.length)throw new Error("source indices to be copied are outside bounds");if(y+T>g.length)throw new Error("target array is too small to hold result");for(let x=0;x<T;x++)g[y+x]+=w*m[_+x]}static powx(g,m,y,_,T,w){if(_<0||_>=m.length)throw new Error("sourceIndex out of bounds");if(y<0||y>=g.length)throw new Error("targetIndex out of bounds");if(_+T>m.length)throw new Error("source indices to be copied are outside bounds");if(y+T>g.length)throw new Error("target array is too small to hold result");for(let x=0;x<T;x++)g[y+x]=Math.pow(m[_+x],w)}static mul(g,m,y,_,T){if(_<0||_>=m.length)throw new Error("sourceIndex out of bounds");if(y<0||y>=g.length)throw new Error("targetIndex out of bounds");if(_+T>m.length)throw new Error("source indices to be copied are outside bounds");if(y+T>g.length)throw new Error("target array is too small to hold result");for(let w=0;w<T;w++)g[y+w]=m[_+w]*g[y+w]}};class t{static splitShape(m,y,_,T){if(_.length===0){if(!T)throw new Error("need to know number of outputs when the 'split' attribute is not specified");t.determineSplit(m[y],T,_)}let w=[],x=[0];for(let S=0;S<_.length;++S){S!==0&&x.push(x[S-1]+_[S-1]);let P=m.slice();P[y]=_[S],w.push(P)}return[w,x]}static determineSplit(m,y,_){if(m%y!=0)throw new Error("cannot split tensor to equal sized parts");for(let T=0;T<y;++T)_.push(m/y)}}i.SplitUtil=t;class r{static calcReduce(m,y,_,T,w){let x=m.dims.slice(0);y.length===0&&x.forEach((E,V)=>y.push(V));let S=r.calcReduceShape(x,y,!0),P=e.size(S),C=new d.Tensor(S,m.type),M=e.computeStrides(S),j=e.computeStrides(x),B=new Array(x.length);for(let E=0;E<P;E++){let V=e.offsetToIndices(E,M);u.fillIndex(V,x,B),C.set(V,r.calcReduceByAxis(m.numberData,y,x,0,e.indicesToOffset(B,j),T,w))}return _?C:new d.Tensor(r.calcReduceShape(x,y,_),C.type,void 0,void 0,C.data,C.dataId)}static calcReduceByAxis(m,y,_,T,w,x,S){let P=0;if(T>=y.length)return x(m[w]);let C=y[T],M=C>=_.length?1:e.size(_.slice(C+1));for(let j=0;j<_[C];j++)P=j===0?r.calcReduceByAxis(m,y,_,T+1,w,x,S):S(P,r.calcReduceByAxis(m,y,_,T+1,w,x,S)),w+=M;return P}static calcReduceShape(m,y,_){let T=m.slice();for(let w=0;w<y.length;w++)T[y[w]]=_?1:0;return T.filter(w=>w!==0)}}i.ReduceUtil=r;class s{static adjustPoolAttributes(m,y,_,T,w,x){if(!m&&_.length!==y.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(m)for(let S=0;S<y.length-2;S++)S>=_.length?_.push(y[S+2]):_[S]=y[S+2];for(let S=0;S<_.length;S++)if(S<T.length){if(T[S]<0)throw new Error("strides should be greater than or equal to 1")}else T.push(1);for(let S=0;S<_.length;S++)if(S<w.length){if(w[S]<0)throw new Error("dilations should be greater than or equal to 1")}else w.push(1);for(let S=0;S<2*_.length;S++)if(S<x.length){if(x[S]<0)throw new Error("pad should be greater than or equal to 1")}else x.push(0);for(let S=0;S<_.length;S++){if(_[S]<=0)throw new Error("kernel shapes need to be greater than 0");if(x[S]>=_[S]||x[S+_.length]>=_[S])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(m,y,_,T,w,x){if(x){if(w.length!==2*(m.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(y.length!==m.length-2)throw new Error("length of strides should be the length of data dimensions");if(T.length!==m.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let S=0;S<m.length-2;S++)s.adjustPadAndReturnShape(m[S+2],y[S],_[S],T[S],w,S,S+m.length-2,x)}}static computePoolOutputShape(m,y,_,T,w,x,S){if(y.length<=0)throw new Error("input shape must be of size greater than 0");let P=[y[0],y[1]];return s.computeShapeHelper(m,y,P,_,T,w,x,S),P}static computeConvOutputShape(m,y,_,T,w,x,S){if(m.length<=0||y.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let P=[m[0],y[0]];return s.computeShapeHelper(!1,m,P,_,T,w,x,S),P}static computeShapeHelper(m,y,_,T,w,x,S,P){if(m)for(let C=0;C<y.length-2;C++)_.push(1);else for(let C=0;C<y.length-2;C++)_.push(s.adjustPadAndReturnShape(y[C+2],T[C],w[C],x[C],S,C,C+y.length-2,P))}static adjustPadAndReturnShape(m,y,_,T,w,x,S,P){let C=_*(T-1)+1;if(!P||P==="NOTSET")return Math.floor((m+w[x]+w[S]-C)/y+1);switch(P){case"VALID":return w[x]=0,w[S]=0,Math.floor((m-C)/y+1);case"SAME_LOWER":case"SAME_UPPER":if(_!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let M=((m+y-1)/y-1)*y+T-m;return w[x]=Math.floor(P==="SAME_LOWER"?(M+1)/2:M/2),w[S]=M-w[x],Math.floor((m+M-T)/y+1)}default:throw new Error("Unsupported AutoPad type")}}}i.PoolConvUtil=s,i.MIN_CLIP=-34028234663852886e22,i.MAX_CLIP=34028234663852886e22,i.decodeUtf8String=function(g){return new TextDecoder().decode(g)}},8408:(b,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.version=void 0,i.version="1.16.3"},9544:function(b,i,l){"use strict";var c,a=this&&this.__createBinding||(Object.create?function(M,j,B,E){E===void 0&&(E=B);var V=Object.getOwnPropertyDescriptor(j,B);V&&!("get"in V?!j.__esModule:V.writable||V.configurable)||(V={enumerable:!0,get:function(){return j[B]}}),Object.defineProperty(M,E,V)}:function(M,j,B,E){E===void 0&&(E=B),M[E]=j[B]}),f=this&&this.__setModuleDefault||(Object.create?function(M,j){Object.defineProperty(M,"default",{enumerable:!0,value:j})}:function(M,j){M.default=j}),p=this&&this.__importStar||function(M){if(M&&M.__esModule)return M;var j={};if(M!=null)for(var B in M)B!=="default"&&Object.prototype.hasOwnProperty.call(M,B)&&a(j,M,B);return f(j,M),j};Object.defineProperty(i,"__esModule",{value:!0}),i.endProfiling=i.run=i.releaseSession=i.createSession=i.createSessionFinalize=i.createSessionAllocate=i.initializeRuntime=i.initializeWebAssemblyInstance=void 0;let d=l(2235),h=p(l(1259)),u=l(263),o=()=>!!d.env.wasm.proxy&&typeof document<"u",n,e,t,r=!1,s=!1,g=!1,m=[],y=[],_=[],T=[],w=[],x=[],S=()=>{if(r||!s||g||!n)throw new Error("worker not ready")},P=M=>{switch(M.data.type){case"init-wasm":r=!1,M.data.err?(g=!0,e[1](M.data.err)):(s=!0,e[0]());break;case"init-ort":M.data.err?t[1](M.data.err):t[0]();break;case"create_allocate":M.data.err?m.shift()[1](M.data.err):m.shift()[0](M.data.out);break;case"create_finalize":M.data.err?y.shift()[1](M.data.err):y.shift()[0](M.data.out);break;case"create":M.data.err?_.shift()[1](M.data.err):_.shift()[0](M.data.out);break;case"release":M.data.err?T.shift()[1](M.data.err):T.shift()[0]();break;case"run":M.data.err?w.shift()[1](M.data.err):w.shift()[0](M.data.out);break;case"end-profiling":M.data.err?x.shift()[1](M.data.err):x.shift()[0]()}},C=typeof document<"u"?(c=document?.currentScript)===null||c===void 0?void 0:c.src:void 0;i.initializeWebAssemblyInstance=async()=>{if(o()){if(s)return;if(r)throw new Error("multiple calls to 'initWasm()' detected.");if(g)throw new Error("previous call to 'initWasm()' failed.");return r=!0,d.env.wasm.wasmPaths===void 0&&C&&C.indexOf("blob:")!==0&&(d.env.wasm.wasmPaths=C.substr(0,+C.lastIndexOf("/")+1)),new Promise((M,j)=>{n?.terminate(),n=l(8050).Z(),n.onmessage=P,e=[M,j];let B={type:"init-wasm",in:d.env.wasm};n.postMessage(B)})}return(0,u.initializeWebAssembly)(d.env.wasm)},i.initializeRuntime=async M=>{if(o())return S(),new Promise((j,B)=>{t=[j,B];let E={type:"init-ort",in:M};n.postMessage(E)});await h.initRuntime(M)},i.createSessionAllocate=async M=>o()?(S(),new Promise((j,B)=>{m.push([j,B]);let E={type:"create_allocate",in:{model:M}};n.postMessage(E,[M.buffer])})):h.createSessionAllocate(M),i.createSessionFinalize=async(M,j)=>o()?(S(),new Promise((B,E)=>{y.push([B,E]);let V={type:"create_finalize",in:{modeldata:M,options:j}};n.postMessage(V)})):h.createSessionFinalize(M,j),i.createSession=async(M,j)=>o()?(S(),new Promise((B,E)=>{_.push([B,E]);let V={type:"create",in:{model:M,options:j}};n.postMessage(V,[M.buffer])})):h.createSession(M,j),i.releaseSession=async M=>{if(o())return S(),new Promise((j,B)=>{T.push([j,B]);let E={type:"release",in:M};n.postMessage(E)});h.releaseSession(M)},i.run=async(M,j,B,E,V)=>o()?(S(),new Promise((O,k)=>{w.push([O,k]);let N={type:"run",in:{sessionId:M,inputIndices:j,inputs:B,outputIndices:E,options:V}};n.postMessage(N,h.extractTransferableBuffers(B))})):h.run(M,j,B,E,V),i.endProfiling=async M=>{if(o())return S(),new Promise((j,B)=>{x.push([j,B]);let E={type:"end-profiling",in:M};n.postMessage(E)});h.endProfiling(M)}},7918:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.setRunOptions=void 0;let c=l(263),a=l(1497);i.setRunOptions=f=>{let p=(0,c.getInstance)(),d=0,h=[],u=f||{};try{if(f?.logSeverityLevel===void 0)u.logSeverityLevel=2;else if(typeof f.logSeverityLevel!="number"||!Number.isInteger(f.logSeverityLevel)||f.logSeverityLevel<0||f.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${f.logSeverityLevel}`);if(f?.logVerbosityLevel===void 0)u.logVerbosityLevel=0;else if(typeof f.logVerbosityLevel!="number"||!Number.isInteger(f.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${f.logVerbosityLevel}`);f?.terminate===void 0&&(u.terminate=!1);let o=0;return f?.tag!==void 0&&(o=(0,a.allocWasmString)(f.tag,h)),d=p._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,o),d===0&&(0,a.checkLastError)("Can't create run options."),f?.extra!==void 0&&(0,a.iterateExtraOptions)(f.extra,"",new WeakSet,(n,e)=>{let t=(0,a.allocWasmString)(n,h),r=(0,a.allocWasmString)(e,h);p._OrtAddRunConfigEntry(d,t,r)!==0&&(0,a.checkLastError)(`Can't set a run config entry: ${n} - ${e}.`)}),[d,h]}catch(o){throw d!==0&&p._OrtReleaseRunOptions(d),h.forEach(n=>p._free(n)),o}}},6640:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.OnnxruntimeWebAssemblySessionHandler=void 0;let c=l(2806),a=l(2235),f=l(2850),p=l(9544),d;i.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(h){let u=await fetch(h);if(u.status!==200)throw new Error(`failed to load model: ${h}`);let o=await u.arrayBuffer();return(0,p.createSessionAllocate)(new Uint8Array(o))}async loadModel(h,u){if(d||(await(0,p.initializeRuntime)(a.env),d=!0),typeof h=="string")if(typeof process<"u"&&process.versions&&process.versions.node){let o=await(0,f.promisify)(c.readFile)(h);[this.sessionId,this.inputNames,this.outputNames]=await(0,p.createSession)(o,u)}else{let o=await this.createSessionAllocate(h);[this.sessionId,this.inputNames,this.outputNames]=await(0,p.createSessionFinalize)(o,u)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,p.createSession)(h,u)}async dispose(){return(0,p.releaseSession)(this.sessionId)}async run(h,u,o){let n=[],e=[];Object.entries(h).forEach(g=>{let m=g[0],y=g[1],_=this.inputNames.indexOf(m);if(_===-1)throw new Error(`invalid input '${m}'`);n.push(y),e.push(_)});let t=[];Object.entries(u).forEach(g=>{let m=g[0],y=this.outputNames.indexOf(m);if(y===-1)throw new Error(`invalid output '${m}'`);t.push(y)});let r=await(0,p.run)(this.sessionId,e,n.map(g=>[g.type,g.dims,g.data]),t,o),s={};for(let g=0;g<r.length;g++)s[this.outputNames[t[g]]]=new a.Tensor(r[g][0],r[g][2],r[g][1]);return s}startProfiling(){}endProfiling(){(0,p.endProfiling)(this.sessionId)}}},7622:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.setSessionOptions=void 0;let c=l(263),a=l(1497);i.setSessionOptions=f=>{var p,d,h,u;let o=(0,c.getInstance)(),n=0,e=[],t=f||{};(r=>{r.extra||(r.extra={}),r.extra.session||(r.extra.session={});let s=r.extra.session;s.use_ort_model_bytes_directly||(s.use_ort_model_bytes_directly="1"),r.executionProviders&&r.executionProviders.some(g=>(typeof g=="string"?g:g.name)==="webgpu")&&(r.enableMemPattern=!1)})(t);try{let r=(T=>{switch(T){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${T}`)}})((p=t.graphOptimizationLevel)!==null&&p!==void 0?p:"all"),s=(T=>{switch(T){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${T}`)}})((d=t.executionMode)!==null&&d!==void 0?d:"sequential"),g=typeof t.logId=="string"?(0,a.allocWasmString)(t.logId,e):0,m=(h=t.logSeverityLevel)!==null&&h!==void 0?h:2;if(!Number.isInteger(m)||m<0||m>4)throw new Error(`log serverity level is not valid: ${m}`);let y=(u=t.logVerbosityLevel)!==null&&u!==void 0?u:0;if(!Number.isInteger(y)||y<0||y>4)throw new Error(`log verbosity level is not valid: ${y}`);let _=typeof t.optimizedModelFilePath=="string"?(0,a.allocWasmString)(t.optimizedModelFilePath,e):0;return n=o._OrtCreateSessionOptions(r,!!t.enableCpuMemArena,!!t.enableMemPattern,s,!!t.enableProfiling,0,g,m,y,_),n===0&&(0,a.checkLastError)("Can't create session options."),t.executionProviders&&((T,w,x)=>{for(let S of w){let P=typeof S=="string"?S:S.name;switch(P){case"xnnpack":P="XNNPACK";break;case"webnn":if(P="WEBNN",typeof S!="string"){let M=S;if(M?.deviceType){let j=(0,a.allocWasmString)("deviceType",x),B=(0,a.allocWasmString)(M.deviceType,x);(0,c.getInstance)()._OrtAddSessionConfigEntry(T,j,B)!==0&&(0,a.checkLastError)(`Can't set a session config entry: 'deviceType' - ${M.deviceType}.`)}if(M?.powerPreference){let j=(0,a.allocWasmString)("powerPreference",x),B=(0,a.allocWasmString)(M.powerPreference,x);(0,c.getInstance)()._OrtAddSessionConfigEntry(T,j,B)!==0&&(0,a.checkLastError)(`Can't set a session config entry: 'powerPreference' - ${M.powerPreference}.`)}}break;case"webgpu":P="JS";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${P}`)}let C=(0,a.allocWasmString)(P,x);(0,c.getInstance)()._OrtAppendExecutionProvider(T,C)!==0&&(0,a.checkLastError)(`Can't append execution provider: ${P}.`)}})(n,t.executionProviders,e),t.extra!==void 0&&(0,a.iterateExtraOptions)(t.extra,"",new WeakSet,(T,w)=>{let x=(0,a.allocWasmString)(T,e),S=(0,a.allocWasmString)(w,e);o._OrtAddSessionConfigEntry(n,x,S)!==0&&(0,a.checkLastError)(`Can't set a session config entry: ${T} - ${w}.`)}),[n,e]}catch(r){throw n!==0&&o._OrtReleaseSessionOptions(n),e.forEach(s=>o._free(s)),r}}},7917:(b,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.logLevelStringToEnum=i.tensorTypeToTypedArrayConstructor=i.getTensorElementSize=i.tensorDataTypeEnumToString=i.tensorDataTypeStringToEnum=void 0,i.tensorDataTypeStringToEnum=l=>{switch(l){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${l}`)}},i.tensorDataTypeEnumToString=l=>{switch(l){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${l}`)}},i.getTensorElementSize=l=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][l],i.tensorTypeToTypedArrayConstructor=l=>{switch(l){case"float16":case"uint16":return Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${l}`)}},i.logLevelStringToEnum=l=>{switch(l){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${l}`)}}},1259:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.extractTransferableBuffers=i.endProfiling=i.run=i.releaseSession=i.createSession=i.createSessionFinalize=i.createSessionAllocate=i.initRuntime=void 0;let c=l(7918),a=l(7622),f=l(7917),p=l(263),d=l(1497);i.initRuntime=async u=>{var o,n;o=u.wasm.numThreads,n=(0,f.logLevelStringToEnum)(u.logLevel),(0,p.getInstance)()._OrtInit(o,n)!==0&&(0,d.checkLastError)("Can't initialize onnxruntime.")};let h=new Map;i.createSessionAllocate=u=>{let o=(0,p.getInstance)(),n=o._malloc(u.byteLength);if(n===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${u.byteLength}.`);return o.HEAPU8.set(u,n),[n,u.byteLength]},i.createSessionFinalize=(u,o)=>{let n=(0,p.getInstance)(),e=0,t=0,r=[],s=[],g=[];try{[t,r]=(0,a.setSessionOptions)(o),e=n._OrtCreateSession(u[0],u[1],t),e===0&&(0,d.checkLastError)("Can't create a session.");let[m,y]=(w=>{let x=(0,p.getInstance)(),S=x.stackSave();try{let P=x.stackAlloc(8);return x._OrtGetInputOutputCount(w,P,P+4)!==0&&(0,d.checkLastError)("Can't get session input/output count."),[x.HEAP32[P/4],x.HEAP32[P/4+1]]}finally{x.stackRestore(S)}})(e),_=[],T=[];for(let w=0;w<m;w++){let x=n._OrtGetInputName(e,w);x===0&&(0,d.checkLastError)("Can't get an input name."),s.push(x),_.push(n.UTF8ToString(x))}for(let w=0;w<y;w++){let x=n._OrtGetOutputName(e,w);x===0&&(0,d.checkLastError)("Can't get an output name."),g.push(x),T.push(n.UTF8ToString(x))}return h.set(e,[e,s,g]),[e,_,T]}catch(m){throw s.forEach(y=>n._OrtFree(y)),g.forEach(y=>n._OrtFree(y)),e!==0&&n._OrtReleaseSession(e),m}finally{n._free(u[0]),t!==0&&n._OrtReleaseSessionOptions(t),r.forEach(m=>n._free(m))}},i.createSession=(u,o)=>{let n=(0,i.createSessionAllocate)(u);return(0,i.createSessionFinalize)(n,o)},i.releaseSession=u=>{let o=(0,p.getInstance)(),n=h.get(u);if(!n)throw new Error(`cannot release session. invalid session id: ${u}`);let[e,t,r]=n;t.forEach(s=>o._OrtFree(s)),r.forEach(s=>o._OrtFree(s)),o._OrtReleaseSession(e),h.delete(u)},i.run=async(u,o,n,e,t)=>{let r=(0,p.getInstance)(),s=h.get(u);if(!s)throw new Error(`cannot run inference. invalid session id: ${u}`);let[g,m,y]=s,_=o.length,T=e.length,w=0,x=[],S=[],P=[];try{[w,x]=(0,c.setRunOptions)(t);for(let V=0;V<_;V++){let O=n[V][0],k=n[V][1],N=n[V][2],L,z;if(Array.isArray(N)){z=4*N.length,L=r._malloc(z),P.push(L);let Q=L/4;for(let ne=0;ne<N.length;ne++){if(typeof N[ne]!="string")throw new TypeError(`tensor data at index ${ne} is not a string`);r.HEAPU32[Q++]=(0,d.allocWasmString)(N[ne],P)}}else z=N.byteLength,L=r._malloc(z),P.push(L),r.HEAPU8.set(new Uint8Array(N.buffer,N.byteOffset,z),L);let J=r.stackSave(),Z=r.stackAlloc(4*k.length);try{let Q=Z/4;k.forEach(re=>r.HEAP32[Q++]=re);let ne=r._OrtCreateTensor((0,f.tensorDataTypeStringToEnum)(O),L,z,Z,k.length);ne===0&&(0,d.checkLastError)(`Can't create tensor for input[${V}].`),S.push(ne)}finally{r.stackRestore(J)}}let C=r.stackSave(),M=r.stackAlloc(4*_),j=r.stackAlloc(4*_),B=r.stackAlloc(4*T),E=r.stackAlloc(4*T);try{let V=M/4,O=j/4,k=B/4,N=E/4;for(let Z=0;Z<_;Z++)r.HEAPU32[V++]=S[Z],r.HEAPU32[O++]=m[o[Z]];for(let Z=0;Z<T;Z++)r.HEAPU32[k++]=0,r.HEAPU32[N++]=y[e[Z]];let L=r._OrtRun(g,j,M,_,E,T,B,w),z=r.jsepRunPromise;z&&z.then!==void 0&&(L=await z);let J=[];L!==0&&(0,d.checkLastError)("failed to call OrtRun().");for(let Z=0;Z<T;Z++){let Q=r.HEAPU32[B/4+Z],ne=r.stackSave(),re=r.stackAlloc(16),se,ge=0;try{L=r._OrtGetTensorData(Q,re,re+4,re+8,re+12),L!==0&&(0,d.checkLastError)(`Can't access output tensor data on index ${Z}.`);let X=re/4,ae=r.HEAPU32[X++];ge=r.HEAPU32[X++];let ve=r.HEAPU32[X++],Ae=r.HEAPU32[X++],Se=[];for(let Oe=0;Oe<Ae;Oe++)Se.push(r.HEAPU32[ve/4+Oe]);r._OrtFree(ve);let De=Se.length===0?1:Se.reduce((Oe,Ce)=>Oe*Ce);if(se=(0,f.tensorDataTypeEnumToString)(ae),se==="string"){let Oe=[],Ce=ge/4;for(let Fe=0;Fe<De;Fe++){let He=r.HEAPU32[Ce++],qe=Fe===De-1?void 0:r.HEAPU32[Ce]-He;Oe.push(r.UTF8ToString(He,qe))}J.push([se,Se,Oe])}else{let Oe=new((0,f.tensorTypeToTypedArrayConstructor)(se))(De);new Uint8Array(Oe.buffer,Oe.byteOffset,Oe.byteLength).set(r.HEAPU8.subarray(ge,ge+Oe.byteLength)),J.push([se,Se,Oe])}}finally{r.stackRestore(ne),se==="string"&&ge&&r._free(ge),r._OrtReleaseTensor(Q)}}return J}finally{r.stackRestore(C)}}finally{S.forEach(C=>r._OrtReleaseTensor(C)),P.forEach(C=>r._free(C)),w!==0&&r._OrtReleaseRunOptions(w),x.forEach(C=>r._free(C))}},i.endProfiling=u=>{let o=(0,p.getInstance)(),n=h.get(u);if(!n)throw new Error("invalid session id");let e=n[0],t=o._OrtEndProfiling(e);t===0&&(0,d.checkLastError)("Can't get an profile file name."),o._OrtFree(t)},i.extractTransferableBuffers=u=>{let o=[];for(let n of u){let e=n[2];!Array.isArray(e)&&e.buffer&&o.push(e.buffer)}return o}},263:function(b,i,l){"use strict";var c=this&&this.__createBinding||(Object.create?function(t,r,s,g){g===void 0&&(g=s);var m=Object.getOwnPropertyDescriptor(r,s);m&&!("get"in m?!r.__esModule:m.writable||m.configurable)||(m={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(t,g,m)}:function(t,r,s,g){g===void 0&&(g=s),t[g]=r[s]}),a=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),f=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var s in t)s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)&&c(r,t,s);return a(r,t),r};Object.defineProperty(i,"__esModule",{value:!0}),i.dispose=i.getInstance=i.initializeWebAssembly=void 0;let p=f(l(6449)),d=l(932),h=l(3474),u,o=!1,n=!1,e=!1;i.initializeWebAssembly=async t=>{if(o)return Promise.resolve();if(n)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(e)throw new Error("previous call to 'initializeWebAssembly()' failed.");n=!0;let r=t.initTimeout,s=t.numThreads,g=t.simd,m=s>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),y=g&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),_=t.wasmPaths,T=typeof _=="string"?_:void 0,w=((C,M)=>M?C?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":C?"ort-wasm-simd.wasm":"ort-wasm.wasm")(y,m),x=typeof _=="object"?_[w]:void 0,S=!1,P=[];if(r>0&&P.push(new Promise(C=>{setTimeout(()=>{S=!0,C()},r)})),P.push(new Promise((C,M)=>{let j=m?h:d,B={locateFile:(E,V)=>m&&E.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([l(4154)],{type:"text/javascript"})):E.endsWith(".wasm")?x||(T??V)+w:V+E};if(m)if(typeof Blob>"u")B.mainScriptUrlOrBlob=p.join(__dirname,"ort-wasm-threaded.js");else{let E=`var ortWasmThreaded=(function(){var _scriptDir;return ${j.toString()}})();`;B.mainScriptUrlOrBlob=new Blob([E],{type:"text/javascript"})}j(B).then(E=>{n=!1,o=!0,u=E,C()},E=>{n=!1,e=!0,M(E)})})),await Promise.race(P),S)throw new Error(`WebAssembly backend initializing failed due to timeout: ${r}ms`)},i.getInstance=()=>{if(o&&u)return u;throw new Error("WebAssembly is not initialized yet.")},i.dispose=()=>{var t;!o||n||e||(n=!0,(t=u.PThread)===null||t===void 0||t.terminateAllThreads(),u=void 0,n=!1,o=!1,e=!0)}},1497:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.checkLastError=i.iterateExtraOptions=i.allocWasmString=void 0;let c=l(263);i.allocWasmString=(a,f)=>{let p=(0,c.getInstance)(),d=p.lengthBytesUTF8(a)+1,h=p._malloc(d);return p.stringToUTF8(a,h,d),f.push(h),h},i.iterateExtraOptions=(a,f,p,d)=>{if(typeof a=="object"&&a!==null){if(p.has(a))throw new Error("Circular reference in options");p.add(a)}Object.entries(a).forEach(([h,u])=>{let o=f?f+h:h;if(typeof u=="object")(0,i.iterateExtraOptions)(u,o+".",p,d);else if(typeof u=="string"||typeof u=="number")d(o,u.toString());else{if(typeof u!="boolean")throw new Error("Can't handle extra config type: "+typeof u);d(o,u?"1":"0")}})},i.checkLastError=a=>{let f=(0,c.getInstance)(),p=f.stackSave();try{let d=f.stackAlloc(8);f._OrtGetLastError(d,d+4);let h=f.HEAP32[d/4],u=f.HEAPU32[d/4+1],o=u?f.UTF8ToString(u):"";throw new Error(`${a} ERROR_CODE: ${h}, ERROR_MESSAGE: ${o}`)}finally{f.stackRestore(p)}}},8050:(b,i,l)=>{"use strict";l.d(i,{Z:()=>f});var c=l(6614),a=l.n(c);function f(){return a()('/*!\n* ONNX Runtime Web v1.16.3\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var e={918:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRunOptions=void 0;const n=r(263),a=r(497);t.setRunOptions=e=>{const t=(0,n.getInstance)();let r=0;const o=[],i=e||{};try{if(void 0===(null==e?void 0:e.logSeverityLevel))i.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(void 0===(null==e?void 0:e.logVerbosityLevel))i.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);void 0===(null==e?void 0:e.terminate)&&(i.terminate=!1);let n=0;return void 0!==(null==e?void 0:e.tag)&&(n=(0,a.allocWasmString)(e.tag,o)),r=t._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,n),0===r&&(0,a.checkLastError)("Can\'t create run options."),void 0!==(null==e?void 0:e.extra)&&(0,a.iterateExtraOptions)(e.extra,"",new WeakSet,((e,n)=>{const i=(0,a.allocWasmString)(e,o),s=(0,a.allocWasmString)(n,o);0!==t._OrtAddRunConfigEntry(r,i,s)&&(0,a.checkLastError)(`Can\'t set a run config entry: ${e} - ${n}.`)})),[r,o]}catch(e){throw 0!==r&&t._OrtReleaseRunOptions(r),o.forEach((e=>t._free(e))),e}}},622:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSessionOptions=void 0;const n=r(263),a=r(497);t.setSessionOptions=e=>{var t,r,o,i;const s=(0,n.getInstance)();let u=0;const c=[],l=e||{};(e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});const t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some((e=>"webgpu"===("string"==typeof e?e:e.name)))&&(e.enableMemPattern=!1)})(l);try{const e=(e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}})(null!==(t=l.graphOptimizationLevel)&&void 0!==t?t:"all"),f=(e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}})(null!==(r=l.executionMode)&&void 0!==r?r:"sequential"),d="string"==typeof l.logId?(0,a.allocWasmString)(l.logId,c):0,p=null!==(o=l.logSeverityLevel)&&void 0!==o?o:2;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log serverity level is not valid: ${p}`);const g=null!==(i=l.logVerbosityLevel)&&void 0!==i?i:0;if(!Number.isInteger(g)||g<0||g>4)throw new Error(`log verbosity level is not valid: ${g}`);const h="string"==typeof l.optimizedModelFilePath?(0,a.allocWasmString)(l.optimizedModelFilePath,c):0;return u=s._OrtCreateSessionOptions(e,!!l.enableCpuMemArena,!!l.enableMemPattern,f,!!l.enableProfiling,0,d,p,g,h),0===u&&(0,a.checkLastError)("Can\'t create session options."),l.executionProviders&&((e,t,r)=>{for(const o of t){let t="string"==typeof o?o:o.name;switch(t){case"xnnpack":t="XNNPACK";break;case"webnn":if(t="WEBNN","string"!=typeof o){const t=o;if(null==t?void 0:t.deviceType){const o=(0,a.allocWasmString)("deviceType",r),i=(0,a.allocWasmString)(t.deviceType,r);0!==(0,n.getInstance)()._OrtAddSessionConfigEntry(e,o,i)&&(0,a.checkLastError)(`Can\'t set a session config entry: \'deviceType\' - ${t.deviceType}.`)}if(null==t?void 0:t.powerPreference){const o=(0,a.allocWasmString)("powerPreference",r),i=(0,a.allocWasmString)(t.powerPreference,r);0!==(0,n.getInstance)()._OrtAddSessionConfigEntry(e,o,i)&&(0,a.checkLastError)(`Can\'t set a session config entry: \'powerPreference\' - ${t.powerPreference}.`)}}break;case"webgpu":t="JS";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${t}`)}const i=(0,a.allocWasmString)(t,r);0!==(0,n.getInstance)()._OrtAppendExecutionProvider(e,i)&&(0,a.checkLastError)(`Can\'t append execution provider: ${t}.`)}})(u,l.executionProviders,c),void 0!==l.extra&&(0,a.iterateExtraOptions)(l.extra,"",new WeakSet,((e,t)=>{const r=(0,a.allocWasmString)(e,c),n=(0,a.allocWasmString)(t,c);0!==s._OrtAddSessionConfigEntry(u,r,n)&&(0,a.checkLastError)(`Can\'t set a session config entry: ${e} - ${t}.`)})),[u,c]}catch(e){throw 0!==u&&s._OrtReleaseSessionOptions(u),c.forEach((e=>s._free(e))),e}}},917:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logLevelStringToEnum=t.tensorTypeToTypedArrayConstructor=t.getTensorElementSize=t.tensorDataTypeEnumToString=t.tensorDataTypeStringToEnum=void 0,t.tensorDataTypeStringToEnum=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},t.tensorDataTypeEnumToString=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},t.getTensorElementSize=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],t.tensorTypeToTypedArrayConstructor=e=>{switch(e){case"float16":case"uint16":return Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},t.logLevelStringToEnum=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}}},259:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractTransferableBuffers=t.endProfiling=t.run=t.releaseSession=t.createSession=t.createSessionFinalize=t.createSessionAllocate=t.initRuntime=void 0;const n=r(918),a=r(622),o=r(917),i=r(263),s=r(497);t.initRuntime=async e=>{var t,r;t=e.wasm.numThreads,r=(0,o.logLevelStringToEnum)(e.logLevel),0!==(0,i.getInstance)()._OrtInit(t,r)&&(0,s.checkLastError)("Can\'t initialize onnxruntime.")};const u=new Map;t.createSessionAllocate=e=>{const t=(0,i.getInstance)(),r=t._malloc(e.byteLength);if(0===r)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,r),[r,e.byteLength]},t.createSessionFinalize=(e,t)=>{const r=(0,i.getInstance)();let n=0,o=0,c=[];const l=[],f=[];try{[o,c]=(0,a.setSessionOptions)(t),n=r._OrtCreateSession(e[0],e[1],o),0===n&&(0,s.checkLastError)("Can\'t create a session.");const[d,p]=(e=>{const t=(0,i.getInstance)(),r=t.stackSave();try{const r=t.stackAlloc(8);return 0!==t._OrtGetInputOutputCount(e,r,r+4)&&(0,s.checkLastError)("Can\'t get session input/output count."),[t.HEAP32[r/4],t.HEAP32[r/4+1]]}finally{t.stackRestore(r)}})(n),g=[],h=[];for(let e=0;e<d;e++){const t=r._OrtGetInputName(n,e);0===t&&(0,s.checkLastError)("Can\'t get an input name."),l.push(t),g.push(r.UTF8ToString(t))}for(let e=0;e<p;e++){const t=r._OrtGetOutputName(n,e);0===t&&(0,s.checkLastError)("Can\'t get an output name."),f.push(t),h.push(r.UTF8ToString(t))}return u.set(n,[n,l,f]),[n,g,h]}catch(e){throw l.forEach((e=>r._OrtFree(e))),f.forEach((e=>r._OrtFree(e))),0!==n&&r._OrtReleaseSession(n),e}finally{r._free(e[0]),0!==o&&r._OrtReleaseSessionOptions(o),c.forEach((e=>r._free(e)))}},t.createSession=(e,r)=>{const n=(0,t.createSessionAllocate)(e);return(0,t.createSessionFinalize)(n,r)},t.releaseSession=e=>{const t=(0,i.getInstance)(),r=u.get(e);if(!r)throw new Error(`cannot release session. invalid session id: ${e}`);const[n,a,o]=r;a.forEach((e=>t._OrtFree(e))),o.forEach((e=>t._OrtFree(e))),t._OrtReleaseSession(n),u.delete(e)},t.run=async(e,t,r,a,c)=>{const l=(0,i.getInstance)(),f=u.get(e);if(!f)throw new Error(`cannot run inference. invalid session id: ${e}`);const[d,p,g]=f,h=t.length,m=a.length;let y=0,v=[];const b=[],w=[];try{[y,v]=(0,n.setRunOptions)(c);for(let e=0;e<h;e++){const t=r[e][0],n=r[e][1],a=r[e][2];let i,u;if(Array.isArray(a)){u=4*a.length,i=l._malloc(u),w.push(i);let e=i/4;for(let t=0;t<a.length;t++){if("string"!=typeof a[t])throw new TypeError(`tensor data at index ${t} is not a string`);l.HEAPU32[e++]=(0,s.allocWasmString)(a[t],w)}}else u=a.byteLength,i=l._malloc(u),w.push(i),l.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),i);const c=l.stackSave(),f=l.stackAlloc(4*n.length);try{let r=f/4;n.forEach((e=>l.HEAP32[r++]=e));const a=l._OrtCreateTensor((0,o.tensorDataTypeStringToEnum)(t),i,u,f,n.length);0===a&&(0,s.checkLastError)(`Can\'t create tensor for input[${e}].`),b.push(a)}finally{l.stackRestore(c)}}const e=l.stackSave(),i=l.stackAlloc(4*h),u=l.stackAlloc(4*h),f=l.stackAlloc(4*m),_=l.stackAlloc(4*m);try{let e=i/4,r=u/4,n=f/4,c=_/4;for(let n=0;n<h;n++)l.HEAPU32[e++]=b[n],l.HEAPU32[r++]=p[t[n]];for(let e=0;e<m;e++)l.HEAPU32[n++]=0,l.HEAPU32[c++]=g[a[e]];let v=l._OrtRun(d,u,i,h,_,m,f,y);const w=l.jsepRunPromise;w&&void 0!==w.then&&(v=await w);const O=[];0!==v&&(0,s.checkLastError)("failed to call OrtRun().");for(let e=0;e<m;e++){const t=l.HEAPU32[f/4+e],r=l.stackSave(),n=l.stackAlloc(16);let a,i=0;try{v=l._OrtGetTensorData(t,n,n+4,n+8,n+12),0!==v&&(0,s.checkLastError)(`Can\'t access output tensor data on index ${e}.`);let r=n/4;const u=l.HEAPU32[r++];i=l.HEAPU32[r++];const c=l.HEAPU32[r++],f=l.HEAPU32[r++],d=[];for(let e=0;e<f;e++)d.push(l.HEAPU32[c/4+e]);l._OrtFree(c);const p=0===d.length?1:d.reduce(((e,t)=>e*t));if(a=(0,o.tensorDataTypeEnumToString)(u),"string"===a){const e=[];let t=i/4;for(let r=0;r<p;r++){const n=l.HEAPU32[t++],a=r===p-1?void 0:l.HEAPU32[t]-n;e.push(l.UTF8ToString(n,a))}O.push([a,d,e])}else{const e=new((0,o.tensorTypeToTypedArrayConstructor)(a))(p);new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(l.HEAPU8.subarray(i,i+e.byteLength)),O.push([a,d,e])}}finally{l.stackRestore(r),"string"===a&&i&&l._free(i),l._OrtReleaseTensor(t)}}return O}finally{l.stackRestore(e)}}finally{b.forEach((e=>l._OrtReleaseTensor(e))),w.forEach((e=>l._free(e))),0!==y&&l._OrtReleaseRunOptions(y),v.forEach((e=>l._free(e)))}},t.endProfiling=e=>{const t=(0,i.getInstance)(),r=u.get(e);if(!r)throw new Error("invalid session id");const n=r[0],a=t._OrtEndProfiling(n);0===a&&(0,s.checkLastError)("Can\'t get an profile file name."),t._OrtFree(a)},t.extractTransferableBuffers=e=>{const t=[];for(const r of e){const e=r[2];!Array.isArray(e)&&e.buffer&&t.push(e.buffer)}return t}},263:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.getInstance=t.initializeWebAssembly=void 0;const i=o(r(449)),s=r(932),u=r(474);let c,l=!1,f=!1,d=!1;t.initializeWebAssembly=async e=>{if(l)return Promise.resolve();if(f)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(d)throw new Error("previous call to \'initializeWebAssembly()\' failed.");f=!0;const t=e.initTimeout,n=e.numThreads,a=e.simd,o=n>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(e){return!1}})(),p=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(e){return!1}})(),g=e.wasmPaths,h="string"==typeof g?g:void 0,m=((e,t)=>t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":e?"ort-wasm-simd.wasm":"ort-wasm.wasm")(p,o),y="object"==typeof g?g[m]:void 0;let v=!1;const b=[];if(t>0&&b.push(new Promise((e=>{setTimeout((()=>{v=!0,e()}),t)}))),b.push(new Promise(((e,t)=>{const n=o?u:s,a={locateFile:(e,t)=>o&&e.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([r(154)],{type:"text/javascript"})):e.endsWith(".wasm")?y||(null!=h?h:t)+m:t+e};if(o)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=i.join(__dirname,"ort-wasm-threaded.js");else{const e=`var ortWasmThreaded=(function(){var _scriptDir;return ${n.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([e],{type:"text/javascript"})}n(a).then((t=>{f=!1,l=!0,c=t,e()}),(e=>{f=!1,d=!0,t(e)}))}))),await Promise.race(b),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},t.getInstance=()=>{if(l&&c)return c;throw new Error("WebAssembly is not initialized yet.")},t.dispose=()=>{var e;!l||f||d||(f=!0,null===(e=c.PThread)||void 0===e||e.terminateAllThreads(),c=void 0,f=!1,l=!1,d=!0)}},497:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkLastError=t.iterateExtraOptions=t.allocWasmString=void 0;const n=r(263);t.allocWasmString=(e,t)=>{const r=(0,n.getInstance)(),a=r.lengthBytesUTF8(e)+1,o=r._malloc(a);return r.stringToUTF8(e,o,a),t.push(o),o},t.iterateExtraOptions=(e,r,n,a)=>{if("object"==typeof e&&null!==e){if(n.has(e))throw new Error("Circular reference in options");n.add(e)}Object.entries(e).forEach((([e,o])=>{const i=r?r+e:e;if("object"==typeof o)(0,t.iterateExtraOptions)(o,i+".",n,a);else if("string"==typeof o||"number"==typeof o)a(i,o.toString());else{if("boolean"!=typeof o)throw new Error("Can\'t handle extra config type: "+typeof o);a(i,o?"1":"0")}}))},t.checkLastError=e=>{const t=(0,n.getInstance)(),r=t.stackSave();try{const r=t.stackAlloc(8);t._OrtGetLastError(r,r+4);const n=t.HEAP32[r/4],a=t.HEAPU32[r/4+1],o=a?t.UTF8ToString(a):"";throw new Error(`${e} ERROR_CODE: ${n}, ERROR_MESSAGE: ${o}`)}finally{t.stackRestore(r)}}},474:(e,t,r)=>{var _scriptDir,n=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(e={}){function t(){return k.buffer!=x.buffer&&Y(),x}function n(){return k.buffer!=x.buffer&&Y(),I}function a(){return k.buffer!=x.buffer&&Y(),U}function o(){return k.buffer!=x.buffer&&Y(),L}function i(){return k.buffer!=x.buffer&&Y(),W}var s,u,c=e;c.ready=new Promise(((e,t)=>{s=e,u=t}));var l,f,d,p=Object.assign({},c),g="./this.program",h=(e,t)=>{throw t},m="object"==typeof window,y="function"==typeof importScripts,v="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,b=c.ENVIRONMENT_IS_PTHREAD||!1,w="";function _(e){return c.locateFile?c.locateFile(e,w):w+e}if(v){var O=r(384),S=r(908);let t;w=y?S.dirname(w)+"/":__dirname+"/",l=(e,t)=>(e=e.startsWith("file://")?new URL(e):S.normalize(e),O.readFileSync(e,t?void 0:"utf8")),d=e=>((e=l(e,!0)).buffer||(e=new Uint8Array(e)),e),f=(e,t,r,n=!0)=>{e=e.startsWith("file://")?new URL(e):S.normalize(e),O.readFile(e,n?void 0:"utf8",((e,a)=>{e?r(e):t(n?a.buffer:a)}))},!c.thisProgram&&1<process.argv.length&&(g=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),h=(e,t)=>{throw process.exitCode=e,t},c.inspect=()=>"[Emscripten Module object]";try{t=r(925)}catch(e){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),e}global.Worker=t.Worker}else(m||y)&&(y?w=self.location.href:"undefined"!=typeof document&&document.currentScript&&(w=document.currentScript.src),_scriptDir&&(w=_scriptDir),w=0!==w.indexOf("blob:")?w.substr(0,w.replace(/[?#].*/,"").lastIndexOf("/")+1):"",v||(l=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},y&&(d=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)}));v&&"undefined"==typeof performance&&(global.performance=r(953).performance);var E=console.log.bind(console),A=console.error.bind(console);v&&(E=(...e)=>O.writeSync(1,e.join(" ")+"\\n"),A=(...e)=>O.writeSync(2,e.join(" ")+"\\n"));var T,M=c.print||E,R=c.printErr||A;Object.assign(c,p),p=null,c.thisProgram&&(g=c.thisProgram),c.quit&&(h=c.quit),c.wasmBinary&&(T=c.wasmBinary);var F=c.noExitRuntime||!0;"object"!=typeof WebAssembly&&te("no native wasm support detected");var k,C,P,D,x,I,U,L,W,H=!1;function Y(){var e=k.buffer;c.HEAP8=x=new Int8Array(e),c.HEAP16=new Int16Array(e),c.HEAP32=U=new Int32Array(e),c.HEAPU8=I=new Uint8Array(e),c.HEAPU16=new Uint16Array(e),c.HEAPU32=L=new Uint32Array(e),c.HEAPF32=new Float32Array(e),c.HEAPF64=W=new Float64Array(e)}var j=c.INITIAL_MEMORY||16777216;if(5242880<=j||te("INITIAL_MEMORY should be larger than STACK_SIZE, was "+j+"! (STACK_SIZE=5242880)"),b)k=c.wasmMemory;else if(c.wasmMemory)k=c.wasmMemory;else if(!((k=new WebAssembly.Memory({initial:j/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw R("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),v&&R("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Y(),j=k.buffer.byteLength;var z,G=[],N=[],B=[],$=0;function q(){return F||0<$}var V,J,X=0,K=null,Z=null;function Q(){X++,c.monitorRunDependencies&&c.monitorRunDependencies(X)}function ee(){if(X--,c.monitorRunDependencies&&c.monitorRunDependencies(X),0==X&&(null!==K&&(clearInterval(K),K=null),Z)){var e=Z;Z=null,e()}}function te(e){throw c.onAbort&&c.onAbort(e),R(e="Aborted("+e+")"),H=!0,D=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),u(e),e}function re(e){return e.startsWith("data:application/octet-stream;base64,")}function ne(e){if(e==V&&T)return new Uint8Array(T);if(d)return d(e);throw"both async and sync fetching of the wasm failed"}function ae(e,t,r){return function(e){if(!T&&(m||y)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()})).catch((()=>ne(e)));if(f)return new Promise(((t,r)=>{f(e,(e=>t(new Uint8Array(e))),r)}))}return Promise.resolve().then((()=>ne(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(r,(e=>{R("failed to asynchronously prepare wasm: "+e),te(e)}))}function oe(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}function ie(e){e.terminate(),e.onmessage=()=>{}}function se(e){(e=ge.Fa[e])||te(),ge.fb(e)}function ue(e){var t=ge.Za();if(!t)return 6;ge.Ia.push(t),ge.Fa[e.Ha]=t,t.Ha=e.Ha;var r={cmd:"run",start_routine:e.gb,arg:e.Ya,pthread_ptr:e.Ha};return v&&t.unref(),t.postMessage(r,e.mb),0}re(V="ort-wasm-threaded.wasm")||(V=_(V));var ce="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,le=(e,t,r)=>{var n=(t>>>=0)+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&ce)return ce.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,r):e.subarray(t,r));for(n="";t<r;){var a=e[t++];if(128&a){var o=63&e[t++];if(192==(224&a))n+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[t++])?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else n+=String.fromCharCode(a)}return n},fe=(e,t)=>(e>>>=0)?le(n(),e,t):"";function de(e){if(b)return qe(1,1,e);D=e,q()||(ge.hb(),c.onExit&&c.onExit(e),H=!0),h(e,new oe(e))}var pe=e=>{if(D=e,b)throw me(e),"unwind";de(e)},ge={La:[],Ia:[],Ta:[],Fa:{},Pa:function(){b?ge.ab():ge.$a()},$a:function(){G.unshift((()=>{Q(),ge.bb((()=>ee()))}))},ab:function(){ge.receiveObjectTransfer=ge.eb,ge.threadInitTLS=ge.Sa,ge.setExitStatus=ge.Ra,F=!1},Ra:function(e){D=e},rb:["$terminateWorker"],hb:function(){for(var e of ge.Ia)ie(e);for(e of ge.La)ie(e);ge.La=[],ge.Ia=[],ge.Fa=[]},fb:function(e){var t=e.Ha;delete ge.Fa[t],ge.La.push(e),ge.Ia.splice(ge.Ia.indexOf(e),1),e.Ha=0,yt(t)},eb:function(){},Sa:function(){ge.Ta.forEach((e=>e()))},cb:e=>new Promise((t=>{e.onmessage=r=>{var n=(r=r.data).cmd;if(r.targetThread&&r.targetThread!=dt()){var a=ge.Fa[r.qb];a?a.postMessage(r,r.transferList):R(\'Internal error! Worker sent a message "\'+n+\'" to target pthread \'+r.targetThread+", but that thread no longer exists!")}else"checkMailbox"===n?He():"spawnThread"===n?ue(r):"cleanupThread"===n?se(r.thread):"killThread"===n?(r=r.thread,n=ge.Fa[r],delete ge.Fa[r],ie(n),yt(r),ge.Ia.splice(ge.Ia.indexOf(n),1),n.Ha=0):"cancelThread"===n?ge.Fa[r.thread].postMessage({cmd:"cancel"}):"loaded"===n?(e.loaded=!0,t(e)):"alert"===n?alert("Thread "+r.threadId+": "+r.text):"setimmediate"===r.target?e.postMessage(r):"callHandler"===n?c[r.handler](...r.args):n&&R("worker sent an unknown command "+n)},e.onerror=e=>{throw R("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},v&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})));var r,n=[];for(r of["onExit","onAbort","print","printErr"])c.hasOwnProperty(r)&&n.push(r);e.postMessage({cmd:"load",handlers:n,urlOrBlob:c.mainScriptUrlOrBlob||_scriptDir,wasmMemory:k,wasmModule:P})})),bb:function(e){e()},Xa:function(){var e=_("ort-wasm-threaded.worker.js");e=new Worker(e),ge.La.push(e)},Za:function(){return 0==ge.La.length&&(ge.Xa(),ge.cb(ge.La[0])),ge.La.pop()}};c.PThread=ge;var he=e=>{for(;0<e.length;)e.shift()(c)};function me(e){if(b)return qe(2,0,e);pe(e)}c.establishStackSpace=function(){var e=dt(),t=a()[e+52>>2>>>0];e=a()[e+56>>2>>>0],_t(t,t-e),St(t)};var ye=[];function ve(e){this.Oa=e-24,this.Wa=function(e){o()[this.Oa+4>>2>>>0]=e},this.Va=function(e){o()[this.Oa+8>>2>>>0]=e},this.Pa=function(e,t){this.Ua(),this.Wa(e),this.Va(t)},this.Ua=function(){o()[this.Oa+16>>2>>>0]=0}}function be(e,t,r,n){return b?qe(3,1,e,t,r,n):we(e,t,r,n)}function we(e,t,r,n){if(e>>>=0,t>>>=0,r>>>=0,n>>>=0,"undefined"==typeof SharedArrayBuffer)return R("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return b&&0===a.length?be(e,t,r,n):(e={gb:r,Ha:e,Ya:n,mb:a},b?(e.ob="spawnThread",postMessage(e,a),0):ue(e))}function _e(e,t,r){return b?qe(4,1,e,t,r):0}function Oe(e,t){if(b)return qe(5,1,e,t)}c.invokeEntryPoint=function(e,t){var r=ye[e];r||(e>=ye.length&&(ye.length=e+1),ye[e]=r=z.get(e)),e=r(t),q()?ge.Ra(e):vt(e)};var Se=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t},Ee=(e,t,r,n)=>{if(!(0<n))return 0;var a=r>>>=0;n=r+n-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(r>=n)break;t[r++>>>0]=i}else{if(2047>=i){if(r+1>=n)break;t[r++>>>0]=192|i>>6}else{if(65535>=i){if(r+2>=n)break;t[r++>>>0]=224|i>>12}else{if(r+3>=n)break;t[r++>>>0]=240|i>>18,t[r++>>>0]=128|i>>12&63}t[r++>>>0]=128|i>>6&63}t[r++>>>0]=128|63&i}}return t[r>>>0]=0,r-a},Ae=(e,t,r)=>Ee(e,n(),t,r);function Te(e,t){if(b)return qe(6,1,e,t)}function Me(e,t,r){if(b)return qe(7,1,e,t,r)}function Re(e,t,r){return b?qe(8,1,e,t,r):0}function Fe(e,t){if(b)return qe(9,1,e,t)}function ke(e,t,r){if(b)return qe(10,1,e,t,r)}function Ce(e,t,r,n){if(b)return qe(11,1,e,t,r,n)}function Pe(e,t,r,n){if(b)return qe(12,1,e,t,r,n)}function De(e,t,r,n){if(b)return qe(13,1,e,t,r,n)}function xe(e){if(b)return qe(14,1,e)}function Ie(e,t){if(b)return qe(15,1,e,t)}function Ue(e,t,r){if(b)return qe(16,1,e,t,r)}var Le=e=>{if(!H)try{if(e(),!q())try{b?vt(D):pe(D)}catch(e){e instanceof oe||"unwind"==e||h(1,e)}}catch(e){e instanceof oe||"unwind"==e||h(1,e)}};function We(e){e>>>=0,"function"==typeof Atomics.nb&&(Atomics.nb(a(),e>>2,e).value.then(He),e+=128,Atomics.store(a(),e>>2,1))}function He(){var e=dt();e&&(We(e),Le((()=>bt())))}c.__emscripten_thread_mailbox_await=We,c.checkMailbox=He;var Ye=e=>0==e%4&&(0!=e%100||0==e%400),je=[0,31,60,91,121,152,182,213,244,274,305,335],ze=[0,31,59,90,120,151,181,212,243,273,304,334];function Ge(e,t,r,n,a,o,i,s){return b?qe(17,1,e,t,r,n,a,o,i,s):-52}function Ne(e,t,r,n,a,o,i){if(b)return qe(18,1,e,t,r,n,a,o,i)}var Be=e=>{var t=Se(e)+1,r=pt(t);return r&&Ae(e,r,t),r},$e=e=>{var t=Ot();return e=e(),St(t),e};function qe(e,t){var r=arguments.length-2,n=arguments;return $e((()=>{for(var a=Et(8*r),o=a>>3,s=0;s<r;s++){var u=n[2+s];i()[o+s>>>0]=u}return mt(e,r,a,t)}))}var Ve,Je=[],Xe={},Ke=()=>{if(!Ve){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:g||"./this.program"};for(e in Xe)void 0===Xe[e]?delete t[e]:t[e]=Xe[e];var r=[];for(e in t)r.push(`${e}=${t[e]}`);Ve=r}return Ve};function Ze(e,r){if(b)return qe(19,1,e,r);e>>>=0,r>>>=0;var n=0;return Ke().forEach((function(a,i){var s=r+n;for(i=o()[e+4*i>>2>>>0]=s,s=0;s<a.length;++s)t()[i++>>0>>>0]=a.charCodeAt(s);t()[i>>0>>>0]=0,n+=a.length+1})),0}function Qe(e,t){if(b)return qe(20,1,e,t);e>>>=0,t>>>=0;var r=Ke();o()[e>>2>>>0]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),o()[t>>2>>>0]=n,0}function et(e){return b?qe(21,1,e):52}function tt(e,t,r,n){return b?qe(22,1,e,t,r,n):52}function rt(e,t,r,n,a){return b?qe(23,1,e,t,r,n,a):70}var nt=[null,[],[]];function at(e,t,r,a){if(b)return qe(24,1,e,t,r,a);t>>>=0,r>>>=0,a>>>=0;for(var i=0,s=0;s<r;s++){var u=o()[t>>2>>>0],c=o()[t+4>>2>>>0];t+=8;for(var l=0;l<c;l++){var f=n()[u+l>>>0],d=nt[e];0===f||10===f?((1===e?M:R)(le(d,0)),d.length=0):d.push(f)}i+=c}return o()[a>>2>>>0]=i,0}var ot=e=>(ot=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>(e.set(crypto.getRandomValues(new Uint8Array(e.byteLength))),e);if(v)try{var e=r(760);if(e.randomFillSync)return t=>e.randomFillSync(t);var t=e.randomBytes;return e=>(e.set(t(e.byteLength)),e)}catch(e){}te("initRandomDevice")})())(e),it=[31,29,31,30,31,30,31,31,30,31,30,31],st=[31,28,31,30,31,30,31,31,30,31,30,31],ut=(e,r)=>{t().set(e,r>>>0)};function ct(e,t,r,n){function o(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e}function i(e,t){return o(e,t,"0")}function s(e,t){function r(e){return 0>e?-1:0<e?1:0}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function u(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function c(e){var t=e.Ja;for(e=new Date(new Date(e.Ka+1900,0,1).getTime());0<t;){var r=e.getMonth(),n=(Ye(e.getFullYear())?it:st)[r];if(!(t>n-e.getDate())){e.setDate(e.getDate()+t);break}t-=n-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return r=new Date(e.getFullYear()+1,0,4),t=u(new Date(e.getFullYear(),0,4)),r=u(r),0>=s(t,e)?0>=s(r,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}e>>>=0,t>>>=0,r>>>=0,n>>>=0;var l=a()[n+40>>2>>>0];for(var f in n={kb:a()[n>>2>>>0],jb:a()[n+4>>2>>>0],Ma:a()[n+8>>2>>>0],Qa:a()[n+12>>2>>>0],Na:a()[n+16>>2>>>0],Ka:a()[n+20>>2>>>0],Ga:a()[n+24>>2>>>0],Ja:a()[n+28>>2>>>0],sb:a()[n+32>>2>>>0],ib:a()[n+36>>2>>>0],lb:l?fe(l):""},r=fe(r),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(f,"g"),l[f]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(f in l={"%a":e=>d[e.Ga].substring(0,3),"%A":e=>d[e.Ga],"%b":e=>p[e.Na].substring(0,3),"%B":e=>p[e.Na],"%C":e=>i((e.Ka+1900)/100|0,2),"%d":e=>i(e.Qa,2),"%e":e=>o(e.Qa,2," "),"%g":e=>c(e).toString().substring(2),"%G":e=>c(e),"%H":e=>i(e.Ma,2),"%I":e=>(0==(e=e.Ma)?e=12:12<e&&(e-=12),i(e,2)),"%j":e=>{for(var t=0,r=0;r<=e.Na-1;t+=(Ye(e.Ka+1900)?it:st)[r++]);return i(e.Qa+t,3)},"%m":e=>i(e.Na+1,2),"%M":e=>i(e.jb,2),"%n":()=>"\\n","%p":e=>0<=e.Ma&&12>e.Ma?"AM":"PM","%S":e=>i(e.kb,2),"%t":()=>"\\t","%u":e=>e.Ga||7,"%U":e=>i(Math.floor((e.Ja+7-e.Ga)/7),2),"%V":e=>{var t=Math.floor((e.Ja+7-(e.Ga+6)%7)/7);if(2>=(e.Ga+371-e.Ja-2)%7&&t++,t)53==t&&(4==(r=(e.Ga+371-e.Ja)%7)||3==r&&Ye(e.Ka)||(t=1));else{t=52;var r=(e.Ga+7-e.Ja-1)%7;(4==r||5==r&&Ye(e.Ka%400-1))&&t++}return i(t,2)},"%w":e=>e.Ga,"%W":e=>i(Math.floor((e.Ja+7-(e.Ga+6)%7)/7),2),"%y":e=>(e.Ka+1900).toString().substring(2),"%Y":e=>e.Ka+1900,"%z":e=>{var t=0<=(e=e.ib);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":e=>e.lb,"%%":()=>"%"},r=r.replace(/%%/g,"\\0\\0"),l)r.includes(f)&&(r=r.replace(new RegExp(f,"g"),l[f](n)));return f=function(e){var t=Array(Se(e)+1);return Ee(e,t,0,t.length),t}(r=r.replace(/\\0\\0/g,"%")),f.length>t?0:(ut(f,e),f.length-1)}ge.Pa();var lt=[null,de,me,be,_e,Oe,Te,Me,Re,Fe,ke,Ce,Pe,De,xe,Ie,Ue,Ge,Ne,Ze,Qe,et,tt,rt,at],ft={b:function(e,t,r){throw new ve(e>>>=0).Pa(t>>>0,r>>>0),e},N:function(e){gt(e>>>0,!y,1,!m,131072,!1),ge.Sa()},k:function(e){e>>>=0,b?postMessage({cmd:"cleanupThread",thread:e}):se(e)},I:we,h:_e,T:Oe,E:Te,G:Me,U:Re,R:Fe,J:ke,Q:Ce,o:Pe,F:De,C:xe,S:Ie,D:Ue,q:()=>!0,A:function(e,t){(e>>>=0)==t>>>0?setTimeout((()=>He())):b?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=ge.Fa[e])&&e.postMessage({cmd:"checkMailbox"})},L:function(){return-1},M:We,p:function(e){v&&ge.Fa[e>>>0].ref()},t:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),a()[r>>2>>>0]=e.getUTCSeconds(),a()[r+4>>2>>>0]=e.getUTCMinutes(),a()[r+8>>2>>>0]=e.getUTCHours(),a()[r+12>>2>>>0]=e.getUTCDate(),a()[r+16>>2>>>0]=e.getUTCMonth(),a()[r+20>>2>>>0]=e.getUTCFullYear()-1900,a()[r+24>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[r+28>>2>>>0]=e},u:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),a()[r>>2>>>0]=e.getSeconds(),a()[r+4>>2>>>0]=e.getMinutes(),a()[r+8>>2>>>0]=e.getHours(),a()[r+12>>2>>>0]=e.getDate(),a()[r+16>>2>>>0]=e.getMonth(),a()[r+20>>2>>>0]=e.getFullYear()-1900,a()[r+24>>2>>>0]=e.getDay(),t=(Ye(e.getFullYear())?je:ze)[e.getMonth()]+e.getDate()-1|0,a()[r+28>>2>>>0]=t,a()[r+36>>2>>>0]=-60*e.getTimezoneOffset(),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=0|(t!=n&&e.getTimezoneOffset()==Math.min(n,t)),a()[r+32>>2>>>0]=e},v:function(e){e>>>=0;var t=new Date(a()[e+20>>2>>>0]+1900,a()[e+16>>2>>>0],a()[e+12>>2>>>0],a()[e+8>>2>>>0],a()[e+4>>2>>>0],a()[e>>2>>>0],0),r=a()[e+32>>2>>>0],n=t.getTimezoneOffset(),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),i=new Date(t.getFullYear(),0,1).getTimezoneOffset(),s=Math.min(i,o);return 0>r?a()[e+32>>2>>>0]=Number(o!=i&&s==n):0<r!=(s==n)&&(o=Math.max(i,o),t.setTime(t.getTime()+6e4*((0<r?s:o)-n))),a()[e+24>>2>>>0]=t.getDay(),r=(Ye(t.getFullYear())?je:ze)[t.getMonth()]+t.getDate()-1|0,a()[e+28>>2>>>0]=r,a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getYear(),e=t.getTime()/1e3,wt((J=e,1<=+Math.abs(J)?0<J?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)),e>>>0},r:Ge,s:Ne,z:function(e,t,r){function n(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}e>>>=0,t>>>=0,r>>>=0;var i=(new Date).getFullYear(),s=new Date(i,0,1),u=new Date(i,6,1);i=s.getTimezoneOffset();var c=u.getTimezoneOffset(),l=Math.max(i,c);o()[e>>2>>>0]=60*l,a()[t>>2>>>0]=Number(i!=c),e=n(s),t=n(u),e=Be(e),t=Be(t),c<i?(o()[r>>2>>>0]=e,o()[r+4>>2>>>0]=t):(o()[r>>2>>>0]=t,o()[r+4>>2>>>0]=e)},c:()=>{te("")},l:function(){},i:function(){return Date.now()},V:()=>{throw $+=1,"unwind"},B:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:function(){return v?r(993).cpus().length:navigator.hardwareConcurrency},K:function(e,t,r,n){for(ge.pb=t>>>0,Je.length=r,t=n>>>0>>3,n=0;n<r;n++)Je[n]=i()[t+n>>>0];return lt[e].apply(null,Je)},y:function(e){e>>>=0;var t=n().length;if(e<=t||4294901760<e)return!1;for(var r=1;4>=r;r*=2){var a=t*(1+.2/r);a=Math.min(a,e+100663296);var o=Math;a=Math.max(e,a);e:{o=o.min.call(o,4294901760,a+(65536-a%65536)%65536)-k.buffer.byteLength+65535>>>16;try{k.grow(o),Y();var i=1;break e}catch(e){}i=void 0}if(i)return!0}return!1},O:Ze,P:Qe,j:pe,g:et,n:tt,w:rt,m:at,x:function(e,t){return e>>>=0,t>>>=0,ot(n().subarray(e>>>0,e+t>>>0)),0},a:k||c.wasmMemory,H:ct,d:function(e,t,r,n){return ct(e>>>0,t>>>0,r>>>0,n>>>0)}};!function(){function e(e,t){return e=e.exports,C=e=function(e){var t=e=>()=>e()>>>0,r=e=>t=>e(t)>>>0;return(e=Object.assign({},e)).__errno_location=t(e.__errno_location),e.pthread_self=t(e.pthread_self),e.malloc=r(e.malloc),e.stackSave=t(e.stackSave),e.stackAlloc=r(e.stackAlloc),e}(e),ge.Ta.push(C.sa),z=C.ta,N.unshift(C.W),P=t,ee(),e}var t={a:ft};if(Q(),c.instantiateWasm)try{return c.instantiateWasm(t,e)}catch(e){R("Module.instantiateWasm callback failed with error: "+e),u(e)}(function(e,t){var r=V;return T||"function"!=typeof WebAssembly.instantiateStreaming||re(r)||r.startsWith("file://")||v||"function"!=typeof fetch?ae(r,e,t):fetch(r,{credentials:"same-origin"}).then((n=>WebAssembly.instantiateStreaming(n,e).then(t,(function(n){return R("wasm streaming compile failed: "+n),R("falling back to ArrayBuffer instantiation"),ae(r,e,t)}))))})(t,(function(t){e(t.instance,t.module)})).catch(u)}(),c._OrtInit=(e,t)=>(c._OrtInit=C.X)(e,t),c._OrtGetLastError=(e,t)=>(c._OrtGetLastError=C.Y)(e,t),c._OrtCreateSessionOptions=(e,t,r,n,a,o,i,s,u,l)=>(c._OrtCreateSessionOptions=C.Z)(e,t,r,n,a,o,i,s,u,l),c._OrtAppendExecutionProvider=(e,t)=>(c._OrtAppendExecutionProvider=C._)(e,t),c._OrtAddSessionConfigEntry=(e,t,r)=>(c._OrtAddSessionConfigEntry=C.$)(e,t,r),c._OrtReleaseSessionOptions=e=>(c._OrtReleaseSessionOptions=C.aa)(e),c._OrtCreateSession=(e,t,r)=>(c._OrtCreateSession=C.ba)(e,t,r),c._OrtReleaseSession=e=>(c._OrtReleaseSession=C.ca)(e),c._OrtGetInputOutputCount=(e,t,r)=>(c._OrtGetInputOutputCount=C.da)(e,t,r),c._OrtGetInputName=(e,t)=>(c._OrtGetInputName=C.ea)(e,t),c._OrtGetOutputName=(e,t)=>(c._OrtGetOutputName=C.fa)(e,t),c._OrtFree=e=>(c._OrtFree=C.ga)(e),c._OrtCreateTensor=(e,t,r,n,a)=>(c._OrtCreateTensor=C.ha)(e,t,r,n,a),c._OrtGetTensorData=(e,t,r,n,a)=>(c._OrtGetTensorData=C.ia)(e,t,r,n,a),c._OrtReleaseTensor=e=>(c._OrtReleaseTensor=C.ja)(e),c._OrtCreateRunOptions=(e,t,r,n)=>(c._OrtCreateRunOptions=C.ka)(e,t,r,n),c._OrtAddRunConfigEntry=(e,t,r)=>(c._OrtAddRunConfigEntry=C.la)(e,t,r),c._OrtReleaseRunOptions=e=>(c._OrtReleaseRunOptions=C.ma)(e),c._OrtRun=(e,t,r,n,a,o,i,s)=>(c._OrtRun=C.na)(e,t,r,n,a,o,i,s),c._OrtEndProfiling=e=>(c._OrtEndProfiling=C.oa)(e);var dt=c._pthread_self=()=>(dt=c._pthread_self=C.pa)(),pt=c._malloc=e=>(pt=c._malloc=C.qa)(e);c._free=e=>(c._free=C.ra)(e),c.__emscripten_tls_init=()=>(c.__emscripten_tls_init=C.sa)();var gt=c.__emscripten_thread_init=(e,t,r,n,a,o)=>(gt=c.__emscripten_thread_init=C.ua)(e,t,r,n,a,o);c.__emscripten_thread_crashed=()=>(c.__emscripten_thread_crashed=C.va)();var ht,mt=(e,t,r,n)=>(mt=C.wa)(e,t,r,n),yt=e=>(yt=C.xa)(e),vt=c.__emscripten_thread_exit=e=>(vt=c.__emscripten_thread_exit=C.ya)(e),bt=c.__emscripten_check_mailbox=()=>(bt=c.__emscripten_check_mailbox=C.za)(),wt=e=>(wt=C.Aa)(e),_t=(e,t)=>(_t=C.Ba)(e,t),Ot=()=>(Ot=C.Ca)(),St=e=>(St=C.Da)(e),Et=e=>(Et=C.Ea)(e);function At(){function e(){if(!ht&&(ht=!0,c.calledRun=!0,!H)&&(b||he(N),s(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),!b)){if(c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;){var e=c.postRun.shift();B.unshift(e)}he(B)}}if(!(0<X))if(b)s(c),b||he(N),startWorker(c);else{if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)G.unshift(c.preRun.shift());he(G),0<X||(c.setStatus?(c.setStatus("Running..."),setTimeout((function(){setTimeout((function(){c.setStatus("")}),1),e()}),1)):e())}}if(c.keepRuntimeAlive=q,c.wasmMemory=k,c.stackAlloc=Et,c.stackSave=Ot,c.stackRestore=St,c.UTF8ToString=fe,c.stringToUTF8=Ae,c.lengthBytesUTF8=Se,c.ExitStatus=oe,c.PThread=ge,Z=function e(){ht||At(),ht||(Z=e)},c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return At(),e.ready});e.exports=n},932:(e,t,r)=>{var _scriptDir,n=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(e={}){var t,n,a=e;a.ready=new Promise(((e,r)=>{t=e,n=r}));var o,i,s,u=Object.assign({},a),c="./this.program",l=(e,t)=>{throw t},f="object"==typeof window,d="function"==typeof importScripts,p="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,g="";if(p){var h=r(384),m=r(908);g=d?m.dirname(g)+"/":__dirname+"/",o=(e,t)=>(e=e.startsWith("file://")?new URL(e):m.normalize(e),h.readFileSync(e,t?void 0:"utf8")),s=e=>((e=o(e,!0)).buffer||(e=new Uint8Array(e)),e),i=(e,t,r,n=!0)=>{e=e.startsWith("file://")?new URL(e):m.normalize(e),h.readFile(e,n?void 0:"utf8",((e,a)=>{e?r(e):t(n?a.buffer:a)}))},!a.thisProgram&&1<process.argv.length&&(c=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),l=(e,t)=>{throw process.exitCode=e,t},a.inspect=()=>"[Emscripten Module object]"}else(f||d)&&(d?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),_scriptDir&&(g=_scriptDir),g=0!==g.indexOf("blob:")?g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},d&&(s=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),i=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)});var y,v=a.print||console.log.bind(console),b=a.printErr||console.error.bind(console);Object.assign(a,u),u=null,a.thisProgram&&(c=a.thisProgram),a.quit&&(l=a.quit),a.wasmBinary&&(y=a.wasmBinary);var w=a.noExitRuntime||!0;"object"!=typeof WebAssembly&&W("no native wasm support detected");var _,O,S,E,A,T,M=!1;function R(){var e=_.buffer;a.HEAP8=S=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=A=new Int32Array(e),a.HEAPU8=E=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=T=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}var F=[],k=[],C=[];function P(){var e=a.preRun.shift();F.unshift(e)}var D,x,I=0,U=null,L=null;function W(e){throw a.onAbort&&a.onAbort(e),b(e="Aborted("+e+")"),M=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),n(e),e}function H(e){return e.startsWith("data:application/octet-stream;base64,")}if(!H(D="ort-wasm.wasm")){var Y=D;D=a.locateFile?a.locateFile(Y,g):g+Y}function j(e){if(e==D&&y)return new Uint8Array(y);if(s)return s(e);throw"both async and sync fetching of the wasm failed"}function z(e,t,r){return function(e){if(!y&&(f||d)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()})).catch((()=>j(e)));if(i)return new Promise(((t,r)=>{i(e,(e=>t(new Uint8Array(e))),r)}))}return Promise.resolve().then((()=>j(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(r,(e=>{b("failed to asynchronously prepare wasm: "+e),W(e)}))}function G(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var N=e=>{for(;0<e.length;)e.shift()(a)};function B(e){this.qa=e-24,this.va=function(e){T[this.qa+4>>2>>>0]=e},this.ua=function(e){T[this.qa+8>>2>>>0]=e},this.sa=function(e,t){this.ta(),this.va(e),this.ua(t)},this.ta=function(){T[this.qa+16>>2>>>0]=0}}var $,q="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,V=(e,t,r)=>{var n=(t>>>=0)+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&q)return q.decode(e.subarray(t,r));for(n="";t<r;){var a=e[t++];if(128&a){var o=63&e[t++];if(192==(224&a))n+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[t++])?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else n+=String.fromCharCode(a)}return n},J=(e,t)=>(e>>>=0)?V(E,e,t):"",X=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t},K=(e,t,r,n)=>{if(!(0<n))return 0;var a=r>>>=0;n=r+n-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(r>=n)break;t[r++>>>0]=i}else{if(2047>=i){if(r+1>=n)break;t[r++>>>0]=192|i>>6}else{if(65535>=i){if(r+2>=n)break;t[r++>>>0]=224|i>>12}else{if(r+3>=n)break;t[r++>>>0]=240|i>>18,t[r++>>>0]=128|i>>12&63}t[r++>>>0]=128|i>>6&63}t[r++>>>0]=128|63&i}}return t[r>>>0]=0,r-a},Z=e=>0==e%4&&(0!=e%100||0==e%400),Q=[0,31,60,91,121,152,182,213,244,274,305,335],ee=[0,31,59,90,120,151,181,212,243,273,304,334],te=e=>{var t=X(e)+1,r=le(t);return r&&K(e,E,r,t),r},re={},ne=()=>{if(!$){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(e in re)void 0===re[e]?delete t[e]:t[e]=re[e];var r=[];for(e in t)r.push(`${e}=${t[e]}`);$=r}return $},ae=[null,[],[]],oe=e=>(oe=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>crypto.getRandomValues(e);if(p)try{var e=r(760);if(e.randomFillSync)return t=>e.randomFillSync(t);var t=e.randomBytes;return e=>(e.set(t(e.byteLength)),e)}catch(e){}W("initRandomDevice")})())(e),ie=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function ue(e,t,r,n){function a(e,t,r){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=r[0]+e;return e}function o(e,t){return a(e,t,"0")}function i(e,t){function r(e){return 0>e?-1:0<e?1:0}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function u(e){var t=e.ma;for(e=new Date(new Date(e.na+1900,0,1).getTime());0<t;){var r=e.getMonth(),n=(Z(e.getFullYear())?ie:se)[r];if(!(t>n-e.getDate())){e.setDate(e.getDate()+t);break}t-=n-e.getDate()+1,e.setDate(1),11>r?e.setMonth(r+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return r=new Date(e.getFullYear()+1,0,4),t=s(new Date(e.getFullYear(),0,4)),r=s(r),0>=i(t,e)?0>=i(r,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}e>>>=0,t>>>=0,r>>>=0;var c=A[40+(n>>>=0)>>2>>>0];for(var l in n={ya:A[n>>2>>>0],xa:A[n+4>>2>>>0],oa:A[n+8>>2>>>0],ra:A[n+12>>2>>>0],pa:A[n+16>>2>>>0],na:A[n+20>>2>>>0],ha:A[n+24>>2>>>0],ma:A[n+28>>2>>>0],Aa:A[n+32>>2>>>0],wa:A[n+36>>2>>>0],za:c?J(c):""},r=J(r),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(l,"g"),c[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(l in c={"%a":e=>f[e.ha].substring(0,3),"%A":e=>f[e.ha],"%b":e=>d[e.pa].substring(0,3),"%B":e=>d[e.pa],"%C":e=>o((e.na+1900)/100|0,2),"%d":e=>o(e.ra,2),"%e":e=>a(e.ra,2," "),"%g":e=>u(e).toString().substring(2),"%G":e=>u(e),"%H":e=>o(e.oa,2),"%I":e=>(0==(e=e.oa)?e=12:12<e&&(e-=12),o(e,2)),"%j":e=>{for(var t=0,r=0;r<=e.pa-1;t+=(Z(e.na+1900)?ie:se)[r++]);return o(e.ra+t,3)},"%m":e=>o(e.pa+1,2),"%M":e=>o(e.xa,2),"%n":()=>"\\n","%p":e=>0<=e.oa&&12>e.oa?"AM":"PM","%S":e=>o(e.ya,2),"%t":()=>"\\t","%u":e=>e.ha||7,"%U":e=>o(Math.floor((e.ma+7-e.ha)/7),2),"%V":e=>{var t=Math.floor((e.ma+7-(e.ha+6)%7)/7);if(2>=(e.ha+371-e.ma-2)%7&&t++,t)53==t&&(4==(r=(e.ha+371-e.ma)%7)||3==r&&Z(e.na)||(t=1));else{t=52;var r=(e.ha+7-e.ma-1)%7;(4==r||5==r&&Z(e.na%400-1))&&t++}return o(t,2)},"%w":e=>e.ha,"%W":e=>o(Math.floor((e.ma+7-(e.ha+6)%7)/7),2),"%y":e=>(e.na+1900).toString().substring(2),"%Y":e=>e.na+1900,"%z":e=>{var t=0<=(e=e.wa);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":e=>e.za,"%%":()=>"%"},r=r.replace(/%%/g,"\\0\\0"),c)r.includes(l)&&(r=r.replace(new RegExp(l,"g"),c[l](n)));return l=function(e){var t=Array(X(e)+1);return K(e,t,0,t.length),t}(r=r.replace(/\\0\\0/g,"%")),l.length>t?0:(S.set(l,e>>>0),l.length-1)}var ce={a:function(e,t,r){throw new B(e>>>=0).sa(t>>>0,r>>>0),e},e:function(){return 0},I:function(){},y:function(){},A:function(){},K:function(){return 0},G:function(){},B:function(){},F:function(){},g:function(){},z:function(){},w:function(){},H:function(){},x:function(){},k:()=>!0,n:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),A[r>>2>>>0]=e.getUTCSeconds(),A[r+4>>2>>>0]=e.getUTCMinutes(),A[r+8>>2>>>0]=e.getUTCHours(),A[r+12>>2>>>0]=e.getUTCDate(),A[r+16>>2>>>0]=e.getUTCMonth(),A[r+20>>2>>>0]=e.getUTCFullYear()-1900,A[r+24>>2>>>0]=e.getUTCDay(),A[r+28>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(e,t,r){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,r>>>=0,e=new Date(1e3*e),A[r>>2>>>0]=e.getSeconds(),A[r+4>>2>>>0]=e.getMinutes(),A[r+8>>2>>>0]=e.getHours(),A[r+12>>2>>>0]=e.getDate(),A[r+16>>2>>>0]=e.getMonth(),A[r+20>>2>>>0]=e.getFullYear()-1900,A[r+24>>2>>>0]=e.getDay(),A[r+28>>2>>>0]=(Z(e.getFullYear())?Q:ee)[e.getMonth()]+e.getDate()-1|0,A[r+36>>2>>>0]=-60*e.getTimezoneOffset(),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();A[r+32>>2>>>0]=0|(t!=n&&e.getTimezoneOffset()==Math.min(n,t))},p:function(e){e>>>=0;var t=new Date(A[e+20>>2>>>0]+1900,A[e+16>>2>>>0],A[e+12>>2>>>0],A[e+8>>2>>>0],A[e+4>>2>>>0],A[e>>2>>>0],0),r=A[e+32>>2>>>0],n=t.getTimezoneOffset(),a=new Date(t.getFullYear(),6,1).getTimezoneOffset(),o=new Date(t.getFullYear(),0,1).getTimezoneOffset(),i=Math.min(o,a);return 0>r?A[e+32>>2>>>0]=Number(a!=o&&i==n):0<r!=(i==n)&&(a=Math.max(o,a),t.setTime(t.getTime()+6e4*((0<r?i:a)-n))),A[e+24>>2>>>0]=t.getDay(),A[e+28>>2>>>0]=(Z(t.getFullYear())?Q:ee)[t.getMonth()]+t.getDate()-1|0,A[e>>2>>>0]=t.getSeconds(),A[e+4>>2>>>0]=t.getMinutes(),A[e+8>>2>>>0]=t.getHours(),A[e+12>>2>>>0]=t.getDate(),A[e+16>>2>>>0]=t.getMonth(),A[e+20>>2>>>0]=t.getYear(),e=t.getTime()/1e3,de((x=e,1<=+Math.abs(x)?0<x?+Math.floor(x/4294967296)>>>0:~~+Math.ceil((x-+(~~x>>>0))/4294967296)>>>0:0)),e>>>0},l:function(){return-52},m:function(){},u:function(e,t,r){function n(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}r>>>=0;var a=(new Date).getFullYear(),o=new Date(a,0,1),i=new Date(a,6,1);a=o.getTimezoneOffset();var s=i.getTimezoneOffset();T[e>>>0>>2>>>0]=60*Math.max(a,s),A[t>>>0>>2>>>0]=Number(a!=s),e=n(o),t=n(i),e=te(e),t=te(t),s<a?(T[r>>2>>>0]=e,T[r+4>>2>>>0]=t):(T[r>>2>>>0]=t,T[r+4>>2>>>0]=e)},d:()=>{W("")},h:function(){return Date.now()},v:function(){return 4294901760},b:()=>performance.now(),J:function(e,t,r){return t>>>=0,E.copyWithin(e>>>0>>>0,t>>>0,t+(r>>>0)>>>0)},t:function(e){e>>>=0;var t=E.length;if(4294901760<e)return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);var a=Math;n=Math.max(e,n);e:{a=a.min.call(a,4294901760,n+(65536-n%65536)%65536)-_.buffer.byteLength+65535>>>16;try{_.grow(a),R();var o=1;break e}catch(e){}o=void 0}if(o)return!0}return!1},D:function(e,t){e>>>=0,t>>>=0;var r=0;return ne().forEach((function(n,a){var o=t+r;for(a=T[e+4*a>>2>>>0]=o,o=0;o<n.length;++o)S[a++>>0>>>0]=n.charCodeAt(o);S[a>>0>>>0]=0,r+=n.length+1})),0},E:function(e,t){e>>>=0,t>>>=0;var r=ne();T[e>>2>>>0]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),T[t>>2>>>0]=n,0},s:e=>{w||(a.onExit&&a.onExit(e),M=!0),l(e,new G(e))},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(e,t,r,n){t>>>=0,r>>>=0,n>>>=0;for(var a=0,o=0;o<r;o++){var i=T[t>>2>>>0],s=T[t+4>>2>>>0];t+=8;for(var u=0;u<s;u++){var c=E[i+u>>>0],l=ae[e];0===c||10===c?((1===e?v:b)(V(l,0)),l.length=0):l.push(c)}a+=s}return T[n>>2>>>0]=a,0},r:function(e,t){return e>>>=0,oe(E.subarray(e>>>0,e+(t>>>0)>>>0)),0},C:ue,c:function(e,t,r,n){return ue(e>>>0,t>>>0,r>>>0,n>>>0)}};!function(){function e(e){if(e=e.exports,O=e=function(e){var t=e=>()=>e()>>>0,r=e=>t=>e(t)>>>0;return(e=Object.assign({},e)).__errno_location=t(e.__errno_location),e.malloc=r(e.malloc),e.stackSave=t(e.stackSave),e.stackAlloc=r(e.stackAlloc),e}(e),_=O.L,R(),k.unshift(O.M),I--,a.monitorRunDependencies&&a.monitorRunDependencies(I),0==I&&(null!==U&&(clearInterval(U),U=null),L)){var t=L;L=null,t()}return e}var t={a:ce};if(I++,a.monitorRunDependencies&&a.monitorRunDependencies(I),a.instantiateWasm)try{return a.instantiateWasm(t,e)}catch(e){b("Module.instantiateWasm callback failed with error: "+e),n(e)}(function(e,t){var r=D;return y||"function"!=typeof WebAssembly.instantiateStreaming||H(r)||r.startsWith("file://")||p||"function"!=typeof fetch?z(r,e,t):fetch(r,{credentials:"same-origin"}).then((n=>WebAssembly.instantiateStreaming(n,e).then(t,(function(n){return b("wasm streaming compile failed: "+n),b("falling back to ArrayBuffer instantiation"),z(r,e,t)}))))})(t,(function(t){e(t.instance)})).catch(n)}(),a._OrtInit=(e,t)=>(a._OrtInit=O.N)(e,t),a._OrtGetLastError=(e,t)=>(a._OrtGetLastError=O.O)(e,t),a._OrtCreateSessionOptions=(e,t,r,n,o,i,s,u,c,l)=>(a._OrtCreateSessionOptions=O.P)(e,t,r,n,o,i,s,u,c,l),a._OrtAppendExecutionProvider=(e,t)=>(a._OrtAppendExecutionProvider=O.Q)(e,t),a._OrtAddSessionConfigEntry=(e,t,r)=>(a._OrtAddSessionConfigEntry=O.R)(e,t,r),a._OrtReleaseSessionOptions=e=>(a._OrtReleaseSessionOptions=O.S)(e),a._OrtCreateSession=(e,t,r)=>(a._OrtCreateSession=O.T)(e,t,r),a._OrtReleaseSession=e=>(a._OrtReleaseSession=O.U)(e),a._OrtGetInputOutputCount=(e,t,r)=>(a._OrtGetInputOutputCount=O.V)(e,t,r),a._OrtGetInputName=(e,t)=>(a._OrtGetInputName=O.W)(e,t),a._OrtGetOutputName=(e,t)=>(a._OrtGetOutputName=O.X)(e,t),a._OrtFree=e=>(a._OrtFree=O.Y)(e),a._OrtCreateTensor=(e,t,r,n,o)=>(a._OrtCreateTensor=O.Z)(e,t,r,n,o),a._OrtGetTensorData=(e,t,r,n,o)=>(a._OrtGetTensorData=O._)(e,t,r,n,o),a._OrtReleaseTensor=e=>(a._OrtReleaseTensor=O.$)(e),a._OrtCreateRunOptions=(e,t,r,n)=>(a._OrtCreateRunOptions=O.aa)(e,t,r,n),a._OrtAddRunConfigEntry=(e,t,r)=>(a._OrtAddRunConfigEntry=O.ba)(e,t,r),a._OrtReleaseRunOptions=e=>(a._OrtReleaseRunOptions=O.ca)(e),a._OrtRun=(e,t,r,n,o,i,s,u)=>(a._OrtRun=O.da)(e,t,r,n,o,i,s,u),a._OrtEndProfiling=e=>(a._OrtEndProfiling=O.ea)(e);var le=a._malloc=e=>(le=a._malloc=O.fa)(e);a._free=e=>(a._free=O.ga)(e);var fe,de=e=>(de=O.ia)(e),pe=()=>(pe=O.ja)(),ge=e=>(ge=O.ka)(e),he=e=>(he=O.la)(e);function me(){function e(){if(!fe&&(fe=!0,a.calledRun=!0,!M)){if(N(k),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;){var e=a.postRun.shift();C.unshift(e)}N(C)}}if(!(0<I)){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)P();N(F),0<I||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),e()}),1)):e())}}if(a.stackAlloc=he,a.stackSave=pe,a.stackRestore=ge,a.UTF8ToString=J,a.stringToUTF8=(e,t,r)=>K(e,E,t,r),a.lengthBytesUTF8=X,L=function e(){fe||me(),fe||(L=e)},a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);0<a.preInit.length;)a.preInit.pop()();return me(),e.ready});e.exports=n},154:e=>{"use strict";e.exports=\'"use strict";var e={},a="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(a){var r=require("worker_threads"),t=r.parentPort;t.on("message",(e=>onmessage({data:e})));var s=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:e=>(0,eval)(s.readFileSync(e,"utf8")+"//# sourceURL="+e),postMessage:e=>t.postMessage(e),performance:global.performance||{now:Date.now}})}var o=!1,d=function(){var e=Array.prototype.slice.call(arguments).join(" ");a?s.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var a=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:a,threadId:e._pthread_self()})},e.instantiateWasm=(a,r)=>{var t=e.wasmModule;return e.wasmModule=null,r(new WebAssembly.Instance(t,a))},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=function a(r){try{if("load"===r.data.cmd){let s=[];self.onmessage=e=>s.push(e),self.startWorker=r=>{e=r,postMessage({cmd:"loaded"});for(let e of s)a(e);self.onmessage=a},e.wasmModule=r.data.wasmModule;for(const a of r.data.handlers)e[a]=(...e)=>{postMessage({cmd:"callHandler",handler:a,args:e})};if(e.wasmMemory=r.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof r.data.urlOrBlob)importScripts(r.data.urlOrBlob);else{var t=URL.createObjectURL(r.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(e)}else if("run"===r.data.cmd){e.__emscripten_thread_init(r.data.pthread_ptr,0,0,1),e.__emscripten_thread_mailbox_await(r.data.pthread_ptr),e.establishStackSpace(),e.PThread.receiveObjectTransfer(r.data),e.PThread.threadInitTLS(),o||(o=!0);try{e.invokeEntryPoint(r.data.start_routine,r.data.arg)}catch(e){if("unwind"!=e)throw e}}else"cancel"===r.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===r.data.target||("checkMailbox"===r.data.cmd?o&&e.checkMailbox():r.data.cmd&&(d("worker.js received unknown command "+r.data.cmd),d(r.data)))}catch(a){throw e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),a}};\\n\'},760:()=>{},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}(()=>{"use strict";const e=r(259),t=r(263);self.onmessage=r=>{switch(r.data.type){case"init-wasm":try{(0,t.initializeWebAssembly)(r.data.in).then((()=>postMessage({type:"init-wasm"})),(e=>postMessage({type:"init-wasm",err:e})))}catch(e){postMessage({type:"init-wasm",err:e})}break;case"init-ort":try{(0,e.initRuntime)(r.data.in).then((()=>postMessage({type:"init-ort"})),(e=>postMessage({type:"init-ort",err:e}))),postMessage({type:"init-ort"})}catch(e){postMessage({type:"init-ort",err:e})}break;case"create_allocate":try{const{model:t}=r.data.in,n=(0,e.createSessionAllocate)(t);postMessage({type:"create_allocate",out:n})}catch(e){postMessage({type:"create_allocate",err:e})}break;case"create_finalize":try{const{modeldata:t,options:n}=r.data.in,a=(0,e.createSessionFinalize)(t,n);postMessage({type:"create_finalize",out:a})}catch(e){postMessage({type:"create_finalize",err:e})}break;case"create":try{const{model:t,options:n}=r.data.in,a=(0,e.createSession)(t,n);postMessage({type:"create",out:a})}catch(e){postMessage({type:"create",err:e})}break;case"release":try{const t=r.data.in;(0,e.releaseSession)(t),postMessage({type:"release"})}catch(e){postMessage({type:"release",err:e})}break;case"run":try{const{sessionId:t,inputIndices:n,inputs:a,outputIndices:o,options:i}=r.data.in;(0,e.run)(t,n,a,o,i).then((t=>{postMessage({type:"run",out:t},(0,e.extractTransferableBuffers)(t))}),(e=>{postMessage({type:"run",err:e})}))}catch(e){postMessage({type:"run",err:e})}break;case"end-profiling":try{const t=r.data.in;(0,e.endProfiling)(t),postMessage({type:"end-profiling"})}catch(e){postMessage({type:"end-profiling",err:e})}}}})()})();\n',"Worker",void 0,void 0)}},6614:b=>{"use strict";b.exports=function(i,l,c,a){var f=self||window;try{try{var p;try{p=new f.Blob([i])}catch{(p=new(f.BlobBuilder||f.WebKitBlobBuilder||f.MozBlobBuilder||f.MSBlobBuilder)).append(i),p=p.getBlob()}var d=f.URL||f.webkitURL,h=d.createObjectURL(p),u=new f[l](h,c);return d.revokeObjectURL(h),u}catch{return new f[l]("data:application/javascript,".concat(encodeURIComponent(i)),c)}}catch{if(!a)throw Error("Inline worker is not supported");return new f[l](a,c)}}},2446:(b,i,l)=>{"use strict";var c,a,f,p=l(2100),d=p.Reader,h=p.Writer,u=p.util,o=p.roots.default||(p.roots.default={});o.onnx=((f={}).Version=(c={},(a=Object.create(c))[c[0]="_START_VERSION"]=0,a[c[1]="IR_VERSION_2017_10_10"]=1,a[c[2]="IR_VERSION_2017_10_30"]=2,a[c[3]="IR_VERSION_2017_11_3"]=3,a[c[4]="IR_VERSION_2019_1_22"]=4,a[c[5]="IR_VERSION_2019_3_18"]=5,a[c[6]="IR_VERSION_2019_9_19"]=6,a[c[7]="IR_VERSION_2020_5_8"]=7,a[c[8]="IR_VERSION_2021_7_30"]=8,a[c[9]="IR_VERSION"]=9,a),f.AttributeProto=function(){function n(e){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)e[t[r]]!=null&&(this[t[r]]=e[t[r]])}return n.prototype.name="",n.prototype.refAttrName="",n.prototype.docString="",n.prototype.type=0,n.prototype.f=0,n.prototype.i=u.Long?u.Long.fromBits(0,0,!1):0,n.prototype.s=u.newBuffer([]),n.prototype.t=null,n.prototype.g=null,n.prototype.sparseTensor=null,n.prototype.tp=null,n.prototype.floats=u.emptyArray,n.prototype.ints=u.emptyArray,n.prototype.strings=u.emptyArray,n.prototype.tensors=u.emptyArray,n.prototype.graphs=u.emptyArray,n.prototype.sparseTensors=u.emptyArray,n.prototype.typeProtos=u.emptyArray,n.create=function(e){return new n(e)},n.encode=function(e,t){if(t||(t=h.create()),e.name!=null&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),e.f!=null&&Object.hasOwnProperty.call(e,"f")&&t.uint32(21).float(e.f),e.i!=null&&Object.hasOwnProperty.call(e,"i")&&t.uint32(24).int64(e.i),e.s!=null&&Object.hasOwnProperty.call(e,"s")&&t.uint32(34).bytes(e.s),e.t!=null&&Object.hasOwnProperty.call(e,"t")&&o.onnx.TensorProto.encode(e.t,t.uint32(42).fork()).ldelim(),e.g!=null&&Object.hasOwnProperty.call(e,"g")&&o.onnx.GraphProto.encode(e.g,t.uint32(50).fork()).ldelim(),e.floats!=null&&e.floats.length){t.uint32(58).fork();for(var r=0;r<e.floats.length;++r)t.float(e.floats[r]);t.ldelim()}if(e.ints!=null&&e.ints.length){for(t.uint32(66).fork(),r=0;r<e.ints.length;++r)t.int64(e.ints[r]);t.ldelim()}if(e.strings!=null&&e.strings.length)for(r=0;r<e.strings.length;++r)t.uint32(74).bytes(e.strings[r]);if(e.tensors!=null&&e.tensors.length)for(r=0;r<e.tensors.length;++r)o.onnx.TensorProto.encode(e.tensors[r],t.uint32(82).fork()).ldelim();if(e.graphs!=null&&e.graphs.length)for(r=0;r<e.graphs.length;++r)o.onnx.GraphProto.encode(e.graphs[r],t.uint32(90).fork()).ldelim();if(e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(106).string(e.docString),e.tp!=null&&Object.hasOwnProperty.call(e,"tp")&&o.onnx.TypeProto.encode(e.tp,t.uint32(114).fork()).ldelim(),e.typeProtos!=null&&e.typeProtos.length)for(r=0;r<e.typeProtos.length;++r)o.onnx.TypeProto.encode(e.typeProtos[r],t.uint32(122).fork()).ldelim();if(e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(160).int32(e.type),e.refAttrName!=null&&Object.hasOwnProperty.call(e,"refAttrName")&&t.uint32(170).string(e.refAttrName),e.sparseTensor!=null&&Object.hasOwnProperty.call(e,"sparseTensor")&&o.onnx.SparseTensorProto.encode(e.sparseTensor,t.uint32(178).fork()).ldelim(),e.sparseTensors!=null&&e.sparseTensors.length)for(r=0;r<e.sparseTensors.length;++r)o.onnx.SparseTensorProto.encode(e.sparseTensors[r],t.uint32(186).fork()).ldelim();return t},n.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},n.decode=function(e,t){e instanceof d||(e=d.create(e));for(var r=t===void 0?e.len:e.pos+t,s=new o.onnx.AttributeProto;e.pos<r;){var g=e.uint32();switch(g>>>3){case 1:s.name=e.string();break;case 21:s.refAttrName=e.string();break;case 13:s.docString=e.string();break;case 20:s.type=e.int32();break;case 2:s.f=e.float();break;case 3:s.i=e.int64();break;case 4:s.s=e.bytes();break;case 5:s.t=o.onnx.TensorProto.decode(e,e.uint32());break;case 6:s.g=o.onnx.GraphProto.decode(e,e.uint32());break;case 22:s.sparseTensor=o.onnx.SparseTensorProto.decode(e,e.uint32());break;case 14:s.tp=o.onnx.TypeProto.decode(e,e.uint32());break;case 7:if(s.floats&&s.floats.length||(s.floats=[]),(7&g)==2)for(var m=e.uint32()+e.pos;e.pos<m;)s.floats.push(e.float());else s.floats.push(e.float());break;case 8:if(s.ints&&s.ints.length||(s.ints=[]),(7&g)==2)for(m=e.uint32()+e.pos;e.pos<m;)s.ints.push(e.int64());else s.ints.push(e.int64());break;case 9:s.strings&&s.strings.length||(s.strings=[]),s.strings.push(e.bytes());break;case 10:s.tensors&&s.tensors.length||(s.tensors=[]),s.tensors.push(o.onnx.TensorProto.decode(e,e.uint32()));break;case 11:s.graphs&&s.graphs.length||(s.graphs=[]),s.graphs.push(o.onnx.GraphProto.decode(e,e.uint32()));break;case 23:s.sparseTensors&&s.sparseTensors.length||(s.sparseTensors=[]),s.sparseTensors.push(o.onnx.SparseTensorProto.decode(e,e.uint32()));break;case 15:s.typeProtos&&s.typeProtos.length||(s.typeProtos=[]),s.typeProtos.push(o.onnx.TypeProto.decode(e,e.uint32()));break;default:e.skipType(7&g)}}return s},n.decodeDelimited=function(e){return e instanceof d||(e=new d(e)),this.decode(e,e.uint32())},n.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.name!=null&&e.hasOwnProperty("name")&&!u.isString(e.name))return"name: string expected";if(e.refAttrName!=null&&e.hasOwnProperty("refAttrName")&&!u.isString(e.refAttrName))return"refAttrName: string expected";if(e.docString!=null&&e.hasOwnProperty("docString")&&!u.isString(e.docString))return"docString: string expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:}if(e.f!=null&&e.hasOwnProperty("f")&&typeof e.f!="number")return"f: number expected";if(e.i!=null&&e.hasOwnProperty("i")&&!(u.isInteger(e.i)||e.i&&u.isInteger(e.i.low)&&u.isInteger(e.i.high)))return"i: integer|Long expected";if(e.s!=null&&e.hasOwnProperty("s")&&!(e.s&&typeof e.s.length=="number"||u.isString(e.s)))return"s: buffer expected";if(e.t!=null&&e.hasOwnProperty("t")&&(r=o.onnx.TensorProto.verify(e.t)))return"t."+r;if(e.g!=null&&e.hasOwnProperty("g")&&(r=o.onnx.GraphProto.verify(e.g)))return"g."+r;if(e.sparseTensor!=null&&e.hasOwnProperty("sparseTensor")&&(r=o.onnx.SparseTensorProto.verify(e.sparseTensor)))return"sparseTensor."+r;if(e.tp!=null&&e.hasOwnProperty("tp")&&(r=o.onnx.TypeProto.verify(e.tp)))return"tp."+r;if(e.floats!=null&&e.hasOwnProperty("floats")){if(!Array.isArray(e.floats))return"floats: array expected";for(var t=0;t<e.floats.length;++t)if(typeof e.floats[t]!="number")return"floats: number[] expected"}if(e.ints!=null&&e.hasOwnProperty("ints")){if(!Array.isArray(e.ints))return"ints: array expected";for(t=0;t<e.ints.length;++t)if(!(u.isInteger(e.ints[t])||e.ints[t]&&u.isInteger(e.ints[t].low)&&u.isInteger(e.ints[t].high)))return"ints: integer|Long[] expected"}if(e.strings!=null&&e.hasOwnProperty("strings")){if(!Array.isArray(e.strings))return"strings: array expected";for(t=0;t<e.strings.length;++t)if(!(e.strings[t]&&typeof e.strings[t].length=="number"||u.isString(e.strings[t])))return"strings: buffer[] expected"}if(e.tensors!=null&&e.hasOwnProperty("tensors")){if(!Array.isArray(e.tensors))return"tensors: array expected";for(t=0;t<e.tensors.length;++t)if(r=o.onnx.TensorProto.verify(e.tensors[t]))return"tensors."+r}if(e.graphs!=null&&e.hasOwnProperty("graphs")){if(!Array.isArray(e.graphs))return"graphs: array expected";for(t=0;t<e.graphs.length;++t)if(r=o.onnx.GraphProto.verify(e.graphs[t]))return"graphs."+r}if(e.sparseTensors!=null&&e.hasOwnProperty("sparseTensors")){if(!Array.isArray(e.sparseTensors))return"sparseTensors: array expected";for(t=0;t<e.sparseTensors.length;++t)if(r=o.onnx.SparseTensorProto.verify(e.sparseTensors[t]))return"sparseTensors."+r}if(e.typeProtos!=null&&e.hasOwnProperty("typeProtos")){if(!Array.isArray(e.typeProtos))return"typeProtos: array expected";for(t=0;t<e.typeProtos.length;++t){var r;if(r=o.onnx.TypeProto.verify(e.typeProtos[t]))return"typeProtos."+r}}return null},n.fromObject=function(e){if(e instanceof o.onnx.AttributeProto)return e;var t=new o.onnx.AttributeProto;switch(e.name!=null&&(t.name=String(e.name)),e.refAttrName!=null&&(t.refAttrName=String(e.refAttrName)),e.docString!=null&&(t.docString=String(e.docString)),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"UNDEFINED":case 0:t.type=0;break;case"FLOAT":case 1:t.type=1;break;case"INT":case 2:t.type=2;break;case"STRING":case 3:t.type=3;break;case"TENSOR":case 4:t.type=4;break;case"GRAPH":case 5:t.type=5;break;case"SPARSE_TENSOR":case 11:t.type=11;break;case"TYPE_PROTO":case 13:t.type=13;break;case"FLOATS":case 6:t.type=6;break;case"INTS":case 7:t.type=7;break;case"STRINGS":case 8:t.type=8;break;case"TENSORS":case 9:t.type=9;break;case"GRAPHS":case 10:t.type=10;break;case"SPARSE_TENSORS":case 12:t.type=12;break;case"TYPE_PROTOS":case 14:t.type=14}if(e.f!=null&&(t.f=Number(e.f)),e.i!=null&&(u.Long?(t.i=u.Long.fromValue(e.i)).unsigned=!1:typeof e.i=="string"?t.i=parseInt(e.i,10):typeof e.i=="number"?t.i=e.i:typeof e.i=="object"&&(t.i=new u.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber())),e.s!=null&&(typeof e.s=="string"?u.base64.decode(e.s,t.s=u.newBuffer(u.base64.length(e.s)),0):e.s.length>=0&&(t.s=e.s)),e.t!=null){if(typeof e.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");t.t=o.onnx.TensorProto.fromObject(e.t)}if(e.g!=null){if(typeof e.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");t.g=o.onnx.GraphProto.fromObject(e.g)}if(e.sparseTensor!=null){if(typeof e.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");t.sparseTensor=o.onnx.SparseTensorProto.fromObject(e.sparseTensor)}if(e.tp!=null){if(typeof e.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");t.tp=o.onnx.TypeProto.fromObject(e.tp)}if(e.floats){if(!Array.isArray(e.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");t.floats=[];for(var r=0;r<e.floats.length;++r)t.floats[r]=Number(e.floats[r])}if(e.ints){if(!Array.isArray(e.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(t.ints=[],r=0;r<e.ints.length;++r)u.Long?(t.ints[r]=u.Long.fromValue(e.ints[r])).unsigned=!1:typeof e.ints[r]=="string"?t.ints[r]=parseInt(e.ints[r],10):typeof e.ints[r]=="number"?t.ints[r]=e.ints[r]:typeof e.ints[r]=="object"&&(t.ints[r]=new u.LongBits(e.ints[r].low>>>0,e.ints[r].high>>>0).toNumber())}if(e.strings){if(!Array.isArray(e.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(t.strings=[],r=0;r<e.strings.length;++r)typeof e.strings[r]=="string"?u.base64.decode(e.strings[r],t.strings[r]=u.newBuffer(u.base64.length(e.strings[r])),0):e.strings[r].length>=0&&(t.strings[r]=e.strings[r])}if(e.tensors){if(!Array.isArray(e.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(t.tensors=[],r=0;r<e.tensors.length;++r){if(typeof e.tensors[r]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");t.tensors[r]=o.onnx.TensorProto.fromObject(e.tensors[r])}}if(e.graphs){if(!Array.isArray(e.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(t.graphs=[],r=0;r<e.graphs.length;++r){if(typeof e.graphs[r]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");t.graphs[r]=o.onnx.GraphProto.fromObject(e.graphs[r])}}if(e.sparseTensors){if(!Array.isArray(e.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");for(t.sparseTensors=[],r=0;r<e.sparseTensors.length;++r){if(typeof e.sparseTensors[r]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");t.sparseTensors[r]=o.onnx.SparseTensorProto.fromObject(e.sparseTensors[r])}}if(e.typeProtos){if(!Array.isArray(e.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");for(t.typeProtos=[],r=0;r<e.typeProtos.length;++r){if(typeof e.typeProtos[r]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");t.typeProtos[r]=o.onnx.TypeProto.fromObject(e.typeProtos[r])}}return t},n.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.floats=[],r.ints=[],r.strings=[],r.tensors=[],r.graphs=[],r.typeProtos=[],r.sparseTensors=[]),t.defaults){if(r.name="",r.f=0,u.Long){var s=new u.Long(0,0,!1);r.i=t.longs===String?s.toString():t.longs===Number?s.toNumber():s}else r.i=t.longs===String?"0":0;t.bytes===String?r.s="":(r.s=[],t.bytes!==Array&&(r.s=u.newBuffer(r.s))),r.t=null,r.g=null,r.docString="",r.tp=null,r.type=t.enums===String?"UNDEFINED":0,r.refAttrName="",r.sparseTensor=null}if(e.name!=null&&e.hasOwnProperty("name")&&(r.name=e.name),e.f!=null&&e.hasOwnProperty("f")&&(r.f=t.json&&!isFinite(e.f)?String(e.f):e.f),e.i!=null&&e.hasOwnProperty("i")&&(typeof e.i=="number"?r.i=t.longs===String?String(e.i):e.i:r.i=t.longs===String?u.Long.prototype.toString.call(e.i):t.longs===Number?new u.LongBits(e.i.low>>>0,e.i.high>>>0).toNumber():e.i),e.s!=null&&e.hasOwnProperty("s")&&(r.s=t.bytes===String?u.base64.encode(e.s,0,e.s.length):t.bytes===Array?Array.prototype.slice.call(e.s):e.s),e.t!=null&&e.hasOwnProperty("t")&&(r.t=o.onnx.TensorProto.toObject(e.t,t)),e.g!=null&&e.hasOwnProperty("g")&&(r.g=o.onnx.GraphProto.toObject(e.g,t)),e.floats&&e.floats.length){r.floats=[];for(var g=0;g<e.floats.length;++g)r.floats[g]=t.json&&!isFinite(e.floats[g])?String(e.floats[g]):e.floats[g]}if(e.ints&&e.ints.length)for(r.ints=[],g=0;g<e.ints.length;++g)typeof e.ints[g]=="number"?r.ints[g]=t.longs===String?String(e.ints[g]):e.ints[g]:r.ints[g]=t.longs===String?u.Long.prototype.toString.call(e.ints[g]):t.longs===Number?new u.LongBits(e.ints[g].low>>>0,e.ints[g].high>>>0).toNumber():e.ints[g];if(e.strings&&e.strings.length)for(r.strings=[],g=0;g<e.strings.length;++g)r.strings[g]=t.bytes===String?u.base64.encode(e.strings[g],0,e.strings[g].length):t.bytes===Array?Array.prototype.slice.call(e.strings[g]):e.strings[g];if(e.tensors&&e.tensors.length)for(r.tensors=[],g=0;g<e.tensors.length;++g)r.tensors[g]=o.onnx.TensorProto.toObject(e.tensors[g],t);if(e.graphs&&e.graphs.length)for(r.graphs=[],g=0;g<e.graphs.length;++g)r.graphs[g]=o.onnx.GraphProto.toObject(e.graphs[g],t);if(e.docString!=null&&e.hasOwnProperty("docString")&&(r.docString=e.docString),e.tp!=null&&e.hasOwnProperty("tp")&&(r.tp=o.onnx.TypeProto.toObject(e.tp,t)),e.typeProtos&&e.typeProtos.length)for(r.typeProtos=[],g=0;g<e.typeProtos.length;++g)r.typeProtos[g]=o.onnx.TypeProto.toObject(e.typeProtos[g],t);if(e.type!=null&&e.hasOwnProperty("type")&&(r.type=t.enums===String?o.onnx.AttributeProto.AttributeType[e.type]===void 0?e.type:o.onnx.AttributeProto.AttributeType[e.type]:e.type),e.refAttrName!=null&&e.hasOwnProperty("refAttrName")&&(r.refAttrName=e.refAttrName),e.sparseTensor!=null&&e.hasOwnProperty("sparseTensor")&&(r.sparseTensor=o.onnx.SparseTensorProto.toObject(e.sparseTensor,t)),e.sparseTensors&&e.sparseTensors.length)for(r.sparseTensors=[],g=0;g<e.sparseTensors.length;++g)r.sparseTensors[g]=o.onnx.SparseTensorProto.toObject(e.sparseTensors[g],t);return r},n.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},n.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.AttributeProto"},n.AttributeType=function(){var e={},t=Object.create(e);return t[e[0]="UNDEFINED"]=0,t[e[1]="FLOAT"]=1,t[e[2]="INT"]=2,t[e[3]="STRING"]=3,t[e[4]="TENSOR"]=4,t[e[5]="GRAPH"]=5,t[e[11]="SPARSE_TENSOR"]=11,t[e[13]="TYPE_PROTO"]=13,t[e[6]="FLOATS"]=6,t[e[7]="INTS"]=7,t[e[8]="STRINGS"]=8,t[e[9]="TENSORS"]=9,t[e[10]="GRAPHS"]=10,t[e[12]="SPARSE_TENSORS"]=12,t[e[14]="TYPE_PROTOS"]=14,t}(),n}(),f.ValueInfoProto=function(){function n(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)e[t[r]]!=null&&(this[t[r]]=e[t[r]])}return n.prototype.name="",n.prototype.type=null,n.prototype.docString="",n.create=function(e){return new n(e)},n.encode=function(e,t){return t||(t=h.create()),e.name!=null&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&o.onnx.TypeProto.encode(e.type,t.uint32(18).fork()).ldelim(),e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(26).string(e.docString),t},n.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},n.decode=function(e,t){e instanceof d||(e=d.create(e));for(var r=t===void 0?e.len:e.pos+t,s=new o.onnx.ValueInfoProto;e.pos<r;){var g=e.uint32();switch(g>>>3){case 1:s.name=e.string();break;case 2:s.type=o.onnx.TypeProto.decode(e,e.uint32());break;case 3:s.docString=e.string();break;default:e.skipType(7&g)}}return s},n.decodeDelimited=function(e){return e instanceof d||(e=new d(e)),this.decode(e,e.uint32())},n.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.name!=null&&e.hasOwnProperty("name")&&!u.isString(e.name))return"name: string expected";if(e.type!=null&&e.hasOwnProperty("type")){var t=o.onnx.TypeProto.verify(e.type);if(t)return"type."+t}return e.docString!=null&&e.hasOwnProperty("docString")&&!u.isString(e.docString)?"docString: string expected":null},n.fromObject=function(e){if(e instanceof o.onnx.ValueInfoProto)return e;var t=new o.onnx.ValueInfoProto;if(e.name!=null&&(t.name=String(e.name)),e.type!=null){if(typeof e.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");t.type=o.onnx.TypeProto.fromObject(e.type)}return e.docString!=null&&(t.docString=String(e.docString)),t},n.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.name="",r.type=null,r.docString=""),e.name!=null&&e.hasOwnProperty("name")&&(r.name=e.name),e.type!=null&&e.hasOwnProperty("type")&&(r.type=o.onnx.TypeProto.toObject(e.type,t)),e.docString!=null&&e.hasOwnProperty("docString")&&(r.docString=e.docString),r},n.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},n.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.ValueInfoProto"},n}(),f.NodeProto=function(){function n(e){if(this.input=[],this.output=[],this.attribute=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)e[t[r]]!=null&&(this[t[r]]=e[t[r]])}return n.prototype.input=u.emptyArray,n.prototype.output=u.emptyArray,n.prototype.name="",n.prototype.opType="",n.prototype.domain="",n.prototype.attribute=u.emptyArray,n.prototype.docString="",n.create=function(e){return new n(e)},n.encode=function(e,t){if(t||(t=h.create()),e.input!=null&&e.input.length)for(var r=0;r<e.input.length;++r)t.uint32(10).string(e.input[r]);if(e.output!=null&&e.output.length)for(r=0;r<e.output.length;++r)t.uint32(18).string(e.output[r]);if(e.name!=null&&Object.hasOwnProperty.call(e,"name")&&t.uint32(26).string(e.name),e.opType!=null&&Object.hasOwnProperty.call(e,"opType")&&t.uint32(34).string(e.opType),e.attribute!=null&&e.attribute.length)for(r=0;r<e.attribute.length;++r)o.onnx.AttributeProto.encode(e.attribute[r],t.uint32(42).fork()).ldelim();return e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(50).string(e.docString),e.domain!=null&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(58).string(e.domain),t},n.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},n.decode=function(e,t){e instanceof d||(e=d.create(e));for(var r=t===void 0?e.len:e.pos+t,s=new o.onnx.NodeProto;e.pos<r;){var g=e.uint32();switch(g>>>3){case 1:s.input&&s.input.length||(s.input=[]),s.input.push(e.string());break;case 2:s.output&&s.output.length||(s.output=[]),s.output.push(e.string());break;case 3:s.name=e.string();break;case 4:s.opType=e.string();break;case 7:s.domain=e.string();break;case 5:s.attribute&&s.attribute.length||(s.attribute=[]),s.attribute.push(o.onnx.AttributeProto.decode(e,e.uint32()));break;case 6:s.docString=e.string();break;default:e.skipType(7&g)}}return s},n.decodeDelimited=function(e){return e instanceof d||(e=new d(e)),this.decode(e,e.uint32())},n.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.input!=null&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var t=0;t<e.input.length;++t)if(!u.isString(e.input[t]))return"input: string[] expected"}if(e.output!=null&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(t=0;t<e.output.length;++t)if(!u.isString(e.output[t]))return"output: string[] expected"}if(e.name!=null&&e.hasOwnProperty("name")&&!u.isString(e.name))return"name: string expected";if(e.opType!=null&&e.hasOwnProperty("opType")&&!u.isString(e.opType))return"opType: string expected";if(e.domain!=null&&e.hasOwnProperty("domain")&&!u.isString(e.domain))return"domain: string expected";if(e.attribute!=null&&e.hasOwnProperty("attribute")){if(!Array.isArray(e.attribute))return"attribute: array expected";for(t=0;t<e.attribute.length;++t){var r=o.onnx.AttributeProto.verify(e.attribute[t]);if(r)return"attribute."+r}}return e.docString!=null&&e.hasOwnProperty("docString")&&!u.isString(e.docString)?"docString: string expected":null},n.fromObject=function(e){if(e instanceof o.onnx.NodeProto)return e;var t=new o.onnx.NodeProto;if(e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.NodeProto.input: array expected");t.input=[];for(var r=0;r<e.input.length;++r)t.input[r]=String(e.input[r])}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.NodeProto.output: array expected");for(t.output=[],r=0;r<e.output.length;++r)t.output[r]=String(e.output[r])}if(e.name!=null&&(t.name=String(e.name)),e.opType!=null&&(t.opType=String(e.opType)),e.domain!=null&&(t.domain=String(e.domain)),e.attribute){if(!Array.isArray(e.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(t.attribute=[],r=0;r<e.attribute.length;++r){if(typeof e.attribute[r]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");t.attribute[r]=o.onnx.AttributeProto.fromObject(e.attribute[r])}}return e.docString!=null&&(t.docString=String(e.docString)),t},n.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.input=[],r.output=[],r.attribute=[]),t.defaults&&(r.name="",r.opType="",r.docString="",r.domain=""),e.input&&e.input.length){r.input=[];for(var s=0;s<e.input.length;++s)r.input[s]=e.input[s]}if(e.output&&e.output.length)for(r.output=[],s=0;s<e.output.length;++s)r.output[s]=e.output[s];if(e.name!=null&&e.hasOwnProperty("name")&&(r.name=e.name),e.opType!=null&&e.hasOwnProperty("opType")&&(r.opType=e.opType),e.attribute&&e.attribute.length)for(r.attribute=[],s=0;s<e.attribute.length;++s)r.attribute[s]=o.onnx.AttributeProto.toObject(e.attribute[s],t);return e.docString!=null&&e.hasOwnProperty("docString")&&(r.docString=e.docString),e.domain!=null&&e.hasOwnProperty("domain")&&(r.domain=e.domain),r},n.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},n.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.NodeProto"},n}(),f.TrainingInfoProto=function(){function n(e){if(this.initializationBinding=[],this.updateBinding=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)e[t[r]]!=null&&(this[t[r]]=e[t[r]])}return n.prototype.initialization=null,n.prototype.algorithm=null,n.prototype.initializationBinding=u.emptyArray,n.prototype.updateBinding=u.emptyArray,n.create=function(e){return new n(e)},n.encode=function(e,t){if(t||(t=h.create()),e.initialization!=null&&Object.hasOwnProperty.call(e,"initialization")&&o.onnx.GraphProto.encode(e.initialization,t.uint32(10).fork()).ldelim(),e.algorithm!=null&&Object.hasOwnProperty.call(e,"algorithm")&&o.onnx.GraphProto.encode(e.algorithm,t.uint32(18).fork()).ldelim(),e.initializationBinding!=null&&e.initializationBinding.length)for(var r=0;r<e.initializationBinding.length;++r)o.onnx.StringStringEntryProto.encode(e.initializationBinding[r],t.uint32(26).fork()).ldelim();if(e.updateBinding!=null&&e.updateBinding.length)for(r=0;r<e.updateBinding.length;++r)o.onnx.StringStringEntryProto.encode(e.updateBinding[r],t.uint32(34).fork()).ldelim();return t},n.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},n.decode=function(e,t){e instanceof d||(e=d.create(e));for(var r=t===void 0?e.len:e.pos+t,s=new o.onnx.TrainingInfoProto;e.pos<r;){var g=e.uint32();switch(g>>>3){case 1:s.initialization=o.onnx.GraphProto.decode(e,e.uint32());break;case 2:s.algorithm=o.onnx.GraphProto.decode(e,e.uint32());break;case 3:s.initializationBinding&&s.initializationBinding.length||(s.initializationBinding=[]),s.initializationBinding.push(o.onnx.StringStringEntryProto.decode(e,e.uint32()));break;case 4:s.updateBinding&&s.updateBinding.length||(s.updateBinding=[]),s.updateBinding.push(o.onnx.StringStringEntryProto.decode(e,e.uint32()));break;default:e.skipType(7&g)}}return s},n.decodeDelimited=function(e){return e instanceof d||(e=new d(e)),this.decode(e,e.uint32())},n.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.initialization!=null&&e.hasOwnProperty("initialization")&&(r=o.onnx.GraphProto.verify(e.initialization)))return"initialization."+r;if(e.algorithm!=null&&e.hasOwnProperty("algorithm")&&(r=o.onnx.GraphProto.verify(e.algorithm)))return"algorithm."+r;if(e.initializationBinding!=null&&e.hasOwnProperty("initializationBinding")){if(!Array.isArray(e.initializationBinding))return"initializationBinding: array expected";for(var t=0;t<e.initializationBinding.length;++t)if(r=o.onnx.StringStringEntryProto.verify(e.initializationBinding[t]))return"initializationBinding."+r}if(e.updateBinding!=null&&e.hasOwnProperty("updateBinding")){if(!Array.isArray(e.updateBinding))return"updateBinding: array expected";for(t=0;t<e.updateBinding.length;++t){var r;if(r=o.onnx.StringStringEntryProto.verify(e.updateBinding[t]))return"updateBinding."+r}}return null},n.fromObject=function(e){if(e instanceof o.onnx.TrainingInfoProto)return e;var t=new o.onnx.TrainingInfoProto;if(e.initialization!=null){if(typeof e.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");t.initialization=o.onnx.GraphProto.fromObject(e.initialization)}if(e.algorithm!=null){if(typeof e.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");t.algorithm=o.onnx.GraphProto.fromObject(e.algorithm)}if(e.initializationBinding){if(!Array.isArray(e.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");t.initializationBinding=[];for(var r=0;r<e.initializationBinding.length;++r){if(typeof e.initializationBinding[r]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");t.initializationBinding[r]=o.onnx.StringStringEntryProto.fromObject(e.initializationBinding[r])}}if(e.updateBinding){if(!Array.isArray(e.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");for(t.updateBinding=[],r=0;r<e.updateBinding.length;++r){if(typeof e.updateBinding[r]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");t.updateBinding[r]=o.onnx.StringStringEntryProto.fromObject(e.updateBinding[r])}}return t},n.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.initializationBinding=[],r.updateBinding=[]),t.defaults&&(r.initialization=null,r.algorithm=null),e.initialization!=null&&e.hasOwnProperty("initialization")&&(r.initialization=o.onnx.GraphProto.toObject(e.initialization,t)),e.algorithm!=null&&e.hasOwnProperty("algorithm")&&(r.algorithm=o.onnx.GraphProto.toObject(e.algorithm,t)),e.initializationBinding&&e.initializationBinding.length){r.initializationBinding=[];for(var s=0;s<e.initializationBinding.length;++s)r.initializationBinding[s]=o.onnx.StringStringEntryProto.toObject(e.initializationBinding[s],t)}if(e.updateBinding&&e.updateBinding.length)for(r.updateBinding=[],s=0;s<e.updateBinding.length;++s)r.updateBinding[s]=o.onnx.StringStringEntryProto.toObject(e.updateBinding[s],t);return r},n.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},n.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.TrainingInfoProto"},n}(),f.ModelProto=function(){function n(e){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)e[t[r]]!=null&&(this[t[r]]=e[t[r]])}return n.prototype.irVersion=u.Long?u.Long.fromBits(0,0,!1):0,n.prototype.opsetImport=u.emptyArray,n.prototype.producerName="",n.prototype.producerVersion="",n.prototype.domain="",n.prototype.modelVersion=u.Long?u.Long.fromBits(0,0,!1):0,n.prototype.docString="",n.prototype.graph=null,n.prototype.metadataProps=u.emptyArray,n.prototype.trainingInfo=u.emptyArray,n.prototype.functions=u.emptyArray,n.create=function(e){return new n(e)},n.encode=function(e,t){if(t||(t=h.create()),e.irVersion!=null&&Object.hasOwnProperty.call(e,"irVersion")&&t.uint32(8).int64(e.irVersion),e.producerName!=null&&Object.hasOwnProperty.call(e,"producerName")&&t.uint32(18).string(e.producerName),e.producerVersion!=null&&Object.hasOwnProperty.call(e,"producerVersion")&&t.uint32(26).string(e.producerVersion),e.domain!=null&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(34).string(e.domain),e.modelVersion!=null&&Object.hasOwnProperty.call(e,"modelVersion")&&t.uint32(40).int64(e.modelVersion),e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(50).string(e.docString),e.graph!=null&&Object.hasOwnProperty.call(e,"graph")&&o.onnx.GraphProto.encode(e.graph,t.uint32(58).fork()).ldelim(),e.opsetImport!=null&&e.opsetImport.length)for(var r=0;r<e.opsetImport.length;++r)o.onnx.OperatorSetIdProto.encode(e.opsetImport[r],t.uint32(66).fork()).ldelim();if(e.metadataProps!=null&&e.metadataProps.length)for(r=0;r<e.metadataProps.length;++r)o.onnx.StringStringEntryProto.encode(e.metadataProps[r],t.uint32(114).fork()).ldelim();if(e.trainingInfo!=null&&e.trainingInfo.length)for(r=0;r<e.trainingInfo.length;++r)o.onnx.TrainingInfoProto.encode(e.trainingInfo[r],t.uint32(162).fork()).ldelim();if(e.functions!=null&&e.functions.length)for(r=0;r<e.functions.length;++r)o.onnx.FunctionProto.encode(e.functions[r],t.uint32(202).fork()).ldelim();return t},n.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},n.decode=function(e,t){e instanceof d||(e=d.create(e));for(var r=t===void 0?e.len:e.pos+t,s=new o.onnx.ModelProto;e.pos<r;){var g=e.uint32();switch(g>>>3){case 1:s.irVersion=e.int64();break;case 8:s.opsetImport&&s.opsetImport.length||(s.opsetImport=[]),s.opsetImport.push(o.onnx.OperatorSetIdProto.decode(e,e.uint32()));break;case 2:s.producerName=e.string();break;case 3:s.producerVersion=e.string();break;case 4:s.domain=e.string();break;case 5:s.modelVersion=e.int64();break;case 6:s.docString=e.string();break;case 7:s.graph=o.onnx.GraphProto.decode(e,e.uint32());break;case 14:s.metadataProps&&s.metadataProps.length||(s.metadataProps=[]),s.metadataProps.push(o.onnx.StringStringEntryProto.decode(e,e.uint32()));break;case 20:s.trainingInfo&&s.trainingInfo.length||(s.trainingInfo=[]),s.trainingInfo.push(o.onnx.TrainingInfoProto.decode(e,e.uint32()));break;case 25:s.functions&&s.functions.length||(s.functions=[]),s.functions.push(o.onnx.FunctionProto.decode(e,e.uint32()));break;default:e.skipType(7&g)}}return s},n.decodeDelimited=function(e){return e instanceof d||(e=new d(e)),this.decode(e,e.uint32())},n.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.irVersion!=null&&e.hasOwnProperty("irVersion")&&!(u.isInteger(e.irVersion)||e.irVersion&&u.isInteger(e.irVersion.low)&&u.isInteger(e.irVersion.high)))return"irVersion: integer|Long expected";if(e.opsetImport!=null&&e.hasOwnProperty("opsetImport")){if(!Array.isArray(e.opsetImport))return"opsetImport: array expected";for(var t=0;t<e.opsetImport.length;++t)if(r=o.onnx.OperatorSetIdProto.verify(e.opsetImport[t]))return"opsetImport."+r}if(e.producerName!=null&&e.hasOwnProperty("producerName")&&!u.isString(e.producerName))return"producerName: string expected";if(e.producerVersion!=null&&e.hasOwnProperty("producerVersion")&&!u.isString(e.producerVersion))return"producerVersion: string expected";if(e.domain!=null&&e.hasOwnProperty("domain")&&!u.isString(e.domain))return"domain: string expected";if(e.modelVersion!=null&&e.hasOwnProperty("modelVersion")&&!(u.isInteger(e.modelVersion)||e.modelVersion&&u.isInteger(e.modelVersion.low)&&u.isInteger(e.modelVersion.high)))return"modelVersion: integer|Long expected";if(e.docString!=null&&e.hasOwnProperty("docString")&&!u.isString(e.docString))return"docString: string expected";if(e.graph!=null&&e.hasOwnProperty("graph")&&(r=o.onnx.GraphProto.verify(e.graph)))return"graph."+r;if(e.metadataProps!=null&&e.hasOwnProperty("metadataProps")){if(!Array.isArray(e.metadataProps))return"metadataProps: array expected";for(t=0;t<e.metadataProps.length;++t)if(r=o.onnx.StringStringEntryProto.verify(e.metadataProps[t]))return"metadataProps."+r}if(e.trainingInfo!=null&&e.hasOwnProperty("trainingInfo")){if(!Array.isArray(e.trainingInfo))return"trainingInfo: array expected";for(t=0;t<e.trainingInfo.length;++t)if(r=o.onnx.TrainingInfoProto.verify(e.trainingInfo[t]))return"trainingInfo."+r}if(e.functions!=null&&e.hasOwnProperty("functions")){if(!Array.isArray(e.functions))return"functions: array expected";for(t=0;t<e.functions.length;++t){var r;if(r=o.onnx.FunctionProto.verify(e.functions[t]))return"functions."+r}}return null},n.fromObject=function(e){if(e instanceof o.onnx.ModelProto)return e;var t=new o.onnx.ModelProto;if(e.irVersion!=null&&(u.Long?(t.irVersion=u.Long.fromValue(e.irVersion)).unsigned=!1:typeof e.irVersion=="string"?t.irVersion=parseInt(e.irVersion,10):typeof e.irVersion=="number"?t.irVersion=e.irVersion:typeof e.irVersion=="object"&&(t.irVersion=new u.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber())),e.opsetImport){if(!Array.isArray(e.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");t.opsetImport=[];for(var r=0;r<e.opsetImport.length;++r){if(typeof e.opsetImport[r]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");t.opsetImport[r]=o.onnx.OperatorSetIdProto.fromObject(e.opsetImport[r])}}if(e.producerName!=null&&(t.producerName=String(e.producerName)),e.producerVersion!=null&&(t.producerVersion=String(e.producerVersion)),e.domain!=null&&(t.domain=String(e.domain)),e.modelVersion!=null&&(u.Long?(t.modelVersion=u.Long.fromValue(e.modelVersion)).unsigned=!1:typeof e.modelVersion=="string"?t.modelVersion=parseInt(e.modelVersion,10):typeof e.modelVersion=="number"?t.modelVersion=e.modelVersion:typeof e.modelVersion=="object"&&(t.modelVersion=new u.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber())),e.docString!=null&&(t.docString=String(e.docString)),e.graph!=null){if(typeof e.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");t.graph=o.onnx.GraphProto.fromObject(e.graph)}if(e.metadataProps){if(!Array.isArray(e.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(t.metadataProps=[],r=0;r<e.metadataProps.length;++r){if(typeof e.metadataProps[r]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");t.metadataProps[r]=o.onnx.StringStringEntryProto.fromObject(e.metadataProps[r])}}if(e.trainingInfo){if(!Array.isArray(e.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");for(t.trainingInfo=[],r=0;r<e.trainingInfo.length;++r){if(typeof e.trainingInfo[r]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");t.trainingInfo[r]=o.onnx.TrainingInfoProto.fromObject(e.trainingInfo[r])}}if(e.functions){if(!Array.isArray(e.functions))throw TypeError(".onnx.ModelProto.functions: array expected");for(t.functions=[],r=0;r<e.functions.length;++r){if(typeof e.functions[r]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");t.functions[r]=o.onnx.FunctionProto.fromObject(e.functions[r])}}return t},n.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.opsetImport=[],r.metadataProps=[],r.trainingInfo=[],r.functions=[]),t.defaults){if(u.Long){var s=new u.Long(0,0,!1);r.irVersion=t.longs===String?s.toString():t.longs===Number?s.toNumber():s}else r.irVersion=t.longs===String?"0":0;r.producerName="",r.producerVersion="",r.domain="",u.Long?(s=new u.Long(0,0,!1),r.modelVersion=t.longs===String?s.toString():t.longs===Number?s.toNumber():s):r.modelVersion=t.longs===String?"0":0,r.docString="",r.graph=null}if(e.irVersion!=null&&e.hasOwnProperty("irVersion")&&(typeof e.irVersion=="number"?r.irVersion=t.longs===String?String(e.irVersion):e.irVersion:r.irVersion=t.longs===String?u.Long.prototype.toString.call(e.irVersion):t.longs===Number?new u.LongBits(e.irVersion.low>>>0,e.irVersion.high>>>0).toNumber():e.irVersion),e.producerName!=null&&e.hasOwnProperty("producerName")&&(r.producerName=e.producerName),e.producerVersion!=null&&e.hasOwnProperty("producerVersion")&&(r.producerVersion=e.producerVersion),e.domain!=null&&e.hasOwnProperty("domain")&&(r.domain=e.domain),e.modelVersion!=null&&e.hasOwnProperty("modelVersion")&&(typeof e.modelVersion=="number"?r.modelVersion=t.longs===String?String(e.modelVersion):e.modelVersion:r.modelVersion=t.longs===String?u.Long.prototype.toString.call(e.modelVersion):t.longs===Number?new u.LongBits(e.modelVersion.low>>>0,e.modelVersion.high>>>0).toNumber():e.modelVersion),e.docString!=null&&e.hasOwnProperty("docString")&&(r.docString=e.docString),e.graph!=null&&e.hasOwnProperty("graph")&&(r.graph=o.onnx.GraphProto.toObject(e.graph,t)),e.opsetImport&&e.opsetImport.length){r.opsetImport=[];for(var g=0;g<e.opsetImport.length;++g)r.opsetImport[g]=o.onnx.OperatorSetIdProto.toObject(e.opsetImport[g],t)}if(e.metadataProps&&e.metadataProps.length)for(r.metadataProps=[],g=0;g<e.metadataProps.length;++g)r.metadataProps[g]=o.onnx.StringStringEntryProto.toObject(e.metadataProps[g],t);if(e.trainingInfo&&e.trainingInfo.length)for(r.trainingInfo=[],g=0;g<e.trainingInfo.length;++g)r.trainingInfo[g]=o.onnx.TrainingInfoProto.toObject(e.trainingInfo[g],t);if(e.functions&&e.functions.length)for(r.functions=[],g=0;g<e.functions.length;++g)r.functions[g]=o.onnx.FunctionProto.toObject(e.functions[g],t);return r},n.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},n.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.ModelProto"},n}(),f.StringStringEntryProto=function(){function n(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)e[t[r]]!=null&&(this[t[r]]=e[t[r]])}return n.prototype.key="",n.prototype.value="",n.create=function(e){return new n(e)},n.encode=function(e,t){return t||(t=h.create()),e.key!=null&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},n.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},n.decode=function(e,t){e instanceof d||(e=d.create(e));for(var r=t===void 0?e.len:e.pos+t,s=new o.onnx.StringStringEntryProto;e.pos<r;){var g=e.uint32();switch(g>>>3){case 1:s.key=e.string();break;case 2:s.value=e.string();break;default:e.skipType(7&g)}}return s},n.decodeDelimited=function(e){return e instanceof d||(e=new d(e)),this.decode(e,e.uint32())},n.verify=function(e){return typeof e!="object"||e===null?"object expected":e.key!=null&&e.hasOwnProperty("key")&&!u.isString(e.key)?"key: string expected":e.value!=null&&e.hasOwnProperty("value")&&!u.isString(e.value)?"value: string expected":null},n.fromObject=function(e){if(e instanceof o.onnx.StringStringEntryProto)return e;var t=new o.onnx.StringStringEntryProto;return e.key!=null&&(t.key=String(e.key)),e.value!=null&&(t.value=String(e.value)),t},n.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.key="",r.value=""),e.key!=null&&e.hasOwnProperty("key")&&(r.key=e.key),e.value!=null&&e.hasOwnProperty("value")&&(r.value=e.value),r},n.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},n.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.StringStringEntryProto"},n}(),f.TensorAnnotation=function(){function n(e){if(this.quantParameterTensorNames=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)e[t[r]]!=null&&(this[t[r]]=e[t[r]])}return n.prototype.tensorName="",n.prototype.quantParameterTensorNames=u.emptyArray,n.create=function(e){return new n(e)},n.encode=function(e,t){if(t||(t=h.create()),e.tensorName!=null&&Object.hasOwnProperty.call(e,"tensorName")&&t.uint32(10).string(e.tensorName),e.quantParameterTensorNames!=null&&e.quantParameterTensorNames.length)for(var r=0;r<e.quantParameterTensorNames.length;++r)o.onnx.StringStringEntryProto.encode(e.quantParameterTensorNames[r],t.uint32(18).fork()).ldelim();return t},n.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},n.decode=function(e,t){e instanceof d||(e=d.create(e));for(var r=t===void 0?e.len:e.pos+t,s=new o.onnx.TensorAnnotation;e.pos<r;){var g=e.uint32();switch(g>>>3){case 1:s.tensorName=e.string();break;case 2:s.quantParameterTensorNames&&s.quantParameterTensorNames.length||(s.quantParameterTensorNames=[]),s.quantParameterTensorNames.push(o.onnx.StringStringEntryProto.decode(e,e.uint32()));break;default:e.skipType(7&g)}}return s},n.decodeDelimited=function(e){return e instanceof d||(e=new d(e)),this.decode(e,e.uint32())},n.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.tensorName!=null&&e.hasOwnProperty("tensorName")&&!u.isString(e.tensorName))return"tensorName: string expected";if(e.quantParameterTensorNames!=null&&e.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(e.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var t=0;t<e.quantParameterTensorNames.length;++t){var r=o.onnx.StringStringEntryProto.verify(e.quantParameterTensorNames[t]);if(r)return"quantParameterTensorNames."+r}}return null},n.fromObject=function(e){if(e instanceof o.onnx.TensorAnnotation)return e;var t=new o.onnx.TensorAnnotation;if(e.tensorName!=null&&(t.tensorName=String(e.tensorName)),e.quantParameterTensorNames){if(!Array.isArray(e.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");t.quantParameterTensorNames=[];for(var r=0;r<e.quantParameterTensorNames.length;++r){if(typeof e.quantParameterTensorNames[r]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");t.quantParameterTensorNames[r]=o.onnx.StringStringEntryProto.fromObject(e.quantParameterTensorNames[r])}}return t},n.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.quantParameterTensorNames=[]),t.defaults&&(r.tensorName=""),e.tensorName!=null&&e.hasOwnProperty("tensorName")&&(r.tensorName=e.tensorName),e.quantParameterTensorNames&&e.quantParameterTensorNames.length){r.quantParameterTensorNames=[];for(var s=0;s<e.quantParameterTensorNames.length;++s)r.quantParameterTensorNames[s]=o.onnx.StringStringEntryProto.toObject(e.quantParameterTensorNames[s],t)}return r},n.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},n.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.TensorAnnotation"},n}(),f.GraphProto=function(){function n(e){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)e[t[r]]!=null&&(this[t[r]]=e[t[r]])}return n.prototype.node=u.emptyArray,n.prototype.name="",n.prototype.initializer=u.emptyArray,n.prototype.sparseInitializer=u.emptyArray,n.prototype.docString="",n.prototype.input=u.emptyArray,n.prototype.output=u.emptyArray,n.prototype.valueInfo=u.emptyArray,n.prototype.quantizationAnnotation=u.emptyArray,n.create=function(e){return new n(e)},n.encode=function(e,t){if(t||(t=h.create()),e.node!=null&&e.node.length)for(var r=0;r<e.node.length;++r)o.onnx.NodeProto.encode(e.node[r],t.uint32(10).fork()).ldelim();if(e.name!=null&&Object.hasOwnProperty.call(e,"name")&&t.uint32(18).string(e.name),e.initializer!=null&&e.initializer.length)for(r=0;r<e.initializer.length;++r)o.onnx.TensorProto.encode(e.initializer[r],t.uint32(42).fork()).ldelim();if(e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(82).string(e.docString),e.input!=null&&e.input.length)for(r=0;r<e.input.length;++r)o.onnx.ValueInfoProto.encode(e.input[r],t.uint32(90).fork()).ldelim();if(e.output!=null&&e.output.length)for(r=0;r<e.output.length;++r)o.onnx.ValueInfoProto.encode(e.output[r],t.uint32(98).fork()).ldelim();if(e.valueInfo!=null&&e.valueInfo.length)for(r=0;r<e.valueInfo.length;++r)o.onnx.ValueInfoProto.encode(e.valueInfo[r],t.uint32(106).fork()).ldelim();if(e.quantizationAnnotation!=null&&e.quantizationAnnotation.length)for(r=0;r<e.quantizationAnnotation.length;++r)o.onnx.TensorAnnotation.encode(e.quantizationAnnotation[r],t.uint32(114).fork()).ldelim();if(e.sparseInitializer!=null&&e.sparseInitializer.length)for(r=0;r<e.sparseInitializer.length;++r)o.onnx.SparseTensorProto.encode(e.sparseInitializer[r],t.uint32(122).fork()).ldelim();return t},n.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},n.decode=function(e,t){e instanceof d||(e=d.create(e));for(var r=t===void 0?e.len:e.pos+t,s=new o.onnx.GraphProto;e.pos<r;){var g=e.uint32();switch(g>>>3){case 1:s.node&&s.node.length||(s.node=[]),s.node.push(o.onnx.NodeProto.decode(e,e.uint32()));break;case 2:s.name=e.string();break;case 5:s.initializer&&s.initializer.length||(s.initializer=[]),s.initializer.push(o.onnx.TensorProto.decode(e,e.uint32()));break;case 15:s.sparseInitializer&&s.sparseInitializer.length||(s.sparseInitializer=[]),s.sparseInitializer.push(o.onnx.SparseTensorProto.decode(e,e.uint32()));break;case 10:s.docString=e.string();break;case 11:s.input&&s.input.length||(s.input=[]),s.input.push(o.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 12:s.output&&s.output.length||(s.output=[]),s.output.push(o.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 13:s.valueInfo&&s.valueInfo.length||(s.valueInfo=[]),s.valueInfo.push(o.onnx.ValueInfoProto.decode(e,e.uint32()));break;case 14:s.quantizationAnnotation&&s.quantizationAnnotation.length||(s.quantizationAnnotation=[]),s.quantizationAnnotation.push(o.onnx.TensorAnnotation.decode(e,e.uint32()));break;default:e.skipType(7&g)}}return s},n.decodeDelimited=function(e){return e instanceof d||(e=new d(e)),this.decode(e,e.uint32())},n.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.node!=null&&e.hasOwnProperty("node")){if(!Array.isArray(e.node))return"node: array expected";for(var t=0;t<e.node.length;++t)if(r=o.onnx.NodeProto.verify(e.node[t]))return"node."+r}if(e.name!=null&&e.hasOwnProperty("name")&&!u.isString(e.name))return"name: string expected";if(e.initializer!=null&&e.hasOwnProperty("initializer")){if(!Array.isArray(e.initializer))return"initializer: array expected";for(t=0;t<e.initializer.length;++t)if(r=o.onnx.TensorProto.verify(e.initializer[t]))return"initializer."+r}if(e.sparseInitializer!=null&&e.hasOwnProperty("sparseInitializer")){if(!Array.isArray(e.sparseInitializer))return"sparseInitializer: array expected";for(t=0;t<e.sparseInitializer.length;++t)if(r=o.onnx.SparseTensorProto.verify(e.sparseInitializer[t]))return"sparseInitializer."+r}if(e.docString!=null&&e.hasOwnProperty("docString")&&!u.isString(e.docString))return"docString: string expected";if(e.input!=null&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(t=0;t<e.input.length;++t)if(r=o.onnx.ValueInfoProto.verify(e.input[t]))return"input."+r}if(e.output!=null&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(t=0;t<e.output.length;++t)if(r=o.onnx.ValueInfoProto.verify(e.output[t]))return"output."+r}if(e.valueInfo!=null&&e.hasOwnProperty("valueInfo")){if(!Array.isArray(e.valueInfo))return"valueInfo: array expected";for(t=0;t<e.valueInfo.length;++t)if(r=o.onnx.ValueInfoProto.verify(e.valueInfo[t]))return"valueInfo."+r}if(e.quantizationAnnotation!=null&&e.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(e.quantizationAnnotation))return"quantizationAnnotation: array expected";for(t=0;t<e.quantizationAnnotation.length;++t){var r;if(r=o.onnx.TensorAnnotation.verify(e.quantizationAnnotation[t]))return"quantizationAnnotation."+r}}return null},n.fromObject=function(e){if(e instanceof o.onnx.GraphProto)return e;var t=new o.onnx.GraphProto;if(e.node){if(!Array.isArray(e.node))throw TypeError(".onnx.GraphProto.node: array expected");t.node=[];for(var r=0;r<e.node.length;++r){if(typeof e.node[r]!="object")throw TypeError(".onnx.GraphProto.node: object expected");t.node[r]=o.onnx.NodeProto.fromObject(e.node[r])}}if(e.name!=null&&(t.name=String(e.name)),e.initializer){if(!Array.isArray(e.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(t.initializer=[],r=0;r<e.initializer.length;++r){if(typeof e.initializer[r]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");t.initializer[r]=o.onnx.TensorProto.fromObject(e.initializer[r])}}if(e.sparseInitializer){if(!Array.isArray(e.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");for(t.sparseInitializer=[],r=0;r<e.sparseInitializer.length;++r){if(typeof e.sparseInitializer[r]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");t.sparseInitializer[r]=o.onnx.SparseTensorProto.fromObject(e.sparseInitializer[r])}}if(e.docString!=null&&(t.docString=String(e.docString)),e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.GraphProto.input: array expected");for(t.input=[],r=0;r<e.input.length;++r){if(typeof e.input[r]!="object")throw TypeError(".onnx.GraphProto.input: object expected");t.input[r]=o.onnx.ValueInfoProto.fromObject(e.input[r])}}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.GraphProto.output: array expected");for(t.output=[],r=0;r<e.output.length;++r){if(typeof e.output[r]!="object")throw TypeError(".onnx.GraphProto.output: object expected");t.output[r]=o.onnx.ValueInfoProto.fromObject(e.output[r])}}if(e.valueInfo){if(!Array.isArray(e.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(t.valueInfo=[],r=0;r<e.valueInfo.length;++r){if(typeof e.valueInfo[r]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");t.valueInfo[r]=o.onnx.ValueInfoProto.fromObject(e.valueInfo[r])}}if(e.quantizationAnnotation){if(!Array.isArray(e.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(t.quantizationAnnotation=[],r=0;r<e.quantizationAnnotation.length;++r){if(typeof e.quantizationAnnotation[r]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");t.quantizationAnnotation[r]=o.onnx.TensorAnnotation.fromObject(e.quantizationAnnotation[r])}}return t},n.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.node=[],r.initializer=[],r.input=[],r.output=[],r.valueInfo=[],r.quantizationAnnotation=[],r.sparseInitializer=[]),t.defaults&&(r.name="",r.docString=""),e.node&&e.node.length){r.node=[];for(var s=0;s<e.node.length;++s)r.node[s]=o.onnx.NodeProto.toObject(e.node[s],t)}if(e.name!=null&&e.hasOwnProperty("name")&&(r.name=e.name),e.initializer&&e.initializer.length)for(r.initializer=[],s=0;s<e.initializer.length;++s)r.initializer[s]=o.onnx.TensorProto.toObject(e.initializer[s],t);if(e.docString!=null&&e.hasOwnProperty("docString")&&(r.docString=e.docString),e.input&&e.input.length)for(r.input=[],s=0;s<e.input.length;++s)r.input[s]=o.onnx.ValueInfoProto.toObject(e.input[s],t);if(e.output&&e.output.length)for(r.output=[],s=0;s<e.output.length;++s)r.output[s]=o.onnx.ValueInfoProto.toObject(e.output[s],t);if(e.valueInfo&&e.valueInfo.length)for(r.valueInfo=[],s=0;s<e.valueInfo.length;++s)r.valueInfo[s]=o.onnx.ValueInfoProto.toObject(e.valueInfo[s],t);if(e.quantizationAnnotation&&e.quantizationAnnotation.length)for(r.quantizationAnnotation=[],s=0;s<e.quantizationAnnotation.length;++s)r.quantizationAnnotation[s]=o.onnx.TensorAnnotation.toObject(e.quantizationAnnotation[s],t);if(e.sparseInitializer&&e.sparseInitializer.length)for(r.sparseInitializer=[],s=0;s<e.sparseInitializer.length;++s)r.sparseInitializer[s]=o.onnx.SparseTensorProto.toObject(e.sparseInitializer[s],t);return r},n.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},n.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.GraphProto"},n}(),f.TensorProto=function(){function n(e){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)e[t[r]]!=null&&(this[t[r]]=e[t[r]])}return n.prototype.dims=u.emptyArray,n.prototype.dataType=0,n.prototype.segment=null,n.prototype.floatData=u.emptyArray,n.prototype.int32Data=u.emptyArray,n.prototype.stringData=u.emptyArray,n.prototype.int64Data=u.emptyArray,n.prototype.name="",n.prototype.docString="",n.prototype.rawData=u.newBuffer([]),n.prototype.externalData=u.emptyArray,n.prototype.dataLocation=0,n.prototype.doubleData=u.emptyArray,n.prototype.uint64Data=u.emptyArray,n.create=function(e){return new n(e)},n.encode=function(e,t){if(t||(t=h.create()),e.dims!=null&&e.dims.length){t.uint32(10).fork();for(var r=0;r<e.dims.length;++r)t.int64(e.dims[r]);t.ldelim()}if(e.dataType!=null&&Object.hasOwnProperty.call(e,"dataType")&&t.uint32(16).int32(e.dataType),e.segment!=null&&Object.hasOwnProperty.call(e,"segment")&&o.onnx.TensorProto.Segment.encode(e.segment,t.uint32(26).fork()).ldelim(),e.floatData!=null&&e.floatData.length){for(t.uint32(34).fork(),r=0;r<e.floatData.length;++r)t.float(e.floatData[r]);t.ldelim()}if(e.int32Data!=null&&e.int32Data.length){for(t.uint32(42).fork(),r=0;r<e.int32Data.length;++r)t.int32(e.int32Data[r]);t.ldelim()}if(e.stringData!=null&&e.stringData.length)for(r=0;r<e.stringData.length;++r)t.uint32(50).bytes(e.stringData[r]);if(e.int64Data!=null&&e.int64Data.length){for(t.uint32(58).fork(),r=0;r<e.int64Data.length;++r)t.int64(e.int64Data[r]);t.ldelim()}if(e.name!=null&&Object.hasOwnProperty.call(e,"name")&&t.uint32(66).string(e.name),e.rawData!=null&&Object.hasOwnProperty.call(e,"rawData")&&t.uint32(74).bytes(e.rawData),e.doubleData!=null&&e.doubleData.length){for(t.uint32(82).fork(),r=0;r<e.doubleData.length;++r)t.double(e.doubleData[r]);t.ldelim()}if(e.uint64Data!=null&&e.uint64Data.length){for(t.uint32(90).fork(),r=0;r<e.uint64Data.length;++r)t.uint64(e.uint64Data[r]);t.ldelim()}if(e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(98).string(e.docString),e.externalData!=null&&e.externalData.length)for(r=0;r<e.externalData.length;++r)o.onnx.StringStringEntryProto.encode(e.externalData[r],t.uint32(106).fork()).ldelim();return e.dataLocation!=null&&Object.hasOwnProperty.call(e,"dataLocation")&&t.uint32(112).int32(e.dataLocation),t},n.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},n.decode=function(e,t){e instanceof d||(e=d.create(e));for(var r=t===void 0?e.len:e.pos+t,s=new o.onnx.TensorProto;e.pos<r;){var g=e.uint32();switch(g>>>3){case 1:if(s.dims&&s.dims.length||(s.dims=[]),(7&g)==2)for(var m=e.uint32()+e.pos;e.pos<m;)s.dims.push(e.int64());else s.dims.push(e.int64());break;case 2:s.dataType=e.int32();break;case 3:s.segment=o.onnx.TensorProto.Segment.decode(e,e.uint32());break;case 4:if(s.floatData&&s.floatData.length||(s.floatData=[]),(7&g)==2)for(m=e.uint32()+e.pos;e.pos<m;)s.floatData.push(e.float());else s.floatData.push(e.float());break;case 5:if(s.int32Data&&s.int32Data.length||(s.int32Data=[]),(7&g)==2)for(m=e.uint32()+e.pos;e.pos<m;)s.int32Data.push(e.int32());else s.int32Data.push(e.int32());break;case 6:s.stringData&&s.stringData.length||(s.stringData=[]),s.stringData.push(e.bytes());break;case 7:if(s.int64Data&&s.int64Data.length||(s.int64Data=[]),(7&g)==2)for(m=e.uint32()+e.pos;e.pos<m;)s.int64Data.push(e.int64());else s.int64Data.push(e.int64());break;case 8:s.name=e.string();break;case 12:s.docString=e.string();break;case 9:s.rawData=e.bytes();break;case 13:s.externalData&&s.externalData.length||(s.externalData=[]),s.externalData.push(o.onnx.StringStringEntryProto.decode(e,e.uint32()));break;case 14:s.dataLocation=e.int32();break;case 10:if(s.doubleData&&s.doubleData.length||(s.doubleData=[]),(7&g)==2)for(m=e.uint32()+e.pos;e.pos<m;)s.doubleData.push(e.double());else s.doubleData.push(e.double());break;case 11:if(s.uint64Data&&s.uint64Data.length||(s.uint64Data=[]),(7&g)==2)for(m=e.uint32()+e.pos;e.pos<m;)s.uint64Data.push(e.uint64());else s.uint64Data.push(e.uint64());break;default:e.skipType(7&g)}}return s},n.decodeDelimited=function(e){return e instanceof d||(e=new d(e)),this.decode(e,e.uint32())},n.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.dims!=null&&e.hasOwnProperty("dims")){if(!Array.isArray(e.dims))return"dims: array expected";for(var t=0;t<e.dims.length;++t)if(!(u.isInteger(e.dims[t])||e.dims[t]&&u.isInteger(e.dims[t].low)&&u.isInteger(e.dims[t].high)))return"dims: integer|Long[] expected"}if(e.dataType!=null&&e.hasOwnProperty("dataType")&&!u.isInteger(e.dataType))return"dataType: integer expected";if(e.segment!=null&&e.hasOwnProperty("segment")&&(r=o.onnx.TensorProto.Segment.verify(e.segment)))return"segment."+r;if(e.floatData!=null&&e.hasOwnProperty("floatData")){if(!Array.isArray(e.floatData))return"floatData: array expected";for(t=0;t<e.floatData.length;++t)if(typeof e.floatData[t]!="number")return"floatData: number[] expected"}if(e.int32Data!=null&&e.hasOwnProperty("int32Data")){if(!Array.isArray(e.int32Data))return"int32Data: array expected";for(t=0;t<e.int32Data.length;++t)if(!u.isInteger(e.int32Data[t]))return"int32Data: integer[] expected"}if(e.stringData!=null&&e.hasOwnProperty("stringData")){if(!Array.isArray(e.stringData))return"stringData: array expected";for(t=0;t<e.stringData.length;++t)if(!(e.stringData[t]&&typeof e.stringData[t].length=="number"||u.isString(e.stringData[t])))return"stringData: buffer[] expected"}if(e.int64Data!=null&&e.hasOwnProperty("int64Data")){if(!Array.isArray(e.int64Data))return"int64Data: array expected";for(t=0;t<e.int64Data.length;++t)if(!(u.isInteger(e.int64Data[t])||e.int64Data[t]&&u.isInteger(e.int64Data[t].low)&&u.isInteger(e.int64Data[t].high)))return"int64Data: integer|Long[] expected"}if(e.name!=null&&e.hasOwnProperty("name")&&!u.isString(e.name))return"name: string expected";if(e.docString!=null&&e.hasOwnProperty("docString")&&!u.isString(e.docString))return"docString: string expected";if(e.rawData!=null&&e.hasOwnProperty("rawData")&&!(e.rawData&&typeof e.rawData.length=="number"||u.isString(e.rawData)))return"rawData: buffer expected";if(e.externalData!=null&&e.hasOwnProperty("externalData")){if(!Array.isArray(e.externalData))return"externalData: array expected";for(t=0;t<e.externalData.length;++t){var r;if(r=o.onnx.StringStringEntryProto.verify(e.externalData[t]))return"externalData."+r}}if(e.dataLocation!=null&&e.hasOwnProperty("dataLocation"))switch(e.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(e.doubleData!=null&&e.hasOwnProperty("doubleData")){if(!Array.isArray(e.doubleData))return"doubleData: array expected";for(t=0;t<e.doubleData.length;++t)if(typeof e.doubleData[t]!="number")return"doubleData: number[] expected"}if(e.uint64Data!=null&&e.hasOwnProperty("uint64Data")){if(!Array.isArray(e.uint64Data))return"uint64Data: array expected";for(t=0;t<e.uint64Data.length;++t)if(!(u.isInteger(e.uint64Data[t])||e.uint64Data[t]&&u.isInteger(e.uint64Data[t].low)&&u.isInteger(e.uint64Data[t].high)))return"uint64Data: integer|Long[] expected"}return null},n.fromObject=function(e){if(e instanceof o.onnx.TensorProto)return e;var t=new o.onnx.TensorProto;if(e.dims){if(!Array.isArray(e.dims))throw TypeError(".onnx.TensorProto.dims: array expected");t.dims=[];for(var r=0;r<e.dims.length;++r)u.Long?(t.dims[r]=u.Long.fromValue(e.dims[r])).unsigned=!1:typeof e.dims[r]=="string"?t.dims[r]=parseInt(e.dims[r],10):typeof e.dims[r]=="number"?t.dims[r]=e.dims[r]:typeof e.dims[r]=="object"&&(t.dims[r]=new u.LongBits(e.dims[r].low>>>0,e.dims[r].high>>>0).toNumber())}if(e.dataType!=null&&(t.dataType=0|e.dataType),e.segment!=null){if(typeof e.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");t.segment=o.onnx.TensorProto.Segment.fromObject(e.segment)}if(e.floatData){if(!Array.isArray(e.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(t.floatData=[],r=0;r<e.floatData.length;++r)t.floatData[r]=Number(e.floatData[r])}if(e.int32Data){if(!Array.isArray(e.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(t.int32Data=[],r=0;r<e.int32Data.length;++r)t.int32Data[r]=0|e.int32Data[r]}if(e.stringData){if(!Array.isArray(e.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(t.stringData=[],r=0;r<e.stringData.length;++r)typeof e.stringData[r]=="string"?u.base64.decode(e.stringData[r],t.stringData[r]=u.newBuffer(u.base64.length(e.stringData[r])),0):e.stringData[r].length>=0&&(t.stringData[r]=e.stringData[r])}if(e.int64Data){if(!Array.isArray(e.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(t.int64Data=[],r=0;r<e.int64Data.length;++r)u.Long?(t.int64Data[r]=u.Long.fromValue(e.int64Data[r])).unsigned=!1:typeof e.int64Data[r]=="string"?t.int64Data[r]=parseInt(e.int64Data[r],10):typeof e.int64Data[r]=="number"?t.int64Data[r]=e.int64Data[r]:typeof e.int64Data[r]=="object"&&(t.int64Data[r]=new u.LongBits(e.int64Data[r].low>>>0,e.int64Data[r].high>>>0).toNumber())}if(e.name!=null&&(t.name=String(e.name)),e.docString!=null&&(t.docString=String(e.docString)),e.rawData!=null&&(typeof e.rawData=="string"?u.base64.decode(e.rawData,t.rawData=u.newBuffer(u.base64.length(e.rawData)),0):e.rawData.length>=0&&(t.rawData=e.rawData)),e.externalData){if(!Array.isArray(e.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(t.externalData=[],r=0;r<e.externalData.length;++r){if(typeof e.externalData[r]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");t.externalData[r]=o.onnx.StringStringEntryProto.fromObject(e.externalData[r])}}switch(e.dataLocation){default:if(typeof e.dataLocation=="number"){t.dataLocation=e.dataLocation;break}break;case"DEFAULT":case 0:t.dataLocation=0;break;case"EXTERNAL":case 1:t.dataLocation=1}if(e.doubleData){if(!Array.isArray(e.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(t.doubleData=[],r=0;r<e.doubleData.length;++r)t.doubleData[r]=Number(e.doubleData[r])}if(e.uint64Data){if(!Array.isArray(e.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(t.uint64Data=[],r=0;r<e.uint64Data.length;++r)u.Long?(t.uint64Data[r]=u.Long.fromValue(e.uint64Data[r])).unsigned=!0:typeof e.uint64Data[r]=="string"?t.uint64Data[r]=parseInt(e.uint64Data[r],10):typeof e.uint64Data[r]=="number"?t.uint64Data[r]=e.uint64Data[r]:typeof e.uint64Data[r]=="object"&&(t.uint64Data[r]=new u.LongBits(e.uint64Data[r].low>>>0,e.uint64Data[r].high>>>0).toNumber(!0))}return t},n.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dims=[],r.floatData=[],r.int32Data=[],r.stringData=[],r.int64Data=[],r.doubleData=[],r.uint64Data=[],r.externalData=[]),t.defaults&&(r.dataType=0,r.segment=null,r.name="",t.bytes===String?r.rawData="":(r.rawData=[],t.bytes!==Array&&(r.rawData=u.newBuffer(r.rawData))),r.docString="",r.dataLocation=t.enums===String?"DEFAULT":0),e.dims&&e.dims.length){r.dims=[];for(var s=0;s<e.dims.length;++s)typeof e.dims[s]=="number"?r.dims[s]=t.longs===String?String(e.dims[s]):e.dims[s]:r.dims[s]=t.longs===String?u.Long.prototype.toString.call(e.dims[s]):t.longs===Number?new u.LongBits(e.dims[s].low>>>0,e.dims[s].high>>>0).toNumber():e.dims[s]}if(e.dataType!=null&&e.hasOwnProperty("dataType")&&(r.dataType=e.dataType),e.segment!=null&&e.hasOwnProperty("segment")&&(r.segment=o.onnx.TensorProto.Segment.toObject(e.segment,t)),e.floatData&&e.floatData.length)for(r.floatData=[],s=0;s<e.floatData.length;++s)r.floatData[s]=t.json&&!isFinite(e.floatData[s])?String(e.floatData[s]):e.floatData[s];if(e.int32Data&&e.int32Data.length)for(r.int32Data=[],s=0;s<e.int32Data.length;++s)r.int32Data[s]=e.int32Data[s];if(e.stringData&&e.stringData.length)for(r.stringData=[],s=0;s<e.stringData.length;++s)r.stringData[s]=t.bytes===String?u.base64.encode(e.stringData[s],0,e.stringData[s].length):t.bytes===Array?Array.prototype.slice.call(e.stringData[s]):e.stringData[s];if(e.int64Data&&e.int64Data.length)for(r.int64Data=[],s=0;s<e.int64Data.length;++s)typeof e.int64Data[s]=="number"?r.int64Data[s]=t.longs===String?String(e.int64Data[s]):e.int64Data[s]:r.int64Data[s]=t.longs===String?u.Long.prototype.toString.call(e.int64Data[s]):t.longs===Number?new u.LongBits(e.int64Data[s].low>>>0,e.int64Data[s].high>>>0).toNumber():e.int64Data[s];if(e.name!=null&&e.hasOwnProperty("name")&&(r.name=e.name),e.rawData!=null&&e.hasOwnProperty("rawData")&&(r.rawData=t.bytes===String?u.base64.encode(e.rawData,0,e.rawData.length):t.bytes===Array?Array.prototype.slice.call(e.rawData):e.rawData),e.doubleData&&e.doubleData.length)for(r.doubleData=[],s=0;s<e.doubleData.length;++s)r.doubleData[s]=t.json&&!isFinite(e.doubleData[s])?String(e.doubleData[s]):e.doubleData[s];if(e.uint64Data&&e.uint64Data.length)for(r.uint64Data=[],s=0;s<e.uint64Data.length;++s)typeof e.uint64Data[s]=="number"?r.uint64Data[s]=t.longs===String?String(e.uint64Data[s]):e.uint64Data[s]:r.uint64Data[s]=t.longs===String?u.Long.prototype.toString.call(e.uint64Data[s]):t.longs===Number?new u.LongBits(e.uint64Data[s].low>>>0,e.uint64Data[s].high>>>0).toNumber(!0):e.uint64Data[s];if(e.docString!=null&&e.hasOwnProperty("docString")&&(r.docString=e.docString),e.externalData&&e.externalData.length)for(r.externalData=[],s=0;s<e.externalData.length;++s)r.externalData[s]=o.onnx.StringStringEntryProto.toObject(e.externalData[s],t);return e.dataLocation!=null&&e.hasOwnProperty("dataLocation")&&(r.dataLocation=t.enums===String?o.onnx.TensorProto.DataLocation[e.dataLocation]===void 0?e.dataLocation:o.onnx.TensorProto.DataLocation[e.dataLocation]:e.dataLocation),r},n.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},n.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.TensorProto"},n.DataType=function(){var e={},t=Object.create(e);return t[e[0]="UNDEFINED"]=0,t[e[1]="FLOAT"]=1,t[e[2]="UINT8"]=2,t[e[3]="INT8"]=3,t[e[4]="UINT16"]=4,t[e[5]="INT16"]=5,t[e[6]="INT32"]=6,t[e[7]="INT64"]=7,t[e[8]="STRING"]=8,t[e[9]="BOOL"]=9,t[e[10]="FLOAT16"]=10,t[e[11]="DOUBLE"]=11,t[e[12]="UINT32"]=12,t[e[13]="UINT64"]=13,t[e[14]="COMPLEX64"]=14,t[e[15]="COMPLEX128"]=15,t[e[16]="BFLOAT16"]=16,t[e[17]="FLOAT8E4M3FN"]=17,t[e[18]="FLOAT8E4M3FNUZ"]=18,t[e[19]="FLOAT8E5M2"]=19,t[e[20]="FLOAT8E5M2FNUZ"]=20,t}(),n.Segment=function(){function e(t){if(t)for(var r=Object.keys(t),s=0;s<r.length;++s)t[r[s]]!=null&&(this[r[s]]=t[r[s]])}return e.prototype.begin=u.Long?u.Long.fromBits(0,0,!1):0,e.prototype.end=u.Long?u.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(t,r){return r||(r=h.create()),t.begin!=null&&Object.hasOwnProperty.call(t,"begin")&&r.uint32(8).int64(t.begin),t.end!=null&&Object.hasOwnProperty.call(t,"end")&&r.uint32(16).int64(t.end),r},e.encodeDelimited=function(t,r){return this.encode(t,r).ldelim()},e.decode=function(t,r){t instanceof d||(t=d.create(t));for(var s=r===void 0?t.len:t.pos+r,g=new o.onnx.TensorProto.Segment;t.pos<s;){var m=t.uint32();switch(m>>>3){case 1:g.begin=t.int64();break;case 2:g.end=t.int64();break;default:t.skipType(7&m)}}return g},e.decodeDelimited=function(t){return t instanceof d||(t=new d(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.begin!=null&&t.hasOwnProperty("begin")&&!(u.isInteger(t.begin)||t.begin&&u.isInteger(t.begin.low)&&u.isInteger(t.begin.high))?"begin: integer|Long expected":t.end!=null&&t.hasOwnProperty("end")&&!(u.isInteger(t.end)||t.end&&u.isInteger(t.end.low)&&u.isInteger(t.end.high))?"end: integer|Long expected":null},e.fromObject=function(t){if(t instanceof o.onnx.TensorProto.Segment)return t;var r=new o.onnx.TensorProto.Segment;return t.begin!=null&&(u.Long?(r.begin=u.Long.fromValue(t.begin)).unsigned=!1:typeof t.begin=="string"?r.begin=parseInt(t.begin,10):typeof t.begin=="number"?r.begin=t.begin:typeof t.begin=="object"&&(r.begin=new u.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber())),t.end!=null&&(u.Long?(r.end=u.Long.fromValue(t.end)).unsigned=!1:typeof t.end=="string"?r.end=parseInt(t.end,10):typeof t.end=="number"?r.end=t.end:typeof t.end=="object"&&(r.end=new u.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber())),r},e.toObject=function(t,r){r||(r={});var s={};if(r.defaults){if(u.Long){var g=new u.Long(0,0,!1);s.begin=r.longs===String?g.toString():r.longs===Number?g.toNumber():g}else s.begin=r.longs===String?"0":0;u.Long?(g=new u.Long(0,0,!1),s.end=r.longs===String?g.toString():r.longs===Number?g.toNumber():g):s.end=r.longs===String?"0":0}return t.begin!=null&&t.hasOwnProperty("begin")&&(typeof t.begin=="number"?s.begin=r.longs===String?String(t.begin):t.begin:s.begin=r.longs===String?u.Long.prototype.toString.call(t.begin):r.longs===Number?new u.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber():t.begin),t.end!=null&&t.hasOwnProperty("end")&&(typeof t.end=="number"?s.end=r.longs===String?String(t.end):t.end:s.end=r.longs===String?u.Long.prototype.toString.call(t.end):r.longs===Number?new u.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber():t.end),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/onnx.TensorProto.Segment"},e}(),n.DataLocation=function(){var e={},t=Object.create(e);return t[e[0]="DEFAULT"]=0,t[e[1]="EXTERNAL"]=1,t}(),n}(),f.SparseTensorProto=function(){function n(e){if(this.dims=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)e[t[r]]!=null&&(this[t[r]]=e[t[r]])}return n.prototype.values=null,n.prototype.indices=null,n.prototype.dims=u.emptyArray,n.create=function(e){return new n(e)},n.encode=function(e,t){if(t||(t=h.create()),e.values!=null&&Object.hasOwnProperty.call(e,"values")&&o.onnx.TensorProto.encode(e.values,t.uint32(10).fork()).ldelim(),e.indices!=null&&Object.hasOwnProperty.call(e,"indices")&&o.onnx.TensorProto.encode(e.indices,t.uint32(18).fork()).ldelim(),e.dims!=null&&e.dims.length){t.uint32(26).fork();for(var r=0;r<e.dims.length;++r)t.int64(e.dims[r]);t.ldelim()}return t},n.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},n.decode=function(e,t){e instanceof d||(e=d.create(e));for(var r=t===void 0?e.len:e.pos+t,s=new o.onnx.SparseTensorProto;e.pos<r;){var g=e.uint32();switch(g>>>3){case 1:s.values=o.onnx.TensorProto.decode(e,e.uint32());break;case 2:s.indices=o.onnx.TensorProto.decode(e,e.uint32());break;case 3:if(s.dims&&s.dims.length||(s.dims=[]),(7&g)==2)for(var m=e.uint32()+e.pos;e.pos<m;)s.dims.push(e.int64());else s.dims.push(e.int64());break;default:e.skipType(7&g)}}return s},n.decodeDelimited=function(e){return e instanceof d||(e=new d(e)),this.decode(e,e.uint32())},n.verify=function(e){if(typeof e!="object"||e===null)return"object expected";var t;if(e.values!=null&&e.hasOwnProperty("values")&&(t=o.onnx.TensorProto.verify(e.values)))return"values."+t;if(e.indices!=null&&e.hasOwnProperty("indices")&&(t=o.onnx.TensorProto.verify(e.indices)))return"indices."+t;if(e.dims!=null&&e.hasOwnProperty("dims")){if(!Array.isArray(e.dims))return"dims: array expected";for(var r=0;r<e.dims.length;++r)if(!(u.isInteger(e.dims[r])||e.dims[r]&&u.isInteger(e.dims[r].low)&&u.isInteger(e.dims[r].high)))return"dims: integer|Long[] expected"}return null},n.fromObject=function(e){if(e instanceof o.onnx.SparseTensorProto)return e;var t=new o.onnx.SparseTensorProto;if(e.values!=null){if(typeof e.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");t.values=o.onnx.TensorProto.fromObject(e.values)}if(e.indices!=null){if(typeof e.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");t.indices=o.onnx.TensorProto.fromObject(e.indices)}if(e.dims){if(!Array.isArray(e.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");t.dims=[];for(var r=0;r<e.dims.length;++r)u.Long?(t.dims[r]=u.Long.fromValue(e.dims[r])).unsigned=!1:typeof e.dims[r]=="string"?t.dims[r]=parseInt(e.dims[r],10):typeof e.dims[r]=="number"?t.dims[r]=e.dims[r]:typeof e.dims[r]=="object"&&(t.dims[r]=new u.LongBits(e.dims[r].low>>>0,e.dims[r].high>>>0).toNumber())}return t},n.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dims=[]),t.defaults&&(r.values=null,r.indices=null),e.values!=null&&e.hasOwnProperty("values")&&(r.values=o.onnx.TensorProto.toObject(e.values,t)),e.indices!=null&&e.hasOwnProperty("indices")&&(r.indices=o.onnx.TensorProto.toObject(e.indices,t)),e.dims&&e.dims.length){r.dims=[];for(var s=0;s<e.dims.length;++s)typeof e.dims[s]=="number"?r.dims[s]=t.longs===String?String(e.dims[s]):e.dims[s]:r.dims[s]=t.longs===String?u.Long.prototype.toString.call(e.dims[s]):t.longs===Number?new u.LongBits(e.dims[s].low>>>0,e.dims[s].high>>>0).toNumber():e.dims[s]}return r},n.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},n.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.SparseTensorProto"},n}(),f.TensorShapeProto=function(){function n(e){if(this.dim=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)e[t[r]]!=null&&(this[t[r]]=e[t[r]])}return n.prototype.dim=u.emptyArray,n.create=function(e){return new n(e)},n.encode=function(e,t){if(t||(t=h.create()),e.dim!=null&&e.dim.length)for(var r=0;r<e.dim.length;++r)o.onnx.TensorShapeProto.Dimension.encode(e.dim[r],t.uint32(10).fork()).ldelim();return t},n.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},n.decode=function(e,t){e instanceof d||(e=d.create(e));for(var r=t===void 0?e.len:e.pos+t,s=new o.onnx.TensorShapeProto;e.pos<r;){var g=e.uint32();g>>>3==1?(s.dim&&s.dim.length||(s.dim=[]),s.dim.push(o.onnx.TensorShapeProto.Dimension.decode(e,e.uint32()))):e.skipType(7&g)}return s},n.decodeDelimited=function(e){return e instanceof d||(e=new d(e)),this.decode(e,e.uint32())},n.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.dim!=null&&e.hasOwnProperty("dim")){if(!Array.isArray(e.dim))return"dim: array expected";for(var t=0;t<e.dim.length;++t){var r=o.onnx.TensorShapeProto.Dimension.verify(e.dim[t]);if(r)return"dim."+r}}return null},n.fromObject=function(e){if(e instanceof o.onnx.TensorShapeProto)return e;var t=new o.onnx.TensorShapeProto;if(e.dim){if(!Array.isArray(e.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");t.dim=[];for(var r=0;r<e.dim.length;++r){if(typeof e.dim[r]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");t.dim[r]=o.onnx.TensorShapeProto.Dimension.fromObject(e.dim[r])}}return t},n.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dim=[]),e.dim&&e.dim.length){r.dim=[];for(var s=0;s<e.dim.length;++s)r.dim[s]=o.onnx.TensorShapeProto.Dimension.toObject(e.dim[s],t)}return r},n.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},n.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.TensorShapeProto"},n.Dimension=function(){function e(r){if(r)for(var s=Object.keys(r),g=0;g<s.length;++g)r[s[g]]!=null&&(this[s[g]]=r[s[g]])}var t;return e.prototype.dimValue=null,e.prototype.dimParam=null,e.prototype.denotation="",Object.defineProperty(e.prototype,"value",{get:u.oneOfGetter(t=["dimValue","dimParam"]),set:u.oneOfSetter(t)}),e.create=function(r){return new e(r)},e.encode=function(r,s){return s||(s=h.create()),r.dimValue!=null&&Object.hasOwnProperty.call(r,"dimValue")&&s.uint32(8).int64(r.dimValue),r.dimParam!=null&&Object.hasOwnProperty.call(r,"dimParam")&&s.uint32(18).string(r.dimParam),r.denotation!=null&&Object.hasOwnProperty.call(r,"denotation")&&s.uint32(26).string(r.denotation),s},e.encodeDelimited=function(r,s){return this.encode(r,s).ldelim()},e.decode=function(r,s){r instanceof d||(r=d.create(r));for(var g=s===void 0?r.len:r.pos+s,m=new o.onnx.TensorShapeProto.Dimension;r.pos<g;){var y=r.uint32();switch(y>>>3){case 1:m.dimValue=r.int64();break;case 2:m.dimParam=r.string();break;case 3:m.denotation=r.string();break;default:r.skipType(7&y)}}return m},e.decodeDelimited=function(r){return r instanceof d||(r=new d(r)),this.decode(r,r.uint32())},e.verify=function(r){if(typeof r!="object"||r===null)return"object expected";var s={};if(r.dimValue!=null&&r.hasOwnProperty("dimValue")&&(s.value=1,!(u.isInteger(r.dimValue)||r.dimValue&&u.isInteger(r.dimValue.low)&&u.isInteger(r.dimValue.high))))return"dimValue: integer|Long expected";if(r.dimParam!=null&&r.hasOwnProperty("dimParam")){if(s.value===1)return"value: multiple values";if(s.value=1,!u.isString(r.dimParam))return"dimParam: string expected"}return r.denotation!=null&&r.hasOwnProperty("denotation")&&!u.isString(r.denotation)?"denotation: string expected":null},e.fromObject=function(r){if(r instanceof o.onnx.TensorShapeProto.Dimension)return r;var s=new o.onnx.TensorShapeProto.Dimension;return r.dimValue!=null&&(u.Long?(s.dimValue=u.Long.fromValue(r.dimValue)).unsigned=!1:typeof r.dimValue=="string"?s.dimValue=parseInt(r.dimValue,10):typeof r.dimValue=="number"?s.dimValue=r.dimValue:typeof r.dimValue=="object"&&(s.dimValue=new u.LongBits(r.dimValue.low>>>0,r.dimValue.high>>>0).toNumber())),r.dimParam!=null&&(s.dimParam=String(r.dimParam)),r.denotation!=null&&(s.denotation=String(r.denotation)),s},e.toObject=function(r,s){s||(s={});var g={};return s.defaults&&(g.denotation=""),r.dimValue!=null&&r.hasOwnProperty("dimValue")&&(typeof r.dimValue=="number"?g.dimValue=s.longs===String?String(r.dimValue):r.dimValue:g.dimValue=s.longs===String?u.Long.prototype.toString.call(r.dimValue):s.longs===Number?new u.LongBits(r.dimValue.low>>>0,r.dimValue.high>>>0).toNumber():r.dimValue,s.oneofs&&(g.value="dimValue")),r.dimParam!=null&&r.hasOwnProperty("dimParam")&&(g.dimParam=r.dimParam,s.oneofs&&(g.value="dimParam")),r.denotation!=null&&r.hasOwnProperty("denotation")&&(g.denotation=r.denotation),g},e.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},e.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TensorShapeProto.Dimension"},e}(),n}(),f.TypeProto=function(){function n(t){if(t)for(var r=Object.keys(t),s=0;s<r.length;++s)t[r[s]]!=null&&(this[r[s]]=t[r[s]])}var e;return n.prototype.tensorType=null,n.prototype.sequenceType=null,n.prototype.mapType=null,n.prototype.optionalType=null,n.prototype.sparseTensorType=null,n.prototype.denotation="",Object.defineProperty(n.prototype,"value",{get:u.oneOfGetter(e=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:u.oneOfSetter(e)}),n.create=function(t){return new n(t)},n.encode=function(t,r){return r||(r=h.create()),t.tensorType!=null&&Object.hasOwnProperty.call(t,"tensorType")&&o.onnx.TypeProto.Tensor.encode(t.tensorType,r.uint32(10).fork()).ldelim(),t.sequenceType!=null&&Object.hasOwnProperty.call(t,"sequenceType")&&o.onnx.TypeProto.Sequence.encode(t.sequenceType,r.uint32(34).fork()).ldelim(),t.mapType!=null&&Object.hasOwnProperty.call(t,"mapType")&&o.onnx.TypeProto.Map.encode(t.mapType,r.uint32(42).fork()).ldelim(),t.denotation!=null&&Object.hasOwnProperty.call(t,"denotation")&&r.uint32(50).string(t.denotation),t.sparseTensorType!=null&&Object.hasOwnProperty.call(t,"sparseTensorType")&&o.onnx.TypeProto.SparseTensor.encode(t.sparseTensorType,r.uint32(66).fork()).ldelim(),t.optionalType!=null&&Object.hasOwnProperty.call(t,"optionalType")&&o.onnx.TypeProto.Optional.encode(t.optionalType,r.uint32(74).fork()).ldelim(),r},n.encodeDelimited=function(t,r){return this.encode(t,r).ldelim()},n.decode=function(t,r){t instanceof d||(t=d.create(t));for(var s=r===void 0?t.len:t.pos+r,g=new o.onnx.TypeProto;t.pos<s;){var m=t.uint32();switch(m>>>3){case 1:g.tensorType=o.onnx.TypeProto.Tensor.decode(t,t.uint32());break;case 4:g.sequenceType=o.onnx.TypeProto.Sequence.decode(t,t.uint32());break;case 5:g.mapType=o.onnx.TypeProto.Map.decode(t,t.uint32());break;case 9:g.optionalType=o.onnx.TypeProto.Optional.decode(t,t.uint32());break;case 8:g.sparseTensorType=o.onnx.TypeProto.SparseTensor.decode(t,t.uint32());break;case 6:g.denotation=t.string();break;default:t.skipType(7&m)}}return g},n.decodeDelimited=function(t){return t instanceof d||(t=new d(t)),this.decode(t,t.uint32())},n.verify=function(t){if(typeof t!="object"||t===null)return"object expected";var r={};if(t.tensorType!=null&&t.hasOwnProperty("tensorType")&&(r.value=1,s=o.onnx.TypeProto.Tensor.verify(t.tensorType)))return"tensorType."+s;if(t.sequenceType!=null&&t.hasOwnProperty("sequenceType")){if(r.value===1)return"value: multiple values";if(r.value=1,s=o.onnx.TypeProto.Sequence.verify(t.sequenceType))return"sequenceType."+s}if(t.mapType!=null&&t.hasOwnProperty("mapType")){if(r.value===1)return"value: multiple values";if(r.value=1,s=o.onnx.TypeProto.Map.verify(t.mapType))return"mapType."+s}if(t.optionalType!=null&&t.hasOwnProperty("optionalType")){if(r.value===1)return"value: multiple values";if(r.value=1,s=o.onnx.TypeProto.Optional.verify(t.optionalType))return"optionalType."+s}if(t.sparseTensorType!=null&&t.hasOwnProperty("sparseTensorType")){if(r.value===1)return"value: multiple values";var s;if(r.value=1,s=o.onnx.TypeProto.SparseTensor.verify(t.sparseTensorType))return"sparseTensorType."+s}return t.denotation!=null&&t.hasOwnProperty("denotation")&&!u.isString(t.denotation)?"denotation: string expected":null},n.fromObject=function(t){if(t instanceof o.onnx.TypeProto)return t;var r=new o.onnx.TypeProto;if(t.tensorType!=null){if(typeof t.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");r.tensorType=o.onnx.TypeProto.Tensor.fromObject(t.tensorType)}if(t.sequenceType!=null){if(typeof t.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");r.sequenceType=o.onnx.TypeProto.Sequence.fromObject(t.sequenceType)}if(t.mapType!=null){if(typeof t.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");r.mapType=o.onnx.TypeProto.Map.fromObject(t.mapType)}if(t.optionalType!=null){if(typeof t.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");r.optionalType=o.onnx.TypeProto.Optional.fromObject(t.optionalType)}if(t.sparseTensorType!=null){if(typeof t.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");r.sparseTensorType=o.onnx.TypeProto.SparseTensor.fromObject(t.sparseTensorType)}return t.denotation!=null&&(r.denotation=String(t.denotation)),r},n.toObject=function(t,r){r||(r={});var s={};return r.defaults&&(s.denotation=""),t.tensorType!=null&&t.hasOwnProperty("tensorType")&&(s.tensorType=o.onnx.TypeProto.Tensor.toObject(t.tensorType,r),r.oneofs&&(s.value="tensorType")),t.sequenceType!=null&&t.hasOwnProperty("sequenceType")&&(s.sequenceType=o.onnx.TypeProto.Sequence.toObject(t.sequenceType,r),r.oneofs&&(s.value="sequenceType")),t.mapType!=null&&t.hasOwnProperty("mapType")&&(s.mapType=o.onnx.TypeProto.Map.toObject(t.mapType,r),r.oneofs&&(s.value="mapType")),t.denotation!=null&&t.hasOwnProperty("denotation")&&(s.denotation=t.denotation),t.sparseTensorType!=null&&t.hasOwnProperty("sparseTensorType")&&(s.sparseTensorType=o.onnx.TypeProto.SparseTensor.toObject(t.sparseTensorType,r),r.oneofs&&(s.value="sparseTensorType")),t.optionalType!=null&&t.hasOwnProperty("optionalType")&&(s.optionalType=o.onnx.TypeProto.Optional.toObject(t.optionalType,r),r.oneofs&&(s.value="optionalType")),s},n.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},n.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/onnx.TypeProto"},n.Tensor=function(){function t(r){if(r)for(var s=Object.keys(r),g=0;g<s.length;++g)r[s[g]]!=null&&(this[s[g]]=r[s[g]])}return t.prototype.elemType=0,t.prototype.shape=null,t.create=function(r){return new t(r)},t.encode=function(r,s){return s||(s=h.create()),r.elemType!=null&&Object.hasOwnProperty.call(r,"elemType")&&s.uint32(8).int32(r.elemType),r.shape!=null&&Object.hasOwnProperty.call(r,"shape")&&o.onnx.TensorShapeProto.encode(r.shape,s.uint32(18).fork()).ldelim(),s},t.encodeDelimited=function(r,s){return this.encode(r,s).ldelim()},t.decode=function(r,s){r instanceof d||(r=d.create(r));for(var g=s===void 0?r.len:r.pos+s,m=new o.onnx.TypeProto.Tensor;r.pos<g;){var y=r.uint32();switch(y>>>3){case 1:m.elemType=r.int32();break;case 2:m.shape=o.onnx.TensorShapeProto.decode(r,r.uint32());break;default:r.skipType(7&y)}}return m},t.decodeDelimited=function(r){return r instanceof d||(r=new d(r)),this.decode(r,r.uint32())},t.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.elemType!=null&&r.hasOwnProperty("elemType")&&!u.isInteger(r.elemType))return"elemType: integer expected";if(r.shape!=null&&r.hasOwnProperty("shape")){var s=o.onnx.TensorShapeProto.verify(r.shape);if(s)return"shape."+s}return null},t.fromObject=function(r){if(r instanceof o.onnx.TypeProto.Tensor)return r;var s=new o.onnx.TypeProto.Tensor;if(r.elemType!=null&&(s.elemType=0|r.elemType),r.shape!=null){if(typeof r.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");s.shape=o.onnx.TensorShapeProto.fromObject(r.shape)}return s},t.toObject=function(r,s){s||(s={});var g={};return s.defaults&&(g.elemType=0,g.shape=null),r.elemType!=null&&r.hasOwnProperty("elemType")&&(g.elemType=r.elemType),r.shape!=null&&r.hasOwnProperty("shape")&&(g.shape=o.onnx.TensorShapeProto.toObject(r.shape,s)),g},t.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},t.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TypeProto.Tensor"},t}(),n.Sequence=function(){function t(r){if(r)for(var s=Object.keys(r),g=0;g<s.length;++g)r[s[g]]!=null&&(this[s[g]]=r[s[g]])}return t.prototype.elemType=null,t.create=function(r){return new t(r)},t.encode=function(r,s){return s||(s=h.create()),r.elemType!=null&&Object.hasOwnProperty.call(r,"elemType")&&o.onnx.TypeProto.encode(r.elemType,s.uint32(10).fork()).ldelim(),s},t.encodeDelimited=function(r,s){return this.encode(r,s).ldelim()},t.decode=function(r,s){r instanceof d||(r=d.create(r));for(var g=s===void 0?r.len:r.pos+s,m=new o.onnx.TypeProto.Sequence;r.pos<g;){var y=r.uint32();y>>>3==1?m.elemType=o.onnx.TypeProto.decode(r,r.uint32()):r.skipType(7&y)}return m},t.decodeDelimited=function(r){return r instanceof d||(r=new d(r)),this.decode(r,r.uint32())},t.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.elemType!=null&&r.hasOwnProperty("elemType")){var s=o.onnx.TypeProto.verify(r.elemType);if(s)return"elemType."+s}return null},t.fromObject=function(r){if(r instanceof o.onnx.TypeProto.Sequence)return r;var s=new o.onnx.TypeProto.Sequence;if(r.elemType!=null){if(typeof r.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");s.elemType=o.onnx.TypeProto.fromObject(r.elemType)}return s},t.toObject=function(r,s){s||(s={});var g={};return s.defaults&&(g.elemType=null),r.elemType!=null&&r.hasOwnProperty("elemType")&&(g.elemType=o.onnx.TypeProto.toObject(r.elemType,s)),g},t.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},t.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TypeProto.Sequence"},t}(),n.Map=function(){function t(r){if(r)for(var s=Object.keys(r),g=0;g<s.length;++g)r[s[g]]!=null&&(this[s[g]]=r[s[g]])}return t.prototype.keyType=0,t.prototype.valueType=null,t.create=function(r){return new t(r)},t.encode=function(r,s){return s||(s=h.create()),r.keyType!=null&&Object.hasOwnProperty.call(r,"keyType")&&s.uint32(8).int32(r.keyType),r.valueType!=null&&Object.hasOwnProperty.call(r,"valueType")&&o.onnx.TypeProto.encode(r.valueType,s.uint32(18).fork()).ldelim(),s},t.encodeDelimited=function(r,s){return this.encode(r,s).ldelim()},t.decode=function(r,s){r instanceof d||(r=d.create(r));for(var g=s===void 0?r.len:r.pos+s,m=new o.onnx.TypeProto.Map;r.pos<g;){var y=r.uint32();switch(y>>>3){case 1:m.keyType=r.int32();break;case 2:m.valueType=o.onnx.TypeProto.decode(r,r.uint32());break;default:r.skipType(7&y)}}return m},t.decodeDelimited=function(r){return r instanceof d||(r=new d(r)),this.decode(r,r.uint32())},t.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.keyType!=null&&r.hasOwnProperty("keyType")&&!u.isInteger(r.keyType))return"keyType: integer expected";if(r.valueType!=null&&r.hasOwnProperty("valueType")){var s=o.onnx.TypeProto.verify(r.valueType);if(s)return"valueType."+s}return null},t.fromObject=function(r){if(r instanceof o.onnx.TypeProto.Map)return r;var s=new o.onnx.TypeProto.Map;if(r.keyType!=null&&(s.keyType=0|r.keyType),r.valueType!=null){if(typeof r.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");s.valueType=o.onnx.TypeProto.fromObject(r.valueType)}return s},t.toObject=function(r,s){s||(s={});var g={};return s.defaults&&(g.keyType=0,g.valueType=null),r.keyType!=null&&r.hasOwnProperty("keyType")&&(g.keyType=r.keyType),r.valueType!=null&&r.hasOwnProperty("valueType")&&(g.valueType=o.onnx.TypeProto.toObject(r.valueType,s)),g},t.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},t.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TypeProto.Map"},t}(),n.Optional=function(){function t(r){if(r)for(var s=Object.keys(r),g=0;g<s.length;++g)r[s[g]]!=null&&(this[s[g]]=r[s[g]])}return t.prototype.elemType=null,t.create=function(r){return new t(r)},t.encode=function(r,s){return s||(s=h.create()),r.elemType!=null&&Object.hasOwnProperty.call(r,"elemType")&&o.onnx.TypeProto.encode(r.elemType,s.uint32(10).fork()).ldelim(),s},t.encodeDelimited=function(r,s){return this.encode(r,s).ldelim()},t.decode=function(r,s){r instanceof d||(r=d.create(r));for(var g=s===void 0?r.len:r.pos+s,m=new o.onnx.TypeProto.Optional;r.pos<g;){var y=r.uint32();y>>>3==1?m.elemType=o.onnx.TypeProto.decode(r,r.uint32()):r.skipType(7&y)}return m},t.decodeDelimited=function(r){return r instanceof d||(r=new d(r)),this.decode(r,r.uint32())},t.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.elemType!=null&&r.hasOwnProperty("elemType")){var s=o.onnx.TypeProto.verify(r.elemType);if(s)return"elemType."+s}return null},t.fromObject=function(r){if(r instanceof o.onnx.TypeProto.Optional)return r;var s=new o.onnx.TypeProto.Optional;if(r.elemType!=null){if(typeof r.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");s.elemType=o.onnx.TypeProto.fromObject(r.elemType)}return s},t.toObject=function(r,s){s||(s={});var g={};return s.defaults&&(g.elemType=null),r.elemType!=null&&r.hasOwnProperty("elemType")&&(g.elemType=o.onnx.TypeProto.toObject(r.elemType,s)),g},t.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},t.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TypeProto.Optional"},t}(),n.SparseTensor=function(){function t(r){if(r)for(var s=Object.keys(r),g=0;g<s.length;++g)r[s[g]]!=null&&(this[s[g]]=r[s[g]])}return t.prototype.elemType=0,t.prototype.shape=null,t.create=function(r){return new t(r)},t.encode=function(r,s){return s||(s=h.create()),r.elemType!=null&&Object.hasOwnProperty.call(r,"elemType")&&s.uint32(8).int32(r.elemType),r.shape!=null&&Object.hasOwnProperty.call(r,"shape")&&o.onnx.TensorShapeProto.encode(r.shape,s.uint32(18).fork()).ldelim(),s},t.encodeDelimited=function(r,s){return this.encode(r,s).ldelim()},t.decode=function(r,s){r instanceof d||(r=d.create(r));for(var g=s===void 0?r.len:r.pos+s,m=new o.onnx.TypeProto.SparseTensor;r.pos<g;){var y=r.uint32();switch(y>>>3){case 1:m.elemType=r.int32();break;case 2:m.shape=o.onnx.TensorShapeProto.decode(r,r.uint32());break;default:r.skipType(7&y)}}return m},t.decodeDelimited=function(r){return r instanceof d||(r=new d(r)),this.decode(r,r.uint32())},t.verify=function(r){if(typeof r!="object"||r===null)return"object expected";if(r.elemType!=null&&r.hasOwnProperty("elemType")&&!u.isInteger(r.elemType))return"elemType: integer expected";if(r.shape!=null&&r.hasOwnProperty("shape")){var s=o.onnx.TensorShapeProto.verify(r.shape);if(s)return"shape."+s}return null},t.fromObject=function(r){if(r instanceof o.onnx.TypeProto.SparseTensor)return r;var s=new o.onnx.TypeProto.SparseTensor;if(r.elemType!=null&&(s.elemType=0|r.elemType),r.shape!=null){if(typeof r.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");s.shape=o.onnx.TensorShapeProto.fromObject(r.shape)}return s},t.toObject=function(r,s){s||(s={});var g={};return s.defaults&&(g.elemType=0,g.shape=null),r.elemType!=null&&r.hasOwnProperty("elemType")&&(g.elemType=r.elemType),r.shape!=null&&r.hasOwnProperty("shape")&&(g.shape=o.onnx.TensorShapeProto.toObject(r.shape,s)),g},t.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},t.getTypeUrl=function(r){return r===void 0&&(r="type.googleapis.com"),r+"/onnx.TypeProto.SparseTensor"},t}(),n}(),f.OperatorSetIdProto=function(){function n(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)e[t[r]]!=null&&(this[t[r]]=e[t[r]])}return n.prototype.domain="",n.prototype.version=u.Long?u.Long.fromBits(0,0,!1):0,n.create=function(e){return new n(e)},n.encode=function(e,t){return t||(t=h.create()),e.domain!=null&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(10).string(e.domain),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&t.uint32(16).int64(e.version),t},n.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},n.decode=function(e,t){e instanceof d||(e=d.create(e));for(var r=t===void 0?e.len:e.pos+t,s=new o.onnx.OperatorSetIdProto;e.pos<r;){var g=e.uint32();switch(g>>>3){case 1:s.domain=e.string();break;case 2:s.version=e.int64();break;default:e.skipType(7&g)}}return s},n.decodeDelimited=function(e){return e instanceof d||(e=new d(e)),this.decode(e,e.uint32())},n.verify=function(e){return typeof e!="object"||e===null?"object expected":e.domain!=null&&e.hasOwnProperty("domain")&&!u.isString(e.domain)?"domain: string expected":e.version!=null&&e.hasOwnProperty("version")&&!(u.isInteger(e.version)||e.version&&u.isInteger(e.version.low)&&u.isInteger(e.version.high))?"version: integer|Long expected":null},n.fromObject=function(e){if(e instanceof o.onnx.OperatorSetIdProto)return e;var t=new o.onnx.OperatorSetIdProto;return e.domain!=null&&(t.domain=String(e.domain)),e.version!=null&&(u.Long?(t.version=u.Long.fromValue(e.version)).unsigned=!1:typeof e.version=="string"?t.version=parseInt(e.version,10):typeof e.version=="number"?t.version=e.version:typeof e.version=="object"&&(t.version=new u.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber())),t},n.toObject=function(e,t){t||(t={});var r={};if(t.defaults)if(r.domain="",u.Long){var s=new u.Long(0,0,!1);r.version=t.longs===String?s.toString():t.longs===Number?s.toNumber():s}else r.version=t.longs===String?"0":0;return e.domain!=null&&e.hasOwnProperty("domain")&&(r.domain=e.domain),e.version!=null&&e.hasOwnProperty("version")&&(typeof e.version=="number"?r.version=t.longs===String?String(e.version):e.version:r.version=t.longs===String?u.Long.prototype.toString.call(e.version):t.longs===Number?new u.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber():e.version),r},n.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},n.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.OperatorSetIdProto"},n}(),f.OperatorStatus=function(){var n={},e=Object.create(n);return e[n[0]="EXPERIMENTAL"]=0,e[n[1]="STABLE"]=1,e}(),f.FunctionProto=function(){function n(e){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)e[t[r]]!=null&&(this[t[r]]=e[t[r]])}return n.prototype.name="",n.prototype.input=u.emptyArray,n.prototype.output=u.emptyArray,n.prototype.attribute=u.emptyArray,n.prototype.attributeProto=u.emptyArray,n.prototype.node=u.emptyArray,n.prototype.docString="",n.prototype.opsetImport=u.emptyArray,n.prototype.domain="",n.create=function(e){return new n(e)},n.encode=function(e,t){if(t||(t=h.create()),e.name!=null&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),e.input!=null&&e.input.length)for(var r=0;r<e.input.length;++r)t.uint32(34).string(e.input[r]);if(e.output!=null&&e.output.length)for(r=0;r<e.output.length;++r)t.uint32(42).string(e.output[r]);if(e.attribute!=null&&e.attribute.length)for(r=0;r<e.attribute.length;++r)t.uint32(50).string(e.attribute[r]);if(e.node!=null&&e.node.length)for(r=0;r<e.node.length;++r)o.onnx.NodeProto.encode(e.node[r],t.uint32(58).fork()).ldelim();if(e.docString!=null&&Object.hasOwnProperty.call(e,"docString")&&t.uint32(66).string(e.docString),e.opsetImport!=null&&e.opsetImport.length)for(r=0;r<e.opsetImport.length;++r)o.onnx.OperatorSetIdProto.encode(e.opsetImport[r],t.uint32(74).fork()).ldelim();if(e.domain!=null&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(82).string(e.domain),e.attributeProto!=null&&e.attributeProto.length)for(r=0;r<e.attributeProto.length;++r)o.onnx.AttributeProto.encode(e.attributeProto[r],t.uint32(90).fork()).ldelim();return t},n.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},n.decode=function(e,t){e instanceof d||(e=d.create(e));for(var r=t===void 0?e.len:e.pos+t,s=new o.onnx.FunctionProto;e.pos<r;){var g=e.uint32();switch(g>>>3){case 1:s.name=e.string();break;case 4:s.input&&s.input.length||(s.input=[]),s.input.push(e.string());break;case 5:s.output&&s.output.length||(s.output=[]),s.output.push(e.string());break;case 6:s.attribute&&s.attribute.length||(s.attribute=[]),s.attribute.push(e.string());break;case 11:s.attributeProto&&s.attributeProto.length||(s.attributeProto=[]),s.attributeProto.push(o.onnx.AttributeProto.decode(e,e.uint32()));break;case 7:s.node&&s.node.length||(s.node=[]),s.node.push(o.onnx.NodeProto.decode(e,e.uint32()));break;case 8:s.docString=e.string();break;case 9:s.opsetImport&&s.opsetImport.length||(s.opsetImport=[]),s.opsetImport.push(o.onnx.OperatorSetIdProto.decode(e,e.uint32()));break;case 10:s.domain=e.string();break;default:e.skipType(7&g)}}return s},n.decodeDelimited=function(e){return e instanceof d||(e=new d(e)),this.decode(e,e.uint32())},n.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.name!=null&&e.hasOwnProperty("name")&&!u.isString(e.name))return"name: string expected";if(e.input!=null&&e.hasOwnProperty("input")){if(!Array.isArray(e.input))return"input: array expected";for(var t=0;t<e.input.length;++t)if(!u.isString(e.input[t]))return"input: string[] expected"}if(e.output!=null&&e.hasOwnProperty("output")){if(!Array.isArray(e.output))return"output: array expected";for(t=0;t<e.output.length;++t)if(!u.isString(e.output[t]))return"output: string[] expected"}if(e.attribute!=null&&e.hasOwnProperty("attribute")){if(!Array.isArray(e.attribute))return"attribute: array expected";for(t=0;t<e.attribute.length;++t)if(!u.isString(e.attribute[t]))return"attribute: string[] expected"}if(e.attributeProto!=null&&e.hasOwnProperty("attributeProto")){if(!Array.isArray(e.attributeProto))return"attributeProto: array expected";for(t=0;t<e.attributeProto.length;++t)if(r=o.onnx.AttributeProto.verify(e.attributeProto[t]))return"attributeProto."+r}if(e.node!=null&&e.hasOwnProperty("node")){if(!Array.isArray(e.node))return"node: array expected";for(t=0;t<e.node.length;++t)if(r=o.onnx.NodeProto.verify(e.node[t]))return"node."+r}if(e.docString!=null&&e.hasOwnProperty("docString")&&!u.isString(e.docString))return"docString: string expected";if(e.opsetImport!=null&&e.hasOwnProperty("opsetImport")){if(!Array.isArray(e.opsetImport))return"opsetImport: array expected";for(t=0;t<e.opsetImport.length;++t){var r;if(r=o.onnx.OperatorSetIdProto.verify(e.opsetImport[t]))return"opsetImport."+r}}return e.domain!=null&&e.hasOwnProperty("domain")&&!u.isString(e.domain)?"domain: string expected":null},n.fromObject=function(e){if(e instanceof o.onnx.FunctionProto)return e;var t=new o.onnx.FunctionProto;if(e.name!=null&&(t.name=String(e.name)),e.input){if(!Array.isArray(e.input))throw TypeError(".onnx.FunctionProto.input: array expected");t.input=[];for(var r=0;r<e.input.length;++r)t.input[r]=String(e.input[r])}if(e.output){if(!Array.isArray(e.output))throw TypeError(".onnx.FunctionProto.output: array expected");for(t.output=[],r=0;r<e.output.length;++r)t.output[r]=String(e.output[r])}if(e.attribute){if(!Array.isArray(e.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");for(t.attribute=[],r=0;r<e.attribute.length;++r)t.attribute[r]=String(e.attribute[r])}if(e.attributeProto){if(!Array.isArray(e.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");for(t.attributeProto=[],r=0;r<e.attributeProto.length;++r){if(typeof e.attributeProto[r]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");t.attributeProto[r]=o.onnx.AttributeProto.fromObject(e.attributeProto[r])}}if(e.node){if(!Array.isArray(e.node))throw TypeError(".onnx.FunctionProto.node: array expected");for(t.node=[],r=0;r<e.node.length;++r){if(typeof e.node[r]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");t.node[r]=o.onnx.NodeProto.fromObject(e.node[r])}}if(e.docString!=null&&(t.docString=String(e.docString)),e.opsetImport){if(!Array.isArray(e.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");for(t.opsetImport=[],r=0;r<e.opsetImport.length;++r){if(typeof e.opsetImport[r]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");t.opsetImport[r]=o.onnx.OperatorSetIdProto.fromObject(e.opsetImport[r])}}return e.domain!=null&&(t.domain=String(e.domain)),t},n.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.input=[],r.output=[],r.attribute=[],r.node=[],r.opsetImport=[],r.attributeProto=[]),t.defaults&&(r.name="",r.docString="",r.domain=""),e.name!=null&&e.hasOwnProperty("name")&&(r.name=e.name),e.input&&e.input.length){r.input=[];for(var s=0;s<e.input.length;++s)r.input[s]=e.input[s]}if(e.output&&e.output.length)for(r.output=[],s=0;s<e.output.length;++s)r.output[s]=e.output[s];if(e.attribute&&e.attribute.length)for(r.attribute=[],s=0;s<e.attribute.length;++s)r.attribute[s]=e.attribute[s];if(e.node&&e.node.length)for(r.node=[],s=0;s<e.node.length;++s)r.node[s]=o.onnx.NodeProto.toObject(e.node[s],t);if(e.docString!=null&&e.hasOwnProperty("docString")&&(r.docString=e.docString),e.opsetImport&&e.opsetImport.length)for(r.opsetImport=[],s=0;s<e.opsetImport.length;++s)r.opsetImport[s]=o.onnx.OperatorSetIdProto.toObject(e.opsetImport[s],t);if(e.domain!=null&&e.hasOwnProperty("domain")&&(r.domain=e.domain),e.attributeProto&&e.attributeProto.length)for(r.attributeProto=[],s=0;s<e.attributeProto.length;++s)r.attributeProto[s]=o.onnx.AttributeProto.toObject(e.attributeProto[s],t);return r},n.prototype.toJSON=function(){return this.constructor.toObject(this,p.util.toJSONOptions)},n.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/onnx.FunctionProto"},n}(),f),b.exports=o},3474:(b,i,l)=>{var c,a=(c=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,typeof __filename<"u"&&(c=c||__filename),function(f={}){function p(){return L.buffer!=Q.buffer&&ae(),Q}function d(){return L.buffer!=Q.buffer&&ae(),ne}function h(){return L.buffer!=Q.buffer&&ae(),re}function u(){return L.buffer!=Q.buffer&&ae(),se}function o(){return L.buffer!=Q.buffer&&ae(),ge}var n,e,t=f;t.ready=new Promise((A,I)=>{n=A,e=I});var r,s,g,m=Object.assign({},t),y="./this.program",_=(A,I)=>{throw I},T=typeof window=="object",w=typeof importScripts=="function",x=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",S=t.ENVIRONMENT_IS_PTHREAD||!1,P="";function C(A){return t.locateFile?t.locateFile(A,P):P+A}if(x){var M=l(1384),j=l(908);let A;P=w?j.dirname(P)+"/":__dirname+"/",r=(I,R)=>(I=I.startsWith("file://")?new URL(I):j.normalize(I),M.readFileSync(I,R?void 0:"utf8")),g=I=>((I=r(I,!0)).buffer||(I=new Uint8Array(I)),I),s=(I,R,F,G=!0)=>{I=I.startsWith("file://")?new URL(I):j.normalize(I),M.readFile(I,G?void 0:"utf8",(te,ce)=>{te?F(te):R(G?ce.buffer:ce)})},!t.thisProgram&&1<process.argv.length&&(y=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),_=(I,R)=>{throw process.exitCode=I,R},t.inspect=()=>"[Emscripten Module object]";try{A=l(9925)}catch(I){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),I}global.Worker=A.Worker}else(T||w)&&(w?P=self.location.href:typeof document<"u"&&document.currentScript&&(P=document.currentScript.src),c&&(P=c),P=P.indexOf("blob:")!==0?P.substr(0,P.replace(/[?#].*/,"").lastIndexOf("/")+1):"",x||(r=A=>{var I=new XMLHttpRequest;return I.open("GET",A,!1),I.send(null),I.responseText},w&&(g=A=>{var I=new XMLHttpRequest;return I.open("GET",A,!1),I.responseType="arraybuffer",I.send(null),new Uint8Array(I.response)}),s=(A,I,R)=>{var F=new XMLHttpRequest;F.open("GET",A,!0),F.responseType="arraybuffer",F.onload=()=>{F.status==200||F.status==0&&F.response?I(F.response):R()},F.onerror=R,F.send(null)}));x&&typeof performance>"u"&&(global.performance=l(6953).performance);var B=console.log.bind(console),E=console.error.bind(console);x&&(B=(...A)=>M.writeSync(1,A.join(" ")+`
`),E=(...A)=>M.writeSync(2,A.join(" ")+`
`));var V,O=t.print||B,k=t.printErr||E;Object.assign(t,m),m=null,t.thisProgram&&(y=t.thisProgram),t.quit&&(_=t.quit),t.wasmBinary&&(V=t.wasmBinary);var N=t.noExitRuntime||!0;typeof WebAssembly!="object"&&Je("no native wasm support detected");var L,z,J,Z,Q,ne,re,se,ge,X=!1;function ae(){var A=L.buffer;t.HEAP8=Q=new Int8Array(A),t.HEAP16=new Int16Array(A),t.HEAP32=re=new Int32Array(A),t.HEAPU8=ne=new Uint8Array(A),t.HEAPU16=new Uint16Array(A),t.HEAPU32=se=new Uint32Array(A),t.HEAPF32=new Float32Array(A),t.HEAPF64=ge=new Float64Array(A)}var ve=t.INITIAL_MEMORY||16777216;if(5242880<=ve||Je("INITIAL_MEMORY should be larger than STACK_SIZE, was "+ve+"! (STACK_SIZE=5242880)"),S)L=t.wasmMemory;else if(t.wasmMemory)L=t.wasmMemory;else if(!((L=new WebAssembly.Memory({initial:ve/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw k("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),x&&k("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");ae(),ve=L.buffer.byteLength;var Ae,Se=[],De=[],Oe=[],Ce=0;function Fe(){return N||0<Ce}var He,qe,Ke=0,pt=null,Ye=null;function yt(){Ke++,t.monitorRunDependencies&&t.monitorRunDependencies(Ke)}function ot(){if(Ke--,t.monitorRunDependencies&&t.monitorRunDependencies(Ke),Ke==0&&(pt!==null&&(clearInterval(pt),pt=null),Ye)){var A=Ye;Ye=null,A()}}function Je(A){throw t.onAbort&&t.onAbort(A),k(A="Aborted("+A+")"),X=!0,Z=1,A=new WebAssembly.RuntimeError(A+". Build with -sASSERTIONS for more info."),e(A),A}function Vt(A){return A.startsWith("data:application/octet-stream;base64,")}function rn(A){if(A==He&&V)return new Uint8Array(V);if(g)return g(A);throw"both async and sync fetching of the wasm failed"}function An(A,I,R){return function(F){if(!V&&(T||w)){if(typeof fetch=="function"&&!F.startsWith("file://"))return fetch(F,{credentials:"same-origin"}).then(G=>{if(!G.ok)throw"failed to load wasm binary file at '"+F+"'";return G.arrayBuffer()}).catch(()=>rn(F));if(s)return new Promise((G,te)=>{s(F,ce=>G(new Uint8Array(ce)),te)})}return Promise.resolve().then(()=>rn(F))}(A).then(F=>WebAssembly.instantiate(F,I)).then(F=>F).then(R,F=>{k("failed to asynchronously prepare wasm: "+F),Je(F)})}function xt(A){this.name="ExitStatus",this.message=`Program terminated with exit(${A})`,this.status=A}function Gt(A){A.terminate(),A.onmessage=()=>{}}function on(A){(A=pe.Fa[A])||Je(),pe.fb(A)}function sn(A){var I=pe.Za();if(!I)return 6;pe.Ia.push(I),pe.Fa[A.Ha]=I,I.Ha=A.Ha;var R={cmd:"run",start_routine:A.gb,arg:A.Ya,pthread_ptr:A.Ha};return x&&I.unref(),I.postMessage(R,A.mb),0}Vt(He="ort-wasm-threaded.wasm")||(He=C(He));var On=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,an=(A,I,R)=>{var F=(I>>>=0)+R;for(R=I;A[R]&&!(R>=F);)++R;if(16<R-I&&A.buffer&&On)return On.decode(A.buffer instanceof SharedArrayBuffer?A.slice(I,R):A.subarray(I,R));for(F="";I<R;){var G=A[I++];if(128&G){var te=63&A[I++];if((224&G)==192)F+=String.fromCharCode((31&G)<<6|te);else{var ce=63&A[I++];65536>(G=(240&G)==224?(15&G)<<12|te<<6|ce:(7&G)<<18|te<<12|ce<<6|63&A[I++])?F+=String.fromCharCode(G):(G-=65536,F+=String.fromCharCode(55296|G>>10,56320|1023&G))}}else F+=String.fromCharCode(G)}return F},bt=(A,I)=>(A>>>=0)?an(d(),A,I):"";function un(A){if(S)return Ie(1,1,A);Z=A,Fe()||(pe.hb(),t.onExit&&t.onExit(A),X=!0),_(A,new xt(A))}var Wt=A=>{if(Z=A,S)throw ln(A),"unwind";un(A)},pe={La:[],Ia:[],Ta:[],Fa:{},Pa:function(){S?pe.ab():pe.$a()},$a:function(){Se.unshift(()=>{yt(),pe.bb(()=>ot())})},ab:function(){pe.receiveObjectTransfer=pe.eb,pe.threadInitTLS=pe.Sa,pe.setExitStatus=pe.Ra,N=!1},Ra:function(A){Z=A},rb:["$terminateWorker"],hb:function(){for(var A of pe.Ia)Gt(A);for(A of pe.La)Gt(A);pe.La=[],pe.Ia=[],pe.Fa=[]},fb:function(A){var I=A.Ha;delete pe.Fa[I],pe.La.push(A),pe.Ia.splice(pe.Ia.indexOf(A),1),A.Ha=0,gr(I)},eb:function(){},Sa:function(){pe.Ta.forEach(A=>A())},cb:A=>new Promise(I=>{A.onmessage=G=>{var te=(G=G.data).cmd;if(G.targetThread&&G.targetThread!=Pn()){var ce=pe.Fa[G.qb];ce?ce.postMessage(G,G.transferList):k('Internal error! Worker sent a message "'+te+'" to target pthread '+G.targetThread+", but that thread no longer exists!")}else te==="checkMailbox"?En():te==="spawnThread"?sn(G):te==="cleanupThread"?on(G.thread):te==="killThread"?(G=G.thread,te=pe.Fa[G],delete pe.Fa[G],Gt(te),gr(G),pe.Ia.splice(pe.Ia.indexOf(te),1),te.Ha=0):te==="cancelThread"?pe.Fa[G.thread].postMessage({cmd:"cancel"}):te==="loaded"?(A.loaded=!0,I(A)):te==="alert"?alert("Thread "+G.threadId+": "+G.text):G.target==="setimmediate"?A.postMessage(G):te==="callHandler"?t[G.handler](...G.args):te&&k("worker sent an unknown command "+te)},A.onerror=G=>{throw k("worker sent an error! "+G.filename+":"+G.lineno+": "+G.message),G},x&&(A.on("message",function(G){A.onmessage({data:G})}),A.on("error",function(G){A.onerror(G)}));var R,F=[];for(R of["onExit","onAbort","print","printErr"])t.hasOwnProperty(R)&&F.push(R);A.postMessage({cmd:"load",handlers:F,urlOrBlob:t.mainScriptUrlOrBlob||c,wasmMemory:L,wasmModule:J})}),bb:function(A){A()},Xa:function(){var A=C("ort-wasm-threaded.worker.js");A=new Worker(A),pe.La.push(A)},Za:function(){return pe.La.length==0&&(pe.Xa(),pe.cb(pe.La[0])),pe.La.pop()}};t.PThread=pe;var St=A=>{for(;0<A.length;)A.shift()(t)};function ln(A){if(S)return Ie(2,0,A);Wt(A)}t.establishStackSpace=function(){var A=Pn(),I=h()[A+52>>2>>>0];A=h()[A+56>>2>>>0],di(I,I-A),Dn(I)};var D=[];function $(A){this.Oa=A-24,this.Wa=function(I){u()[this.Oa+4>>2>>>0]=I},this.Va=function(I){u()[this.Oa+8>>2>>>0]=I},this.Pa=function(I,R){this.Ua(),this.Wa(I),this.Va(R)},this.Ua=function(){u()[this.Oa+16>>2>>>0]=0}}function U(A,I,R,F){return S?Ie(3,1,A,I,R,F):q(A,I,R,F)}function q(A,I,R,F){if(A>>>=0,I>>>=0,R>>>=0,F>>>=0,typeof SharedArrayBuffer>"u")return k("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var G=[];return S&&G.length===0?U(A,I,R,F):(A={gb:R,Ha:A,Ya:F,mb:G},S?(A.ob="spawnThread",postMessage(A,G),0):sn(A))}function ee(A,I,R){return S?Ie(4,1,A,I,R):0}function le(A,I){if(S)return Ie(5,1,A,I)}t.invokeEntryPoint=function(A,I){var R=D[A];R||(A>=D.length&&(D.length=A+1),D[A]=R=Ae.get(A)),A=R(I),Fe()?pe.Ra(A):mr(A)};var me=A=>{for(var I=0,R=0;R<A.length;++R){var F=A.charCodeAt(R);127>=F?I++:2047>=F?I+=2:55296<=F&&57343>=F?(I+=4,++R):I+=3}return I},Le=(A,I,R,F)=>{if(!(0<F))return 0;var G=R>>>=0;F=R+F-1;for(var te=0;te<A.length;++te){var ce=A.charCodeAt(te);if(55296<=ce&&57343>=ce&&(ce=65536+((1023&ce)<<10)|1023&A.charCodeAt(++te)),127>=ce){if(R>=F)break;I[R++>>>0]=ce}else{if(2047>=ce){if(R+1>=F)break;I[R++>>>0]=192|ce>>6}else{if(65535>=ce){if(R+2>=F)break;I[R++>>>0]=224|ce>>12}else{if(R+3>=F)break;I[R++>>>0]=240|ce>>18,I[R++>>>0]=128|ce>>12&63}I[R++>>>0]=128|ce>>6&63}I[R++>>>0]=128|63&ce}}return I[R>>>0]=0,R-G},je=(A,I,R)=>Le(A,d(),I,R);function Ve(A,I){if(S)return Ie(6,1,A,I)}function Be(A,I,R){if(S)return Ie(7,1,A,I,R)}function cn(A,I,R){return S?Ie(8,1,A,I,R):0}function dn(A,I){if(S)return Ie(9,1,A,I)}function W(A,I,R){if(S)return Ie(10,1,A,I,R)}function _e(A,I,R,F){if(S)return Ie(11,1,A,I,R,F)}function Pe(A,I,R,F){if(S)return Ie(12,1,A,I,R,F)}function ut(A,I,R,F){if(S)return Ie(13,1,A,I,R,F)}function pn(A){if(S)return Ie(14,1,A)}function zr(A,I){if(S)return Ie(15,1,A,I)}function Vr(A,I,R){if(S)return Ie(16,1,A,I,R)}var lo=A=>{if(!X)try{if(A(),!Fe())try{S?mr(Z):Wt(Z)}catch(I){I instanceof xt||I=="unwind"||_(1,I)}}catch(I){I instanceof xt||I=="unwind"||_(1,I)}};function dr(A){A>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(h(),A>>2,A).value.then(En),A+=128,Atomics.store(h(),A>>2,1))}function En(){var A=Pn();A&&(dr(A),lo(()=>li()))}t.__emscripten_thread_mailbox_await=dr,t.checkMailbox=En;var Ht=A=>A%4==0&&(A%100!=0||A%400==0),Gr=[0,31,60,91,121,152,182,213,244,274,305,335],Wr=[0,31,59,90,120,151,181,212,243,273,304,334];function Hr(A,I,R,F,G,te,ce,Me){return S?Ie(17,1,A,I,R,F,G,te,ce,Me):-52}function qr(A,I,R,F,G,te,ce){if(S)return Ie(18,1,A,I,R,F,G,te,ce)}var Yr=A=>{var I=me(A)+1,R=si(I);return R&&je(A,R,I),R},co=A=>{var I=yr();return A=A(),Dn(I),A};function Ie(A,I){var R=arguments.length-2,F=arguments;return co(()=>{for(var G=br(8*R),te=G>>3,ce=0;ce<R;ce++){var Me=F[2+ce];o()[te+ce>>>0]=Me}return ui(A,R,G,I)})}var pr,fr=[],hr={},Zr=()=>{if(!pr){var A,I={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"};for(A in hr)hr[A]===void 0?delete I[A]:I[A]=hr[A];var R=[];for(A in I)R.push(`${A}=${I[A]}`);pr=R}return pr};function Xr(A,I){if(S)return Ie(19,1,A,I);A>>>=0,I>>>=0;var R=0;return Zr().forEach(function(F,G){var te=I+R;for(G=u()[A+4*G>>2>>>0]=te,te=0;te<F.length;++te)p()[G++>>0>>>0]=F.charCodeAt(te);p()[G>>0>>>0]=0,R+=F.length+1}),0}function Kr(A,I){if(S)return Ie(20,1,A,I);A>>>=0,I>>>=0;var R=Zr();u()[A>>2>>>0]=R.length;var F=0;return R.forEach(function(G){F+=G.length+1}),u()[I>>2>>>0]=F,0}function Jr(A){return S?Ie(21,1,A):52}function Qr(A,I,R,F){return S?Ie(22,1,A,I,R,F):52}function ei(A,I,R,F,G){return S?Ie(23,1,A,I,R,F,G):70}var po=[null,[],[]];function ti(A,I,R,F){if(S)return Ie(24,1,A,I,R,F);I>>>=0,R>>>=0,F>>>=0;for(var G=0,te=0;te<R;te++){var ce=u()[I>>2>>>0],Me=u()[I+4>>2>>>0];I+=8;for(var nt=0;nt<Me;nt++){var ze=d()[ce+nt>>>0],Ze=po[A];ze===0||ze===10?((A===1?O:k)(an(Ze,0)),Ze.length=0):Ze.push(ze)}G+=Me}return u()[F>>2>>>0]=G,0}var ni=A=>(ni=(()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return F=>(F.set(crypto.getRandomValues(new Uint8Array(F.byteLength))),F);if(x)try{var I=l(760);if(I.randomFillSync)return F=>I.randomFillSync(F);var R=I.randomBytes;return F=>(F.set(R(F.byteLength)),F)}catch{}Je("initRandomDevice")})())(A),ri=[31,29,31,30,31,30,31,31,30,31,30,31],ii=[31,28,31,30,31,30,31,31,30,31,30,31],fo=(A,I)=>{p().set(A,I>>>0)};function oi(A,I,R,F){function G(H,xe,Ne){for(H=typeof H=="number"?H.toString():H||"";H.length<xe;)H=Ne[0]+H;return H}function te(H,xe){return G(H,xe,"0")}function ce(H,xe){function Ne(gi){return 0>gi?-1:0<gi?1:0}var At;return(At=Ne(H.getFullYear()-xe.getFullYear()))===0&&(At=Ne(H.getMonth()-xe.getMonth()))===0&&(At=Ne(H.getDate()-xe.getDate())),At}function Me(H){switch(H.getDay()){case 0:return new Date(H.getFullYear()-1,11,29);case 1:return H;case 2:return new Date(H.getFullYear(),0,3);case 3:return new Date(H.getFullYear(),0,2);case 4:return new Date(H.getFullYear(),0,1);case 5:return new Date(H.getFullYear()-1,11,31);case 6:return new Date(H.getFullYear()-1,11,30)}}function nt(H){var xe=H.Ja;for(H=new Date(new Date(H.Ka+1900,0,1).getTime());0<xe;){var Ne=H.getMonth(),At=(Ht(H.getFullYear())?ri:ii)[Ne];if(!(xe>At-H.getDate())){H.setDate(H.getDate()+xe);break}xe-=At-H.getDate()+1,H.setDate(1),11>Ne?H.setMonth(Ne+1):(H.setMonth(0),H.setFullYear(H.getFullYear()+1))}return Ne=new Date(H.getFullYear()+1,0,4),xe=Me(new Date(H.getFullYear(),0,4)),Ne=Me(Ne),0>=ce(xe,H)?0>=ce(Ne,H)?H.getFullYear()+1:H.getFullYear():H.getFullYear()-1}A>>>=0,I>>>=0,R>>>=0,F>>>=0;var ze=h()[F+40>>2>>>0];for(var Ze in F={kb:h()[F>>2>>>0],jb:h()[F+4>>2>>>0],Ma:h()[F+8>>2>>>0],Qa:h()[F+12>>2>>>0],Na:h()[F+16>>2>>>0],Ka:h()[F+20>>2>>>0],Ga:h()[F+24>>2>>>0],Ja:h()[F+28>>2>>>0],sb:h()[F+32>>2>>>0],ib:h()[F+36>>2>>>0],lb:ze?bt(ze):""},R=bt(R),ze={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})R=R.replace(new RegExp(Ze,"g"),ze[Ze]);var fi="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),hi="January February March April May June July August September October November December".split(" ");for(Ze in ze={"%a":H=>fi[H.Ga].substring(0,3),"%A":H=>fi[H.Ga],"%b":H=>hi[H.Na].substring(0,3),"%B":H=>hi[H.Na],"%C":H=>te((H.Ka+1900)/100|0,2),"%d":H=>te(H.Qa,2),"%e":H=>G(H.Qa,2," "),"%g":H=>nt(H).toString().substring(2),"%G":H=>nt(H),"%H":H=>te(H.Ma,2),"%I":H=>((H=H.Ma)==0?H=12:12<H&&(H-=12),te(H,2)),"%j":H=>{for(var xe=0,Ne=0;Ne<=H.Na-1;xe+=(Ht(H.Ka+1900)?ri:ii)[Ne++]);return te(H.Qa+xe,3)},"%m":H=>te(H.Na+1,2),"%M":H=>te(H.jb,2),"%n":()=>`
`,"%p":H=>0<=H.Ma&&12>H.Ma?"AM":"PM","%S":H=>te(H.kb,2),"%t":()=>"	","%u":H=>H.Ga||7,"%U":H=>te(Math.floor((H.Ja+7-H.Ga)/7),2),"%V":H=>{var xe=Math.floor((H.Ja+7-(H.Ga+6)%7)/7);if(2>=(H.Ga+371-H.Ja-2)%7&&xe++,xe)xe==53&&((Ne=(H.Ga+371-H.Ja)%7)==4||Ne==3&&Ht(H.Ka)||(xe=1));else{xe=52;var Ne=(H.Ga+7-H.Ja-1)%7;(Ne==4||Ne==5&&Ht(H.Ka%400-1))&&xe++}return te(xe,2)},"%w":H=>H.Ga,"%W":H=>te(Math.floor((H.Ja+7-(H.Ga+6)%7)/7),2),"%y":H=>(H.Ka+1900).toString().substring(2),"%Y":H=>H.Ka+1900,"%z":H=>{var xe=0<=(H=H.ib);return H=Math.abs(H)/60,(xe?"+":"-")+("0000"+(H/60*100+H%60)).slice(-4)},"%Z":H=>H.lb,"%%":()=>"%"},R=R.replace(/%%/g,"\0\0"),ze)R.includes(Ze)&&(R=R.replace(new RegExp(Ze,"g"),ze[Ze](F)));return Ze=function(H){var xe=Array(me(H)+1);return Le(H,xe,0,xe.length),xe}(R=R.replace(/\0\0/g,"%")),Ze.length>I?0:(fo(Ze,A),Ze.length-1)}pe.Pa();var ho=[null,un,ln,U,ee,le,Ve,Be,cn,dn,W,_e,Pe,ut,pn,zr,Vr,Hr,qr,Xr,Kr,Jr,Qr,ei,ti],go={b:function(A,I,R){throw new $(A>>>=0).Pa(I>>>0,R>>>0),A},N:function(A){ai(A>>>0,!w,1,!T,131072,!1),pe.Sa()},k:function(A){A>>>=0,S?postMessage({cmd:"cleanupThread",thread:A}):on(A)},I:q,h:ee,T:le,E:Ve,G:Be,U:cn,R:dn,J:W,Q:_e,o:Pe,F:ut,C:pn,S:zr,D:Vr,q:()=>!0,A:function(A,I){(A>>>=0)==I>>>0?setTimeout(()=>En()):S?postMessage({targetThread:A,cmd:"checkMailbox"}):(A=pe.Fa[A])&&A.postMessage({cmd:"checkMailbox"})},L:function(){return-1},M:dr,p:function(A){x&&pe.Fa[A>>>0].ref()},t:function(A,I,R){A=I+2097152>>>0<4194305-!!A?(A>>>0)+4294967296*I:NaN,R>>>=0,A=new Date(1e3*A),h()[R>>2>>>0]=A.getUTCSeconds(),h()[R+4>>2>>>0]=A.getUTCMinutes(),h()[R+8>>2>>>0]=A.getUTCHours(),h()[R+12>>2>>>0]=A.getUTCDate(),h()[R+16>>2>>>0]=A.getUTCMonth(),h()[R+20>>2>>>0]=A.getUTCFullYear()-1900,h()[R+24>>2>>>0]=A.getUTCDay(),A=(A.getTime()-Date.UTC(A.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,h()[R+28>>2>>>0]=A},u:function(A,I,R){A=I+2097152>>>0<4194305-!!A?(A>>>0)+4294967296*I:NaN,R>>>=0,A=new Date(1e3*A),h()[R>>2>>>0]=A.getSeconds(),h()[R+4>>2>>>0]=A.getMinutes(),h()[R+8>>2>>>0]=A.getHours(),h()[R+12>>2>>>0]=A.getDate(),h()[R+16>>2>>>0]=A.getMonth(),h()[R+20>>2>>>0]=A.getFullYear()-1900,h()[R+24>>2>>>0]=A.getDay(),I=(Ht(A.getFullYear())?Gr:Wr)[A.getMonth()]+A.getDate()-1|0,h()[R+28>>2>>>0]=I,h()[R+36>>2>>>0]=-60*A.getTimezoneOffset(),I=new Date(A.getFullYear(),6,1).getTimezoneOffset();var F=new Date(A.getFullYear(),0,1).getTimezoneOffset();A=0|(I!=F&&A.getTimezoneOffset()==Math.min(F,I)),h()[R+32>>2>>>0]=A},v:function(A){A>>>=0;var I=new Date(h()[A+20>>2>>>0]+1900,h()[A+16>>2>>>0],h()[A+12>>2>>>0],h()[A+8>>2>>>0],h()[A+4>>2>>>0],h()[A>>2>>>0],0),R=h()[A+32>>2>>>0],F=I.getTimezoneOffset(),G=new Date(I.getFullYear(),6,1).getTimezoneOffset(),te=new Date(I.getFullYear(),0,1).getTimezoneOffset(),ce=Math.min(te,G);return 0>R?h()[A+32>>2>>>0]=+(G!=te&&ce==F):0<R!=(ce==F)&&(G=Math.max(te,G),I.setTime(I.getTime()+6e4*((0<R?ce:G)-F))),h()[A+24>>2>>>0]=I.getDay(),R=(Ht(I.getFullYear())?Gr:Wr)[I.getMonth()]+I.getDate()-1|0,h()[A+28>>2>>>0]=R,h()[A>>2>>>0]=I.getSeconds(),h()[A+4>>2>>>0]=I.getMinutes(),h()[A+8>>2>>>0]=I.getHours(),h()[A+12>>2>>>0]=I.getDate(),h()[A+16>>2>>>0]=I.getMonth(),h()[A+20>>2>>>0]=I.getYear(),A=I.getTime()/1e3,ci((qe=A,1<=+Math.abs(qe)?0<qe?+Math.floor(qe/4294967296)>>>0:~~+Math.ceil((qe-+(~~qe>>>0))/4294967296)>>>0:0)),A>>>0},r:Hr,s:qr,z:function(A,I,R){function F(ze){return(ze=ze.toTimeString().match(/\(([A-Za-z ]+)\)$/))?ze[1]:"GMT"}A>>>=0,I>>>=0,R>>>=0;var G=new Date().getFullYear(),te=new Date(G,0,1),ce=new Date(G,6,1);G=te.getTimezoneOffset();var Me=ce.getTimezoneOffset(),nt=Math.max(G,Me);u()[A>>2>>>0]=60*nt,h()[I>>2>>>0]=+(G!=Me),A=F(te),I=F(ce),A=Yr(A),I=Yr(I),Me<G?(u()[R>>2>>>0]=A,u()[R+4>>2>>>0]=I):(u()[R>>2>>>0]=I,u()[R+4>>2>>>0]=A)},c:()=>{Je("")},l:function(){},i:function(){return Date.now()},V:()=>{throw Ce+=1,"unwind"},B:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:function(){return x?l(3993).cpus().length:navigator.hardwareConcurrency},K:function(A,I,R,F){for(pe.pb=I>>>0,fr.length=R,I=F>>>0>>3,F=0;F<R;F++)fr[F]=o()[I+F>>>0];return ho[A].apply(null,fr)},y:function(A){A>>>=0;var I=d().length;if(A<=I||4294901760<A)return!1;for(var R=1;4>=R;R*=2){var F=I*(1+.2/R);F=Math.min(F,A+100663296);var G=Math;F=Math.max(A,F);e:{G=G.min.call(G,4294901760,F+(65536-F%65536)%65536)-L.buffer.byteLength+65535>>>16;try{L.grow(G),ae();var te=1;break e}catch{}te=void 0}if(te)return!0}return!1},O:Xr,P:Kr,j:Wt,g:Jr,n:Qr,w:ei,m:ti,x:function(A,I){return A>>>=0,I>>>=0,ni(d().subarray(A>>>0,A+I>>>0)),0},a:L||t.wasmMemory,H:oi,d:function(A,I,R,F){return oi(A>>>0,I>>>0,R>>>0,F>>>0)}};(function(){function A(R,F){return R=R.exports,z=R=function(G){var te=Me=>()=>Me()>>>0,ce=Me=>nt=>Me(nt)>>>0;return(G=Object.assign({},G)).__errno_location=te(G.__errno_location),G.pthread_self=te(G.pthread_self),G.malloc=ce(G.malloc),G.stackSave=te(G.stackSave),G.stackAlloc=ce(G.stackAlloc),G}(R),pe.Ta.push(z.sa),Ae=z.ta,De.unshift(z.W),J=F,ot(),R}var I={a:go};if(yt(),t.instantiateWasm)try{return t.instantiateWasm(I,A)}catch(R){k("Module.instantiateWasm callback failed with error: "+R),e(R)}(function(R,F){var G=He;return V||typeof WebAssembly.instantiateStreaming!="function"||Vt(G)||G.startsWith("file://")||x||typeof fetch!="function"?An(G,R,F):fetch(G,{credentials:"same-origin"}).then(te=>WebAssembly.instantiateStreaming(te,R).then(F,function(ce){return k("wasm streaming compile failed: "+ce),k("falling back to ArrayBuffer instantiation"),An(G,R,F)}))})(I,function(R){A(R.instance,R.module)}).catch(e)})(),t._OrtInit=(A,I)=>(t._OrtInit=z.X)(A,I),t._OrtGetLastError=(A,I)=>(t._OrtGetLastError=z.Y)(A,I),t._OrtCreateSessionOptions=(A,I,R,F,G,te,ce,Me,nt,ze)=>(t._OrtCreateSessionOptions=z.Z)(A,I,R,F,G,te,ce,Me,nt,ze),t._OrtAppendExecutionProvider=(A,I)=>(t._OrtAppendExecutionProvider=z._)(A,I),t._OrtAddSessionConfigEntry=(A,I,R)=>(t._OrtAddSessionConfigEntry=z.$)(A,I,R),t._OrtReleaseSessionOptions=A=>(t._OrtReleaseSessionOptions=z.aa)(A),t._OrtCreateSession=(A,I,R)=>(t._OrtCreateSession=z.ba)(A,I,R),t._OrtReleaseSession=A=>(t._OrtReleaseSession=z.ca)(A),t._OrtGetInputOutputCount=(A,I,R)=>(t._OrtGetInputOutputCount=z.da)(A,I,R),t._OrtGetInputName=(A,I)=>(t._OrtGetInputName=z.ea)(A,I),t._OrtGetOutputName=(A,I)=>(t._OrtGetOutputName=z.fa)(A,I),t._OrtFree=A=>(t._OrtFree=z.ga)(A),t._OrtCreateTensor=(A,I,R,F,G)=>(t._OrtCreateTensor=z.ha)(A,I,R,F,G),t._OrtGetTensorData=(A,I,R,F,G)=>(t._OrtGetTensorData=z.ia)(A,I,R,F,G),t._OrtReleaseTensor=A=>(t._OrtReleaseTensor=z.ja)(A),t._OrtCreateRunOptions=(A,I,R,F)=>(t._OrtCreateRunOptions=z.ka)(A,I,R,F),t._OrtAddRunConfigEntry=(A,I,R)=>(t._OrtAddRunConfigEntry=z.la)(A,I,R),t._OrtReleaseRunOptions=A=>(t._OrtReleaseRunOptions=z.ma)(A),t._OrtRun=(A,I,R,F,G,te,ce,Me)=>(t._OrtRun=z.na)(A,I,R,F,G,te,ce,Me),t._OrtEndProfiling=A=>(t._OrtEndProfiling=z.oa)(A);var Pn=t._pthread_self=()=>(Pn=t._pthread_self=z.pa)(),si=t._malloc=A=>(si=t._malloc=z.qa)(A);t._free=A=>(t._free=z.ra)(A),t.__emscripten_tls_init=()=>(t.__emscripten_tls_init=z.sa)();var ai=t.__emscripten_thread_init=(A,I,R,F,G,te)=>(ai=t.__emscripten_thread_init=z.ua)(A,I,R,F,G,te);t.__emscripten_thread_crashed=()=>(t.__emscripten_thread_crashed=z.va)();var In,ui=(A,I,R,F)=>(ui=z.wa)(A,I,R,F),gr=A=>(gr=z.xa)(A),mr=t.__emscripten_thread_exit=A=>(mr=t.__emscripten_thread_exit=z.ya)(A),li=t.__emscripten_check_mailbox=()=>(li=t.__emscripten_check_mailbox=z.za)(),ci=A=>(ci=z.Aa)(A),di=(A,I)=>(di=z.Ba)(A,I),yr=()=>(yr=z.Ca)(),Dn=A=>(Dn=z.Da)(A),br=A=>(br=z.Ea)(A);function pi(){function A(){if(!In&&(In=!0,t.calledRun=!0,!X)&&(S||St(De),n(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),!S)){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;){var I=t.postRun.shift();Oe.unshift(I)}St(Oe)}}if(!(0<Ke))if(S)n(t),S||St(De),startWorker(t);else{if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)Se.unshift(t.preRun.shift());St(Se),0<Ke||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),A()},1)):A())}}if(t.keepRuntimeAlive=Fe,t.wasmMemory=L,t.stackAlloc=br,t.stackSave=yr,t.stackRestore=Dn,t.UTF8ToString=bt,t.stringToUTF8=je,t.lengthBytesUTF8=me,t.ExitStatus=xt,t.PThread=pe,Ye=function A(){In||pi(),In||(Ye=A)},t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return pi(),f.ready});b.exports=a},932:(b,i,l)=>{var c,a=(c=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,typeof __filename<"u"&&(c=c||__filename),function(f={}){var p,d,h=f;h.ready=new Promise((D,$)=>{p=D,d=$});var u,o,n,e=Object.assign({},h),t="./this.program",r=(D,$)=>{throw $},s=typeof window=="object",g=typeof importScripts=="function",m=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",y="";if(m){var _=l(1384),T=l(908);y=g?T.dirname(y)+"/":__dirname+"/",u=(D,$)=>(D=D.startsWith("file://")?new URL(D):T.normalize(D),_.readFileSync(D,$?void 0:"utf8")),n=D=>((D=u(D,!0)).buffer||(D=new Uint8Array(D)),D),o=(D,$,U,q=!0)=>{D=D.startsWith("file://")?new URL(D):T.normalize(D),_.readFile(D,q?void 0:"utf8",(ee,le)=>{ee?U(ee):$(q?le.buffer:le)})},!h.thisProgram&&1<process.argv.length&&(t=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),r=(D,$)=>{throw process.exitCode=D,$},h.inspect=()=>"[Emscripten Module object]"}else(s||g)&&(g?y=self.location.href:typeof document<"u"&&document.currentScript&&(y=document.currentScript.src),c&&(y=c),y=y.indexOf("blob:")!==0?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",u=D=>{var $=new XMLHttpRequest;return $.open("GET",D,!1),$.send(null),$.responseText},g&&(n=D=>{var $=new XMLHttpRequest;return $.open("GET",D,!1),$.responseType="arraybuffer",$.send(null),new Uint8Array($.response)}),o=(D,$,U)=>{var q=new XMLHttpRequest;q.open("GET",D,!0),q.responseType="arraybuffer",q.onload=()=>{q.status==200||q.status==0&&q.response?$(q.response):U()},q.onerror=U,q.send(null)});var w,x=h.print||console.log.bind(console),S=h.printErr||console.error.bind(console);Object.assign(h,e),e=null,h.thisProgram&&(t=h.thisProgram),h.quit&&(r=h.quit),h.wasmBinary&&(w=h.wasmBinary);var P=h.noExitRuntime||!0;typeof WebAssembly!="object"&&ge("no native wasm support detected");var C,M,j,B,E,V,O=!1;function k(){var D=C.buffer;h.HEAP8=j=new Int8Array(D),h.HEAP16=new Int16Array(D),h.HEAP32=E=new Int32Array(D),h.HEAPU8=B=new Uint8Array(D),h.HEAPU16=new Uint16Array(D),h.HEAPU32=V=new Uint32Array(D),h.HEAPF32=new Float32Array(D),h.HEAPF64=new Float64Array(D)}var N=[],L=[],z=[];function J(){var D=h.preRun.shift();N.unshift(D)}var Z,Q,ne=0,re=null,se=null;function ge(D){throw h.onAbort&&h.onAbort(D),S(D="Aborted("+D+")"),O=!0,D=new WebAssembly.RuntimeError(D+". Build with -sASSERTIONS for more info."),d(D),D}function X(D){return D.startsWith("data:application/octet-stream;base64,")}if(!X(Z="ort-wasm.wasm")){var ae=Z;Z=h.locateFile?h.locateFile(ae,y):y+ae}function ve(D){if(D==Z&&w)return new Uint8Array(w);if(n)return n(D);throw"both async and sync fetching of the wasm failed"}function Ae(D,$,U){return function(q){if(!w&&(s||g)){if(typeof fetch=="function"&&!q.startsWith("file://"))return fetch(q,{credentials:"same-origin"}).then(ee=>{if(!ee.ok)throw"failed to load wasm binary file at '"+q+"'";return ee.arrayBuffer()}).catch(()=>ve(q));if(o)return new Promise((ee,le)=>{o(q,me=>ee(new Uint8Array(me)),le)})}return Promise.resolve().then(()=>ve(q))}(D).then(q=>WebAssembly.instantiate(q,$)).then(q=>q).then(U,q=>{S("failed to asynchronously prepare wasm: "+q),ge(q)})}function Se(D){this.name="ExitStatus",this.message=`Program terminated with exit(${D})`,this.status=D}var De=D=>{for(;0<D.length;)D.shift()(h)};function Oe(D){this.qa=D-24,this.va=function($){V[this.qa+4>>2>>>0]=$},this.ua=function($){V[this.qa+8>>2>>>0]=$},this.sa=function($,U){this.ta(),this.va($),this.ua(U)},this.ta=function(){V[this.qa+16>>2>>>0]=0}}var Ce,Fe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,He=(D,$,U)=>{var q=($>>>=0)+U;for(U=$;D[U]&&!(U>=q);)++U;if(16<U-$&&D.buffer&&Fe)return Fe.decode(D.subarray($,U));for(q="";$<U;){var ee=D[$++];if(128&ee){var le=63&D[$++];if((224&ee)==192)q+=String.fromCharCode((31&ee)<<6|le);else{var me=63&D[$++];65536>(ee=(240&ee)==224?(15&ee)<<12|le<<6|me:(7&ee)<<18|le<<12|me<<6|63&D[$++])?q+=String.fromCharCode(ee):(ee-=65536,q+=String.fromCharCode(55296|ee>>10,56320|1023&ee))}}else q+=String.fromCharCode(ee)}return q},qe=(D,$)=>(D>>>=0)?He(B,D,$):"",Ke=D=>{for(var $=0,U=0;U<D.length;++U){var q=D.charCodeAt(U);127>=q?$++:2047>=q?$+=2:55296<=q&&57343>=q?($+=4,++U):$+=3}return $},pt=(D,$,U,q)=>{if(!(0<q))return 0;var ee=U>>>=0;q=U+q-1;for(var le=0;le<D.length;++le){var me=D.charCodeAt(le);if(55296<=me&&57343>=me&&(me=65536+((1023&me)<<10)|1023&D.charCodeAt(++le)),127>=me){if(U>=q)break;$[U++>>>0]=me}else{if(2047>=me){if(U+1>=q)break;$[U++>>>0]=192|me>>6}else{if(65535>=me){if(U+2>=q)break;$[U++>>>0]=224|me>>12}else{if(U+3>=q)break;$[U++>>>0]=240|me>>18,$[U++>>>0]=128|me>>12&63}$[U++>>>0]=128|me>>6&63}$[U++>>>0]=128|63&me}}return $[U>>>0]=0,U-ee},Ye=D=>D%4==0&&(D%100!=0||D%400==0),yt=[0,31,60,91,121,152,182,213,244,274,305,335],ot=[0,31,59,90,120,151,181,212,243,273,304,334],Je=D=>{var $=Ke(D)+1,U=an($);return U&&pt(D,B,U,$),U},Vt={},rn=()=>{if(!Ce){var D,$={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:t||"./this.program"};for(D in Vt)Vt[D]===void 0?delete $[D]:$[D]=Vt[D];var U=[];for(D in $)U.push(`${D}=${$[D]}`);Ce=U}return Ce},An=[null,[],[]],xt=D=>(xt=(()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return q=>crypto.getRandomValues(q);if(m)try{var $=l(760);if($.randomFillSync)return q=>$.randomFillSync(q);var U=$.randomBytes;return q=>(q.set(U(q.byteLength)),q)}catch{}ge("initRandomDevice")})())(D),Gt=[31,29,31,30,31,30,31,31,30,31,30,31],on=[31,28,31,30,31,30,31,31,30,31,30,31];function sn(D,$,U,q){function ee(W,_e,Pe){for(W=typeof W=="number"?W.toString():W||"";W.length<_e;)W=Pe[0]+W;return W}function le(W,_e){return ee(W,_e,"0")}function me(W,_e){function Pe(pn){return 0>pn?-1:0<pn?1:0}var ut;return(ut=Pe(W.getFullYear()-_e.getFullYear()))===0&&(ut=Pe(W.getMonth()-_e.getMonth()))===0&&(ut=Pe(W.getDate()-_e.getDate())),ut}function Le(W){switch(W.getDay()){case 0:return new Date(W.getFullYear()-1,11,29);case 1:return W;case 2:return new Date(W.getFullYear(),0,3);case 3:return new Date(W.getFullYear(),0,2);case 4:return new Date(W.getFullYear(),0,1);case 5:return new Date(W.getFullYear()-1,11,31);case 6:return new Date(W.getFullYear()-1,11,30)}}function je(W){var _e=W.ma;for(W=new Date(new Date(W.na+1900,0,1).getTime());0<_e;){var Pe=W.getMonth(),ut=(Ye(W.getFullYear())?Gt:on)[Pe];if(!(_e>ut-W.getDate())){W.setDate(W.getDate()+_e);break}_e-=ut-W.getDate()+1,W.setDate(1),11>Pe?W.setMonth(Pe+1):(W.setMonth(0),W.setFullYear(W.getFullYear()+1))}return Pe=new Date(W.getFullYear()+1,0,4),_e=Le(new Date(W.getFullYear(),0,4)),Pe=Le(Pe),0>=me(_e,W)?0>=me(Pe,W)?W.getFullYear()+1:W.getFullYear():W.getFullYear()-1}D>>>=0,$>>>=0,U>>>=0;var Ve=E[40+(q>>>=0)>>2>>>0];for(var Be in q={ya:E[q>>2>>>0],xa:E[q+4>>2>>>0],oa:E[q+8>>2>>>0],ra:E[q+12>>2>>>0],pa:E[q+16>>2>>>0],na:E[q+20>>2>>>0],ha:E[q+24>>2>>>0],ma:E[q+28>>2>>>0],Aa:E[q+32>>2>>>0],wa:E[q+36>>2>>>0],za:Ve?qe(Ve):""},U=qe(U),Ve={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})U=U.replace(new RegExp(Be,"g"),Ve[Be]);var cn="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dn="January February March April May June July August September October November December".split(" ");for(Be in Ve={"%a":W=>cn[W.ha].substring(0,3),"%A":W=>cn[W.ha],"%b":W=>dn[W.pa].substring(0,3),"%B":W=>dn[W.pa],"%C":W=>le((W.na+1900)/100|0,2),"%d":W=>le(W.ra,2),"%e":W=>ee(W.ra,2," "),"%g":W=>je(W).toString().substring(2),"%G":W=>je(W),"%H":W=>le(W.oa,2),"%I":W=>((W=W.oa)==0?W=12:12<W&&(W-=12),le(W,2)),"%j":W=>{for(var _e=0,Pe=0;Pe<=W.pa-1;_e+=(Ye(W.na+1900)?Gt:on)[Pe++]);return le(W.ra+_e,3)},"%m":W=>le(W.pa+1,2),"%M":W=>le(W.xa,2),"%n":()=>`
`,"%p":W=>0<=W.oa&&12>W.oa?"AM":"PM","%S":W=>le(W.ya,2),"%t":()=>"	","%u":W=>W.ha||7,"%U":W=>le(Math.floor((W.ma+7-W.ha)/7),2),"%V":W=>{var _e=Math.floor((W.ma+7-(W.ha+6)%7)/7);if(2>=(W.ha+371-W.ma-2)%7&&_e++,_e)_e==53&&((Pe=(W.ha+371-W.ma)%7)==4||Pe==3&&Ye(W.na)||(_e=1));else{_e=52;var Pe=(W.ha+7-W.ma-1)%7;(Pe==4||Pe==5&&Ye(W.na%400-1))&&_e++}return le(_e,2)},"%w":W=>W.ha,"%W":W=>le(Math.floor((W.ma+7-(W.ha+6)%7)/7),2),"%y":W=>(W.na+1900).toString().substring(2),"%Y":W=>W.na+1900,"%z":W=>{var _e=0<=(W=W.wa);return W=Math.abs(W)/60,(_e?"+":"-")+("0000"+(W/60*100+W%60)).slice(-4)},"%Z":W=>W.za,"%%":()=>"%"},U=U.replace(/%%/g,"\0\0"),Ve)U.includes(Be)&&(U=U.replace(new RegExp(Be,"g"),Ve[Be](q)));return Be=function(W){var _e=Array(Ke(W)+1);return pt(W,_e,0,_e.length),_e}(U=U.replace(/\0\0/g,"%")),Be.length>$?0:(j.set(Be,D>>>0),Be.length-1)}var On={a:function(D,$,U){throw new Oe(D>>>=0).sa($>>>0,U>>>0),D},e:function(){return 0},I:function(){},y:function(){},A:function(){},K:function(){return 0},G:function(){},B:function(){},F:function(){},g:function(){},z:function(){},w:function(){},H:function(){},x:function(){},k:()=>!0,n:function(D,$,U){D=$+2097152>>>0<4194305-!!D?(D>>>0)+4294967296*$:NaN,U>>>=0,D=new Date(1e3*D),E[U>>2>>>0]=D.getUTCSeconds(),E[U+4>>2>>>0]=D.getUTCMinutes(),E[U+8>>2>>>0]=D.getUTCHours(),E[U+12>>2>>>0]=D.getUTCDate(),E[U+16>>2>>>0]=D.getUTCMonth(),E[U+20>>2>>>0]=D.getUTCFullYear()-1900,E[U+24>>2>>>0]=D.getUTCDay(),E[U+28>>2>>>0]=(D.getTime()-Date.UTC(D.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(D,$,U){D=$+2097152>>>0<4194305-!!D?(D>>>0)+4294967296*$:NaN,U>>>=0,D=new Date(1e3*D),E[U>>2>>>0]=D.getSeconds(),E[U+4>>2>>>0]=D.getMinutes(),E[U+8>>2>>>0]=D.getHours(),E[U+12>>2>>>0]=D.getDate(),E[U+16>>2>>>0]=D.getMonth(),E[U+20>>2>>>0]=D.getFullYear()-1900,E[U+24>>2>>>0]=D.getDay(),E[U+28>>2>>>0]=(Ye(D.getFullYear())?yt:ot)[D.getMonth()]+D.getDate()-1|0,E[U+36>>2>>>0]=-60*D.getTimezoneOffset(),$=new Date(D.getFullYear(),6,1).getTimezoneOffset();var q=new Date(D.getFullYear(),0,1).getTimezoneOffset();E[U+32>>2>>>0]=0|($!=q&&D.getTimezoneOffset()==Math.min(q,$))},p:function(D){D>>>=0;var $=new Date(E[D+20>>2>>>0]+1900,E[D+16>>2>>>0],E[D+12>>2>>>0],E[D+8>>2>>>0],E[D+4>>2>>>0],E[D>>2>>>0],0),U=E[D+32>>2>>>0],q=$.getTimezoneOffset(),ee=new Date($.getFullYear(),6,1).getTimezoneOffset(),le=new Date($.getFullYear(),0,1).getTimezoneOffset(),me=Math.min(le,ee);return 0>U?E[D+32>>2>>>0]=+(ee!=le&&me==q):0<U!=(me==q)&&(ee=Math.max(le,ee),$.setTime($.getTime()+6e4*((0<U?me:ee)-q))),E[D+24>>2>>>0]=$.getDay(),E[D+28>>2>>>0]=(Ye($.getFullYear())?yt:ot)[$.getMonth()]+$.getDate()-1|0,E[D>>2>>>0]=$.getSeconds(),E[D+4>>2>>>0]=$.getMinutes(),E[D+8>>2>>>0]=$.getHours(),E[D+12>>2>>>0]=$.getDate(),E[D+16>>2>>>0]=$.getMonth(),E[D+20>>2>>>0]=$.getYear(),D=$.getTime()/1e3,un((Q=D,1<=+Math.abs(Q)?0<Q?+Math.floor(Q/4294967296)>>>0:~~+Math.ceil((Q-+(~~Q>>>0))/4294967296)>>>0:0)),D>>>0},l:function(){return-52},m:function(){},u:function(D,$,U){function q(je){return(je=je.toTimeString().match(/\(([A-Za-z ]+)\)$/))?je[1]:"GMT"}U>>>=0;var ee=new Date().getFullYear(),le=new Date(ee,0,1),me=new Date(ee,6,1);ee=le.getTimezoneOffset();var Le=me.getTimezoneOffset();V[D>>>0>>2>>>0]=60*Math.max(ee,Le),E[$>>>0>>2>>>0]=+(ee!=Le),D=q(le),$=q(me),D=Je(D),$=Je($),Le<ee?(V[U>>2>>>0]=D,V[U+4>>2>>>0]=$):(V[U>>2>>>0]=$,V[U+4>>2>>>0]=D)},d:()=>{ge("")},h:function(){return Date.now()},v:function(){return 4294901760},b:()=>performance.now(),J:function(D,$,U){return $>>>=0,B.copyWithin(D>>>0>>>0,$>>>0,$+(U>>>0)>>>0)},t:function(D){D>>>=0;var $=B.length;if(4294901760<D)return!1;for(var U=1;4>=U;U*=2){var q=$*(1+.2/U);q=Math.min(q,D+100663296);var ee=Math;q=Math.max(D,q);e:{ee=ee.min.call(ee,4294901760,q+(65536-q%65536)%65536)-C.buffer.byteLength+65535>>>16;try{C.grow(ee),k();var le=1;break e}catch{}le=void 0}if(le)return!0}return!1},D:function(D,$){D>>>=0,$>>>=0;var U=0;return rn().forEach(function(q,ee){var le=$+U;for(ee=V[D+4*ee>>2>>>0]=le,le=0;le<q.length;++le)j[ee++>>0>>>0]=q.charCodeAt(le);j[ee>>0>>>0]=0,U+=q.length+1}),0},E:function(D,$){D>>>=0,$>>>=0;var U=rn();V[D>>2>>>0]=U.length;var q=0;return U.forEach(function(ee){q+=ee.length+1}),V[$>>2>>>0]=q,0},s:D=>{P||(h.onExit&&h.onExit(D),O=!0),r(D,new Se(D))},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(D,$,U,q){$>>>=0,U>>>=0,q>>>=0;for(var ee=0,le=0;le<U;le++){var me=V[$>>2>>>0],Le=V[$+4>>2>>>0];$+=8;for(var je=0;je<Le;je++){var Ve=B[me+je>>>0],Be=An[D];Ve===0||Ve===10?((D===1?x:S)(He(Be,0)),Be.length=0):Be.push(Ve)}ee+=Le}return V[q>>2>>>0]=ee,0},r:function(D,$){return D>>>=0,xt(B.subarray(D>>>0,D+($>>>0)>>>0)),0},C:sn,c:function(D,$,U,q){return sn(D>>>0,$>>>0,U>>>0,q>>>0)}};(function(){function D(U){if(U=U.exports,M=U=function(ee){var le=Le=>()=>Le()>>>0,me=Le=>je=>Le(je)>>>0;return(ee=Object.assign({},ee)).__errno_location=le(ee.__errno_location),ee.malloc=me(ee.malloc),ee.stackSave=le(ee.stackSave),ee.stackAlloc=me(ee.stackAlloc),ee}(U),C=M.L,k(),L.unshift(M.M),ne--,h.monitorRunDependencies&&h.monitorRunDependencies(ne),ne==0&&(re!==null&&(clearInterval(re),re=null),se)){var q=se;se=null,q()}return U}var $={a:On};if(ne++,h.monitorRunDependencies&&h.monitorRunDependencies(ne),h.instantiateWasm)try{return h.instantiateWasm($,D)}catch(U){S("Module.instantiateWasm callback failed with error: "+U),d(U)}(function(U,q){var ee=Z;return w||typeof WebAssembly.instantiateStreaming!="function"||X(ee)||ee.startsWith("file://")||m||typeof fetch!="function"?Ae(ee,U,q):fetch(ee,{credentials:"same-origin"}).then(le=>WebAssembly.instantiateStreaming(le,U).then(q,function(me){return S("wasm streaming compile failed: "+me),S("falling back to ArrayBuffer instantiation"),Ae(ee,U,q)}))})($,function(U){D(U.instance)}).catch(d)})(),h._OrtInit=(D,$)=>(h._OrtInit=M.N)(D,$),h._OrtGetLastError=(D,$)=>(h._OrtGetLastError=M.O)(D,$),h._OrtCreateSessionOptions=(D,$,U,q,ee,le,me,Le,je,Ve)=>(h._OrtCreateSessionOptions=M.P)(D,$,U,q,ee,le,me,Le,je,Ve),h._OrtAppendExecutionProvider=(D,$)=>(h._OrtAppendExecutionProvider=M.Q)(D,$),h._OrtAddSessionConfigEntry=(D,$,U)=>(h._OrtAddSessionConfigEntry=M.R)(D,$,U),h._OrtReleaseSessionOptions=D=>(h._OrtReleaseSessionOptions=M.S)(D),h._OrtCreateSession=(D,$,U)=>(h._OrtCreateSession=M.T)(D,$,U),h._OrtReleaseSession=D=>(h._OrtReleaseSession=M.U)(D),h._OrtGetInputOutputCount=(D,$,U)=>(h._OrtGetInputOutputCount=M.V)(D,$,U),h._OrtGetInputName=(D,$)=>(h._OrtGetInputName=M.W)(D,$),h._OrtGetOutputName=(D,$)=>(h._OrtGetOutputName=M.X)(D,$),h._OrtFree=D=>(h._OrtFree=M.Y)(D),h._OrtCreateTensor=(D,$,U,q,ee)=>(h._OrtCreateTensor=M.Z)(D,$,U,q,ee),h._OrtGetTensorData=(D,$,U,q,ee)=>(h._OrtGetTensorData=M._)(D,$,U,q,ee),h._OrtReleaseTensor=D=>(h._OrtReleaseTensor=M.$)(D),h._OrtCreateRunOptions=(D,$,U,q)=>(h._OrtCreateRunOptions=M.aa)(D,$,U,q),h._OrtAddRunConfigEntry=(D,$,U)=>(h._OrtAddRunConfigEntry=M.ba)(D,$,U),h._OrtReleaseRunOptions=D=>(h._OrtReleaseRunOptions=M.ca)(D),h._OrtRun=(D,$,U,q,ee,le,me,Le)=>(h._OrtRun=M.da)(D,$,U,q,ee,le,me,Le),h._OrtEndProfiling=D=>(h._OrtEndProfiling=M.ea)(D);var an=h._malloc=D=>(an=h._malloc=M.fa)(D);h._free=D=>(h._free=M.ga)(D);var bt,un=D=>(un=M.ia)(D),Wt=()=>(Wt=M.ja)(),pe=D=>(pe=M.ka)(D),St=D=>(St=M.la)(D);function ln(){function D(){if(!bt&&(bt=!0,h.calledRun=!0,!O)){if(De(L),p(h),h.onRuntimeInitialized&&h.onRuntimeInitialized(),h.postRun)for(typeof h.postRun=="function"&&(h.postRun=[h.postRun]);h.postRun.length;){var $=h.postRun.shift();z.unshift($)}De(z)}}if(!(0<ne)){if(h.preRun)for(typeof h.preRun=="function"&&(h.preRun=[h.preRun]);h.preRun.length;)J();De(N),0<ne||(h.setStatus?(h.setStatus("Running..."),setTimeout(function(){setTimeout(function(){h.setStatus("")},1),D()},1)):D())}}if(h.stackAlloc=St,h.stackSave=Wt,h.stackRestore=pe,h.UTF8ToString=qe,h.stringToUTF8=(D,$,U)=>pt(D,B,$,U),h.lengthBytesUTF8=Ke,se=function D(){bt||ln(),bt||(se=D)},h.preInit)for(typeof h.preInit=="function"&&(h.preInit=[h.preInit]);0<h.preInit.length;)h.preInit.pop()();return ln(),f.ready});b.exports=a},4537:b=>{"use strict";b.exports=function(i,l){for(var c=new Array(arguments.length-1),a=0,f=2,p=!0;f<arguments.length;)c[a++]=arguments[f++];return new Promise(function(d,h){c[a]=function(u){if(p)if(p=!1,u)h(u);else{for(var o=new Array(arguments.length-1),n=0;n<o.length;)o[n++]=arguments[n];d.apply(null,o)}};try{i.apply(l||null,c)}catch(u){p&&(p=!1,h(u))}})}},7419:(b,i)=>{"use strict";var l=i;l.length=function(d){var h=d.length;if(!h)return 0;for(var u=0;--h%4>1&&d.charAt(h)==="=";)++u;return Math.ceil(3*d.length)/4-u};for(var c=new Array(64),a=new Array(123),f=0;f<64;)a[c[f]=f<26?f+65:f<52?f+71:f<62?f-4:f-59|43]=f++;l.encode=function(d,h,u){for(var o,n=null,e=[],t=0,r=0;h<u;){var s=d[h++];switch(r){case 0:e[t++]=c[s>>2],o=(3&s)<<4,r=1;break;case 1:e[t++]=c[o|s>>4],o=(15&s)<<2,r=2;break;case 2:e[t++]=c[o|s>>6],e[t++]=c[63&s],r=0}t>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,e)),t=0)}return r&&(e[t++]=c[o],e[t++]=61,r===1&&(e[t++]=61)),n?(t&&n.push(String.fromCharCode.apply(String,e.slice(0,t))),n.join("")):String.fromCharCode.apply(String,e.slice(0,t))};var p="invalid encoding";l.decode=function(d,h,u){for(var o,n=u,e=0,t=0;t<d.length;){var r=d.charCodeAt(t++);if(r===61&&e>1)break;if((r=a[r])===void 0)throw Error(p);switch(e){case 0:o=r,e=1;break;case 1:h[u++]=o<<2|(48&r)>>4,o=r,e=2;break;case 2:h[u++]=(15&o)<<4|(60&r)>>2,o=r,e=3;break;case 3:h[u++]=(3&o)<<6|r,e=0}}if(e===1)throw Error(p);return u-n},l.test=function(d){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(d)}},9211:b=>{"use strict";function i(){this._listeners={}}b.exports=i,i.prototype.on=function(l,c,a){return(this._listeners[l]||(this._listeners[l]=[])).push({fn:c,ctx:a||this}),this},i.prototype.off=function(l,c){if(l===void 0)this._listeners={};else if(c===void 0)this._listeners[l]=[];else for(var a=this._listeners[l],f=0;f<a.length;)a[f].fn===c?a.splice(f,1):++f;return this},i.prototype.emit=function(l){var c=this._listeners[l];if(c){for(var a=[],f=1;f<arguments.length;)a.push(arguments[f++]);for(f=0;f<c.length;)c[f].fn.apply(c[f++].ctx,a)}return this}},945:b=>{"use strict";function i(p){return typeof Float32Array<"u"?function(){var d=new Float32Array([-0]),h=new Uint8Array(d.buffer),u=h[3]===128;function o(r,s,g){d[0]=r,s[g]=h[0],s[g+1]=h[1],s[g+2]=h[2],s[g+3]=h[3]}function n(r,s,g){d[0]=r,s[g]=h[3],s[g+1]=h[2],s[g+2]=h[1],s[g+3]=h[0]}function e(r,s){return h[0]=r[s],h[1]=r[s+1],h[2]=r[s+2],h[3]=r[s+3],d[0]}function t(r,s){return h[3]=r[s],h[2]=r[s+1],h[1]=r[s+2],h[0]=r[s+3],d[0]}p.writeFloatLE=u?o:n,p.writeFloatBE=u?n:o,p.readFloatLE=u?e:t,p.readFloatBE=u?t:e}():function(){function d(u,o,n,e){var t=o<0?1:0;if(t&&(o=-o),o===0)u(1/o>0?0:2147483648,n,e);else if(isNaN(o))u(2143289344,n,e);else if(o>34028234663852886e22)u((t<<31|2139095040)>>>0,n,e);else if(o<11754943508222875e-54)u((t<<31|Math.round(o/1401298464324817e-60))>>>0,n,e);else{var r=Math.floor(Math.log(o)/Math.LN2);u((t<<31|r+127<<23|8388607&Math.round(o*Math.pow(2,-r)*8388608))>>>0,n,e)}}function h(u,o,n){var e=u(o,n),t=2*(e>>31)+1,r=e>>>23&255,s=8388607&e;return r===255?s?NaN:t*(1/0):r===0?1401298464324817e-60*t*s:t*Math.pow(2,r-150)*(s+8388608)}p.writeFloatLE=d.bind(null,l),p.writeFloatBE=d.bind(null,c),p.readFloatLE=h.bind(null,a),p.readFloatBE=h.bind(null,f)}(),typeof Float64Array<"u"?function(){var d=new Float64Array([-0]),h=new Uint8Array(d.buffer),u=h[7]===128;function o(r,s,g){d[0]=r,s[g]=h[0],s[g+1]=h[1],s[g+2]=h[2],s[g+3]=h[3],s[g+4]=h[4],s[g+5]=h[5],s[g+6]=h[6],s[g+7]=h[7]}function n(r,s,g){d[0]=r,s[g]=h[7],s[g+1]=h[6],s[g+2]=h[5],s[g+3]=h[4],s[g+4]=h[3],s[g+5]=h[2],s[g+6]=h[1],s[g+7]=h[0]}function e(r,s){return h[0]=r[s],h[1]=r[s+1],h[2]=r[s+2],h[3]=r[s+3],h[4]=r[s+4],h[5]=r[s+5],h[6]=r[s+6],h[7]=r[s+7],d[0]}function t(r,s){return h[7]=r[s],h[6]=r[s+1],h[5]=r[s+2],h[4]=r[s+3],h[3]=r[s+4],h[2]=r[s+5],h[1]=r[s+6],h[0]=r[s+7],d[0]}p.writeDoubleLE=u?o:n,p.writeDoubleBE=u?n:o,p.readDoubleLE=u?e:t,p.readDoubleBE=u?t:e}():function(){function d(u,o,n,e,t,r){var s=e<0?1:0;if(s&&(e=-e),e===0)u(0,t,r+o),u(1/e>0?0:2147483648,t,r+n);else if(isNaN(e))u(0,t,r+o),u(2146959360,t,r+n);else if(e>17976931348623157e292)u(0,t,r+o),u((s<<31|2146435072)>>>0,t,r+n);else{var g;if(e<22250738585072014e-324)u((g=e/5e-324)>>>0,t,r+o),u((s<<31|g/4294967296)>>>0,t,r+n);else{var m=Math.floor(Math.log(e)/Math.LN2);m===1024&&(m=1023),u(4503599627370496*(g=e*Math.pow(2,-m))>>>0,t,r+o),u((s<<31|m+1023<<20|1048576*g&1048575)>>>0,t,r+n)}}}function h(u,o,n,e,t){var r=u(e,t+o),s=u(e,t+n),g=2*(s>>31)+1,m=s>>>20&2047,y=4294967296*(1048575&s)+r;return m===2047?y?NaN:g*(1/0):m===0?5e-324*g*y:g*Math.pow(2,m-1075)*(y+4503599627370496)}p.writeDoubleLE=d.bind(null,l,0,4),p.writeDoubleBE=d.bind(null,c,4,0),p.readDoubleLE=h.bind(null,a,0,4),p.readDoubleBE=h.bind(null,f,4,0)}(),p}function l(p,d,h){d[h]=255&p,d[h+1]=p>>>8&255,d[h+2]=p>>>16&255,d[h+3]=p>>>24}function c(p,d,h){d[h]=p>>>24,d[h+1]=p>>>16&255,d[h+2]=p>>>8&255,d[h+3]=255&p}function a(p,d){return(p[d]|p[d+1]<<8|p[d+2]<<16|p[d+3]<<24)>>>0}function f(p,d){return(p[d]<<24|p[d+1]<<16|p[d+2]<<8|p[d+3])>>>0}b.exports=i(i)},7199:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(b){}return null}module.exports=inquire},6662:b=>{"use strict";b.exports=function(i,l,c){var a=c||8192,f=a>>>1,p=null,d=a;return function(h){if(h<1||h>f)return i(h);d+h>a&&(p=i(a),d=0);var u=l.call(p,d,d+=h);return 7&d&&(d=1+(7|d)),u}}},4997:(b,i)=>{"use strict";var l=i;l.length=function(c){for(var a=0,f=0,p=0;p<c.length;++p)(f=c.charCodeAt(p))<128?a+=1:f<2048?a+=2:(64512&f)==55296&&(64512&c.charCodeAt(p+1))==56320?(++p,a+=4):a+=3;return a},l.read=function(c,a,f){if(f-a<1)return"";for(var p,d=null,h=[],u=0;a<f;)(p=c[a++])<128?h[u++]=p:p>191&&p<224?h[u++]=(31&p)<<6|63&c[a++]:p>239&&p<365?(p=((7&p)<<18|(63&c[a++])<<12|(63&c[a++])<<6|63&c[a++])-65536,h[u++]=55296+(p>>10),h[u++]=56320+(1023&p)):h[u++]=(15&p)<<12|(63&c[a++])<<6|63&c[a++],u>8191&&((d||(d=[])).push(String.fromCharCode.apply(String,h)),u=0);return d?(u&&d.push(String.fromCharCode.apply(String,h.slice(0,u))),d.join("")):String.fromCharCode.apply(String,h.slice(0,u))},l.write=function(c,a,f){for(var p,d,h=f,u=0;u<c.length;++u)(p=c.charCodeAt(u))<128?a[f++]=p:p<2048?(a[f++]=p>>6|192,a[f++]=63&p|128):(64512&p)==55296&&(64512&(d=c.charCodeAt(u+1)))==56320?(p=65536+((1023&p)<<10)+(1023&d),++u,a[f++]=p>>18|240,a[f++]=p>>12&63|128,a[f++]=p>>6&63|128,a[f++]=63&p|128):(a[f++]=p>>12|224,a[f++]=p>>6&63|128,a[f++]=63&p|128);return f-h}},3442:(b,i)=>{"use strict";i.__esModule=!0;var l=function(){function c(a){if(!a)throw new TypeError("Invalid argument; `value` has no value.");this.value=c.EMPTY,a&&c.isGuid(a)&&(this.value=a)}return c.isGuid=function(a){var f=a.toString();return a&&(a instanceof c||c.validator.test(f))},c.create=function(){return new c([c.gen(2),c.gen(1),c.gen(1),c.gen(1),c.gen(3)].join("-"))},c.createEmpty=function(){return new c("emptyguid")},c.parse=function(a){return new c(a)},c.raw=function(){return[c.gen(2),c.gen(1),c.gen(1),c.gen(1),c.gen(3)].join("-")},c.gen=function(a){for(var f="",p=0;p<a;p++)f+=(65536*(1+Math.random())|0).toString(16).substring(1);return f},c.prototype.equals=function(a){return c.isGuid(a)&&this.value===a.toString()},c.prototype.isEmpty=function(){return this.value===c.EMPTY},c.prototype.toString=function(){return this.value},c.prototype.toJSON=function(){return{value:this.value}},c.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),c.EMPTY="00000000-0000-0000-0000-000000000000",c}();i.Guid=l},2100:(b,i,l)=>{"use strict";b.exports=l(9482)},9482:(b,i,l)=>{"use strict";var c=i;function a(){c.util._configure(),c.Writer._configure(c.BufferWriter),c.Reader._configure(c.BufferReader)}c.build="minimal",c.Writer=l(1173),c.BufferWriter=l(3155),c.Reader=l(1408),c.BufferReader=l(593),c.util=l(9693),c.rpc=l(5994),c.roots=l(5054),c.configure=a,a()},1408:(b,i,l)=>{"use strict";b.exports=h;var c,a=l(9693),f=a.LongBits,p=a.utf8;function d(s,g){return RangeError("index out of range: "+s.pos+" + "+(g||1)+" > "+s.len)}function h(s){this.buf=s,this.pos=0,this.len=s.length}var u,o=typeof Uint8Array<"u"?function(s){if(s instanceof Uint8Array||Array.isArray(s))return new h(s);throw Error("illegal buffer")}:function(s){if(Array.isArray(s))return new h(s);throw Error("illegal buffer")},n=function(){return a.Buffer?function(s){return(h.create=function(g){return a.Buffer.isBuffer(g)?new c(g):o(g)})(s)}:o};function e(){var s=new f(0,0),g=0;if(!(this.len-this.pos>4)){for(;g<3;++g){if(this.pos>=this.len)throw d(this);if(s.lo=(s.lo|(127&this.buf[this.pos])<<7*g)>>>0,this.buf[this.pos++]<128)return s}return s.lo=(s.lo|(127&this.buf[this.pos++])<<7*g)>>>0,s}for(;g<4;++g)if(s.lo=(s.lo|(127&this.buf[this.pos])<<7*g)>>>0,this.buf[this.pos++]<128)return s;if(s.lo=(s.lo|(127&this.buf[this.pos])<<28)>>>0,s.hi=(s.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return s;if(g=0,this.len-this.pos>4){for(;g<5;++g)if(s.hi=(s.hi|(127&this.buf[this.pos])<<7*g+3)>>>0,this.buf[this.pos++]<128)return s}else for(;g<5;++g){if(this.pos>=this.len)throw d(this);if(s.hi=(s.hi|(127&this.buf[this.pos])<<7*g+3)>>>0,this.buf[this.pos++]<128)return s}throw Error("invalid varint encoding")}function t(s,g){return(s[g-4]|s[g-3]<<8|s[g-2]<<16|s[g-1]<<24)>>>0}function r(){if(this.pos+8>this.len)throw d(this,8);return new f(t(this.buf,this.pos+=4),t(this.buf,this.pos+=4))}h.create=n(),h.prototype._slice=a.Array.prototype.subarray||a.Array.prototype.slice,h.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return u;if((this.pos+=5)>this.len)throw this.pos=this.len,d(this,10);return u}),h.prototype.int32=function(){return 0|this.uint32()},h.prototype.sint32=function(){var s=this.uint32();return s>>>1^-(1&s)|0},h.prototype.bool=function(){return this.uint32()!==0},h.prototype.fixed32=function(){if(this.pos+4>this.len)throw d(this,4);return t(this.buf,this.pos+=4)},h.prototype.sfixed32=function(){if(this.pos+4>this.len)throw d(this,4);return 0|t(this.buf,this.pos+=4)},h.prototype.float=function(){if(this.pos+4>this.len)throw d(this,4);var s=a.float.readFloatLE(this.buf,this.pos);return this.pos+=4,s},h.prototype.double=function(){if(this.pos+8>this.len)throw d(this,4);var s=a.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,s},h.prototype.bytes=function(){var s=this.uint32(),g=this.pos,m=this.pos+s;if(m>this.len)throw d(this,s);return this.pos+=s,Array.isArray(this.buf)?this.buf.slice(g,m):g===m?new this.buf.constructor(0):this._slice.call(this.buf,g,m)},h.prototype.string=function(){var s=this.bytes();return p.read(s,0,s.length)},h.prototype.skip=function(s){if(typeof s=="number"){if(this.pos+s>this.len)throw d(this,s);this.pos+=s}else do if(this.pos>=this.len)throw d(this);while(128&this.buf[this.pos++]);return this},h.prototype.skipType=function(s){switch(s){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(s=7&this.uint32())!=4;)this.skipType(s);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+s+" at offset "+this.pos)}return this},h._configure=function(s){c=s,h.create=n(),c._configure();var g=a.Long?"toLong":"toNumber";a.merge(h.prototype,{int64:function(){return e.call(this)[g](!1)},uint64:function(){return e.call(this)[g](!0)},sint64:function(){return e.call(this).zzDecode()[g](!1)},fixed64:function(){return r.call(this)[g](!0)},sfixed64:function(){return r.call(this)[g](!1)}})}},593:(b,i,l)=>{"use strict";b.exports=f;var c=l(1408);(f.prototype=Object.create(c.prototype)).constructor=f;var a=l(9693);function f(p){c.call(this,p)}f._configure=function(){a.Buffer&&(f.prototype._slice=a.Buffer.prototype.slice)},f.prototype.string=function(){var p=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+p,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+p,this.len))},f._configure()},5054:b=>{"use strict";b.exports={}},5994:(b,i,l)=>{"use strict";i.Service=l(7948)},7948:(b,i,l)=>{"use strict";b.exports=a;var c=l(9693);function a(f,p,d){if(typeof f!="function")throw TypeError("rpcImpl must be a function");c.EventEmitter.call(this),this.rpcImpl=f,this.requestDelimited=!!p,this.responseDelimited=!!d}(a.prototype=Object.create(c.EventEmitter.prototype)).constructor=a,a.prototype.rpcCall=function f(p,d,h,u,o){if(!u)throw TypeError("request must be specified");var n=this;if(!o)return c.asPromise(f,n,p,d,h,u);if(n.rpcImpl)try{return n.rpcImpl(p,d[n.requestDelimited?"encodeDelimited":"encode"](u).finish(),function(e,t){if(e)return n.emit("error",e,p),o(e);if(t!==null){if(!(t instanceof h))try{t=h[n.responseDelimited?"decodeDelimited":"decode"](t)}catch(r){return n.emit("error",r,p),o(r)}return n.emit("data",t,p),o(null,t)}n.end(!0)})}catch(e){return n.emit("error",e,p),void setTimeout(function(){o(e)},0)}else setTimeout(function(){o(Error("already ended"))},0)},a.prototype.end=function(f){return this.rpcImpl&&(f||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(b,i,l)=>{"use strict";b.exports=a;var c=l(9693);function a(h,u){this.lo=h>>>0,this.hi=u>>>0}var f=a.zero=new a(0,0);f.toNumber=function(){return 0},f.zzEncode=f.zzDecode=function(){return this},f.length=function(){return 1};var p=a.zeroHash="\0\0\0\0\0\0\0\0";a.fromNumber=function(h){if(h===0)return f;var u=h<0;u&&(h=-h);var o=h>>>0,n=(h-o)/4294967296>>>0;return u&&(n=~n>>>0,o=~o>>>0,++o>4294967295&&(o=0,++n>4294967295&&(n=0))),new a(o,n)},a.from=function(h){if(typeof h=="number")return a.fromNumber(h);if(c.isString(h)){if(!c.Long)return a.fromNumber(parseInt(h,10));h=c.Long.fromString(h)}return h.low||h.high?new a(h.low>>>0,h.high>>>0):f},a.prototype.toNumber=function(h){if(!h&&this.hi>>>31){var u=1+~this.lo>>>0,o=~this.hi>>>0;return u||(o=o+1>>>0),-(u+4294967296*o)}return this.lo+4294967296*this.hi},a.prototype.toLong=function(h){return c.Long?new c.Long(0|this.lo,0|this.hi,!!h):{low:0|this.lo,high:0|this.hi,unsigned:!!h}};var d=String.prototype.charCodeAt;a.fromHash=function(h){return h===p?f:new a((d.call(h,0)|d.call(h,1)<<8|d.call(h,2)<<16|d.call(h,3)<<24)>>>0,(d.call(h,4)|d.call(h,5)<<8|d.call(h,6)<<16|d.call(h,7)<<24)>>>0)},a.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},a.prototype.zzEncode=function(){var h=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^h)>>>0,this.lo=(this.lo<<1^h)>>>0,this},a.prototype.zzDecode=function(){var h=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^h)>>>0,this.hi=(this.hi>>>1^h)>>>0,this},a.prototype.length=function(){var h=this.lo,u=(this.lo>>>28|this.hi<<4)>>>0,o=this.hi>>>24;return o===0?u===0?h<16384?h<128?1:2:h<2097152?3:4:u<16384?u<128?5:6:u<2097152?7:8:o<128?9:10}},9693:function(b,i,l){"use strict";var c=i;function a(p,d,h){for(var u=Object.keys(d),o=0;o<u.length;++o)p[u[o]]!==void 0&&h||(p[u[o]]=d[u[o]]);return p}function f(p){function d(h,u){if(!(this instanceof d))return new d(h,u);Object.defineProperty(this,"message",{get:function(){return h}}),Error.captureStackTrace?Error.captureStackTrace(this,d):Object.defineProperty(this,"stack",{value:new Error().stack||""}),u&&a(this,u)}return d.prototype=Object.create(Error.prototype,{constructor:{value:d,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return p},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),d}c.asPromise=l(4537),c.base64=l(7419),c.EventEmitter=l(9211),c.float=l(945),c.inquire=l(7199),c.utf8=l(4997),c.pool=l(6662),c.LongBits=l(1945),c.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),c.global=c.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||this,c.emptyArray=Object.freeze?Object.freeze([]):[],c.emptyObject=Object.freeze?Object.freeze({}):{},c.isInteger=Number.isInteger||function(p){return typeof p=="number"&&isFinite(p)&&Math.floor(p)===p},c.isString=function(p){return typeof p=="string"||p instanceof String},c.isObject=function(p){return p&&typeof p=="object"},c.isset=c.isSet=function(p,d){var h=p[d];return!(h==null||!p.hasOwnProperty(d))&&(typeof h!="object"||(Array.isArray(h)?h.length:Object.keys(h).length)>0)},c.Buffer=function(){try{var p=c.inquire("buffer").Buffer;return p.prototype.utf8Write?p:null}catch{return null}}(),c._Buffer_from=null,c._Buffer_allocUnsafe=null,c.newBuffer=function(p){return typeof p=="number"?c.Buffer?c._Buffer_allocUnsafe(p):new c.Array(p):c.Buffer?c._Buffer_from(p):typeof Uint8Array>"u"?p:new Uint8Array(p)},c.Array=typeof Uint8Array<"u"?Uint8Array:Array,c.Long=c.global.dcodeIO&&c.global.dcodeIO.Long||c.global.Long||c.inquire("long"),c.key2Re=/^true|false|0|1$/,c.key32Re=/^-?(?:0|[1-9][0-9]*)$/,c.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,c.longToHash=function(p){return p?c.LongBits.from(p).toHash():c.LongBits.zeroHash},c.longFromHash=function(p,d){var h=c.LongBits.fromHash(p);return c.Long?c.Long.fromBits(h.lo,h.hi,d):h.toNumber(!!d)},c.merge=a,c.lcFirst=function(p){return p.charAt(0).toLowerCase()+p.substring(1)},c.newError=f,c.ProtocolError=f("ProtocolError"),c.oneOfGetter=function(p){for(var d={},h=0;h<p.length;++h)d[p[h]]=1;return function(){for(var u=Object.keys(this),o=u.length-1;o>-1;--o)if(d[u[o]]===1&&this[u[o]]!==void 0&&this[u[o]]!==null)return u[o]}},c.oneOfSetter=function(p){return function(d){for(var h=0;h<p.length;++h)p[h]!==d&&delete this[p[h]]}},c.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},c._configure=function(){var p=c.Buffer;p?(c._Buffer_from=p.from!==Uint8Array.from&&p.from||function(d,h){return new p(d,h)},c._Buffer_allocUnsafe=p.allocUnsafe||function(d){return new p(d)}):c._Buffer_from=c._Buffer_allocUnsafe=null}},1173:(b,i,l)=>{"use strict";b.exports=n;var c,a=l(9693),f=a.LongBits,p=a.base64,d=a.utf8;function h(y,_,T){this.fn=y,this.len=_,this.next=void 0,this.val=T}function u(){}function o(y){this.head=y.head,this.tail=y.tail,this.len=y.len,this.next=y.states}function n(){this.len=0,this.head=new h(u,0,0),this.tail=this.head,this.states=null}var e=function(){return a.Buffer?function(){return(n.create=function(){return new c})()}:function(){return new n}};function t(y,_,T){_[T]=255&y}function r(y,_){this.len=y,this.next=void 0,this.val=_}function s(y,_,T){for(;y.hi;)_[T++]=127&y.lo|128,y.lo=(y.lo>>>7|y.hi<<25)>>>0,y.hi>>>=7;for(;y.lo>127;)_[T++]=127&y.lo|128,y.lo=y.lo>>>7;_[T++]=y.lo}function g(y,_,T){_[T]=255&y,_[T+1]=y>>>8&255,_[T+2]=y>>>16&255,_[T+3]=y>>>24}n.create=e(),n.alloc=function(y){return new a.Array(y)},a.Array!==Array&&(n.alloc=a.pool(n.alloc,a.Array.prototype.subarray)),n.prototype._push=function(y,_,T){return this.tail=this.tail.next=new h(y,_,T),this.len+=_,this},r.prototype=Object.create(h.prototype),r.prototype.fn=function(y,_,T){for(;y>127;)_[T++]=127&y|128,y>>>=7;_[T]=y},n.prototype.uint32=function(y){return this.len+=(this.tail=this.tail.next=new r((y>>>=0)<128?1:y<16384?2:y<2097152?3:y<268435456?4:5,y)).len,this},n.prototype.int32=function(y){return y<0?this._push(s,10,f.fromNumber(y)):this.uint32(y)},n.prototype.sint32=function(y){return this.uint32((y<<1^y>>31)>>>0)},n.prototype.uint64=function(y){var _=f.from(y);return this._push(s,_.length(),_)},n.prototype.int64=n.prototype.uint64,n.prototype.sint64=function(y){var _=f.from(y).zzEncode();return this._push(s,_.length(),_)},n.prototype.bool=function(y){return this._push(t,1,y?1:0)},n.prototype.fixed32=function(y){return this._push(g,4,y>>>0)},n.prototype.sfixed32=n.prototype.fixed32,n.prototype.fixed64=function(y){var _=f.from(y);return this._push(g,4,_.lo)._push(g,4,_.hi)},n.prototype.sfixed64=n.prototype.fixed64,n.prototype.float=function(y){return this._push(a.float.writeFloatLE,4,y)},n.prototype.double=function(y){return this._push(a.float.writeDoubleLE,8,y)};var m=a.Array.prototype.set?function(y,_,T){_.set(y,T)}:function(y,_,T){for(var w=0;w<y.length;++w)_[T+w]=y[w]};n.prototype.bytes=function(y){var _=y.length>>>0;if(!_)return this._push(t,1,0);if(a.isString(y)){var T=n.alloc(_=p.length(y));p.decode(y,T,0),y=T}return this.uint32(_)._push(m,_,y)},n.prototype.string=function(y){var _=d.length(y);return _?this.uint32(_)._push(d.write,_,y):this._push(t,1,0)},n.prototype.fork=function(){return this.states=new o(this),this.head=this.tail=new h(u,0,0),this.len=0,this},n.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new h(u,0,0),this.len=0),this},n.prototype.ldelim=function(){var y=this.head,_=this.tail,T=this.len;return this.reset().uint32(T),T&&(this.tail.next=y.next,this.tail=_,this.len+=T),this},n.prototype.finish=function(){for(var y=this.head.next,_=this.constructor.alloc(this.len),T=0;y;)y.fn(y.val,_,T),T+=y.len,y=y.next;return _},n._configure=function(y){c=y,n.create=e(),c._configure()}},3155:(b,i,l)=>{"use strict";b.exports=f;var c=l(1173);(f.prototype=Object.create(c.prototype)).constructor=f;var a=l(9693);function f(){c.call(this)}function p(d,h,u){d.length<40?a.utf8.write(d,h,u):h.utf8Write?h.utf8Write(d,u):h.write(d,u)}f._configure=function(){f.alloc=a._Buffer_allocUnsafe,f.writeBytesBuffer=a.Buffer&&a.Buffer.prototype instanceof Uint8Array&&a.Buffer.prototype.set.name==="set"?function(d,h,u){h.set(d,u)}:function(d,h,u){if(d.copy)d.copy(h,u,0,d.length);else for(var o=0;o<d.length;)h[u++]=d[o++]}},f.prototype.bytes=function(d){a.isString(d)&&(d=a._Buffer_from(d,"base64"));var h=d.length>>>0;return this.uint32(h),h&&this._push(f.writeBytesBuffer,h,d),this},f.prototype.string=function(d){var h=a.Buffer.byteLength(d);return this.uint32(h),h&&this._push(p,h,d),this},f._configure()},4154:b=>{"use strict";b.exports=`"use strict";var e={},a="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(a){var r=require("worker_threads"),t=r.parentPort;t.on("message",(e=>onmessage({data:e})));var s=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:e=>(0,eval)(s.readFileSync(e,"utf8")+"//# sourceURL="+e),postMessage:e=>t.postMessage(e),performance:global.performance||{now:Date.now}})}var o=!1,d=function(){var e=Array.prototype.slice.call(arguments).join(" ");a?s.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var a=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:a,threadId:e._pthread_self()})},e.instantiateWasm=(a,r)=>{var t=e.wasmModule;return e.wasmModule=null,r(new WebAssembly.Instance(t,a))},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=function a(r){try{if("load"===r.data.cmd){let s=[];self.onmessage=e=>s.push(e),self.startWorker=r=>{e=r,postMessage({cmd:"loaded"});for(let e of s)a(e);self.onmessage=a},e.wasmModule=r.data.wasmModule;for(const a of r.data.handlers)e[a]=(...e)=>{postMessage({cmd:"callHandler",handler:a,args:e})};if(e.wasmMemory=r.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof r.data.urlOrBlob)importScripts(r.data.urlOrBlob);else{var t=URL.createObjectURL(r.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(e)}else if("run"===r.data.cmd){e.__emscripten_thread_init(r.data.pthread_ptr,0,0,1),e.__emscripten_thread_mailbox_await(r.data.pthread_ptr),e.establishStackSpace(),e.PThread.receiveObjectTransfer(r.data),e.PThread.threadInitTLS(),o||(o=!0);try{e.invokeEntryPoint(r.data.start_routine,r.data.arg)}catch(e){if("unwind"!=e)throw e}}else"cancel"===r.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===r.data.target||("checkMailbox"===r.data.cmd?o&&e.checkMailbox():r.data.cmd&&(d("worker.js received unknown command "+r.data.cmd),d(r.data)))}catch(a){throw e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),a}};
`},7067:()=>{},1296:()=>{},760:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},685:(b,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.resolveBackend=i.registerBackend=void 0;let l={},c=[];i.registerBackend=(a,f,p)=>{if(!f||typeof f.init!="function"||typeof f.createSessionHandler!="function")throw new TypeError("not a valid backend");{let d=l[a];if(d===void 0)l[a]={backend:f,priority:p};else{if(d.priority>p)return;if(d.priority===p&&d.backend!==f)throw new Error(`cannot register backend "${a}" using priority ${p}`)}if(p>=0){let h=c.indexOf(a);h!==-1&&c.splice(h,1);for(let u=0;u<c.length;u++)if(l[c[u]].priority<=p)return void c.splice(u,0,a);c.push(a)}}},i.resolveBackend=async a=>{let f=a.length===0?c:a,p=[];for(let d of f){let h=l[d];if(h){if(h.initialized)return h.backend;if(h.aborted)continue;let u=!!h.initPromise;try{return u||(h.initPromise=h.backend.init()),await h.initPromise,h.initialized=!0,h.backend}catch(o){u||p.push({name:d,err:o}),h.aborted=!0}finally{delete h.initPromise}}}throw new Error(`no available backend found. ERR: ${p.map(d=>`[${d.name}] ${d.err}`).join(", ")}`)}},4798:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.registerBackend=void 0;var c=l(685);Object.defineProperty(i,"registerBackend",{enumerable:!0,get:function(){return c.registerBackend}})},3121:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.env=void 0;let c=l(9104),a="warning";i.env={wasm:{},webgl:{},webgpu:{},versions:{common:c.version},set logLevel(f){if(f!==void 0){if(typeof f!="string"||["verbose","info","warning","error","fatal"].indexOf(f)===-1)throw new Error(`Unsupported logging level: ${f}`);a=f}},get logLevel(){return a}},Object.defineProperty(i.env,"logLevel",{enumerable:!0})},2457:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.env=void 0;let c=l(3121);i.env=c.env},2235:function(b,i,l){"use strict";var c=this&&this.__createBinding||(Object.create?function(f,p,d,h){h===void 0&&(h=d);var u=Object.getOwnPropertyDescriptor(p,d);u&&!("get"in u?!p.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:function(){return p[d]}}),Object.defineProperty(f,h,u)}:function(f,p,d,h){h===void 0&&(h=d),f[h]=p[d]}),a=this&&this.__exportStar||function(f,p){for(var d in f)d==="default"||Object.prototype.hasOwnProperty.call(p,d)||c(p,f,d)};Object.defineProperty(i,"__esModule",{value:!0}),a(l(4798),i),a(l(2457),i),a(l(3974),i),a(l(963),i),a(l(7852),i)},8036:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.InferenceSession=void 0;let c=l(685),a=l(963);class f{constructor(d){this.handler=d}async run(d,h,u){let o={},n={};if(typeof d!="object"||d===null||d instanceof a.Tensor||Array.isArray(d))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let e=!0;if(typeof h=="object"){if(h===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(h instanceof a.Tensor)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(h)){if(h.length===0)throw new TypeError("'fetches' cannot be an empty array.");e=!1;for(let s of h){if(typeof s!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(s)===-1)throw new RangeError(`'fetches' contains invalid output name: ${s}.`);o[s]=null}if(typeof u=="object"&&u!==null)n=u;else if(u!==void 0)throw new TypeError("'options' must be an object.")}else{let s=!1,g=Object.getOwnPropertyNames(h);for(let m of this.outputNames)if(g.indexOf(m)!==-1){let y=h[m];(y===null||y instanceof a.Tensor)&&(s=!0,e=!1,o[m]=y)}if(s){if(typeof u=="object"&&u!==null)n=u;else if(u!==void 0)throw new TypeError("'options' must be an object.")}else n=h}}else if(h!==void 0)throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let s of this.inputNames)if(d[s]===void 0)throw new Error(`input '${s}' is missing in 'feeds'.`);if(e)for(let s of this.outputNames)o[s]=null;let t=await this.handler.run(d,o,n),r={};for(let s in t)Object.hasOwnProperty.call(t,s)&&(r[s]=new a.Tensor(t[s].type,t[s].data,t[s].dims));return r}async release(){return this.handler.dispose()}static async create(d,h,u,o){let n,e={};if(typeof d=="string"){if(n=d,typeof h=="object"&&h!==null)e=h;else if(h!==void 0)throw new TypeError("'options' must be an object.")}else if(d instanceof Uint8Array){if(n=d,typeof h=="object"&&h!==null)e=h;else if(h!==void 0)throw new TypeError("'options' must be an object.")}else{if(!(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{let g=d,m=0,y=d.byteLength;if(typeof h=="object"&&h!==null)e=h;else if(typeof h=="number"){if(m=h,!Number.isSafeInteger(m))throw new RangeError("'byteOffset' must be an integer.");if(m<0||m>=g.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${g.byteLength}).`);if(y=d.byteLength-m,typeof u=="number"){if(y=u,!Number.isSafeInteger(y))throw new RangeError("'byteLength' must be an integer.");if(y<=0||m+y>g.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${g.byteLength-m}].`);if(typeof o=="object"&&o!==null)e=o;else if(o!==void 0)throw new TypeError("'options' must be an object.")}else if(u!==void 0)throw new TypeError("'byteLength' must be a number.")}else if(h!==void 0)throw new TypeError("'options' must be an object.");n=new Uint8Array(g,m,y)}}let t=(e.executionProviders||[]).map(g=>typeof g=="string"?g:g.name),r=await(0,c.resolveBackend)(t),s=await r.createSessionHandler(n,e);return new f(s)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}i.InferenceSession=f},3974:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.InferenceSession=void 0;let c=l(8036);i.InferenceSession=c.InferenceSession},7852:(b,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0})},2350:(b,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.tensorToImageData=i.tensorToDataURL=void 0,i.tensorToDataURL=(l,c)=>{let a=document.createElement("canvas");a.width=l.dims[3],a.height=l.dims[2];let f=a.getContext("2d");if(f!=null){let p,d;c?.tensorLayout!==void 0&&c.tensorLayout==="NHWC"?(p=l.dims[2],d=l.dims[3]):(p=l.dims[3],d=l.dims[2]);let h=c?.format!==void 0?c.format:"RGB",u=c?.norm,o,n;u===void 0||u.mean===void 0?o=[255,255,255,255]:typeof u.mean=="number"?o=[u.mean,u.mean,u.mean,u.mean]:(o=[u.mean[0],u.mean[1],u.mean[2],0],u.mean[3]!==void 0&&(o[3]=u.mean[3])),u===void 0||u.bias===void 0?n=[0,0,0,0]:typeof u.bias=="number"?n=[u.bias,u.bias,u.bias,u.bias]:(n=[u.bias[0],u.bias[1],u.bias[2],0],u.bias[3]!==void 0&&(n[3]=u.bias[3]));let e=d*p,t=0,r=e,s=2*e,g=-1;h==="RGBA"?(t=0,r=e,s=2*e,g=3*e):h==="RGB"?(t=0,r=e,s=2*e):h==="RBG"&&(t=0,s=e,r=2*e);for(let m=0;m<d;m++)for(let y=0;y<p;y++){let _=(l.data[t++]-n[0])*o[0],T=(l.data[r++]-n[1])*o[1],w=(l.data[s++]-n[2])*o[2],x=g===-1?255:(l.data[g++]-n[3])*o[3];f.fillStyle="rgba("+_+","+T+","+w+","+x+")",f.fillRect(y,m,1,1)}return a.toDataURL()}throw new Error("Can not access image data")},i.tensorToImageData=(l,c)=>{let a=document.createElement("canvas").getContext("2d"),f;if(a==null)throw new Error("Can not access image data");{let p,d,h;c?.tensorLayout!==void 0&&c.tensorLayout==="NHWC"?(p=l.dims[2],d=l.dims[1],h=l.dims[3]):(p=l.dims[3],d=l.dims[2],h=l.dims[1]);let u=c!==void 0&&c.format!==void 0?c.format:"RGB",o=c?.norm,n,e;o===void 0||o.mean===void 0?n=[255,255,255,255]:typeof o.mean=="number"?n=[o.mean,o.mean,o.mean,o.mean]:(n=[o.mean[0],o.mean[1],o.mean[2],255],o.mean[3]!==void 0&&(n[3]=o.mean[3])),o===void 0||o.bias===void 0?e=[0,0,0,0]:typeof o.bias=="number"?e=[o.bias,o.bias,o.bias,o.bias]:(e=[o.bias[0],o.bias[1],o.bias[2],0],o.bias[3]!==void 0&&(e[3]=o.bias[3]));let t=d*p;if(c!==void 0&&(c.format!==void 0&&h===4&&c.format!=="RGBA"||h===3&&c.format!=="RGB"&&c.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let r=4,s=0,g=1,m=2,y=3,_=0,T=t,w=2*t,x=-1;u==="RGBA"?(_=0,T=t,w=2*t,x=3*t):u==="RGB"?(_=0,T=t,w=2*t):u==="RBG"&&(_=0,w=t,T=2*t),f=a.createImageData(p,d);for(let S=0;S<d*p;s+=r,g+=r,m+=r,y+=r,S++)f.data[s]=(l.data[_++]-e[0])*n[0],f.data[g]=(l.data[T++]-e[1])*n[1],f.data[m]=(l.data[w++]-e[2])*n[2],f.data[y]=x===-1?255:(l.data[x++]-e[3])*n[3]}return f}},4866:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.tensorFromImage=i.bufferToTensor=void 0;let c=l(963);i.bufferToTensor=(a,f)=>{if(a===void 0)throw new Error("Image buffer must be defined");if(f.height===void 0||f.width===void 0)throw new Error("Image height and width must be defined");if(f.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:p,width:d}=f,h=f.norm??{mean:255,bias:0},u,o;u=typeof h.mean=="number"?[h.mean,h.mean,h.mean,h.mean]:[h.mean[0],h.mean[1],h.mean[2],h.mean[3]??255],o=typeof h.bias=="number"?[h.bias,h.bias,h.bias,h.bias]:[h.bias[0],h.bias[1],h.bias[2],h.bias[3]??0];let n=f.format!==void 0?f.format:"RGBA",e=f.tensorFormat!==void 0&&f.tensorFormat!==void 0?f.tensorFormat:"RGB",t=p*d,r=e==="RGBA"?new Float32Array(4*t):new Float32Array(3*t),s=4,g=0,m=1,y=2,_=3,T=0,w=t,x=2*t,S=-1;n==="RGB"&&(s=3,g=0,m=1,y=2,_=-1),e==="RGBA"?S=3*t:e==="RBG"?(T=0,x=t,w=2*t):e==="BGR"&&(x=0,w=t,T=2*t);for(let P=0;P<t;P++,g+=s,y+=s,m+=s,_+=s)r[T++]=(a[g]+o[0])/u[0],r[w++]=(a[m]+o[1])/u[1],r[x++]=(a[y]+o[2])/u[2],S!==-1&&_!==-1&&(r[S++]=(a[_]+o[3])/u[3]);return e==="RGBA"?new c.Tensor("float32",r,[1,4,p,d]):new c.Tensor("float32",r,[1,3,p,d])},i.tensorFromImage=async(a,f)=>{let p=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,d=typeof ImageData<"u"&&a instanceof ImageData,h=typeof ImageBitmap<"u"&&a instanceof ImageBitmap,u=typeof a=="string",o,n=f??{};if(p){let e=document.createElement("canvas");e.width=a.width,e.height=a.height;let t=e.getContext("2d");if(t==null)throw new Error("Can not access image data");{let r=a.height,s=a.width;if(f!==void 0&&f.resizedHeight!==void 0&&f.resizedWidth!==void 0&&(r=f.resizedHeight,s=f.resizedWidth),f!==void 0){if(n=f,f.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");n.tensorFormat="RGBA",n.height=r,n.width=s}else n.tensorFormat="RGBA",n.height=r,n.width=s;t.drawImage(a,0,0),o=t.getImageData(0,0,s,r).data}}else{if(!d){if(h){if(f===void 0)throw new Error("Please provide image config with format for Imagebitmap");let e=document.createElement("canvas");e.width=a.width,e.height=a.height;let t=e.getContext("2d");if(t!=null){let r=a.height,s=a.width;return t.drawImage(a,0,0,s,r),o=t.getImageData(0,0,s,r).data,n.height=r,n.width=s,(0,i.bufferToTensor)(o,n)}throw new Error("Can not access image data")}if(u)return new Promise((e,t)=>{let r=document.createElement("canvas"),s=r.getContext("2d");if(!a||!s)return t();let g=new Image;g.crossOrigin="Anonymous",g.src=a,g.onload=()=>{r.width=g.width,r.height=g.height,s.drawImage(g,0,0,r.width,r.height);let m=s.getImageData(0,0,r.width,r.height);n.height=r.height,n.width=r.width,e((0,i.bufferToTensor)(m.data,n))}});throw new Error("Input data provided is not supported - aborted tensor creation")}{let e,t;if(f!==void 0&&f.resizedWidth!==void 0&&f.resizedHeight!==void 0?(e=f.resizedHeight,t=f.resizedWidth):(e=a.height,t=a.width),f!==void 0&&(n=f),n.format="RGBA",n.height=e,n.width=t,f!==void 0){let r=document.createElement("canvas");r.width=t,r.height=e;let s=r.getContext("2d");if(s==null)throw new Error("Can not access image data");s.putImageData(a,0,0),o=s.getImageData(0,0,t,e).data}else o=a.data}}if(o!==void 0)return(0,i.bufferToTensor)(o,n);throw new Error("Input data provided is not supported - aborted tensor creation")}},5957:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Tensor=void 0;let c=l(2350),a=l(4866),f=l(106),p=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),d=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),h=!1;i.Tensor=class{constructor(u,o,n){let e,t,r;if((()=>{if(!h){h=!0;let g=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",m=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";g&&(p.set("int64",BigInt64Array),d.set(BigInt64Array,"int64")),m&&(p.set("uint64",BigUint64Array),d.set(BigUint64Array,"uint64"))}})(),typeof u=="string")if(e=u,r=n,u==="string"){if(!Array.isArray(o))throw new TypeError("A string tensor's data must be a string array.");t=o}else{let g=p.get(u);if(g===void 0)throw new TypeError(`Unsupported tensor type: ${u}.`);if(Array.isArray(o)){if(u==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");t=u==="uint64"||u==="int64"?g.from(o,BigInt):g.from(o)}else{if(!(o instanceof g))throw new TypeError(`A ${e} tensor's data must be type of ${g}`);t=o}}else if(r=o,Array.isArray(u)){if(u.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let g=typeof u[0];if(g==="string")e="string",t=u;else{if(g!=="boolean")throw new TypeError(`Invalid element type of data array: ${g}.`);e="bool",t=Uint8Array.from(u)}}else{let g=d.get(u.constructor);if(g===void 0)throw new TypeError(`Unsupported type for tensor data: ${u.constructor}.`);e=g,t=u}if(r===void 0)r=[t.length];else if(!Array.isArray(r))throw new TypeError("A tensor's dims must be a number array");let s=(0,f.calculateSize)(r);if(s!==t.length)throw new Error(`Tensor's size(${s}) does not match data length(${t.length}).`);this.dims=r,this.type=e,this.data=t,this.size=s}static async fromImage(u,o){return(0,a.tensorFromImage)(u,o)}toDataURL(u){return(0,c.tensorToDataURL)(this,u)}toImageData(u){return(0,c.tensorToImageData)(this,u)}reshape(u){return(0,f.tensorReshape)(this,u)}}},106:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.tensorReshape=i.calculateSize=void 0;let c=l(963);i.calculateSize=a=>{let f=1;for(let p=0;p<a.length;p++){let d=a[p];if(typeof d!="number"||!Number.isSafeInteger(d))throw new TypeError(`dims[${p}] must be an integer, got: ${d}`);if(d<0)throw new RangeError(`dims[${p}] must be a non-negative integer, got: ${d}`);f*=d}return f},i.tensorReshape=(a,f)=>new c.Tensor(a.type,a.data,f)},963:(b,i,l)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Tensor=void 0;let c=l(5957);i.Tensor=c.Tensor},9104:(b,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.version=void 0,i.version="1.16.3"},1583:(b,i)=>{var l,c=function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var f=null;try{f=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function p(O,k,N){this.low=0|O,this.high=0|k,this.unsigned=!!N}function d(O){return(O&&O.__isLong__)===!0}function h(O){var k=Math.clz32(O&-O);return O?31-k:k}p.prototype.__isLong__,Object.defineProperty(p.prototype,"__isLong__",{value:!0}),p.isLong=d;var u={},o={};function n(O,k){var N,L,z;return k?(z=0<=(O>>>=0)&&O<256)&&(L=o[O])?L:(N=t(O,0,!0),z&&(o[O]=N),N):(z=-128<=(O|=0)&&O<128)&&(L=u[O])?L:(N=t(O,O<0?-1:0,!1),z&&(u[O]=N),N)}function e(O,k){if(isNaN(O))return k?x:w;if(k){if(O<0)return x;if(O>=y)return j}else{if(O<=-_)return B;if(O+1>=_)return M}return O<0?e(-O,k).neg():t(O%m|0,O/m|0,k)}function t(O,k,N){return new p(O,k,N)}p.fromInt=n,p.fromNumber=e,p.fromBits=t;var r=Math.pow;function s(O,k,N){if(O.length===0)throw Error("empty string");if(typeof k=="number"?(N=k,k=!1):k=!!k,O==="NaN"||O==="Infinity"||O==="+Infinity"||O==="-Infinity")return k?x:w;if((N=N||10)<2||36<N)throw RangeError("radix");var L;if((L=O.indexOf("-"))>0)throw Error("interior hyphen");if(L===0)return s(O.substring(1),k,N).neg();for(var z=e(r(N,8)),J=w,Z=0;Z<O.length;Z+=8){var Q=Math.min(8,O.length-Z),ne=parseInt(O.substring(Z,Z+Q),N);if(Q<8){var re=e(r(N,Q));J=J.mul(re).add(e(ne))}else J=(J=J.mul(z)).add(e(ne))}return J.unsigned=k,J}function g(O,k){return typeof O=="number"?e(O,k):typeof O=="string"?s(O,k):t(O.low,O.high,typeof k=="boolean"?k:O.unsigned)}p.fromString=s,p.fromValue=g;var m=4294967296,y=m*m,_=y/2,T=n(1<<24),w=n(0);p.ZERO=w;var x=n(0,!0);p.UZERO=x;var S=n(1);p.ONE=S;var P=n(1,!0);p.UONE=P;var C=n(-1);p.NEG_ONE=C;var M=t(-1,2147483647,!1);p.MAX_VALUE=M;var j=t(-1,-1,!0);p.MAX_UNSIGNED_VALUE=j;var B=t(0,-2147483648,!1);p.MIN_VALUE=B;var E=p.prototype;E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*m+(this.low>>>0):this.high*m+(this.low>>>0)},E.toString=function(O){if((O=O||10)<2||36<O)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(B)){var k=e(O),N=this.div(k),L=N.mul(k).sub(this);return N.toString(O)+L.toInt().toString(O)}return"-"+this.neg().toString(O)}for(var z=e(r(O,6),this.unsigned),J=this,Z="";;){var Q=J.div(z),ne=(J.sub(Q.mul(z)).toInt()>>>0).toString(O);if((J=Q).isZero())return ne+Z;for(;ne.length<6;)ne="0"+ne;Z=""+ne+Z}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(B)?64:this.neg().getNumBitsAbs();for(var O=this.high!=0?this.high:this.low,k=31;k>0&&!(O&1<<k);k--);return this.high!=0?k+33:k+1},E.isZero=function(){return this.high===0&&this.low===0},E.eqz=E.isZero,E.isNegative=function(){return!this.unsigned&&this.high<0},E.isPositive=function(){return this.unsigned||this.high>=0},E.isOdd=function(){return(1&this.low)==1},E.isEven=function(){return(1&this.low)==0},E.equals=function(O){return d(O)||(O=g(O)),(this.unsigned===O.unsigned||this.high>>>31!=1||O.high>>>31!=1)&&this.high===O.high&&this.low===O.low},E.eq=E.equals,E.notEquals=function(O){return!this.eq(O)},E.neq=E.notEquals,E.ne=E.notEquals,E.lessThan=function(O){return this.comp(O)<0},E.lt=E.lessThan,E.lessThanOrEqual=function(O){return this.comp(O)<=0},E.lte=E.lessThanOrEqual,E.le=E.lessThanOrEqual,E.greaterThan=function(O){return this.comp(O)>0},E.gt=E.greaterThan,E.greaterThanOrEqual=function(O){return this.comp(O)>=0},E.gte=E.greaterThanOrEqual,E.ge=E.greaterThanOrEqual,E.compare=function(O){if(d(O)||(O=g(O)),this.eq(O))return 0;var k=this.isNegative(),N=O.isNegative();return k&&!N?-1:!k&&N?1:this.unsigned?O.high>>>0>this.high>>>0||O.high===this.high&&O.low>>>0>this.low>>>0?-1:1:this.sub(O).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(B)?B:this.not().add(S)},E.neg=E.negate,E.add=function(O){d(O)||(O=g(O));var k=this.high>>>16,N=65535&this.high,L=this.low>>>16,z=65535&this.low,J=O.high>>>16,Z=65535&O.high,Q=O.low>>>16,ne=0,re=0,se=0,ge=0;return se+=(ge+=z+(65535&O.low))>>>16,re+=(se+=L+Q)>>>16,ne+=(re+=N+Z)>>>16,ne+=k+J,t((se&=65535)<<16|(ge&=65535),(ne&=65535)<<16|(re&=65535),this.unsigned)},E.subtract=function(O){return d(O)||(O=g(O)),this.add(O.neg())},E.sub=E.subtract,E.multiply=function(O){if(this.isZero())return this;if(d(O)||(O=g(O)),f)return t(f.mul(this.low,this.high,O.low,O.high),f.get_high(),this.unsigned);if(O.isZero())return this.unsigned?x:w;if(this.eq(B))return O.isOdd()?B:w;if(O.eq(B))return this.isOdd()?B:w;if(this.isNegative())return O.isNegative()?this.neg().mul(O.neg()):this.neg().mul(O).neg();if(O.isNegative())return this.mul(O.neg()).neg();if(this.lt(T)&&O.lt(T))return e(this.toNumber()*O.toNumber(),this.unsigned);var k=this.high>>>16,N=65535&this.high,L=this.low>>>16,z=65535&this.low,J=O.high>>>16,Z=65535&O.high,Q=O.low>>>16,ne=65535&O.low,re=0,se=0,ge=0,X=0;return ge+=(X+=z*ne)>>>16,se+=(ge+=L*ne)>>>16,ge&=65535,se+=(ge+=z*Q)>>>16,re+=(se+=N*ne)>>>16,se&=65535,re+=(se+=L*Q)>>>16,se&=65535,re+=(se+=z*Z)>>>16,re+=k*ne+N*Q+L*Z+z*J,t((ge&=65535)<<16|(X&=65535),(re&=65535)<<16|(se&=65535),this.unsigned)},E.mul=E.multiply,E.divide=function(O){if(d(O)||(O=g(O)),O.isZero())throw Error("division by zero");var k,N,L;if(f)return this.unsigned||this.high!==-2147483648||O.low!==-1||O.high!==-1?t((this.unsigned?f.div_u:f.div_s)(this.low,this.high,O.low,O.high),f.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?x:w;if(this.unsigned){if(O.unsigned||(O=O.toUnsigned()),O.gt(this))return x;if(O.gt(this.shru(1)))return P;L=x}else{if(this.eq(B))return O.eq(S)||O.eq(C)?B:O.eq(B)?S:(k=this.shr(1).div(O).shl(1)).eq(w)?O.isNegative()?S:C:(N=this.sub(O.mul(k)),L=k.add(N.div(O)));if(O.eq(B))return this.unsigned?x:w;if(this.isNegative())return O.isNegative()?this.neg().div(O.neg()):this.neg().div(O).neg();if(O.isNegative())return this.div(O.neg()).neg();L=w}for(N=this;N.gte(O);){k=Math.max(1,Math.floor(N.toNumber()/O.toNumber()));for(var z=Math.ceil(Math.log(k)/Math.LN2),J=z<=48?1:r(2,z-48),Z=e(k),Q=Z.mul(O);Q.isNegative()||Q.gt(N);)Q=(Z=e(k-=J,this.unsigned)).mul(O);Z.isZero()&&(Z=S),L=L.add(Z),N=N.sub(Q)}return L},E.div=E.divide,E.modulo=function(O){return d(O)||(O=g(O)),f?t((this.unsigned?f.rem_u:f.rem_s)(this.low,this.high,O.low,O.high),f.get_high(),this.unsigned):this.sub(this.div(O).mul(O))},E.mod=E.modulo,E.rem=E.modulo,E.not=function(){return t(~this.low,~this.high,this.unsigned)},E.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},E.clz=E.countLeadingZeros,E.countTrailingZeros=function(){return this.low?h(this.low):h(this.high)+32},E.ctz=E.countTrailingZeros,E.and=function(O){return d(O)||(O=g(O)),t(this.low&O.low,this.high&O.high,this.unsigned)},E.or=function(O){return d(O)||(O=g(O)),t(this.low|O.low,this.high|O.high,this.unsigned)},E.xor=function(O){return d(O)||(O=g(O)),t(this.low^O.low,this.high^O.high,this.unsigned)},E.shiftLeft=function(O){return d(O)&&(O=O.toInt()),(O&=63)==0?this:O<32?t(this.low<<O,this.high<<O|this.low>>>32-O,this.unsigned):t(0,this.low<<O-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(O){return d(O)&&(O=O.toInt()),(O&=63)==0?this:O<32?t(this.low>>>O|this.high<<32-O,this.high>>O,this.unsigned):t(this.high>>O-32,this.high>=0?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(O){return d(O)&&(O=O.toInt()),(O&=63)==0?this:O<32?t(this.low>>>O|this.high<<32-O,this.high>>>O,this.unsigned):t(O===32?this.high:this.high>>>O-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.shr_u=E.shiftRightUnsigned,E.rotateLeft=function(O){var k;return d(O)&&(O=O.toInt()),(O&=63)==0?this:O===32?t(this.high,this.low,this.unsigned):O<32?(k=32-O,t(this.low<<O|this.high>>>k,this.high<<O|this.low>>>k,this.unsigned)):(k=32-(O-=32),t(this.high<<O|this.low>>>k,this.low<<O|this.high>>>k,this.unsigned))},E.rotl=E.rotateLeft,E.rotateRight=function(O){var k;return d(O)&&(O=O.toInt()),(O&=63)==0?this:O===32?t(this.high,this.low,this.unsigned):O<32?(k=32-O,t(this.high<<k|this.low>>>O,this.low<<k|this.high>>>O,this.unsigned)):(k=32-(O-=32),t(this.low<<k|this.high>>>O,this.high<<k|this.low>>>O,this.unsigned))},E.rotr=E.rotateRight,E.toSigned=function(){return this.unsigned?t(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:t(this.low,this.high,!0)},E.toBytes=function(O){return O?this.toBytesLE():this.toBytesBE()},E.toBytesLE=function(){var O=this.high,k=this.low;return[255&k,k>>>8&255,k>>>16&255,k>>>24,255&O,O>>>8&255,O>>>16&255,O>>>24]},E.toBytesBE=function(){var O=this.high,k=this.low;return[O>>>24,O>>>16&255,O>>>8&255,255&O,k>>>24,k>>>16&255,k>>>8&255,255&k]},p.fromBytes=function(O,k,N){return N?p.fromBytesLE(O,k):p.fromBytesBE(O,k)},p.fromBytesLE=function(O,k){return new p(O[0]|O[1]<<8|O[2]<<16|O[3]<<24,O[4]|O[5]<<8|O[6]<<16|O[7]<<24,k)},p.fromBytesBE=function(O,k){return new p(O[4]<<24|O[5]<<16|O[6]<<8|O[7],O[0]<<24|O[1]<<16|O[2]<<8|O[3],k)};var V=p;return a.default=V,"default"in a?a.default:a}({});(l=function(){return c}.apply(i,[]))===void 0||(b.exports=l)},5686:(b,i,l)=>{"use strict";l.r(i),l.d(i,{flatbuffers:()=>c});var c={};c.Offset,c.Table,c.SIZEOF_SHORT=2,c.SIZEOF_INT=4,c.FILE_IDENTIFIER_LENGTH=4,c.SIZE_PREFIX_LENGTH=4,c.Encoding={UTF8_BYTES:1,UTF16_STRING:2},c.int32=new Int32Array(2),c.float32=new Float32Array(c.int32.buffer),c.float64=new Float64Array(c.int32.buffer),c.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,c.Long=function(a,f){this.low=0|a,this.high=0|f},c.Long.create=function(a,f){return a==0&&f==0?c.Long.ZERO:new c.Long(a,f)},c.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},c.Long.prototype.equals=function(a){return this.low==a.low&&this.high==a.high},c.Long.ZERO=new c.Long(0,0),c.Builder=function(a){if(a)f=a;else var f=1024;this.bb=c.ByteBuffer.allocate(f),this.space=f,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},c.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},c.Builder.prototype.forceDefaults=function(a){this.force_defaults=a},c.Builder.prototype.dataBuffer=function(){return this.bb},c.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},c.Builder.prototype.prep=function(a,f){a>this.minalign&&(this.minalign=a);for(var p=1+~(this.bb.capacity()-this.space+f)&a-1;this.space<p+a+f;){var d=this.bb.capacity();this.bb=c.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-d}this.pad(p)},c.Builder.prototype.pad=function(a){for(var f=0;f<a;f++)this.bb.writeInt8(--this.space,0)},c.Builder.prototype.writeInt8=function(a){this.bb.writeInt8(this.space-=1,a)},c.Builder.prototype.writeInt16=function(a){this.bb.writeInt16(this.space-=2,a)},c.Builder.prototype.writeInt32=function(a){this.bb.writeInt32(this.space-=4,a)},c.Builder.prototype.writeInt64=function(a){this.bb.writeInt64(this.space-=8,a)},c.Builder.prototype.writeFloat32=function(a){this.bb.writeFloat32(this.space-=4,a)},c.Builder.prototype.writeFloat64=function(a){this.bb.writeFloat64(this.space-=8,a)},c.Builder.prototype.addInt8=function(a){this.prep(1,0),this.writeInt8(a)},c.Builder.prototype.addInt16=function(a){this.prep(2,0),this.writeInt16(a)},c.Builder.prototype.addInt32=function(a){this.prep(4,0),this.writeInt32(a)},c.Builder.prototype.addInt64=function(a){this.prep(8,0),this.writeInt64(a)},c.Builder.prototype.addFloat32=function(a){this.prep(4,0),this.writeFloat32(a)},c.Builder.prototype.addFloat64=function(a){this.prep(8,0),this.writeFloat64(a)},c.Builder.prototype.addFieldInt8=function(a,f,p){(this.force_defaults||f!=p)&&(this.addInt8(f),this.slot(a))},c.Builder.prototype.addFieldInt16=function(a,f,p){(this.force_defaults||f!=p)&&(this.addInt16(f),this.slot(a))},c.Builder.prototype.addFieldInt32=function(a,f,p){(this.force_defaults||f!=p)&&(this.addInt32(f),this.slot(a))},c.Builder.prototype.addFieldInt64=function(a,f,p){!this.force_defaults&&f.equals(p)||(this.addInt64(f),this.slot(a))},c.Builder.prototype.addFieldFloat32=function(a,f,p){(this.force_defaults||f!=p)&&(this.addFloat32(f),this.slot(a))},c.Builder.prototype.addFieldFloat64=function(a,f,p){(this.force_defaults||f!=p)&&(this.addFloat64(f),this.slot(a))},c.Builder.prototype.addFieldOffset=function(a,f,p){(this.force_defaults||f!=p)&&(this.addOffset(f),this.slot(a))},c.Builder.prototype.addFieldStruct=function(a,f,p){f!=p&&(this.nested(f),this.slot(a))},c.Builder.prototype.nested=function(a){if(a!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},c.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},c.Builder.prototype.slot=function(a){this.vtable[a]=this.offset()},c.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},c.Builder.growByteBuffer=function(a){var f=a.capacity();if(3221225472&f)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var p=f<<1,d=c.ByteBuffer.allocate(p);return d.setPosition(p-f),d.bytes().set(a.bytes(),p-f),d},c.Builder.prototype.addOffset=function(a){this.prep(c.SIZEOF_INT,0),this.writeInt32(this.offset()-a+c.SIZEOF_INT)},c.Builder.prototype.startObject=function(a){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=a;for(var f=0;f<a;f++)this.vtable[f]=0;this.isNested=!0,this.object_start=this.offset()},c.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var a=this.offset(),f=this.vtable_in_use-1;f>=0&&this.vtable[f]==0;f--);for(var p=f+1;f>=0;f--)this.addInt16(this.vtable[f]!=0?a-this.vtable[f]:0);this.addInt16(a-this.object_start);var d=(p+2)*c.SIZEOF_SHORT;this.addInt16(d);var h=0,u=this.space;e:for(f=0;f<this.vtables.length;f++){var o=this.bb.capacity()-this.vtables[f];if(d==this.bb.readInt16(o)){for(var n=c.SIZEOF_SHORT;n<d;n+=c.SIZEOF_SHORT)if(this.bb.readInt16(u+n)!=this.bb.readInt16(o+n))continue e;h=this.vtables[f];break}}return h?(this.space=this.bb.capacity()-a,this.bb.writeInt32(this.space,h-a)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-a,this.offset()-a)),this.isNested=!1,a},c.Builder.prototype.finish=function(a,f,p){var d=p?c.SIZE_PREFIX_LENGTH:0;if(f){var h=f;if(this.prep(this.minalign,c.SIZEOF_INT+c.FILE_IDENTIFIER_LENGTH+d),h.length!=c.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+c.FILE_IDENTIFIER_LENGTH);for(var u=c.FILE_IDENTIFIER_LENGTH-1;u>=0;u--)this.writeInt8(h.charCodeAt(u))}this.prep(this.minalign,c.SIZEOF_INT+d),this.addOffset(a),d&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},c.Builder.prototype.finishSizePrefixed=function(a,f){this.finish(a,f,!0)},c.Builder.prototype.requiredField=function(a,f){var p=this.bb.capacity()-a,d=p-this.bb.readInt32(p);if(this.bb.readInt16(d+f)==0)throw new Error("FlatBuffers: field "+f+" must be set")},c.Builder.prototype.startVector=function(a,f,p){this.notNested(),this.vector_num_elems=f,this.prep(c.SIZEOF_INT,a*f),this.prep(p,a*f)},c.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},c.Builder.prototype.createString=function(a){if(a instanceof Uint8Array)var f=a;else{f=[];for(var p=0;p<a.length;){var d,h=a.charCodeAt(p++);(d=h<55296||h>=56320?h:(h<<10)+a.charCodeAt(p++)+-56613888)<128?f.push(d):(d<2048?f.push(d>>6&31|192):(d<65536?f.push(d>>12&15|224):f.push(d>>18&7|240,d>>12&63|128),f.push(d>>6&63|128)),f.push(63&d|128))}}this.addInt8(0),this.startVector(1,f.length,1),this.bb.setPosition(this.space-=f.length),p=0;for(var u=this.space,o=this.bb.bytes();p<f.length;p++)o[u++]=f[p];return this.endVector()},c.Builder.prototype.createLong=function(a,f){return c.Long.create(a,f)},c.ByteBuffer=function(a){this.bytes_=a,this.position_=0},c.ByteBuffer.allocate=function(a){return new c.ByteBuffer(new Uint8Array(a))},c.ByteBuffer.prototype.clear=function(){this.position_=0},c.ByteBuffer.prototype.bytes=function(){return this.bytes_},c.ByteBuffer.prototype.position=function(){return this.position_},c.ByteBuffer.prototype.setPosition=function(a){this.position_=a},c.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},c.ByteBuffer.prototype.readInt8=function(a){return this.readUint8(a)<<24>>24},c.ByteBuffer.prototype.readUint8=function(a){return this.bytes_[a]},c.ByteBuffer.prototype.readInt16=function(a){return this.readUint16(a)<<16>>16},c.ByteBuffer.prototype.readUint16=function(a){return this.bytes_[a]|this.bytes_[a+1]<<8},c.ByteBuffer.prototype.readInt32=function(a){return this.bytes_[a]|this.bytes_[a+1]<<8|this.bytes_[a+2]<<16|this.bytes_[a+3]<<24},c.ByteBuffer.prototype.readUint32=function(a){return this.readInt32(a)>>>0},c.ByteBuffer.prototype.readInt64=function(a){return new c.Long(this.readInt32(a),this.readInt32(a+4))},c.ByteBuffer.prototype.readUint64=function(a){return new c.Long(this.readUint32(a),this.readUint32(a+4))},c.ByteBuffer.prototype.readFloat32=function(a){return c.int32[0]=this.readInt32(a),c.float32[0]},c.ByteBuffer.prototype.readFloat64=function(a){return c.int32[c.isLittleEndian?0:1]=this.readInt32(a),c.int32[c.isLittleEndian?1:0]=this.readInt32(a+4),c.float64[0]},c.ByteBuffer.prototype.writeInt8=function(a,f){this.bytes_[a]=f},c.ByteBuffer.prototype.writeUint8=function(a,f){this.bytes_[a]=f},c.ByteBuffer.prototype.writeInt16=function(a,f){this.bytes_[a]=f,this.bytes_[a+1]=f>>8},c.ByteBuffer.prototype.writeUint16=function(a,f){this.bytes_[a]=f,this.bytes_[a+1]=f>>8},c.ByteBuffer.prototype.writeInt32=function(a,f){this.bytes_[a]=f,this.bytes_[a+1]=f>>8,this.bytes_[a+2]=f>>16,this.bytes_[a+3]=f>>24},c.ByteBuffer.prototype.writeUint32=function(a,f){this.bytes_[a]=f,this.bytes_[a+1]=f>>8,this.bytes_[a+2]=f>>16,this.bytes_[a+3]=f>>24},c.ByteBuffer.prototype.writeInt64=function(a,f){this.writeInt32(a,f.low),this.writeInt32(a+4,f.high)},c.ByteBuffer.prototype.writeUint64=function(a,f){this.writeUint32(a,f.low),this.writeUint32(a+4,f.high)},c.ByteBuffer.prototype.writeFloat32=function(a,f){c.float32[0]=f,this.writeInt32(a,c.int32[0])},c.ByteBuffer.prototype.writeFloat64=function(a,f){c.float64[0]=f,this.writeInt32(a,c.int32[c.isLittleEndian?0:1]),this.writeInt32(a+4,c.int32[c.isLittleEndian?1:0])},c.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+c.SIZEOF_INT+c.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var a="",f=0;f<c.FILE_IDENTIFIER_LENGTH;f++)a+=String.fromCharCode(this.readInt8(this.position_+c.SIZEOF_INT+f));return a},c.ByteBuffer.prototype.__offset=function(a,f){var p=a-this.readInt32(a);return f<this.readInt16(p)?this.readInt16(p+f):0},c.ByteBuffer.prototype.__union=function(a,f){return a.bb_pos=f+this.readInt32(f),a.bb=this,a},c.ByteBuffer.prototype.__string=function(a,f){a+=this.readInt32(a);var p=this.readInt32(a),d="",h=0;if(a+=c.SIZEOF_INT,f===c.Encoding.UTF8_BYTES)return this.bytes_.subarray(a,a+p);for(;h<p;){var u,o=this.readUint8(a+h++);if(o<192)u=o;else{var n=this.readUint8(a+h++);if(o<224)u=(31&o)<<6|63&n;else{var e=this.readUint8(a+h++);u=o<240?(15&o)<<12|(63&n)<<6|63&e:(7&o)<<18|(63&n)<<12|(63&e)<<6|63&this.readUint8(a+h++)}}u<65536?d+=String.fromCharCode(u):(u-=65536,d+=String.fromCharCode(55296+(u>>10),56320+(1023&u)))}return d},c.ByteBuffer.prototype.__indirect=function(a){return a+this.readInt32(a)},c.ByteBuffer.prototype.__vector=function(a){return a+this.readInt32(a)+c.SIZEOF_INT},c.ByteBuffer.prototype.__vector_len=function(a){return this.readInt32(a+this.readInt32(a))},c.ByteBuffer.prototype.__has_identifier=function(a){if(a.length!=c.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+c.FILE_IDENTIFIER_LENGTH);for(var f=0;f<c.FILE_IDENTIFIER_LENGTH;f++)if(a.charCodeAt(f)!=this.readInt8(this.position_+c.SIZEOF_INT+f))return!1;return!0},c.ByteBuffer.prototype.createLong=function(a,f){return c.Long.create(a,f)}}},__webpack_module_cache__={};function __webpack_require__(b){var i=__webpack_module_cache__[b];if(i!==void 0)return i.exports;var l=__webpack_module_cache__[b]={exports:{}};return __webpack_modules__[b].call(l.exports,l,l.exports,__webpack_require__),l.exports}__webpack_require__.n=b=>{var i=b&&b.__esModule?()=>b.default:()=>b;return __webpack_require__.d(i,{a:i}),i},__webpack_require__.d=(b,i)=>{for(var l in i)__webpack_require__.o(i,l)&&!__webpack_require__.o(b,l)&&Object.defineProperty(b,l,{enumerable:!0,get:i[l]})},__webpack_require__.o=(b,i)=>Object.prototype.hasOwnProperty.call(b,i),__webpack_require__.r=b=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(1057);return __webpack_exports__})())});var Te;(function(b){b.assertEqual=a=>a;function i(a){}b.assertIs=i;function l(a){throw new Error}b.assertNever=l,b.arrayToEnum=a=>{let f={};for(let p of a)f[p]=p;return f},b.getValidEnumValues=a=>{let f=b.objectKeys(a).filter(d=>typeof a[a[d]]!="number"),p={};for(let d of f)p[d]=a[d];return b.objectValues(p)},b.objectValues=a=>b.objectKeys(a).map(function(f){return a[f]}),b.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{let f=[];for(let p in a)Object.prototype.hasOwnProperty.call(a,p)&&f.push(p);return f},b.find=(a,f)=>{for(let p of a)if(f(p))return p},b.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function c(a,f=" | "){return a.map(p=>typeof p=="string"?`'${p}'`:p).join(f)}b.joinValues=c,b.jsonStringifyReplacer=(a,f)=>typeof f=="bigint"?f.toString():f})(Te||(Te={}));var Tr;(function(b){b.mergeShapes=(i,l)=>({...i,...l})})(Tr||(Tr={}));var oe=Te.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),vt=b=>{switch(typeof b){case"undefined":return oe.undefined;case"string":return oe.string;case"number":return isNaN(b)?oe.nan:oe.number;case"boolean":return oe.boolean;case"function":return oe.function;case"bigint":return oe.bigint;case"symbol":return oe.symbol;case"object":return Array.isArray(b)?oe.array:b===null?oe.null:b.then&&typeof b.then=="function"&&b.catch&&typeof b.catch=="function"?oe.promise:typeof Map<"u"&&b instanceof Map?oe.map:typeof Set<"u"&&b instanceof Set?oe.set:typeof Date<"u"&&b instanceof Date?oe.date:oe.object;default:return oe.unknown}},K=Te.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),xo=b=>JSON.stringify(b,null,2).replace(/"([^"]+)":/g,"$1:"),Qe=class b extends Error{constructor(i){super(),this.issues=[],this.addIssue=c=>{this.issues=[...this.issues,c]},this.addIssues=(c=[])=>{this.issues=[...this.issues,...c]};let l=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,l):this.__proto__=l,this.name="ZodError",this.issues=i}get errors(){return this.issues}format(i){let l=i||function(f){return f.message},c={_errors:[]},a=f=>{for(let p of f.issues)if(p.code==="invalid_union")p.unionErrors.map(a);else if(p.code==="invalid_return_type")a(p.returnTypeError);else if(p.code==="invalid_arguments")a(p.argumentsError);else if(p.path.length===0)c._errors.push(l(p));else{let d=c,h=0;for(;h<p.path.length;){let u=p.path[h];h===p.path.length-1?(d[u]=d[u]||{_errors:[]},d[u]._errors.push(l(p))):d[u]=d[u]||{_errors:[]},d=d[u],h++}}};return a(this),c}static assert(i){if(!(i instanceof b))throw new Error(`Not a ZodError: ${i}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Te.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(i=l=>l.message){let l={},c=[];for(let a of this.issues)a.path.length>0?(l[a.path[0]]=l[a.path[0]]||[],l[a.path[0]].push(i(a))):c.push(i(a));return{formErrors:c,fieldErrors:l}}get formErrors(){return this.flatten()}};Qe.create=b=>new Qe(b);var Zt=(b,i)=>{let l;switch(b.code){case K.invalid_type:b.received===oe.undefined?l="Required":l=`Expected ${b.expected}, received ${b.received}`;break;case K.invalid_literal:l=`Invalid literal value, expected ${JSON.stringify(b.expected,Te.jsonStringifyReplacer)}`;break;case K.unrecognized_keys:l=`Unrecognized key(s) in object: ${Te.joinValues(b.keys,", ")}`;break;case K.invalid_union:l="Invalid input";break;case K.invalid_union_discriminator:l=`Invalid discriminator value. Expected ${Te.joinValues(b.options)}`;break;case K.invalid_enum_value:l=`Invalid enum value. Expected ${Te.joinValues(b.options)}, received '${b.received}'`;break;case K.invalid_arguments:l="Invalid function arguments";break;case K.invalid_return_type:l="Invalid function return type";break;case K.invalid_date:l="Invalid date";break;case K.invalid_string:typeof b.validation=="object"?"includes"in b.validation?(l=`Invalid input: must include "${b.validation.includes}"`,typeof b.validation.position=="number"&&(l=`${l} at one or more positions greater than or equal to ${b.validation.position}`)):"startsWith"in b.validation?l=`Invalid input: must start with "${b.validation.startsWith}"`:"endsWith"in b.validation?l=`Invalid input: must end with "${b.validation.endsWith}"`:Te.assertNever(b.validation):b.validation!=="regex"?l=`Invalid ${b.validation}`:l="Invalid";break;case K.too_small:b.type==="array"?l=`Array must contain ${b.exact?"exactly":b.inclusive?"at least":"more than"} ${b.minimum} element(s)`:b.type==="string"?l=`String must contain ${b.exact?"exactly":b.inclusive?"at least":"over"} ${b.minimum} character(s)`:b.type==="number"?l=`Number must be ${b.exact?"exactly equal to ":b.inclusive?"greater than or equal to ":"greater than "}${b.minimum}`:b.type==="date"?l=`Date must be ${b.exact?"exactly equal to ":b.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(b.minimum))}`:l="Invalid input";break;case K.too_big:b.type==="array"?l=`Array must contain ${b.exact?"exactly":b.inclusive?"at most":"less than"} ${b.maximum} element(s)`:b.type==="string"?l=`String must contain ${b.exact?"exactly":b.inclusive?"at most":"under"} ${b.maximum} character(s)`:b.type==="number"?l=`Number must be ${b.exact?"exactly":b.inclusive?"less than or equal to":"less than"} ${b.maximum}`:b.type==="bigint"?l=`BigInt must be ${b.exact?"exactly":b.inclusive?"less than or equal to":"less than"} ${b.maximum}`:b.type==="date"?l=`Date must be ${b.exact?"exactly":b.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(b.maximum))}`:l="Invalid input";break;case K.custom:l="Invalid input";break;case K.invalid_intersection_types:l="Intersection results could not be merged";break;case K.not_multiple_of:l=`Number must be a multiple of ${b.multipleOf}`;break;case K.not_finite:l="Number must be finite";break;default:l=i.defaultError,Te.assertNever(b)}return{message:l}},_i=Zt;function So(b){_i=b}function kn(){return _i}var Cn=b=>{let{data:i,path:l,errorMaps:c,issueData:a}=b,f=[...l,...a.path||[]],p={...a,path:f};if(a.message!==void 0)return{...a,path:f,message:a.message};let d="",h=c.filter(u=>!!u).slice().reverse();for(let u of h)d=u(p,{data:i,defaultError:d}).message;return{...a,path:f,message:d}},Ao=[];function ie(b,i){let l=kn(),c=Cn({issueData:i,data:b.data,path:b.path,errorMaps:[b.common.contextualErrorMap,b.schemaErrorMap,l,l===Zt?void 0:Zt].filter(a=>!!a)});b.common.issues.push(c)}var Ge=class b{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(i,l){let c=[];for(let a of l){if(a.status==="aborted")return he;a.status==="dirty"&&i.dirty(),c.push(a.value)}return{status:i.value,value:c}}static async mergeObjectAsync(i,l){let c=[];for(let a of l){let f=await a.key,p=await a.value;c.push({key:f,value:p})}return b.mergeObjectSync(i,c)}static mergeObjectSync(i,l){let c={};for(let a of l){let{key:f,value:p}=a;if(f.status==="aborted"||p.status==="aborted")return he;f.status==="dirty"&&i.dirty(),p.status==="dirty"&&i.dirty(),f.value!=="__proto__"&&(typeof p.value<"u"||a.alwaysSet)&&(c[f.value]=p.value)}return{status:i.value,value:c}}},he=Object.freeze({status:"aborted"}),Yt=b=>({status:"dirty",value:b}),We=b=>({status:"valid",value:b}),wr=b=>b.status==="aborted",xr=b=>b.status==="dirty",gn=b=>b.status==="valid",mn=b=>typeof Promise<"u"&&b instanceof Promise;function Mn(b,i,l,c){if(l==="a"&&!c)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?b!==i||!c:!i.has(b))throw new TypeError("Cannot read private member from an object whose class did not declare it");return l==="m"?c:l==="a"?c.call(b):c?c.value:i.get(b)}function Ti(b,i,l,c,a){if(c==="m")throw new TypeError("Private method is not writable");if(c==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?b!==i||!a:!i.has(b))throw new TypeError("Cannot write private member to an object whose class did not declare it");return c==="a"?a.call(b,l):a?a.value=l:i.set(b,l),l}var ue;(function(b){b.errToObj=i=>typeof i=="string"?{message:i}:i||{},b.toString=i=>typeof i=="string"?i:i?.message})(ue||(ue={}));var fn,hn,it=class{constructor(i,l,c,a){this._cachedPath=[],this.parent=i,this.data=l,this._path=c,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},bi=(b,i)=>{if(gn(i))return{success:!0,data:i.value};if(!b.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let l=new Qe(b.common.issues);return this._error=l,this._error}}};function ye(b){if(!b)return{};let{errorMap:i,invalid_type_error:l,required_error:c,description:a}=b;if(i&&(l||c))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return i?{errorMap:i,description:a}:{errorMap:(p,d)=>{var h,u;let{message:o}=b;return p.code==="invalid_enum_value"?{message:o??d.defaultError}:typeof d.data>"u"?{message:(h=o??c)!==null&&h!==void 0?h:d.defaultError}:p.code!=="invalid_type"?{message:d.defaultError}:{message:(u=o??l)!==null&&u!==void 0?u:d.defaultError}},description:a}}var be=class{constructor(i){this.spa=this.safeParseAsync,this._def=i,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(i){return vt(i.data)}_getOrReturnCtx(i,l){return l||{common:i.parent.common,data:i.data,parsedType:vt(i.data),schemaErrorMap:this._def.errorMap,path:i.path,parent:i.parent}}_processInputParams(i){return{status:new Ge,ctx:{common:i.parent.common,data:i.data,parsedType:vt(i.data),schemaErrorMap:this._def.errorMap,path:i.path,parent:i.parent}}}_parseSync(i){let l=this._parse(i);if(mn(l))throw new Error("Synchronous parse encountered promise.");return l}_parseAsync(i){let l=this._parse(i);return Promise.resolve(l)}parse(i,l){let c=this.safeParse(i,l);if(c.success)return c.data;throw c.error}safeParse(i,l){var c;let a={common:{issues:[],async:(c=l?.async)!==null&&c!==void 0?c:!1,contextualErrorMap:l?.errorMap},path:l?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:i,parsedType:vt(i)},f=this._parseSync({data:i,path:a.path,parent:a});return bi(a,f)}async parseAsync(i,l){let c=await this.safeParseAsync(i,l);if(c.success)return c.data;throw c.error}async safeParseAsync(i,l){let c={common:{issues:[],contextualErrorMap:l?.errorMap,async:!0},path:l?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:i,parsedType:vt(i)},a=this._parse({data:i,path:c.path,parent:c}),f=await(mn(a)?a:Promise.resolve(a));return bi(c,f)}refine(i,l){let c=a=>typeof l=="string"||typeof l>"u"?{message:l}:typeof l=="function"?l(a):l;return this._refinement((a,f)=>{let p=i(a),d=()=>f.addIssue({code:K.custom,...c(a)});return typeof Promise<"u"&&p instanceof Promise?p.then(h=>h?!0:(d(),!1)):p?!0:(d(),!1)})}refinement(i,l){return this._refinement((c,a)=>i(c)?!0:(a.addIssue(typeof l=="function"?l(c,a):l),!1))}_refinement(i){return new et({schema:this,typeName:fe.ZodEffects,effect:{type:"refinement",refinement:i}})}superRefine(i){return this._refinement(i)}optional(){return rt.create(this,this._def)}nullable(){return ct.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return gt.create(this,this._def)}promise(){return wt.create(this,this._def)}or(i){return Ct.create([this,i],this._def)}and(i){return Mt.create(this,i,this._def)}transform(i){return new et({...ye(this._def),schema:this,typeName:fe.ZodEffects,effect:{type:"transform",transform:i}})}default(i){let l=typeof i=="function"?i:()=>i;return new Ft({...ye(this._def),innerType:this,defaultValue:l,typeName:fe.ZodDefault})}brand(){return new yn({typeName:fe.ZodBranded,type:this,...ye(this._def)})}catch(i){let l=typeof i=="function"?i:()=>i;return new Ut({...ye(this._def),innerType:this,catchValue:l,typeName:fe.ZodCatch})}describe(i){let l=this.constructor;return new l({...this._def,description:i})}pipe(i){return bn.create(this,i)}readonly(){return jt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Oo=/^c[^\s-]{8,}$/i,Eo=/^[0-9a-z]+$/,Po=/^[0-9A-HJKMNP-TV-Z]{26}$/,Io=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Do=/^[a-z0-9_-]{21}$/i,ko=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Co=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Mo="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",_r,No=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ro=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,$o=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,wi="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Lo=new RegExp(`^${wi}$`);function xi(b){let i="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return b.precision?i=`${i}\\.\\d{${b.precision}}`:b.precision==null&&(i=`${i}(\\.\\d+)?`),i}function Fo(b){return new RegExp(`^${xi(b)}$`)}function Si(b){let i=`${wi}T${xi(b)}`,l=[];return l.push(b.local?"Z?":"Z"),b.offset&&l.push("([+-]\\d{2}:?\\d{2})"),i=`${i}(${l.join("|")})`,new RegExp(`^${i}$`)}function Uo(b,i){return!!((i==="v4"||!i)&&No.test(b)||(i==="v6"||!i)&&Ro.test(b))}var _t=class b extends be{_parse(i){if(this._def.coerce&&(i.data=String(i.data)),this._getType(i)!==oe.string){let f=this._getOrReturnCtx(i);return ie(f,{code:K.invalid_type,expected:oe.string,received:f.parsedType}),he}let c=new Ge,a;for(let f of this._def.checks)if(f.kind==="min")i.data.length<f.value&&(a=this._getOrReturnCtx(i,a),ie(a,{code:K.too_small,minimum:f.value,type:"string",inclusive:!0,exact:!1,message:f.message}),c.dirty());else if(f.kind==="max")i.data.length>f.value&&(a=this._getOrReturnCtx(i,a),ie(a,{code:K.too_big,maximum:f.value,type:"string",inclusive:!0,exact:!1,message:f.message}),c.dirty());else if(f.kind==="length"){let p=i.data.length>f.value,d=i.data.length<f.value;(p||d)&&(a=this._getOrReturnCtx(i,a),p?ie(a,{code:K.too_big,maximum:f.value,type:"string",inclusive:!0,exact:!0,message:f.message}):d&&ie(a,{code:K.too_small,minimum:f.value,type:"string",inclusive:!0,exact:!0,message:f.message}),c.dirty())}else if(f.kind==="email")Co.test(i.data)||(a=this._getOrReturnCtx(i,a),ie(a,{validation:"email",code:K.invalid_string,message:f.message}),c.dirty());else if(f.kind==="emoji")_r||(_r=new RegExp(Mo,"u")),_r.test(i.data)||(a=this._getOrReturnCtx(i,a),ie(a,{validation:"emoji",code:K.invalid_string,message:f.message}),c.dirty());else if(f.kind==="uuid")Io.test(i.data)||(a=this._getOrReturnCtx(i,a),ie(a,{validation:"uuid",code:K.invalid_string,message:f.message}),c.dirty());else if(f.kind==="nanoid")Do.test(i.data)||(a=this._getOrReturnCtx(i,a),ie(a,{validation:"nanoid",code:K.invalid_string,message:f.message}),c.dirty());else if(f.kind==="cuid")Oo.test(i.data)||(a=this._getOrReturnCtx(i,a),ie(a,{validation:"cuid",code:K.invalid_string,message:f.message}),c.dirty());else if(f.kind==="cuid2")Eo.test(i.data)||(a=this._getOrReturnCtx(i,a),ie(a,{validation:"cuid2",code:K.invalid_string,message:f.message}),c.dirty());else if(f.kind==="ulid")Po.test(i.data)||(a=this._getOrReturnCtx(i,a),ie(a,{validation:"ulid",code:K.invalid_string,message:f.message}),c.dirty());else if(f.kind==="url")try{new URL(i.data)}catch{a=this._getOrReturnCtx(i,a),ie(a,{validation:"url",code:K.invalid_string,message:f.message}),c.dirty()}else f.kind==="regex"?(f.regex.lastIndex=0,f.regex.test(i.data)||(a=this._getOrReturnCtx(i,a),ie(a,{validation:"regex",code:K.invalid_string,message:f.message}),c.dirty())):f.kind==="trim"?i.data=i.data.trim():f.kind==="includes"?i.data.includes(f.value,f.position)||(a=this._getOrReturnCtx(i,a),ie(a,{code:K.invalid_string,validation:{includes:f.value,position:f.position},message:f.message}),c.dirty()):f.kind==="toLowerCase"?i.data=i.data.toLowerCase():f.kind==="toUpperCase"?i.data=i.data.toUpperCase():f.kind==="startsWith"?i.data.startsWith(f.value)||(a=this._getOrReturnCtx(i,a),ie(a,{code:K.invalid_string,validation:{startsWith:f.value},message:f.message}),c.dirty()):f.kind==="endsWith"?i.data.endsWith(f.value)||(a=this._getOrReturnCtx(i,a),ie(a,{code:K.invalid_string,validation:{endsWith:f.value},message:f.message}),c.dirty()):f.kind==="datetime"?Si(f).test(i.data)||(a=this._getOrReturnCtx(i,a),ie(a,{code:K.invalid_string,validation:"datetime",message:f.message}),c.dirty()):f.kind==="date"?Lo.test(i.data)||(a=this._getOrReturnCtx(i,a),ie(a,{code:K.invalid_string,validation:"date",message:f.message}),c.dirty()):f.kind==="time"?Fo(f).test(i.data)||(a=this._getOrReturnCtx(i,a),ie(a,{code:K.invalid_string,validation:"time",message:f.message}),c.dirty()):f.kind==="duration"?ko.test(i.data)||(a=this._getOrReturnCtx(i,a),ie(a,{validation:"duration",code:K.invalid_string,message:f.message}),c.dirty()):f.kind==="ip"?Uo(i.data,f.version)||(a=this._getOrReturnCtx(i,a),ie(a,{validation:"ip",code:K.invalid_string,message:f.message}),c.dirty()):f.kind==="base64"?$o.test(i.data)||(a=this._getOrReturnCtx(i,a),ie(a,{validation:"base64",code:K.invalid_string,message:f.message}),c.dirty()):Te.assertNever(f);return{status:c.value,value:i.data}}_regex(i,l,c){return this.refinement(a=>i.test(a),{validation:l,code:K.invalid_string,...ue.errToObj(c)})}_addCheck(i){return new b({...this._def,checks:[...this._def.checks,i]})}email(i){return this._addCheck({kind:"email",...ue.errToObj(i)})}url(i){return this._addCheck({kind:"url",...ue.errToObj(i)})}emoji(i){return this._addCheck({kind:"emoji",...ue.errToObj(i)})}uuid(i){return this._addCheck({kind:"uuid",...ue.errToObj(i)})}nanoid(i){return this._addCheck({kind:"nanoid",...ue.errToObj(i)})}cuid(i){return this._addCheck({kind:"cuid",...ue.errToObj(i)})}cuid2(i){return this._addCheck({kind:"cuid2",...ue.errToObj(i)})}ulid(i){return this._addCheck({kind:"ulid",...ue.errToObj(i)})}base64(i){return this._addCheck({kind:"base64",...ue.errToObj(i)})}ip(i){return this._addCheck({kind:"ip",...ue.errToObj(i)})}datetime(i){var l,c;return typeof i=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:i}):this._addCheck({kind:"datetime",precision:typeof i?.precision>"u"?null:i?.precision,offset:(l=i?.offset)!==null&&l!==void 0?l:!1,local:(c=i?.local)!==null&&c!==void 0?c:!1,...ue.errToObj(i?.message)})}date(i){return this._addCheck({kind:"date",message:i})}time(i){return typeof i=="string"?this._addCheck({kind:"time",precision:null,message:i}):this._addCheck({kind:"time",precision:typeof i?.precision>"u"?null:i?.precision,...ue.errToObj(i?.message)})}duration(i){return this._addCheck({kind:"duration",...ue.errToObj(i)})}regex(i,l){return this._addCheck({kind:"regex",regex:i,...ue.errToObj(l)})}includes(i,l){return this._addCheck({kind:"includes",value:i,position:l?.position,...ue.errToObj(l?.message)})}startsWith(i,l){return this._addCheck({kind:"startsWith",value:i,...ue.errToObj(l)})}endsWith(i,l){return this._addCheck({kind:"endsWith",value:i,...ue.errToObj(l)})}min(i,l){return this._addCheck({kind:"min",value:i,...ue.errToObj(l)})}max(i,l){return this._addCheck({kind:"max",value:i,...ue.errToObj(l)})}length(i,l){return this._addCheck({kind:"length",value:i,...ue.errToObj(l)})}nonempty(i){return this.min(1,ue.errToObj(i))}trim(){return new b({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new b({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new b({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(i=>i.kind==="datetime")}get isDate(){return!!this._def.checks.find(i=>i.kind==="date")}get isTime(){return!!this._def.checks.find(i=>i.kind==="time")}get isDuration(){return!!this._def.checks.find(i=>i.kind==="duration")}get isEmail(){return!!this._def.checks.find(i=>i.kind==="email")}get isURL(){return!!this._def.checks.find(i=>i.kind==="url")}get isEmoji(){return!!this._def.checks.find(i=>i.kind==="emoji")}get isUUID(){return!!this._def.checks.find(i=>i.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(i=>i.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(i=>i.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(i=>i.kind==="cuid2")}get isULID(){return!!this._def.checks.find(i=>i.kind==="ulid")}get isIP(){return!!this._def.checks.find(i=>i.kind==="ip")}get isBase64(){return!!this._def.checks.find(i=>i.kind==="base64")}get minLength(){let i=null;for(let l of this._def.checks)l.kind==="min"&&(i===null||l.value>i)&&(i=l.value);return i}get maxLength(){let i=null;for(let l of this._def.checks)l.kind==="max"&&(i===null||l.value<i)&&(i=l.value);return i}};_t.create=b=>{var i;return new _t({checks:[],typeName:fe.ZodString,coerce:(i=b?.coerce)!==null&&i!==void 0?i:!1,...ye(b)})};function jo(b,i){let l=(b.toString().split(".")[1]||"").length,c=(i.toString().split(".")[1]||"").length,a=l>c?l:c,f=parseInt(b.toFixed(a).replace(".","")),p=parseInt(i.toFixed(a).replace(".",""));return f%p/Math.pow(10,a)}var Ot=class b extends be{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(i){if(this._def.coerce&&(i.data=Number(i.data)),this._getType(i)!==oe.number){let f=this._getOrReturnCtx(i);return ie(f,{code:K.invalid_type,expected:oe.number,received:f.parsedType}),he}let c,a=new Ge;for(let f of this._def.checks)f.kind==="int"?Te.isInteger(i.data)||(c=this._getOrReturnCtx(i,c),ie(c,{code:K.invalid_type,expected:"integer",received:"float",message:f.message}),a.dirty()):f.kind==="min"?(f.inclusive?i.data<f.value:i.data<=f.value)&&(c=this._getOrReturnCtx(i,c),ie(c,{code:K.too_small,minimum:f.value,type:"number",inclusive:f.inclusive,exact:!1,message:f.message}),a.dirty()):f.kind==="max"?(f.inclusive?i.data>f.value:i.data>=f.value)&&(c=this._getOrReturnCtx(i,c),ie(c,{code:K.too_big,maximum:f.value,type:"number",inclusive:f.inclusive,exact:!1,message:f.message}),a.dirty()):f.kind==="multipleOf"?jo(i.data,f.value)!==0&&(c=this._getOrReturnCtx(i,c),ie(c,{code:K.not_multiple_of,multipleOf:f.value,message:f.message}),a.dirty()):f.kind==="finite"?Number.isFinite(i.data)||(c=this._getOrReturnCtx(i,c),ie(c,{code:K.not_finite,message:f.message}),a.dirty()):Te.assertNever(f);return{status:a.value,value:i.data}}gte(i,l){return this.setLimit("min",i,!0,ue.toString(l))}gt(i,l){return this.setLimit("min",i,!1,ue.toString(l))}lte(i,l){return this.setLimit("max",i,!0,ue.toString(l))}lt(i,l){return this.setLimit("max",i,!1,ue.toString(l))}setLimit(i,l,c,a){return new b({...this._def,checks:[...this._def.checks,{kind:i,value:l,inclusive:c,message:ue.toString(a)}]})}_addCheck(i){return new b({...this._def,checks:[...this._def.checks,i]})}int(i){return this._addCheck({kind:"int",message:ue.toString(i)})}positive(i){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ue.toString(i)})}negative(i){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ue.toString(i)})}nonpositive(i){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ue.toString(i)})}nonnegative(i){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ue.toString(i)})}multipleOf(i,l){return this._addCheck({kind:"multipleOf",value:i,message:ue.toString(l)})}finite(i){return this._addCheck({kind:"finite",message:ue.toString(i)})}safe(i){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ue.toString(i)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ue.toString(i)})}get minValue(){let i=null;for(let l of this._def.checks)l.kind==="min"&&(i===null||l.value>i)&&(i=l.value);return i}get maxValue(){let i=null;for(let l of this._def.checks)l.kind==="max"&&(i===null||l.value<i)&&(i=l.value);return i}get isInt(){return!!this._def.checks.find(i=>i.kind==="int"||i.kind==="multipleOf"&&Te.isInteger(i.value))}get isFinite(){let i=null,l=null;for(let c of this._def.checks){if(c.kind==="finite"||c.kind==="int"||c.kind==="multipleOf")return!0;c.kind==="min"?(l===null||c.value>l)&&(l=c.value):c.kind==="max"&&(i===null||c.value<i)&&(i=c.value)}return Number.isFinite(l)&&Number.isFinite(i)}};Ot.create=b=>new Ot({checks:[],typeName:fe.ZodNumber,coerce:b?.coerce||!1,...ye(b)});var Et=class b extends be{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(i){if(this._def.coerce&&(i.data=BigInt(i.data)),this._getType(i)!==oe.bigint){let f=this._getOrReturnCtx(i);return ie(f,{code:K.invalid_type,expected:oe.bigint,received:f.parsedType}),he}let c,a=new Ge;for(let f of this._def.checks)f.kind==="min"?(f.inclusive?i.data<f.value:i.data<=f.value)&&(c=this._getOrReturnCtx(i,c),ie(c,{code:K.too_small,type:"bigint",minimum:f.value,inclusive:f.inclusive,message:f.message}),a.dirty()):f.kind==="max"?(f.inclusive?i.data>f.value:i.data>=f.value)&&(c=this._getOrReturnCtx(i,c),ie(c,{code:K.too_big,type:"bigint",maximum:f.value,inclusive:f.inclusive,message:f.message}),a.dirty()):f.kind==="multipleOf"?i.data%f.value!==BigInt(0)&&(c=this._getOrReturnCtx(i,c),ie(c,{code:K.not_multiple_of,multipleOf:f.value,message:f.message}),a.dirty()):Te.assertNever(f);return{status:a.value,value:i.data}}gte(i,l){return this.setLimit("min",i,!0,ue.toString(l))}gt(i,l){return this.setLimit("min",i,!1,ue.toString(l))}lte(i,l){return this.setLimit("max",i,!0,ue.toString(l))}lt(i,l){return this.setLimit("max",i,!1,ue.toString(l))}setLimit(i,l,c,a){return new b({...this._def,checks:[...this._def.checks,{kind:i,value:l,inclusive:c,message:ue.toString(a)}]})}_addCheck(i){return new b({...this._def,checks:[...this._def.checks,i]})}positive(i){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ue.toString(i)})}negative(i){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ue.toString(i)})}nonpositive(i){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ue.toString(i)})}nonnegative(i){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ue.toString(i)})}multipleOf(i,l){return this._addCheck({kind:"multipleOf",value:i,message:ue.toString(l)})}get minValue(){let i=null;for(let l of this._def.checks)l.kind==="min"&&(i===null||l.value>i)&&(i=l.value);return i}get maxValue(){let i=null;for(let l of this._def.checks)l.kind==="max"&&(i===null||l.value<i)&&(i=l.value);return i}};Et.create=b=>{var i;return new Et({checks:[],typeName:fe.ZodBigInt,coerce:(i=b?.coerce)!==null&&i!==void 0?i:!1,...ye(b)})};var Pt=class extends be{_parse(i){if(this._def.coerce&&(i.data=!!i.data),this._getType(i)!==oe.boolean){let c=this._getOrReturnCtx(i);return ie(c,{code:K.invalid_type,expected:oe.boolean,received:c.parsedType}),he}return We(i.data)}};Pt.create=b=>new Pt({typeName:fe.ZodBoolean,coerce:b?.coerce||!1,...ye(b)});var It=class b extends be{_parse(i){if(this._def.coerce&&(i.data=new Date(i.data)),this._getType(i)!==oe.date){let f=this._getOrReturnCtx(i);return ie(f,{code:K.invalid_type,expected:oe.date,received:f.parsedType}),he}if(isNaN(i.data.getTime())){let f=this._getOrReturnCtx(i);return ie(f,{code:K.invalid_date}),he}let c=new Ge,a;for(let f of this._def.checks)f.kind==="min"?i.data.getTime()<f.value&&(a=this._getOrReturnCtx(i,a),ie(a,{code:K.too_small,message:f.message,inclusive:!0,exact:!1,minimum:f.value,type:"date"}),c.dirty()):f.kind==="max"?i.data.getTime()>f.value&&(a=this._getOrReturnCtx(i,a),ie(a,{code:K.too_big,message:f.message,inclusive:!0,exact:!1,maximum:f.value,type:"date"}),c.dirty()):Te.assertNever(f);return{status:c.value,value:new Date(i.data.getTime())}}_addCheck(i){return new b({...this._def,checks:[...this._def.checks,i]})}min(i,l){return this._addCheck({kind:"min",value:i.getTime(),message:ue.toString(l)})}max(i,l){return this._addCheck({kind:"max",value:i.getTime(),message:ue.toString(l)})}get minDate(){let i=null;for(let l of this._def.checks)l.kind==="min"&&(i===null||l.value>i)&&(i=l.value);return i!=null?new Date(i):null}get maxDate(){let i=null;for(let l of this._def.checks)l.kind==="max"&&(i===null||l.value<i)&&(i=l.value);return i!=null?new Date(i):null}};It.create=b=>new It({checks:[],coerce:b?.coerce||!1,typeName:fe.ZodDate,...ye(b)});var Xt=class extends be{_parse(i){if(this._getType(i)!==oe.symbol){let c=this._getOrReturnCtx(i);return ie(c,{code:K.invalid_type,expected:oe.symbol,received:c.parsedType}),he}return We(i.data)}};Xt.create=b=>new Xt({typeName:fe.ZodSymbol,...ye(b)});var Dt=class extends be{_parse(i){if(this._getType(i)!==oe.undefined){let c=this._getOrReturnCtx(i);return ie(c,{code:K.invalid_type,expected:oe.undefined,received:c.parsedType}),he}return We(i.data)}};Dt.create=b=>new Dt({typeName:fe.ZodUndefined,...ye(b)});var kt=class extends be{_parse(i){if(this._getType(i)!==oe.null){let c=this._getOrReturnCtx(i);return ie(c,{code:K.invalid_type,expected:oe.null,received:c.parsedType}),he}return We(i.data)}};kt.create=b=>new kt({typeName:fe.ZodNull,...ye(b)});var Tt=class extends be{constructor(){super(...arguments),this._any=!0}_parse(i){return We(i.data)}};Tt.create=b=>new Tt({typeName:fe.ZodAny,...ye(b)});var ht=class extends be{constructor(){super(...arguments),this._unknown=!0}_parse(i){return We(i.data)}};ht.create=b=>new ht({typeName:fe.ZodUnknown,...ye(b)});var st=class extends be{_parse(i){let l=this._getOrReturnCtx(i);return ie(l,{code:K.invalid_type,expected:oe.never,received:l.parsedType}),he}};st.create=b=>new st({typeName:fe.ZodNever,...ye(b)});var Kt=class extends be{_parse(i){if(this._getType(i)!==oe.undefined){let c=this._getOrReturnCtx(i);return ie(c,{code:K.invalid_type,expected:oe.void,received:c.parsedType}),he}return We(i.data)}};Kt.create=b=>new Kt({typeName:fe.ZodVoid,...ye(b)});var gt=class b extends be{_parse(i){let{ctx:l,status:c}=this._processInputParams(i),a=this._def;if(l.parsedType!==oe.array)return ie(l,{code:K.invalid_type,expected:oe.array,received:l.parsedType}),he;if(a.exactLength!==null){let p=l.data.length>a.exactLength.value,d=l.data.length<a.exactLength.value;(p||d)&&(ie(l,{code:p?K.too_big:K.too_small,minimum:d?a.exactLength.value:void 0,maximum:p?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),c.dirty())}if(a.minLength!==null&&l.data.length<a.minLength.value&&(ie(l,{code:K.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),c.dirty()),a.maxLength!==null&&l.data.length>a.maxLength.value&&(ie(l,{code:K.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),c.dirty()),l.common.async)return Promise.all([...l.data].map((p,d)=>a.type._parseAsync(new it(l,p,l.path,d)))).then(p=>Ge.mergeArray(c,p));let f=[...l.data].map((p,d)=>a.type._parseSync(new it(l,p,l.path,d)));return Ge.mergeArray(c,f)}get element(){return this._def.type}min(i,l){return new b({...this._def,minLength:{value:i,message:ue.toString(l)}})}max(i,l){return new b({...this._def,maxLength:{value:i,message:ue.toString(l)}})}length(i,l){return new b({...this._def,exactLength:{value:i,message:ue.toString(l)}})}nonempty(i){return this.min(1,i)}};gt.create=(b,i)=>new gt({type:b,minLength:null,maxLength:null,exactLength:null,typeName:fe.ZodArray,...ye(i)});function qt(b){if(b instanceof Xe){let i={};for(let l in b.shape){let c=b.shape[l];i[l]=rt.create(qt(c))}return new Xe({...b._def,shape:()=>i})}else return b instanceof gt?new gt({...b._def,type:qt(b.element)}):b instanceof rt?rt.create(qt(b.unwrap())):b instanceof ct?ct.create(qt(b.unwrap())):b instanceof lt?lt.create(b.items.map(i=>qt(i))):b}var Xe=class b extends be{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let i=this._def.shape(),l=Te.objectKeys(i);return this._cached={shape:i,keys:l}}_parse(i){if(this._getType(i)!==oe.object){let u=this._getOrReturnCtx(i);return ie(u,{code:K.invalid_type,expected:oe.object,received:u.parsedType}),he}let{status:c,ctx:a}=this._processInputParams(i),{shape:f,keys:p}=this._getCached(),d=[];if(!(this._def.catchall instanceof st&&this._def.unknownKeys==="strip"))for(let u in a.data)p.includes(u)||d.push(u);let h=[];for(let u of p){let o=f[u],n=a.data[u];h.push({key:{status:"valid",value:u},value:o._parse(new it(a,n,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof st){let u=this._def.unknownKeys;if(u==="passthrough")for(let o of d)h.push({key:{status:"valid",value:o},value:{status:"valid",value:a.data[o]}});else if(u==="strict")d.length>0&&(ie(a,{code:K.unrecognized_keys,keys:d}),c.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let o of d){let n=a.data[o];h.push({key:{status:"valid",value:o},value:u._parse(new it(a,n,a.path,o)),alwaysSet:o in a.data})}}return a.common.async?Promise.resolve().then(async()=>{let u=[];for(let o of h){let n=await o.key,e=await o.value;u.push({key:n,value:e,alwaysSet:o.alwaysSet})}return u}).then(u=>Ge.mergeObjectSync(c,u)):Ge.mergeObjectSync(c,h)}get shape(){return this._def.shape()}strict(i){return ue.errToObj,new b({...this._def,unknownKeys:"strict",...i!==void 0?{errorMap:(l,c)=>{var a,f,p,d;let h=(p=(f=(a=this._def).errorMap)===null||f===void 0?void 0:f.call(a,l,c).message)!==null&&p!==void 0?p:c.defaultError;return l.code==="unrecognized_keys"?{message:(d=ue.errToObj(i).message)!==null&&d!==void 0?d:h}:{message:h}}}:{}})}strip(){return new b({...this._def,unknownKeys:"strip"})}passthrough(){return new b({...this._def,unknownKeys:"passthrough"})}extend(i){return new b({...this._def,shape:()=>({...this._def.shape(),...i})})}merge(i){return new b({unknownKeys:i._def.unknownKeys,catchall:i._def.catchall,shape:()=>({...this._def.shape(),...i._def.shape()}),typeName:fe.ZodObject})}setKey(i,l){return this.augment({[i]:l})}catchall(i){return new b({...this._def,catchall:i})}pick(i){let l={};return Te.objectKeys(i).forEach(c=>{i[c]&&this.shape[c]&&(l[c]=this.shape[c])}),new b({...this._def,shape:()=>l})}omit(i){let l={};return Te.objectKeys(this.shape).forEach(c=>{i[c]||(l[c]=this.shape[c])}),new b({...this._def,shape:()=>l})}deepPartial(){return qt(this)}partial(i){let l={};return Te.objectKeys(this.shape).forEach(c=>{let a=this.shape[c];i&&!i[c]?l[c]=a:l[c]=a.optional()}),new b({...this._def,shape:()=>l})}required(i){let l={};return Te.objectKeys(this.shape).forEach(c=>{if(i&&!i[c])l[c]=this.shape[c];else{let f=this.shape[c];for(;f instanceof rt;)f=f._def.innerType;l[c]=f}}),new b({...this._def,shape:()=>l})}keyof(){return Ai(Te.objectKeys(this.shape))}};Xe.create=(b,i)=>new Xe({shape:()=>b,unknownKeys:"strip",catchall:st.create(),typeName:fe.ZodObject,...ye(i)});Xe.strictCreate=(b,i)=>new Xe({shape:()=>b,unknownKeys:"strict",catchall:st.create(),typeName:fe.ZodObject,...ye(i)});Xe.lazycreate=(b,i)=>new Xe({shape:b,unknownKeys:"strip",catchall:st.create(),typeName:fe.ZodObject,...ye(i)});var Ct=class extends be{_parse(i){let{ctx:l}=this._processInputParams(i),c=this._def.options;function a(f){for(let d of f)if(d.result.status==="valid")return d.result;for(let d of f)if(d.result.status==="dirty")return l.common.issues.push(...d.ctx.common.issues),d.result;let p=f.map(d=>new Qe(d.ctx.common.issues));return ie(l,{code:K.invalid_union,unionErrors:p}),he}if(l.common.async)return Promise.all(c.map(async f=>{let p={...l,common:{...l.common,issues:[]},parent:null};return{result:await f._parseAsync({data:l.data,path:l.path,parent:p}),ctx:p}})).then(a);{let f,p=[];for(let h of c){let u={...l,common:{...l.common,issues:[]},parent:null},o=h._parseSync({data:l.data,path:l.path,parent:u});if(o.status==="valid")return o;o.status==="dirty"&&!f&&(f={result:o,ctx:u}),u.common.issues.length&&p.push(u.common.issues)}if(f)return l.common.issues.push(...f.ctx.common.issues),f.result;let d=p.map(h=>new Qe(h));return ie(l,{code:K.invalid_union,unionErrors:d}),he}}get options(){return this._def.options}};Ct.create=(b,i)=>new Ct({options:b,typeName:fe.ZodUnion,...ye(i)});var ft=b=>b instanceof Nt?ft(b.schema):b instanceof et?ft(b.innerType()):b instanceof Rt?[b.value]:b instanceof $t?b.options:b instanceof Lt?Te.objectValues(b.enum):b instanceof Ft?ft(b._def.innerType):b instanceof Dt?[void 0]:b instanceof kt?[null]:b instanceof rt?[void 0,...ft(b.unwrap())]:b instanceof ct?[null,...ft(b.unwrap())]:b instanceof yn||b instanceof jt?ft(b.unwrap()):b instanceof Ut?ft(b._def.innerType):[],Nn=class b extends be{_parse(i){let{ctx:l}=this._processInputParams(i);if(l.parsedType!==oe.object)return ie(l,{code:K.invalid_type,expected:oe.object,received:l.parsedType}),he;let c=this.discriminator,a=l.data[c],f=this.optionsMap.get(a);return f?l.common.async?f._parseAsync({data:l.data,path:l.path,parent:l}):f._parseSync({data:l.data,path:l.path,parent:l}):(ie(l,{code:K.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[c]}),he)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(i,l,c){let a=new Map;for(let f of l){let p=ft(f.shape[i]);if(!p.length)throw new Error(`A discriminator value for key \`${i}\` could not be extracted from all schema options`);for(let d of p){if(a.has(d))throw new Error(`Discriminator property ${String(i)} has duplicate value ${String(d)}`);a.set(d,f)}}return new b({typeName:fe.ZodDiscriminatedUnion,discriminator:i,options:l,optionsMap:a,...ye(c)})}};function Sr(b,i){let l=vt(b),c=vt(i);if(b===i)return{valid:!0,data:b};if(l===oe.object&&c===oe.object){let a=Te.objectKeys(i),f=Te.objectKeys(b).filter(d=>a.indexOf(d)!==-1),p={...b,...i};for(let d of f){let h=Sr(b[d],i[d]);if(!h.valid)return{valid:!1};p[d]=h.data}return{valid:!0,data:p}}else if(l===oe.array&&c===oe.array){if(b.length!==i.length)return{valid:!1};let a=[];for(let f=0;f<b.length;f++){let p=b[f],d=i[f],h=Sr(p,d);if(!h.valid)return{valid:!1};a.push(h.data)}return{valid:!0,data:a}}else return l===oe.date&&c===oe.date&&+b==+i?{valid:!0,data:b}:{valid:!1}}var Mt=class extends be{_parse(i){let{status:l,ctx:c}=this._processInputParams(i),a=(f,p)=>{if(wr(f)||wr(p))return he;let d=Sr(f.value,p.value);return d.valid?((xr(f)||xr(p))&&l.dirty(),{status:l.value,value:d.data}):(ie(c,{code:K.invalid_intersection_types}),he)};return c.common.async?Promise.all([this._def.left._parseAsync({data:c.data,path:c.path,parent:c}),this._def.right._parseAsync({data:c.data,path:c.path,parent:c})]).then(([f,p])=>a(f,p)):a(this._def.left._parseSync({data:c.data,path:c.path,parent:c}),this._def.right._parseSync({data:c.data,path:c.path,parent:c}))}};Mt.create=(b,i,l)=>new Mt({left:b,right:i,typeName:fe.ZodIntersection,...ye(l)});var lt=class b extends be{_parse(i){let{status:l,ctx:c}=this._processInputParams(i);if(c.parsedType!==oe.array)return ie(c,{code:K.invalid_type,expected:oe.array,received:c.parsedType}),he;if(c.data.length<this._def.items.length)return ie(c,{code:K.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),he;!this._def.rest&&c.data.length>this._def.items.length&&(ie(c,{code:K.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),l.dirty());let f=[...c.data].map((p,d)=>{let h=this._def.items[d]||this._def.rest;return h?h._parse(new it(c,p,c.path,d)):null}).filter(p=>!!p);return c.common.async?Promise.all(f).then(p=>Ge.mergeArray(l,p)):Ge.mergeArray(l,f)}get items(){return this._def.items}rest(i){return new b({...this._def,rest:i})}};lt.create=(b,i)=>{if(!Array.isArray(b))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new lt({items:b,typeName:fe.ZodTuple,rest:null,...ye(i)})};var Rn=class b extends be{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(i){let{status:l,ctx:c}=this._processInputParams(i);if(c.parsedType!==oe.object)return ie(c,{code:K.invalid_type,expected:oe.object,received:c.parsedType}),he;let a=[],f=this._def.keyType,p=this._def.valueType;for(let d in c.data)a.push({key:f._parse(new it(c,d,c.path,d)),value:p._parse(new it(c,c.data[d],c.path,d)),alwaysSet:d in c.data});return c.common.async?Ge.mergeObjectAsync(l,a):Ge.mergeObjectSync(l,a)}get element(){return this._def.valueType}static create(i,l,c){return l instanceof be?new b({keyType:i,valueType:l,typeName:fe.ZodRecord,...ye(c)}):new b({keyType:_t.create(),valueType:i,typeName:fe.ZodRecord,...ye(l)})}},Jt=class extends be{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(i){let{status:l,ctx:c}=this._processInputParams(i);if(c.parsedType!==oe.map)return ie(c,{code:K.invalid_type,expected:oe.map,received:c.parsedType}),he;let a=this._def.keyType,f=this._def.valueType,p=[...c.data.entries()].map(([d,h],u)=>({key:a._parse(new it(c,d,c.path,[u,"key"])),value:f._parse(new it(c,h,c.path,[u,"value"]))}));if(c.common.async){let d=new Map;return Promise.resolve().then(async()=>{for(let h of p){let u=await h.key,o=await h.value;if(u.status==="aborted"||o.status==="aborted")return he;(u.status==="dirty"||o.status==="dirty")&&l.dirty(),d.set(u.value,o.value)}return{status:l.value,value:d}})}else{let d=new Map;for(let h of p){let u=h.key,o=h.value;if(u.status==="aborted"||o.status==="aborted")return he;(u.status==="dirty"||o.status==="dirty")&&l.dirty(),d.set(u.value,o.value)}return{status:l.value,value:d}}}};Jt.create=(b,i,l)=>new Jt({valueType:i,keyType:b,typeName:fe.ZodMap,...ye(l)});var Qt=class b extends be{_parse(i){let{status:l,ctx:c}=this._processInputParams(i);if(c.parsedType!==oe.set)return ie(c,{code:K.invalid_type,expected:oe.set,received:c.parsedType}),he;let a=this._def;a.minSize!==null&&c.data.size<a.minSize.value&&(ie(c,{code:K.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),l.dirty()),a.maxSize!==null&&c.data.size>a.maxSize.value&&(ie(c,{code:K.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),l.dirty());let f=this._def.valueType;function p(h){let u=new Set;for(let o of h){if(o.status==="aborted")return he;o.status==="dirty"&&l.dirty(),u.add(o.value)}return{status:l.value,value:u}}let d=[...c.data.values()].map((h,u)=>f._parse(new it(c,h,c.path,u)));return c.common.async?Promise.all(d).then(h=>p(h)):p(d)}min(i,l){return new b({...this._def,minSize:{value:i,message:ue.toString(l)}})}max(i,l){return new b({...this._def,maxSize:{value:i,message:ue.toString(l)}})}size(i,l){return this.min(i,l).max(i,l)}nonempty(i){return this.min(1,i)}};Qt.create=(b,i)=>new Qt({valueType:b,minSize:null,maxSize:null,typeName:fe.ZodSet,...ye(i)});var $n=class b extends be{constructor(){super(...arguments),this.validate=this.implement}_parse(i){let{ctx:l}=this._processInputParams(i);if(l.parsedType!==oe.function)return ie(l,{code:K.invalid_type,expected:oe.function,received:l.parsedType}),he;function c(d,h){return Cn({data:d,path:l.path,errorMaps:[l.common.contextualErrorMap,l.schemaErrorMap,kn(),Zt].filter(u=>!!u),issueData:{code:K.invalid_arguments,argumentsError:h}})}function a(d,h){return Cn({data:d,path:l.path,errorMaps:[l.common.contextualErrorMap,l.schemaErrorMap,kn(),Zt].filter(u=>!!u),issueData:{code:K.invalid_return_type,returnTypeError:h}})}let f={errorMap:l.common.contextualErrorMap},p=l.data;if(this._def.returns instanceof wt){let d=this;return We(async function(...h){let u=new Qe([]),o=await d._def.args.parseAsync(h,f).catch(t=>{throw u.addIssue(c(h,t)),u}),n=await Reflect.apply(p,this,o);return await d._def.returns._def.type.parseAsync(n,f).catch(t=>{throw u.addIssue(a(n,t)),u})})}else{let d=this;return We(function(...h){let u=d._def.args.safeParse(h,f);if(!u.success)throw new Qe([c(h,u.error)]);let o=Reflect.apply(p,this,u.data),n=d._def.returns.safeParse(o,f);if(!n.success)throw new Qe([a(o,n.error)]);return n.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...i){return new b({...this._def,args:lt.create(i).rest(ht.create())})}returns(i){return new b({...this._def,returns:i})}implement(i){return this.parse(i)}strictImplement(i){return this.parse(i)}static create(i,l,c){return new b({args:i||lt.create([]).rest(ht.create()),returns:l||ht.create(),typeName:fe.ZodFunction,...ye(c)})}},Nt=class extends be{get schema(){return this._def.getter()}_parse(i){let{ctx:l}=this._processInputParams(i);return this._def.getter()._parse({data:l.data,path:l.path,parent:l})}};Nt.create=(b,i)=>new Nt({getter:b,typeName:fe.ZodLazy,...ye(i)});var Rt=class extends be{_parse(i){if(i.data!==this._def.value){let l=this._getOrReturnCtx(i);return ie(l,{received:l.data,code:K.invalid_literal,expected:this._def.value}),he}return{status:"valid",value:i.data}}get value(){return this._def.value}};Rt.create=(b,i)=>new Rt({value:b,typeName:fe.ZodLiteral,...ye(i)});function Ai(b,i){return new $t({values:b,typeName:fe.ZodEnum,...ye(i)})}var $t=class b extends be{constructor(){super(...arguments),fn.set(this,void 0)}_parse(i){if(typeof i.data!="string"){let l=this._getOrReturnCtx(i),c=this._def.values;return ie(l,{expected:Te.joinValues(c),received:l.parsedType,code:K.invalid_type}),he}if(Mn(this,fn,"f")||Ti(this,fn,new Set(this._def.values),"f"),!Mn(this,fn,"f").has(i.data)){let l=this._getOrReturnCtx(i),c=this._def.values;return ie(l,{received:l.data,code:K.invalid_enum_value,options:c}),he}return We(i.data)}get options(){return this._def.values}get enum(){let i={};for(let l of this._def.values)i[l]=l;return i}get Values(){let i={};for(let l of this._def.values)i[l]=l;return i}get Enum(){let i={};for(let l of this._def.values)i[l]=l;return i}extract(i,l=this._def){return b.create(i,{...this._def,...l})}exclude(i,l=this._def){return b.create(this.options.filter(c=>!i.includes(c)),{...this._def,...l})}};fn=new WeakMap;$t.create=Ai;var Lt=class extends be{constructor(){super(...arguments),hn.set(this,void 0)}_parse(i){let l=Te.getValidEnumValues(this._def.values),c=this._getOrReturnCtx(i);if(c.parsedType!==oe.string&&c.parsedType!==oe.number){let a=Te.objectValues(l);return ie(c,{expected:Te.joinValues(a),received:c.parsedType,code:K.invalid_type}),he}if(Mn(this,hn,"f")||Ti(this,hn,new Set(Te.getValidEnumValues(this._def.values)),"f"),!Mn(this,hn,"f").has(i.data)){let a=Te.objectValues(l);return ie(c,{received:c.data,code:K.invalid_enum_value,options:a}),he}return We(i.data)}get enum(){return this._def.values}};hn=new WeakMap;Lt.create=(b,i)=>new Lt({values:b,typeName:fe.ZodNativeEnum,...ye(i)});var wt=class extends be{unwrap(){return this._def.type}_parse(i){let{ctx:l}=this._processInputParams(i);if(l.parsedType!==oe.promise&&l.common.async===!1)return ie(l,{code:K.invalid_type,expected:oe.promise,received:l.parsedType}),he;let c=l.parsedType===oe.promise?l.data:Promise.resolve(l.data);return We(c.then(a=>this._def.type.parseAsync(a,{path:l.path,errorMap:l.common.contextualErrorMap})))}};wt.create=(b,i)=>new wt({type:b,typeName:fe.ZodPromise,...ye(i)});var et=class extends be{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===fe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(i){let{status:l,ctx:c}=this._processInputParams(i),a=this._def.effect||null,f={addIssue:p=>{ie(c,p),p.fatal?l.abort():l.dirty()},get path(){return c.path}};if(f.addIssue=f.addIssue.bind(f),a.type==="preprocess"){let p=a.transform(c.data,f);if(c.common.async)return Promise.resolve(p).then(async d=>{if(l.value==="aborted")return he;let h=await this._def.schema._parseAsync({data:d,path:c.path,parent:c});return h.status==="aborted"?he:h.status==="dirty"||l.value==="dirty"?Yt(h.value):h});{if(l.value==="aborted")return he;let d=this._def.schema._parseSync({data:p,path:c.path,parent:c});return d.status==="aborted"?he:d.status==="dirty"||l.value==="dirty"?Yt(d.value):d}}if(a.type==="refinement"){let p=d=>{let h=a.refinement(d,f);if(c.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return d};if(c.common.async===!1){let d=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});return d.status==="aborted"?he:(d.status==="dirty"&&l.dirty(),p(d.value),{status:l.value,value:d.value})}else return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(d=>d.status==="aborted"?he:(d.status==="dirty"&&l.dirty(),p(d.value).then(()=>({status:l.value,value:d.value}))))}if(a.type==="transform")if(c.common.async===!1){let p=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});if(!gn(p))return p;let d=a.transform(p.value,f);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:l.value,value:d}}else return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(p=>gn(p)?Promise.resolve(a.transform(p.value,f)).then(d=>({status:l.value,value:d})):p);Te.assertNever(a)}};et.create=(b,i,l)=>new et({schema:b,typeName:fe.ZodEffects,effect:i,...ye(l)});et.createWithPreprocess=(b,i,l)=>new et({schema:i,effect:{type:"preprocess",transform:b},typeName:fe.ZodEffects,...ye(l)});var rt=class extends be{_parse(i){return this._getType(i)===oe.undefined?We(void 0):this._def.innerType._parse(i)}unwrap(){return this._def.innerType}};rt.create=(b,i)=>new rt({innerType:b,typeName:fe.ZodOptional,...ye(i)});var ct=class extends be{_parse(i){return this._getType(i)===oe.null?We(null):this._def.innerType._parse(i)}unwrap(){return this._def.innerType}};ct.create=(b,i)=>new ct({innerType:b,typeName:fe.ZodNullable,...ye(i)});var Ft=class extends be{_parse(i){let{ctx:l}=this._processInputParams(i),c=l.data;return l.parsedType===oe.undefined&&(c=this._def.defaultValue()),this._def.innerType._parse({data:c,path:l.path,parent:l})}removeDefault(){return this._def.innerType}};Ft.create=(b,i)=>new Ft({innerType:b,typeName:fe.ZodDefault,defaultValue:typeof i.default=="function"?i.default:()=>i.default,...ye(i)});var Ut=class extends be{_parse(i){let{ctx:l}=this._processInputParams(i),c={...l,common:{...l.common,issues:[]}},a=this._def.innerType._parse({data:c.data,path:c.path,parent:{...c}});return mn(a)?a.then(f=>({status:"valid",value:f.status==="valid"?f.value:this._def.catchValue({get error(){return new Qe(c.common.issues)},input:c.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Qe(c.common.issues)},input:c.data})}}removeCatch(){return this._def.innerType}};Ut.create=(b,i)=>new Ut({innerType:b,typeName:fe.ZodCatch,catchValue:typeof i.catch=="function"?i.catch:()=>i.catch,...ye(i)});var en=class extends be{_parse(i){if(this._getType(i)!==oe.nan){let c=this._getOrReturnCtx(i);return ie(c,{code:K.invalid_type,expected:oe.nan,received:c.parsedType}),he}return{status:"valid",value:i.data}}};en.create=b=>new en({typeName:fe.ZodNaN,...ye(b)});var Bo=Symbol("zod_brand"),yn=class extends be{_parse(i){let{ctx:l}=this._processInputParams(i),c=l.data;return this._def.type._parse({data:c,path:l.path,parent:l})}unwrap(){return this._def.type}},bn=class b extends be{_parse(i){let{status:l,ctx:c}=this._processInputParams(i);if(c.common.async)return(async()=>{let f=await this._def.in._parseAsync({data:c.data,path:c.path,parent:c});return f.status==="aborted"?he:f.status==="dirty"?(l.dirty(),Yt(f.value)):this._def.out._parseAsync({data:f.value,path:c.path,parent:c})})();{let a=this._def.in._parseSync({data:c.data,path:c.path,parent:c});return a.status==="aborted"?he:a.status==="dirty"?(l.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:c.path,parent:c})}}static create(i,l){return new b({in:i,out:l,typeName:fe.ZodPipeline})}},jt=class extends be{_parse(i){let l=this._def.innerType._parse(i),c=a=>(gn(a)&&(a.value=Object.freeze(a.value)),a);return mn(l)?l.then(a=>c(a)):c(l)}unwrap(){return this._def.innerType}};jt.create=(b,i)=>new jt({innerType:b,typeName:fe.ZodReadonly,...ye(i)});function Oi(b,i={},l){return b?Tt.create().superRefine((c,a)=>{var f,p;if(!b(c)){let d=typeof i=="function"?i(c):typeof i=="string"?{message:i}:i,h=(p=(f=d.fatal)!==null&&f!==void 0?f:l)!==null&&p!==void 0?p:!0,u=typeof d=="string"?{message:d}:d;a.addIssue({code:"custom",...u,fatal:h})}}):Tt.create()}var zo={object:Xe.lazycreate},fe;(function(b){b.ZodString="ZodString",b.ZodNumber="ZodNumber",b.ZodNaN="ZodNaN",b.ZodBigInt="ZodBigInt",b.ZodBoolean="ZodBoolean",b.ZodDate="ZodDate",b.ZodSymbol="ZodSymbol",b.ZodUndefined="ZodUndefined",b.ZodNull="ZodNull",b.ZodAny="ZodAny",b.ZodUnknown="ZodUnknown",b.ZodNever="ZodNever",b.ZodVoid="ZodVoid",b.ZodArray="ZodArray",b.ZodObject="ZodObject",b.ZodUnion="ZodUnion",b.ZodDiscriminatedUnion="ZodDiscriminatedUnion",b.ZodIntersection="ZodIntersection",b.ZodTuple="ZodTuple",b.ZodRecord="ZodRecord",b.ZodMap="ZodMap",b.ZodSet="ZodSet",b.ZodFunction="ZodFunction",b.ZodLazy="ZodLazy",b.ZodLiteral="ZodLiteral",b.ZodEnum="ZodEnum",b.ZodEffects="ZodEffects",b.ZodNativeEnum="ZodNativeEnum",b.ZodOptional="ZodOptional",b.ZodNullable="ZodNullable",b.ZodDefault="ZodDefault",b.ZodCatch="ZodCatch",b.ZodPromise="ZodPromise",b.ZodBranded="ZodBranded",b.ZodPipeline="ZodPipeline",b.ZodReadonly="ZodReadonly"})(fe||(fe={}));var Vo=(b,i={message:`Input not instance of ${b.name}`})=>Oi(l=>l instanceof b,i),Ei=_t.create,Pi=Ot.create,Go=en.create,Wo=Et.create,Ii=Pt.create,Ho=It.create,qo=Xt.create,Yo=Dt.create,Zo=kt.create,Xo=Tt.create,Ko=ht.create,Jo=st.create,Qo=Kt.create,es=gt.create,ts=Xe.create,ns=Xe.strictCreate,rs=Ct.create,is=Nn.create,os=Mt.create,ss=lt.create,as=Rn.create,us=Jt.create,ls=Qt.create,cs=$n.create,ds=Nt.create,ps=Rt.create,fs=$t.create,hs=Lt.create,gs=wt.create,vi=et.create,ms=rt.create,ys=ct.create,bs=et.createWithPreprocess,vs=bn.create,_s=()=>Ei().optional(),Ts=()=>Pi().optional(),ws=()=>Ii().optional(),xs={string:b=>_t.create({...b,coerce:!0}),number:b=>Ot.create({...b,coerce:!0}),boolean:b=>Pt.create({...b,coerce:!0}),bigint:b=>Et.create({...b,coerce:!0}),date:b=>It.create({...b,coerce:!0})},Ss=he,v=Object.freeze({__proto__:null,defaultErrorMap:Zt,setErrorMap:So,getErrorMap:kn,makeIssue:Cn,EMPTY_PATH:Ao,addIssueToContext:ie,ParseStatus:Ge,INVALID:he,DIRTY:Yt,OK:We,isAborted:wr,isDirty:xr,isValid:gn,isAsync:mn,get util(){return Te},get objectUtil(){return Tr},ZodParsedType:oe,getParsedType:vt,ZodType:be,datetimeRegex:Si,ZodString:_t,ZodNumber:Ot,ZodBigInt:Et,ZodBoolean:Pt,ZodDate:It,ZodSymbol:Xt,ZodUndefined:Dt,ZodNull:kt,ZodAny:Tt,ZodUnknown:ht,ZodNever:st,ZodVoid:Kt,ZodArray:gt,ZodObject:Xe,ZodUnion:Ct,ZodDiscriminatedUnion:Nn,ZodIntersection:Mt,ZodTuple:lt,ZodRecord:Rn,ZodMap:Jt,ZodSet:Qt,ZodFunction:$n,ZodLazy:Nt,ZodLiteral:Rt,ZodEnum:$t,ZodNativeEnum:Lt,ZodPromise:wt,ZodEffects:et,ZodTransformer:et,ZodOptional:rt,ZodNullable:ct,ZodDefault:Ft,ZodCatch:Ut,ZodNaN:en,BRAND:Bo,ZodBranded:yn,ZodPipeline:bn,ZodReadonly:jt,custom:Oi,Schema:be,ZodSchema:be,late:zo,get ZodFirstPartyTypeKind(){return fe},coerce:xs,any:Xo,array:es,bigint:Wo,boolean:Ii,date:Ho,discriminatedUnion:is,effect:vi,enum:fs,function:cs,instanceof:Vo,intersection:os,lazy:ds,literal:ps,map:us,nan:Go,nativeEnum:hs,never:Jo,null:Zo,nullable:ys,number:Pi,object:ts,oboolean:ws,onumber:Ts,optional:ms,ostring:_s,pipeline:vs,preprocess:bs,promise:gs,record:as,set:ls,strictObject:ns,string:Ei,symbol:qo,transformer:vi,tuple:ss,undefined:Yo,union:rs,unknown:Ko,void:Qo,NEVER:Ss,ZodIssueCode:K,quotelessJson:xo,ZodError:Qe});function Ln(b=""){return{sileroVad:`${b}/silero_vad.onnx`,wasm:{"ort-wasm.wasm":`${b}/ort/ort-wasm.wasm`,"ort-wasm-simd.wasm":`${b}/ort/ort-wasm-simd.wasm`,"ort-wasm-threaded.wasm":`${b}/ort/ort-wasm-threaded.wasm`,"ort-wasm-simd-threaded.wasm":`${b}/ort/ort-wasm-simd-threaded.wasm`}}}var As=v.enum(["production","staging","localhost"]).parse("production"),Os=v.enum(["playht","playai"]).parse("playai"),tn=Os==="playht",tt={production:{PLAY_AI_EMBED_BASE_URL:tn?"https://app.play.ht":"https://play.ai",CONVERSATION_WEBSOCKET_SERVER_URL:tn?"wss://api.app.play.ht":"wss://api.play.ai",CONVERSATION_ASSETS:Ln(tn?"https://app.play.ht":"https://play.ai")},staging:{PLAY_AI_EMBED_BASE_URL:tn?"https://staging.app.play.ht":"https://staging.play.ai",CONVERSATION_WEBSOCKET_SERVER_URL:tn?"wss://staging.api.app.play.ht":"wss://staging.api.play.ai",CONVERSATION_ASSETS:Ln(tn?"https://staging.app.play.ht":"https://staging.play.ai")},localhost:{PLAY_AI_EMBED_BASE_URL:"http://localhost:4204",CONVERSATION_WEBSOCKET_SERVER_URL:"ws://localhost:4400",CONVERSATION_ASSETS:Ln("http://localhost:4204")}}[As];var Di="play-ai-embed",Es=2e4;function Ci(b,i={}){try{let o=function(g){if(!u){console.error("[PlayAI Embed] No iframe found, cannot toggle minimize state");return}ki(u,{type:"setOrToggleMinimized",minimize:g})},n=function(g,m){let y=Ps(g,m);if(y)return Is(_=>{if(_.type==="init")return e(y,_,m.events);if(_.type==="resize")return t(y,_);if(_.type==="navigate")return r(_);if(_.type==="customEvent")return s(_)}),setTimeout(()=>{h||(y.remove(),console.error("[PlayAI Embed] An unexpected error occurred while initializing web embed."))},Es),y},e=function(g,m,y=[]){let{configParams:_}=m;g.style.bottom=`${_.screenBottomSpacing}px`,_.screenPosition==="center"?(g.style.left="50%",g.style.transform="translateX(-50%)"):g.style[_.screenPosition]=`${_.screenSideSpacing}px`,g.style.opacity="1",h=!0,ki(g,{type:"extendConversationSetup",events:y})},t=function(g,m){g.style.width=`${m.width}px`,g.style.height=`${m.height}px`},r=function({pageDefinition:g}){try{let m=JSON.parse(g).url;window.location.origin===tt.PLAY_AI_EMBED_BASE_URL&&(m=`${tt.PLAY_AI_EMBED_BASE_URL}/embed/talk/preview?websiteUrl=${encodeURIComponent(m)}&webEmbedId=${b}`),m!==window.location.href&&(window.location.href=m)}catch(m){console.error("Error while trying to navigate.",m)}},s=function({name:g,data:m}){i.onEvent?.({name:g,data:m})};var l=o,c=n,a=e,f=t,p=r,d=s;let h=!1,u=n(b,i);return{setOrToggleMinimized:o}}catch(h){console.error(h)}}function Ps(b,i){let l=document.getElementById(Di);if(l)return l;let c=new URLSearchParams({origin:encodeURIComponent(window.location.origin),currentUrl:encodeURIComponent(window.location.href),maxWidth:`${window.innerWidth}px`,maxHeight:`${window.innerHeight}px`});i.customGreeting&&c.append("customGreeting",i.customGreeting),i.prompt&&c.append("prompt",i.prompt),console.log("OPTIONS",JSON.stringify(i)),i.events&&i.events.length>0&&(console.log("EVENTS",JSON.stringify(i.events)),c.append("events",encodeURIComponent(JSON.stringify(i.events))));let a=`${tt.PLAY_AI_EMBED_BASE_URL}/embed/talk/${b}?${c.toString()}`,f=document.createElement("iframe");return f.id=Di,f.src=a,f.allow="microphone",f.style.opacity="0",f.style.border="none",f.style.zIndex="9999",f.style.height="0",f.style.width="0",f.style.maxWidth="100vw",f.style.position="fixed",f.style.bottom="0",document.body.appendChild(f),f}function Is(b){window.addEventListener("message",i=>{if(i.origin===tt.PLAY_AI_EMBED_BASE_URL)return b(i.data)})}function ki(b,i){b.contentWindow?.postMessage(i,tt.PLAY_AI_EMBED_BASE_URL)}var Re={stringId:b=>v.string().min(1).brand(b),brandedUrl:b=>v.string().url().min(10).brand(b),booleanString:()=>v.enum(["true","false"]).optional().transform(b=>b==="true"),isNonEmptyArray:b=>b.length>0,date:()=>v.preprocess(b=>{if(typeof b=="string"||typeof b=="number"||b instanceof Date){let i=new Date(b);if(!isNaN(i.getTime()))return i}return null},v.date()),isoDateString:()=>v.string().refine(b=>{let i=Date.parse(b);return!Number.isNaN(i)},{message:"Must be a valid date string"}).transform(b=>{if(/\d{4}-\d{2}-\d{2}$/.test(b))return new Date(`${b}T00:00:00Z`).toISOString();if(/Z|\d{2}:\d{2}$/.test(b))return new Date(b).toISOString();{let i=new Date(b);return new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())).toISOString()}})};var Mi=Re.stringId("CustomerId");var dt=Re.stringId("UserId"),Ds=v.string().brand("UserSecretKey"),ks=v.number().int().positive().brand("RateLimitMaxRPM");var Cs=v.object({secretKeys:v.record(Ds,v.boolean()),turboPropInferenceAddress:v.string().optional(),leaseCustomExpirationSeconds:v.number().int().positive().optional(),rateLimit:v.object({max:ks.optional(),charMax:v.number().int().positive().optional()}).optional()}),Ya=v.object({id:dt,isSuper:v.boolean().optional(),isPlayAIStaff:v.boolean().optional(),email:v.string().email(),name:v.string().nullish(),image:v.string().nullish(),apiData:Cs.optional(),stripeCustomerId:Mi.nullish(),createdAnAgent:v.boolean().optional(),is_pro:v.boolean().optional(),emailVerified:v.boolean().optional()});var Ni=Re.stringId("CustomEventId"),vn=v.object({description:v.string().optional(),descriptionPlaceholder:v.string().optional()}),Ri=v.object({type:v.enum(["number","string","boolean"])}).merge(vn),$i=v.object({type:v.literal("enum"),values:v.array(v.string()).nonempty()}).merge(vn),Li=v.object({type:v.enum(["const-number","const-string","const-boolean"]),value:v.string()}).merge(vn),Fi=v.discriminatedUnion("type",[Ri,$i,Li]),Ui=v.object({type:v.literal("object"),properties:v.record(v.string(),Fi)}).merge(vn),Ms=v.object({type:v.literal("array"),items:v.union([Fi,Ui])}).merge(vn),ji=v.discriminatedUnion("type",[Ri,$i,Li,Ui,Ms]),Ja=v.object({id:Ni,name:v.string(),when:v.string(),data:v.record(v.string(),ji).nullish()}),Qa=v.object({id:Ni,name:v.string(),when:v.string(),componentCode:v.string(),props:v.record(v.string(),ji).nullish()}),Bi=v.object({name:v.string(),data:v.union([v.string(),v.record(v.string(),v.union([v.string(),v.number(),v.boolean(),v.record(v.string(),v.unknown())]))])}),zi=v.object({componentCode:v.string(),props:v.record(v.string(),v.union([v.string(),v.number(),v.boolean(),v.record(v.string(),v.unknown()),v.array(v.record(v.string(),v.unknown()))]))});var Vi="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var we=(b=21)=>{let i="",l=crypto.getRandomValues(new Uint8Array(b));for(;b--;)i+=Vi[l[b]&63];return i};var au=5*1024,uu=50*1024*1024,lu=60*60;var Ar=Re.stringId("VoiceId"),Ns=v.enum(["male","female"]),Rs=v.enum(["high","neutral","low","whisper"]),$s=v.enum(["american","arabic","australian","bengali","brazilian","british","canadian","chinese","filipino","finnish","french","german","greek","indian","irish","italian","japanese","kiwi","korean","malay","mexican","new-zealand","nigerian","pakistani","polish","russian","scottish","serbian","south-african","spanish","thai","turkish"]),Gi=v.object({id:Ar,sample:v.string().url().nullable(),name:v.string(),gender:Ns.nullish(),accent:$s.nullish(),loudness:Rs.nullish(),style:v.string().nullish(),texture:v.string().nullish(),value:v.string().nullish()}),Wi=Gi.extend({type:v.enum(["instant","high-fidelity"]).nullish(),ownerId:dt.optional(),originalSample:v.string().url().optional(),originalSampleFileName:v.string(),description:v.string().nullish(),language:v.string().nullish(),customAttributes:v.record(v.string()),isPlayHtVoice:v.boolean().nullish(),voice_engine:v.union([v.literal("PlayHT2.0"),v.literal("PlayHT1.0")]).optional()}),Ls=v.object({ldm_max_iters:v.number(),ldm_warmup_iters:v.number(),ldm_lr:v.number(),ldm_lora_rank:v.number(),vocoder_epochs:v.number()}),cu=Wi.pick({id:!0,ownerId:!0,type:!0,name:!0,language:!0,isPlayHtVoice:!0}).extend({audioFilePaths:v.array(v.string()).nullish(),manifestUrl:v.string().nullish(),finetuneRequestId:v.string().nullish(),finetuneStatus:v.string().nullish(),finetuneLogs:v.string().nullish(),finetuneManifestUrl:v.string().nullish(),createdAt:v.number(),updatedAt:v.number(),sample:v.string().nullish(),finetuneParams:Ls.nullish()}),du=v.union([Gi,Wi]),pu=v.enum(["pre-build","high-fidelity","instant"]).nullish();var Hi=(a=>(a.GcalBookAppt="gcal-book-appt",a.GcalCheckAvailability="gcal-check-availability",a.GcalGetEvents="gcal-get-events",a.ExternalFunctions="external-function",a))(Hi||{});var Fs=Re.stringId("ExternalFunctionParameterId"),Or=v.object({id:Fs,name:v.string(),description:v.string().optional(),descriptionPlaceholder:v.string().optional(),parameterPosition:v.enum(["body","header","query","url"]).default("body").optional()}),_n=Re.stringId("ActionDefinitionId"),Us=v.enum(["number","string","boolean","enum"]),qi=v.union([v.object({type:v.union([v.literal("number"),v.literal("string"),v.literal("boolean")])}).merge(Or),v.object({type:v.literal("enum"),values:v.array(v.string()).nonempty()}).merge(Or),v.object({type:v.literal("const"),constType:Us.default("string").optional(),value:v.string()}).merge(Or)]),Er=v.object({id:_n,name:v.string().min(1),description:v.string().min(1),endpointUrl:v.string(),method:v.enum(["GET","POST","PUT","DELETE"]),parameters:v.array(qi).default([]),subtype:v.enum(["custom","zapier","make"]).default("custom").optional(),metadata:v.object({toolRequiresConfirmation:v.boolean().default(!1)}).optional()}),mu=Er.omit({id:!0}),yu=Er.omit({id:!0}).partial(),js=Er.extend({type:v.literal("external-function")}),Bs=v.object({email:v.string(),name:v.string()}),bu=v.discriminatedUnion("type",[js,v.object({id:_n,type:v.literal("gcal-book-appt"),actionDescription:v.string(),calendarId:v.string(),duration:v.number(),checkAvailability:v.boolean(),eventTitle:v.string(),attendees:v.array(Bs),meetingNotes:v.string(),parameters:v.array(qi)}),v.object({id:_n,type:v.literal("gcal-check-availability"),actionDescription:v.string(),calendarId:v.string()}),v.object({id:_n,type:v.literal("gcal-get-events"),actionDescription:v.string(),calendarId:v.string()})]),Pr=v.object({id:_n,type:v.nativeEnum(Hi)}),Yi=Pr.extend({name:v.string()});var Tn=Re.stringId("LlmModelId"),zs=v.object({baseURL:v.string().url(),apiKey:v.string(),baseParams:v.object({model:Tn.nullish(),defaultHeaders:v.record(v.string().nullish()).nullish(),maxTokens:v.number().int().nullish(),temperature:v.number().min(0).max(1).nullish()}).nullish()}),Vs=v.object({type:v.literal("openai-compatible")}).merge(zs),Gs=v.object({type:v.literal("built-in"),model:Tn}),Zi=v.union([Gs,Vs]),wu=Tn.parse("gpt-4o");var xu=Tn.parse("gpt-4o-mini");var Su=Tn.parse("gpt-4o");var Xi=v.union([v.literal(.5),v.literal(.6),v.literal(.7),v.literal(.8),v.literal(.9),v.literal(1),v.literal(1.1),v.literal(1.2),v.literal(1.3),v.literal(1.4),v.literal(1.5)]);var Ki=["afrikaans","arabic","bengali","bulgarian","croatian","czech","danish","dutch","english","french","german","greek","hebrew","hindi","hungarian","indonesian","italian","japanese","korean","malay","mandarin","polish","portuguese","russian","serbian","spanish","swedish","tagalog","thai","turkish","ukrainian","urdu","xhosa"];var Ws=1e4;var Bt=Re.stringId("AgentId");var Hs=Re.stringId("AgentWebEmbedId"),qs=v.enum(["professional","character","casual"]).nullish(),Ys=v.enum(["public","private","unlisted"]),Zs=v.enum(["trending","favorites","education","health_wellness","personal_finance","travel_adventure","business_templates","sports_athletics","science_technology","business_entrepreneurship","music_entertainment","games_digital_media","arts_design","parenting_family","career_professional_development"]);var Xs=Re.stringId("AgentRagFileId"),Fn=v.object({id:Xs.nullish(),name:v.string().min(1),s3Url:v.string(),fileType:v.string().optional(),uploadTime:v.number(),uploaderId:dt,size:v.number().optional(),extraMetadata:v.record(v.any()).optional(),host:v.string().optional(),numPagesCrawled:v.number().optional()}),Ks=v.object({corpusId:v.number(),useRag:v.boolean(),files:v.array(Fn)}),Ji=v.object({phoneNumber:v.string(),friendlyName:v.string(),isoCountry:v.string(),locality:v.string().optional(),sid:v.string()}),Js=Ji.omit({sid:!0}),Qs=v.object({currentTime:v.object({timezone:v.string().default("America/Los_Angeles")}),callerInfo:v.boolean()}).partial(),ea=v.object({buttonText:v.string(),helpText:v.string(),screenPosition:v.enum(["left","center","right"]),screenBottomSpacing:v.number(),screenSideSpacing:v.number(),buttonBgColor:v.string().optional(),buttonTextColor:v.string().optional()});var Qi=v.object({id:Bt,ownerId:dt,agentDisplayName:v.string().min(1,{message:"Name is required."}).max(250,{message:"Name is too long."}),agentDescription:v.string(),avatarPhotoUrl:v.string().max(1024).nullish(),numberOfConversations:v.number().int(),numberOfPhoneConversations:v.number().int().optional(),numberOfSecondsTalked:v.number().int(),phoneNumbers:v.record(v.string(),Ji).optional(),featuredCategory:Zs.optional(),language:v.string().optional(),agentInputLanguage:v.enum(["english","chinese","hindi","japanese","korean","spanish","french","italian","portuguese","german","dutch","swedish","czech","polish","russian","bulgarian","greek","turkish","malay","indonesian","thai","hungarian","danish","ukrainian"]).optional()}),ta=v.object({url:v.string(),pageName:v.string().optional(),pageDescription:v.string().optional()}),na=v.object({number:v.string(),description:v.string(),metadata:v.object({toolRequiresConfirmation:v.boolean().optional()}).optional()}),eo=v.object({webEmbedId:Hs.nullish(),webEmbedConfig:ea.nullish(),webEmbedScrapedHost:v.string().nullish(),webEmbedScrapedTime:v.string().datetime().nullish(),webEmbedLinksCorpusId:v.number().nullish(),webEmbedLinksOnly:v.boolean().optional(),webEmbedUsageHosts:v.record(v.string(),v.boolean()).optional(),greeting:v.string().max(250,{message:"Greeting is too long."}).nullish(),prompt:v.string().max(Ws,{message:"Prompt is too long."}).nullish(),behaviorPreset:qs,voiceId:Ar,voiceSpeed:Xi.optional(),ttsModel:v.enum(["PlayHT2.0-turbo","Play3.0-mini","PlayDialog"]).default("PlayDialog"),language:v.enum([...Ki,"arabic"]).default("english"),visibility:Ys,draft:v.boolean(),rag:Ks.optional(),llm:Zi.nullish(),answerOnlyContext:v.boolean().optional(),embeddedContext:v.string().optional(),integrations:v.array(Pr).optional(),extendedContextFunctions:Qs.optional(),embedLinks:v.array(ta).optional(),crawlWebsite:v.boolean().optional(),callTransferSettings:v.array(na).optional()}),ra=v.object({}).merge(Qi).merge(eo),Lu=ra.omit({integrations:!0}).extend({integrations:v.array(Yi).optional()}),ia=v.object({}).merge(eo.omit({draft:!0})).merge(Qi.omit({id:!0,ownerId:!0,numberOfConversations:!0,numberOfPhoneConversations:!0,numberOfSecondsTalked:!0})).merge(v.object({ragFiles:v.array(Fn).optional(),ragFilesFromWebsite:v.array(Fn).optional(),ragTempFiles:v.array(Fn),newPhoneNumbers:v.array(Js).optional()}));var oa=typeof File<"u"?v.instanceof(File):v.never(),Ir=v.object({ragFilesToUpload:v.array(oa)}).merge(ia),Fu=v.object({id:Bt,draft:v.boolean()}).merge(Ir),Uu=v.object({id:Bt}).merge(v.object({draft:v.boolean()}).merge(Ir).partial()),ju=v.object({id:Bt,ownerId:dt,draft:v.boolean()}).merge(Ir),Bu=v.object({agentId:Bt.optional(),s3Url:v.string(),host:v.string().optional(),isTempFile:v.boolean()});var zu=dt.parse("TEMPOWNER");var Dr=Re.stringId("ConversationId"),sa=v.enum(["web","web-embed","phone","api"]),aa=v.enum(["preview","test","community","business"]),kr=v.enum(["user","agent","error","system"]),ua=v.enum(["positive","negative"]),la=v.object({issues:v.array(v.enum(["Rate of dropped wrods","Word pronunciation","Bad accent","Other"])),issuesDescription:v.string().nullable(),moreAppropriateReply:v.string().nullable()}),qu=v.object({id:Dr,source:sa,type:aa,agentId:Bt,agentPhoneNumber:v.string().nullable(),callerPhoneNumber:v.string().nullable(),callerEmail:v.string().nullable().optional(),startedAt:Re.date(),endedAt:Re.date().nullable(),duration:v.number().nullable(),endedBy:kr.nullable(),errorCode:v.number().nullable(),recordingUrl:v.string().nullable(),recordingVideoUrl:v.string().nullable().optional(),ownerFeedback:ua.nullable(),callerFeedback:la.nullable()}),ca=v.enum(["PlayHT2.0-turbo","Play3.0-mini","PlayDialog"]),da=v.enum(["draft","low","medium","high","premium"]),Yu=v.object({builtInLLM:v.string().optional(),ttsModel:ca.optional(),ttsQuality:da.optional(),ttsTopP:v.number().optional(),ttsTemp:v.number().optional(),ttsStyleGuidance:v.number().optional(),ttsTextGuidance:v.number().optional(),ttsVoiceGuidance:v.number().optional(),ttsRepetitionPenalty:v.number().optional(),ttsLanguageString:v.string().optional()});var de=(b,i)=>v.object({type:v.literal(b),...i}).strict(),pa=v.discriminatedUnion("type",[de("ORC_ONLINE",{timestamp:v.string(),msg:v.string(),config:v.record(v.any()),description:v.string(),conversationId:v.string()}),de("ORC_AUDIO_IN",{timestamp:v.string(),msg:v.string(),chunkSize:v.number(),chunkNumber:v.number(),description:v.string(),conversationId:v.string()}),de("ORC_AUDIO_IN_END",{timestamp:v.string(),msg:v.string(),totalDuration:v.number(),totalChunks:v.number(),description:v.string(),conversationId:v.string()}),de("ORC_STT_TO_LLM",{timestamp:v.string(),msg:v.string(),startTime:v.string(),transcript:v.string(),description:v.string(),conversationId:v.string()}),de("ORC_LLM_TO_TTS",{timestamp:v.string(),msg:v.string(),startTime:v.string(),description:v.string(),conversationId:v.string()}),de("ORC_TTS_TO_USER",{timestamp:v.string(),msg:v.string(),chunkSize:v.number(),totalChunks:v.number(),description:v.string(),conversationId:v.string()}),de("ORC_TTS_TO_USER_END",{timestamp:v.string(),msg:v.string(),totalDuration:v.number(),totalChunks:v.number(),description:v.string(),conversationId:v.string()}),de("ORC_AGENT_INTERRUPTED",{timestamp:v.string(),msg:v.string(),description:v.string(),transcript:v.string(),conversationId:v.string()}),de("ORC_AGENT_RESPONSE_SWALLOWED",{timestamp:v.string(),msg:v.string(),description:v.string(),transcript:v.string(),conversationId:v.string()}),de("ORC_AGENT_SPEAKING_END",{timestamp:v.string(),msg:v.string(),description:v.string(),conversationId:v.string()}),de("ORC_USER_SPEAKING_END",{timestamp:v.string(),msg:v.string(),description:v.string(),conversationId:v.string()}),de("ORC_OFFLINE",{msg:v.string(),timestamp:v.string(),conversationId:v.string(),description:v.string()}),de("ORC_ERROR",{error:v.string(),timestamp:v.string(),conversationId:v.string(),description:v.string()}),de("ORC_CONVO_SAVED",{timestamp:v.string(),conversationId:v.string(),description:v.string(),filename:v.string(),logCount:v.number(),path:v.string()}),de("ORC_EXEC_FOLLOW_UP",{timestamp:v.string(),msg:v.string(),transcript:v.string(),description:v.string(),conversationId:v.string()}),de("ORC_GET_FOLLOW_UP_TIMEOUT",{timestamp:v.string(),msg:v.string(),description:v.string(),conversationId:v.string()}),de("ORC_SET_FOLLOW_UP_TIMEOUT",{timestamp:v.string(),msg:v.string(),requestDuration:v.number(),timeoutDuration:v.number(),description:v.string(),conversationId:v.string()})]),fa=v.discriminatedUnion("type",[de("STT_ONLINE",{timestamp:v.string(),msg:v.string(),config:v.record(v.any()),description:v.string(),conversationId:v.string()}),de("STT_OFFLINE",{timestamp:v.string(),msg:v.string(),description:v.string(),conversationId:v.string()}),de("STT_AUDIO_CHUNK",{timestamp:v.string(),msg:v.string(),chunkSize:v.number(),chunkNumber:v.number(),description:v.string(),conversationId:v.string()}),de("STT_AUDIO_CHUNK_END",{timestamp:v.string(),msg:v.string(),totalDuration:v.number(),totalBytes:v.number(),totalChunks:v.number(),description:v.string(),conversationId:v.string()}),de("STT_TRANSCRIPT_RECEIVED",{timestamp:v.string(),msg:v.string(),transcript:v.string(),description:v.string(),conversationId:v.string(),duration:v.number().optional()}),de("STT_TRANSCRIPT_FINALIZED",{timestamp:v.string(),msg:v.string(),transcript:v.string(),description:v.string(),conversationId:v.string()}),de("STT_USER_TURN_COMPLETED",{timestamp:v.string(),msg:v.string(),description:v.string(),conversationId:v.string()}),de("STT_ERROR",{timestamp:v.string(),msg:v.string(),error:v.string(),description:v.string(),conversationId:v.string()})]),ha=v.discriminatedUnion("type",[de("LLM_ONLINE",{timestamp:v.string(),msg:v.string(),config:v.record(v.any()),description:v.string(),conversationId:v.string()}),de("LLM_OFFLINE",{timestamp:v.string(),msg:v.string(),description:v.string(),conversationId:v.string()}),de("LLM_JOB_START",{timestamp:v.string(),msg:v.string(),instruction:v.string(),context:v.string(),description:v.string(),conversationId:v.string()}),de("LLM_STREAM_START",{timestamp:v.string(),msg:v.string(),description:v.string(),conversationId:v.string()}),de("LLM_STREAM_CHUNK",{timestamp:v.string(),msg:v.string(),chunk:v.string(),tokens:v.number(),totalTokens:v.number(),description:v.string(),conversationId:v.string()}),de("LLM_STREAM_END",{timestamp:v.string(),msg:v.string(),streamDuration:v.number(),totalTokens:v.number(),description:v.string(),conversationId:v.string()}),de("LLM_JOB_END",{timestamp:v.string(),msg:v.string(),totalDuration:v.number(),totalTokens:v.number(),description:v.string(),conversationId:v.string()}),de("LLM_JOB_ABORTED",{timestamp:v.string(),msg:v.string(),description:v.string(),conversationId:v.string()}),de("LLM_RAG_START",{timestamp:v.string(),msg:v.string(),description:v.string(),conversationId:v.string()}),de("LLM_RAG_END",{timestamp:v.string(),msg:v.string(),description:v.string(),conversationId:v.string()}),de("LLM_TOOL_CALL_START",{timestamp:v.string(),msg:v.string(),toolCallId:v.string(),toolName:v.string(),toolArgs:v.string(),description:v.string(),conversationId:v.string()}),de("LLM_TOOL_CALL_END",{timestamp:v.string(),msg:v.string(),toolCallId:v.string(),toolName:v.string(),toolArgs:v.string(),result:v.string(),description:v.string(),conversationId:v.string()}),de("LLM_ERROR",{timestamp:v.string(),msg:v.string(),error:v.string(),description:v.string(),conversationId:v.string()})]),ga=v.discriminatedUnion("type",[de("TTS_ONLINE",{timestamp:v.string(),msg:v.string(),config:v.record(v.any()),description:v.string(),conversationId:v.string()}),de("TTS_OFFLINE",{timestamp:v.string(),msg:v.string(),description:v.string(),conversationId:v.string()}),de("TTS_JOB_START",{timestamp:v.string(),msg:v.string(),text:v.string(),description:v.string(),conversationId:v.string()}),de("TTS_STREAM_START",{timestamp:v.string(),msg:v.string(),description:v.string(),conversationId:v.string(),text:v.string(),voice:v.string(),speed:v.number(),quality:v.string(),outputFormat:v.string(),sampleRate:v.number(),language:v.string()}),de("TTS_STREAM_CHUNK",{timestamp:v.string(),msg:v.string(),bufferLength:v.number(),totalChunks:v.number(),totalAudioBytes:v.number(),description:v.string(),conversationId:v.string()}),de("TTS_STREAM_END",{timestamp:v.string(),msg:v.string(),streamDuration:v.number(),totalChunks:v.number(),totalAudioBytes:v.number(),description:v.string(),conversationId:v.string()}),de("TTS_JOB_END",{timestamp:v.string(),msg:v.string(),totalDuration:v.number(),totalAudioBytes:v.number(),description:v.string(),conversationId:v.string()}),de("TTS_JOB_ABORTED",{timestamp:v.string(),msg:v.string(),description:v.string(),conversationId:v.string()}),de("TTS_ERROR",{timestamp:v.string(),msg:v.string(),error:v.string(),description:v.string(),conversationId:v.string()})]),ma=v.discriminatedUnion("type",[de("MEDIA_ON_PLAY",{timestamp:v.string(),msg:v.string(),description:v.string(),conversationId:v.string()}),de("MEDIA_ON_PAUSE",{timestamp:v.string(),msg:v.string(),description:v.string(),conversationId:v.string()}),de("MEDIA_ON_STOP",{timestamp:v.string(),msg:v.string(),description:v.string(),conversationId:v.string()}),de("MEDIA_ON_EMPTY",{timestamp:v.string(),msg:v.string(),description:v.string(),conversationId:v.string()}),de("MEDIA_ON_ERROR",{timestamp:v.string(),msg:v.string(),error:v.string(),description:v.string(),conversationId:v.string()})]),ya=v.union([pa,fa,ha,ga,ma]),wn=de("SYS_LOG",{payload:ya});var Ue=(b,i)=>v.object({type:v.literal(b),...i}).strict(),Un=Ue("init",{agentOwnerId:dt,conversationId:Dr,recordingPresignedUrl:v.string(),language:v.string().optional()}),jn=Ue("hangup",{endedBy:kr}),Bn=Ue("error",{code:v.number(),message:v.string(),isFatal:v.boolean()}),ba=Ue("navigate",{pageDefinition:v.string()}),zn=Ue("customEvent",Bi.shape),va=Ue("uiEvent",zi.shape),Vn=Ue("voiceActivityStart",{}),Gn=Ue("voiceActivityEnd",{}),Wn=Ue("onUserTranscript",{message:v.string()}),Hn=Ue("newAudioStream",{}),qn=Ue("audioStream",{data:v.string()}),Yn=Ue("audioStreamStart",{}),Zn=Ue("audioStreamEnd",{message:v.string(),jobId:v.number()}),Xn=Ue("llmStreamEnd",{}),Kn=Ue("onAgentTranscript",{message:v.string()}),Jn=Ue("onAgentInterrupted",{updatedMessage:v.string().optional()}),Qn=Ue("onAgentGreeting",{message:v.string()}),er=Ue("onAgentGreetingEnd",{message:v.string()}),rl=v.discriminatedUnion("type",[Un,jn,Bn,wn,Hn,qn,Zn,Yn,Vn,Gn,Wn,Kn,Jn,Qn,er,zn,Xn]),il=v.discriminatedUnion("type",[Un,jn,Bn,wn,Hn,qn,Yn,Zn,Vn,Gn,Wn,Kn,Jn,Qn,er,zn,Xn]),ol=v.discriminatedUnion("type",[Un,jn,Bn,wn,Hn,qn,Zn,Yn,Vn,Gn,Wn,Kn,Jn,Qn,er,zn,Xn]),sl=v.discriminatedUnion("type",[Un,jn,Bn,wn,Hn,qn,Zn,Yn,ba,va,zn,Qn,er,Kn,Jn,Wn,Vn,Gn,Xn]),to=v.discriminatedUnion("type",[v.object({type:v.literal("init"),agentOwnerId:v.string(),conversationId:v.string(),recordingPresignedUrl:v.string(),language:v.string().optional()}),v.object({type:v.literal("error"),code:v.number(),message:v.string(),isFatal:v.boolean()}),v.object({type:v.literal("hangup"),endedBy:v.string()}),v.object({type:v.literal("SYS_LOG"),payload:v.custom()}),v.object({type:v.literal("MEDIA_LOG"),payload:v.custom()}),v.object({type:v.literal("newAudioStream")}),v.object({type:v.literal("audioStream"),data:v.string()}),v.object({type:v.literal("audioStreamEnd"),message:v.string(),jobId:v.number()}),v.object({type:v.literal("audioStreamStart")}),v.object({type:v.literal("voiceActivityStart")}),v.object({type:v.literal("voiceActivityEnd")}),v.object({type:v.literal("onUserTranscript"),message:v.string()}),v.object({type:v.literal("onAgentTranscript"),message:v.string()}),v.object({type:v.literal("onAgentGreeting"),message:v.string()}),v.object({type:v.literal("onAgentGreetingEnd"),message:v.string()}),v.object({type:v.literal("onAgentInterrupted"),updatedMessage:v.string().optional()}),v.object({type:v.literal("customEvent"),name:v.string(),data:v.any()}),v.object({type:v.literal("navigate"),pageDefinition:v.string()}),v.object({type:v.literal("uiEvent"),componentCode:v.string(),props:v.any()}),v.object({type:v.literal("llmStreamEnd")})]);function Cr(b,i){let l;return(...c)=>{l&&clearTimeout(l),l=setTimeout(()=>b(...c),i)}}var _a=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];function Ta(b){let i=b>>8&128;i!=0&&(b=-b),b=b+132,b>32635&&(b=32635);let l=_a[b>>7&255],c=b>>l+3&15;return~(i|l<<4|c)}function Mr(b){let i=new Uint8Array(b.length);for(let l=0;l<b.length;l++){let c=Math.min(1,b[l]??0)*32767;i[l]=Ta(c)}return i}var zt=typeof window<"u",Nr=class{constructor(){Y(this,"logsByConversation",new Map);Y(this,"subscribers",new Set);Y(this,"conversationListSubscribers",new Set);Y(this,"subTypeEmoji",{STT:"\u{1F399}\uFE0F",ORC:"\u{1F477}\u{1F3FB}\u200D\u2642\uFE0F",LLM:"\u{1F916}",TTS:"\u{1F4E1}"})}getAvailableConversations(){return Array.from(this.logsByConversation.keys())}subscribeToConversationList(i){return zt?(this.conversationListSubscribers.add(i),i(this.getAvailableConversations()),()=>this.conversationListSubscribers.delete(i)):()=>{}}notifyConversationListChange(){let i=this.getAvailableConversations();this.conversationListSubscribers.forEach(l=>l(i))}subscribe(i){return zt?(this.subscribers.add(i),()=>this.subscribers.delete(i)):()=>{}}notify(i){let l=this.logsByConversation.get(i)||[];this.subscribers.forEach(c=>c(l,i))}addSysLog(i,l){if(!zt)return;let c=i.type.split("_")[0],a=this.subTypeEmoji[c]??"\u{1F4DD}";"config"in i&&(i.config=this.sanitizeConfig(i.config));let f=`${a} ${i.type}: ${"msg"in i?i.msg:""}`,p={id:we(),type:"SYS_LOG",subtype:c||"UNKNOWN",messageType:i.type||"UNKNOWN",message:f,timestamp:i.timestamp,isSysLog:!0,payloads:[],conversationId:i.conversationId};switch(i.type){case"ORC_ONLINE":case"STT_ONLINE":case"LLM_ONLINE":case"TTS_ONLINE":p.payloads?.push({id:we(),type:"DETAILS",payload:{config:i.config,description:i.description}});break;case"ORC_OFFLINE":case"STT_OFFLINE":case"LLM_OFFLINE":case"TTS_OFFLINE":case"ORC_GET_FOLLOW_UP_TIMEOUT":case"STT_USER_TURN_COMPLETED":case"ORC_LLM_TO_TTS":case"ORC_USER_SPEAKING_END":case"ORC_AGENT_SPEAKING_END":case"LLM_JOB_ABORTED":case"TTS_JOB_ABORTED":case"LLM_STREAM_START":case"LLM_RAG_START":case"LLM_RAG_END":case"MEDIA_ON_PLAY":case"MEDIA_ON_PAUSE":case"MEDIA_ON_STOP":case"MEDIA_ON_EMPTY":p.payloads?.push({id:we(),type:"DETAILS",payload:{description:i.description}});break;case"ORC_ERROR":case"STT_ERROR":case"LLM_ERROR":case"TTS_ERROR":case"MEDIA_ON_ERROR":p.payloads?.push({id:we(),type:"DETAILS",payload:{error:i.error,description:i.description}});break;case"ORC_SET_FOLLOW_UP_TIMEOUT":p.payloads?.push({id:we(),type:"DETAILS",payload:{"request duration":i.requestDuration,"timeout duration":i.timeoutDuration,description:i.description}});break;case"ORC_EXEC_FOLLOW_UP":case"ORC_STT_TO_LLM":p.payloads?.push({id:we(),type:"DETAILS",payload:{transcript:i.transcript,description:i.description}});break;case"ORC_AUDIO_IN_END":p.payloads?.push({id:we(),type:"DETAILS",payload:{description:i.description,"total duration":i.totalDuration,"total chunks":i.totalChunks}});break;case"ORC_TTS_TO_USER":p.payloads?.push({id:we(),type:"DETAILS",payload:{"chunk size":i.chunkSize,"total chunks":i.totalChunks,description:i.description}});break;case"ORC_TTS_TO_USER_END":p.payloads?.push({id:we(),type:"DETAILS",payload:{"total duration":i.totalDuration,"total chunks":i.totalChunks,description:i.description}});break;case"STT_AUDIO_CHUNK":{p.payloads?.push({id:we(),type:"DETAILS",payload:{description:i.description,"chunk number":i.chunkNumber,"chunk size":i.chunkSize}});break}case"STT_AUDIO_CHUNK_END":{p.payloads?.push({id:we(),type:"DETAILS",payload:{description:i.description,"total chunks":i.totalChunks,"total bytes":i.totalBytes,"total duration":i.totalDuration}});break}case"ORC_AGENT_INTERRUPTED":case"ORC_AGENT_RESPONSE_SWALLOWED":case"STT_TRANSCRIPT_FINALIZED":p.payloads?.push({id:we(),type:"DETAILS",payload:{transcript:i.transcript,description:i.description}});break;case"STT_TRANSCRIPT_RECEIVED":p.payloads?.push({id:we(),type:"DETAILS",payload:{transcript:i.transcript,description:i.description,duration:i.duration}});break;case"ORC_AUDIO_IN":{p.payloads?.push({id:we(),type:"DETAILS",payload:{"chunk number":i.chunkNumber,"chunk size":i.chunkSize,description:i.description}});break}case"LLM_STREAM_CHUNK":p.payloads?.push({id:we(),type:"DETAILS",payload:{tokens:i.tokens,"total tokens":i.totalTokens,chunk:i.chunk,description:i.description}});break;case"LLM_STREAM_END":p.payloads?.push({id:we(),type:"DETAILS",payload:{"stream duration":i.streamDuration,"total tokens":i.totalTokens,description:i.description}});break;case"LLM_JOB_END":p.payloads?.push({id:we(),type:"DETAILS",payload:{"total duration":i.totalDuration,"total tokens":i.totalTokens,description:i.description}});break;case"TTS_STREAM_START":p.payloads?.push({id:we(),type:"DETAILS",payload:{description:i.description,text:i.text,voice:i.voice,quality:i.quality,"output format":i.outputFormat,language:i.language,speed:i.speed,"sample rate":i.sampleRate}});break;case"TTS_STREAM_CHUNK":p.payloads?.push({id:we(),type:"DETAILS",payload:{"chunk number":i.totalChunks,"chunk size":i.bufferLength,description:i.description}});break;case"TTS_STREAM_END":p.payloads?.push({id:we(),type:"DETAILS",payload:{"stream duration":i.streamDuration,"total chunks":i.totalChunks,"total audio bytes":i.totalAudioBytes,description:i.description}});break;case"TTS_JOB_END":p.payloads?.push({id:we(),type:"DETAILS",payload:{"total duration":i.totalDuration,"total audio bytes":i.totalAudioBytes,description:i.description}});break;case"LLM_TOOL_CALL_START":p.payloads?.push({id:we(),type:"DETAILS",payload:{"tool name":i.toolName,args:i.toolArgs,"call id":i.toolCallId,description:i.description}});break;case"LLM_TOOL_CALL_END":p.payloads?.push({id:we(),type:"DETAILS",payload:{result:i.result,"tool call id":i.toolCallId,"tool name":i.toolName,args:i.toolArgs,description:i.description}});break;case"ORC_CONVO_SAVED":p.payloads?.push({id:we(),type:"DETAILS",payload:{description:i.description,filename:i.filename,"log count":i.logCount,path:i.path}});break;case"LLM_JOB_START":p.payloads?.push({id:we(),type:"DETAILS",payload:{instruction:i.instruction,description:i.description,context:i.context}});break;case"TTS_JOB_START":p.payloads?.push({id:we(),type:"DETAILS",payload:{description:i.description,text:i.text}});break;default:{let d=Object.fromEntries(Object.entries(i).filter(([h])=>!["type","timestamp","conversationId","msg","description","chunkNumber"].includes(h)));p.payloads?.push({id:we(),type:"DETAILS",payload:{...d}});break}}this.add(p,l),this.notify(l)}addMediaLog(i,l){if(!zt)return;let c={id:we(),type:"MEDIA_LOG",subtype:i.type,messageType:i.type,message:i.msg,timestamp:i.timestamp,conversationId:i.conversationId,isSysLog:!1,payloads:[]};switch(i.type){case"MEDIA_ON_PLAY":c.payloads?.push({id:we(),type:"DETAILS",payload:{"chunk number":i.chunkNumber,"chunk size":i.chunkSize}});break;default:{let a=Object.fromEntries(Object.entries(i).filter(([f])=>!["type","timestamp","conversationId","msg","description"].includes(f)));c.payloads?.push({id:we(),type:"DETAILS",payload:{...a}});break}}this.add(c,i.conversationId),this.notify(i.conversationId),delete c.payloads,l&&l(c)}addConvoLog(i){let l=i.conversationId;if(!zt)return;let c={id:we(),type:"CONVO_LOG",subtype:i.type,messageType:i.type,message:i.msg,timestamp:i.timestamp,conversationId:i.conversationId,isSysLog:!1,payloads:[]};switch(i.type){case"NEW_AUDIO_STREAM":c.payloads?.push({id:we(),type:"DETAILS",payload:{"chunk number":i?.chunkNumber,"chunk size":i?.chunkSize,conversationId:i?.conversationId}});break;default:{let a=Object.fromEntries(Object.entries(i).filter(([f])=>!["type","timestamp","conversationId","msg","description"].includes(f)));c.payloads?.push({id:we(),type:"DETAILS",payload:{...a}});break}}this.add(c,l),this.notify(l)}add(i,l){i.conversationId=l;let c=this.logsByConversation.get(l)||[];i.id=`${c.length+1}`,c.push(i),this.logsByConversation.set(l,c),this.logsByConversation.has(l)||this.notifyConversationListChange()}clear(i){zt&&(this.logsByConversation.delete(i),this.notify(i),this.notifyConversationListChange())}sanitizeConfig(i){let l={};for(let[c,a]of Object.entries(i))a!==void 0&&(l[c]=a);return l}getLogsForConversation(i){return this.logsByConversation.get(i)||[]}},$e=new Nr;zt&&(window.uiLogStore=$e);var wa=(b,i=4294967295,l=79764919)=>{let c=new Int32Array(256),a,f,p,d=i;for(a=0;a<256;a++){for(p=a<<24,f=8;f>0;--f)p=2147483648&p?p<<1^l:p<<1;c[a]=p}for(a=0;a<b.length;a++)d=d<<8^c[255&(d>>24^b[a])];return d};var Rr=(b,i=wa)=>{let l=g=>new Uint8Array(g.length/2).map((m,y)=>parseInt(g.substring(2*y,2*(y+1)),16)),c=g=>l(g)[0],a=new Map;[,8364,,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,,381,,,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,,382,376].forEach((g,m)=>a.set(g,m));let f=new Uint8Array(b.length),p,d,h,u=!1,o=0,n=42,e=b.length>13&&b.substring(0,9)==="dynEncode",t=0;e&&(t=11,d=c(b.substring(9,t)),d<=1&&(t+=2,n=c(b.substring(11,t))),d===1&&(t+=8,h=(g=>new DataView(l(g).buffer).getInt32(0,!0))(b.substring(13,t))));let r=256-n;for(let g=t;g<b.length;g++)if(p=b.charCodeAt(g),p!==61||u){if(p===92&&g<b.length-5&&e){let m=b.charCodeAt(g+1);m!==117&&m!==85||(p=parseInt(b.substring(g+2,g+6),16),g+=5)}if(p>255){let m=a.get(p);m&&(p=m+127)}u&&(u=!1,p-=64),f[o++]=p<n&&p>0?p+r:p-n}else u=!0;let s=f.subarray(0,o);if(e&&d===1){let g=i(s);if(g!==h){let m="Decode failed crc32 validation";throw console.error("`simple-yenc`\n",m+`
`,"Expected: "+h+"; Got: "+g+`
`,"Visit https://github.com/eshaz/simple-yenc for more information"),Error(m)}}return s};function ke(){let b=Uint8Array,i=Float32Array;ke.modules||Object.defineProperties(ke,{modules:{value:new WeakMap},setModule:{value(l,c){ke.modules.set(l,Promise.resolve(c))}},getModule:{value(l,c){let a=ke.modules.get(l);return a||(c?a=WebAssembly.compile(Rr(c)):(c=l.wasm,a=ke.inflateDynEncodeString(c).then(f=>WebAssembly.compile(f))),ke.modules.set(l,a)),a}},concatFloat32:{value(l,c){let a=new i(c),f=0,p=0;for(;f<l.length;)a.set(l[f],p),p+=l[f++].length;return a}},getDecodedAudio:{value:(l,c,a,f,p)=>({errors:l,channelData:c,samplesDecoded:a,sampleRate:f,bitDepth:p})},getDecodedAudioMultiChannel:{value(l,c,a,f,p,d){let h=[],u,o;for(u=0;u<a;u++){let n=[];for(o=0;o<c.length;)n.push(c[o++][u]||[]);h.push(ke.concatFloat32(n,f))}return ke.getDecodedAudio(l,h,f,p,d)}},inflateDynEncodeString:{value(l){return l=Rr(l),new Promise(c=>{let a=String.raw`dynEncode0114db91da9bu*ttt$#UU3yzzss|yusvuy&4<054<,5T44^T44<(6U~J(44< ~A544U~6J0444545 444J0444J,4U4U7U454U4Z4U4U^/6545T4T44BU~64CU~O4U54U~5 U5T4B4Z!4U~5U5U5T4U~6U4ZTU5U5T44~4O4U2ZTU5T44Z!4B6T44U~64B6U~O44U~4O4U~54U~5 44~C4~54U~5 44~5454U4B6Ub!444~UO4U~5 U54U4ZTU#44U$464<4~B6^4<444~U~B4U~54U544~544~U5 U#UJU#5TT4U0ZTTUX5U5T4T4U#~4OU4U$~C4~54U~5 T44$6U\!TTT4UaT4<6T4<64<Z!44~4N4<U~5 4UZ!4U_TU#44UU6U~B$544$6U\!4U6U#~B44U#~B$~64<6_TU#444U~B~6~54<Y!44<_!T4Y!4<64~444~AN44<U~6J4U5 44J4U[!U#44UO4U~54U~5 U54 7U6844J44J 4UJ4UJ04VK(44<J44<J$4U~54U~5 4U~5!TTT4U$5"U5TTTTTTT4U$"4VK,U54<(6U~64<$6_!4< 64~6A54A544U~6#J(U54A4U[!44J(44#~A4U6UUU[!4464~64_!4<64~54<6T4<4]TU5 T4Y!44~44~AN4U~54U~54U5 44J(44J UA!U5U#UJU"UJU#U"JU#U"JT4UZTU5T4UZTU5T4UDZTU5T4U$[T44~UO4U~5 UU4U~U$.U5T4UP[T4U~4~UO4U~5 U#<U#<4U~U2$.UUN 44 ~UO4U~5 44!~UO4U~5 4U~4~UO4U~5 44J44J(U5 44U~J@44U~J<44UD~J844U~J44U$54U$5U54U$54U1^4U1^!4U~54U~5U54U~6U4U^/65T4T4U$54U~4BU~4O4U54U~5 UU'464U'_/54UU~5T4T4U~4BU~UO4U54U~5 U54U~4U~4U~U'$!44~5U5T44\T44U<~$6U\!4U#aT4U~4U~4O4U~5 U5U5U5TTT4U$"4YTU5 4U4~C5U5 U5U5444$4~64~\TU5 4U~4U~5T4Y!44O4U~54U~54U5 4CYTU5 4U~4U~4U~4$6TU54U\!44B4B~[!4U~4UD~4U~4U~4$6TU54U\!44B4B~[!44U<~4U4~$5 4U"U#$544"Y!454U^!44<J44<(J454U~84UN!#%'+/37?GOWgwU;U9$%& !"#`;ke.getModule(ke,a).then(f=>WebAssembly.instantiate(f,{})).then(({exports:f})=>{let p=new Map(Object.entries(f)),d=p.get("puff"),h=p.get("memory").buffer,u=new b(h),o=new DataView(h),n=p.get("__heap_base"),e=l.length,t=n;n+=4,o.setInt32(t,e,!0);let r=n;n+=e,u.set(l,r);let s=n;n+=4,o.setInt32(s,u.byteLength-n,!0),d(n,s,r,t),c(u.slice(n,n+o.getInt32(s,!0)))})})}}}),Object.defineProperty(this,"wasm",{enumerable:!0,get:()=>this._wasm}),this.getOutputChannels=(l,c,a)=>{let f=[],p=0;for(;p<c;)f.push(l.slice(p*a,p++*a+a));return f},this.allocateTypedArray=(l,c,a=!0)=>{let f=this._wasm.malloc(c.BYTES_PER_ELEMENT*l);return a&&this._pointers.add(f),{ptr:f,len:l,buf:new c(this._wasm.HEAP,f,l)}},this.free=()=>{this._pointers.forEach(l=>{this._wasm.free(l)}),this._pointers.clear()},this.codeToString=l=>{let c=[],a=new Uint8Array(this._wasm.HEAP);for(let f=a[l];f!==0;f=a[++l])c.push(f);return String.fromCharCode.apply(null,c)},this.addError=(l,c,a,f,p,d)=>{l.push({message:c,frameLength:a,frameNumber:f,inputBytes:p,outputSamples:d})},this.instantiate=(l,c)=>(c&&ke.setModule(l,c),this._wasm=new l(ke).instantiate(),this._pointers=new Set,this._wasm.ready.then(()=>this))}var io=yi(ro(),1);var xa=()=>globalThis.Worker||io.default,nn=class extends xa(){constructor(i,l,c,a){ke.modules||new ke;let f=ke.modules.get(c);if(!f){let p="text/javascript",d,h=`'use strict';(${((u,o,n)=>{let e,t,r=new Promise(s=>{t=s});self.onmessage=({data:{id:s,command:g,data:m}})=>{let y=r,_={id:s},T;g==="init"?(Object.defineProperties(u,{WASMAudioDecoderCommon:{value:o},EmscriptenWASM:{value:n},module:{value:m.module},isWebWorker:{value:!0}}),e=new u(m.options),t()):g==="free"?e.free():g==="ready"?y=y.then(()=>e.ready):g==="reset"?y=y.then(()=>e.reset()):(Object.assign(_,e[g](Array.isArray(m)?m.map(w=>new Uint8Array(w)):new Uint8Array(m))),T=_.channelData?_.channelData.map(w=>w.buffer):[]),y.then(()=>self.postMessage(_,T))}}).toString()})(${c}, ${ke}, ${a})`;try{d=typeof process.versions.node<"u"}catch{}f=d?`data:${p};base64,${Buffer.from(h).toString("base64")}`:URL.createObjectURL(new Blob([h],{type:p})),ke.modules.set(c,f)}super(f,{name:l}),this._id=Number.MIN_SAFE_INTEGER,this._enqueuedOperations=new Map,this.onmessage=({data:p})=>{let{id:d,...h}=p;this._enqueuedOperations.get(d)(h),this._enqueuedOperations.delete(d)},new a(ke).getModule().then(p=>{this.postToDecoder("init",{module:p,options:i})})}async postToDecoder(i,l){return new Promise(c=>{this.postMessage({command:i,id:this._id,data:l}),this._enqueuedOperations.set(this._id++,c)})}get ready(){return this.postToDecoder("ready")}async free(){await this.postToDecoder("free").finally(()=>{this.terminate()})}async reset(){await this.postToDecoder("reset")}};var tr=(b,i)=>{Object.defineProperty(b,"name",{value:i})};function mt(b){var i=i,l=X=>console.log(X),c=X=>console.error(X);function a(){}i={};function f(X){throw X}for(var p=new Uint8Array(123),d=25;d>=0;--d)p[48+d]=52+d,p[65+d]=d,p[97+d]=26+d;p[43]=62,p[47]=63;function h(X){for(var ae,ve,Ae=0,Se=0,De=X.length,Oe=new Uint8Array((De*3>>2)-(X[De-2]=="=")-(X[De-1]=="="));Ae<De;Ae+=4,Se+=3)ae=p[X.charCodeAt(Ae+1)],ve=p[X.charCodeAt(Ae+2)],Oe[Se]=p[X.charCodeAt(Ae)]<<2|ae>>4,Oe[Se+1]=ae<<4|ve>>2,Oe[Se+2]=ve<<6|p[X.charCodeAt(Ae+3)];return Oe}mt.wasm||Object.defineProperty(mt,"wasm",{get:()=>String.raw`dynEncode01d9cc1a928bf8p;nn\Eqq LiWf_qIB1av^[gOKr."u0!bM&EV$:_BvIS}fSo=}wJHWh6	Pc:XV!#I_IP]s LZN<WPj]-==}&ldj!=MJ)^"d3UF: s+={,Z7;4!i E[c};2zou2Qm7zy{Eo9:.c"bN_Rv,=o@KCS[rr$Z wQ^0Q\(=<'i[ fL.,{;F2GQ7{6%ghr~@Qv\H ?#grrprrL8N=}\(60bI!CPW}4(4$,@m>PnW>+7f8W)OW#mK'H$o45&?:P!>4"'>{7Na#~;ge,^#JHB,oerZt)-2M9tju~+WC~A5F'DP';3}ph	\O/?d6Z;L&Sdzb>AXo&>E]t\;z7G?X cjC<xb,_t>?*vMc(2GkKn%!vC)..+j3Ck?Kj31(7a_v}so> H3wx\T;}=}D( fG$}_M:\#SiS)	o.VM+nS4FhurQ@hwZsu(P<UP$)zBY4KGYjo7\A [3^Hs0+a<)r72pm)
;*h|,S3v,NQf|'_QL4y{kF_bn0Vkr K$CW$n^b.+G7-^d;91q{%^o8ZYqc]<F&]&=d{J4':ohL\v(jXb#,36q;w{NOw@~KhW$#C|p	AN1(z&)cm'mJMc]/^[iP[>#22g	=}j;mz_l)\}r{wgX 1vEW^_| s((^}&=HM\|X&O2S1=MVg$
4$=}? _x71"n&@{39rOX]Aqgi5CJDEtV) d;=*	3dR.kN{2.){t4}|N"Y|@4ub^K Z"*w+81r,<kyD]YQ2uA~<|(VeeL T'1{=}mg$2*|,/Abv"aJ4-G\;b/\{J"CCCC
\n+#Iy[|
!K;+r{
lqCp<aEo(~[?=}}] 
Of:R@+mG57#bam~~=}2U(2Dq.yz	IAqB"Nd~}~;4_T:%j)L=}7Zm9EiU0Y\X4	LJ@5g]51{
O%U)PLVnIg]PS/ dP|p%?	JI.wsI<wu+mNmWW,C1\V;SCT^Q=M]27B{Tw/%YmUAEg:MZdZ?7Zoi4QUH%,8=uZvFZ!XD\.snF}4mllx.\dYlX>z{whn?	4{K*a\
+:f[%EP'ixoT~0yZ\jW
+K>d:X=I
W\n|,J-9;?'p29=Ma+hzdnVY)m	[/f =vO\<=}'L>TT<C73]|z)=MF+[l,dynd2}#zS!UI1E
(qNq=}vad3%J ;=M~&Wd@x[P2\l~"|1 [!M]6>vaw_@q9Zm
UtP2Td{	D{Ac!	* q+j2g-\de5&INm+>+wg,!6>h,!>GhZL+sfjz9JtST	MLQPM=}1h@)=}jNZ/2\00{W~N?fu8
LB ;;7*m&LE8FbVp
!1li-LYn8GZn0^0o=MFP{\[j{HcQ=Mzq;+E@,79aPg|%L:$hW%qV4jpORX|E9D=M2XGp^TA! zwD{~#\gx8nXuO_A=MdW~\K6p=dK=p6$B+[ur ;!HW2qGW&2-e\|}b(b|Yw3;%=M~LIKfmtI{p&y^MwGAoAlpc'$UY-ivyzC)FA1gSBfpzN.Uy~?z=}?s#67S<; 92]0IPz'oII#*QTO9^}JY1G46QF=MA2[T	pb{67$SInt85Wz#Q(=5E+4QHIxJ%U2NdbyU*8SG=}y[ AGqM ByFPi>Ds^a'hF8TPylxet4ub6_wb(wVqMeLLLh&0N5:9KH[ [=MoT]'5b"=MetCp8c,"Rhvwo=M1e.=M,WmM\Y?K*_H5w#A&n,2z6&,'&g	+zo,|n&T}[=M36AEfF q9$+&ERvkq*:eLU M;#0-4	a61m^py&iHU@B^~=M4yjf#Y~FQoQm])g)p)eMia<*+JL	:+71'7!XzH0;${w??APnVd=MqrC-z4s<}~+'r>r%DvcoB~r-},~ofqM.wE^:n3c:3,=M$3k<4l.J=}_Nq=}G:=Mq~h,7hyal2yes%:%9]D_M	-?&,Nj|w'Cb%x^?=MTzrf53A|w&S=M~	3Yrlz_ XgBj^}5(vqoqo
gWyBS;3iN<%%D%\m*9aAq$K9\1Pi ^wK;(K%^{d"g#<p>>@K6ARifN
*B8:|o)?=}oO-*ec@qcS"=M
m]e|ekzhQ1M^mK=}kN@
t 1I* K7"dM96{[T\}q+12rlESK6yV=Jh=M!CNn:)l	d2%$:B+*3"4.//[2 y]udObrn0 bH2!@/26NR-KW!vhUuaq0N g.N'v,M0S9]_Rv:'rr%&T;E	e9^.%H,R#8x73D i"/i;.P0c Z#[\:o$iHU86w9KFyM(}Y,HHxmz<)TsYSFg XEx5jS'5VZuND	|SH:j5 B )X0")RF UU)-T@D+8%^E[5YmW4=}JZVAx&v7I\aj]1c6?)U?eT]Z}(:%gj(Xq"NJ,:@\1%zht[2L?YpgjKU&Xi//'!:=D_o %']k!lVuw7w_0<w [wl=}}hM_-0W.E9*7Q$:^':kW*z,;|aQv={m2j'"aeZ?Yyr.NCj?Eo*S/NbhVexHc!?u21@.@&O"qB<+lg'D~oUBiog2=<lbwXr6T&8Q{=%ZK!q@e}amReSImI!d=}aJXv{~5P_"b|cvo6t@HP=bf]B=}B ;	Qu#5<+=M]
	:U}=}5lhz/h:z'+lFa9xPms
J&oj*E=M3]f|Jw\s6y6?Sx^(K!Z@L*U8/$
T{RquRRNBC+?c &|Zpm:t
v	~K{q	4gD/lAIu)<xKQiHyw7_?(:|z,bP5iB+k|$UT>taTX=}.WR,hJd=Cup*;F}^	"(?WP Kk@w=Md UjZ[ <#5		(t1081y~jS4<i!Tfm@]9k2XIbjg X!I4F'cQk?j
20i
X8IQ0'=}U4%Z^I_I][Rl]K!;-ra$}4eGjd15Tr^m=}'v/^g2]usre!DHjJ9V=}|+GW#>Xt)V}
o5X'T2x=YYTa #_b/G	=} yb	N,]V%d""y.GP'	=}#St27I\+IGaPQHiM&8)c<~K r#ahpy	#CQ3s4,0s^@=kr!>x%dIt,-rzl 4x[Y[/Ig.NDnAmGSN*,=Mc {K>7]B@Qdt(G798cbC@ fx1hT'$~S I-6)oc#})jyvdL2	[sK#UA,0V%{zA!)09JlnH32Ti5YG)[h> kXO/RZ$S\N~pZ'#K6jE/Y*	U@l#m3+P udji66G@+2 x@w0 j]&6k{"-9vOVJ]f/d\caU^")m{FWM$ 4KGdJ5g|6GKLrdTEG0BkR H\tVgB?uQ~#DIA,uws6Xh~G=M5y1p=MZneiK6zcA1b4N[9$t"J232pV6y4(.
@dZ@"s
CmK
MJOW@V 	
2!n\_N*]	0MI8l7{}	r@ 6VE_J?%&N';Zb;.5u.kMoMV-0F5cgmma~%0&eCls:(@+$1.:"MN[D-18*96/zOpw=P9RV3u=}q ',bilHU,n}+vF8Uo%i@g,cFkO
(Iu;^h	t KHbf$LQ!=M 9M	 ^0JXti1RfRl<}f%'Fv'X(XLhwJ8PpXE.X_EP_!m[Pj@*GA=}]$ZahgPr	%p2JO(
x{G;ZeF~6{LPRijfvp [#"z[&X%[u=-P\j2{EbT09Y7U(l:hl$Vj=M|UhFKvby+ofQ
7Zbp!>,$H=M g/>3F#;$0c^$j=M
y=}qhz@41U?]t] ,!! Tg7=!=}
-9\%[H-<=M53Mrr)s 09^EHN.
i4qN1C:aay;zg{G-d$'C|9gyZ&p#
j)
?U"d65e33)*|.9aN^3$4v{6$i^S=fbc> 0*ZA	v)\_oF084. Ai>?H=}OE{VgHu
}^QOxd*p'IPmNbg	3Y<C|nzcq13|3=MY@$k)aad8f$[DW"3|MY"1_W5=MyCPd!2{-31?=}Ad(+')E{+E^~LvH82H~E\>n78cSNNy@
_(^Yhw]!P>2j00#T2Po,o
7"9/T=}O689;=}M<mR*^52meh~pV,2z(:w.S7dx*(eXW);sZJ%<Lw>*Ro#<TX0<z
zKn)!<1a*3K=M&]J;+*/Yo]'31)Ch>:vRl/
DZ9]1+^.{KX I=_vU
s2xecW	<RrB,5u(-(xv=}|N#j.lE..y~??dZMVqo=}qy)%l1UcqYZ~1jFvQOj #W{_l=v?3q$,m4N	x_?=MNYB0RU	=Y>O1]|G#i,Llk[U\N=M]F2W[s*;9ypGkQ3Pj3H3d;f!=}jf_;X.GX{	oT$f%=}ydcH):9%LQ14F}}rd)H1cQ#ByuF72=cQ\]
/__!R|w{tf\($?_GKm7+N	.^g"7m?M7)mm=}|$()(6gUvZ(vdk:k =M&U~|8?/~M~Xk|F%Lfp]W|wu#+M aZTAVjw#[_x)3mdq2,D~ 
Q/:.(
 na3	'RE0\g#,TicZ9UB{LQ$	q+
(srg$lcEOI2 :ZkG@y*n6BIce3]u'x"WlD6gq^TD:S4"Bnm!hJSI  =0F1 {l5f?~#8xXVx0Fu_ga%^[jd#a B+^h;Eq6Z3U9En%f=0<E|KVUp5b^CsIYOSv	.]%'=M--Z.N+Az5OR8xR/6^T-XNVTkc3$:QV3B	82U){ G:\[xdocrb{vo..q0q{lx8G0{gA~ +I8[)0by=}\'2IK+ee>M/;m0$Rrnrb	c@r?6fW-m@7^si
4]mA{{oZtBykUV
_zJF]^P[&6=M^F=MSsOBaZ3~MUV#+jL]zX(n~r;s.&	0NDnw.7P)*q%9P_wzAh1~hT]Gm:COFE_3?Y[e&T^[XS=>!H=}(v<^*U^=}Zh##1&X<?S+/kv'$s|[6'H#gd&oz	^b;Z+EG$~&FS?)/1,7?[c.%%['r{=M},p+i;6>czxlS8LfR0;9v;%<{ui(	$thc R]Y5.	{4Uh-TY-l/l M[anr@,5o"{JuKwi=MSH[n~[#Ev@l]3m)(
870nY/rNmr$J=M
X&[x)Y#q_~=d>%Sg=c"e>YI}B^6d0p(|=}&z\/M"q)$_#+h+qS(%m0pps[xAY~Kn'Z	"}$*xetn9t	S0."Q*/Cupiu_ 9Yb}%e:'fJA'KyNCS:M:UaAXpW(9;GgTDq.@Kv"M~kzvGMMcH]#*
Vgu|*8~!}wsDi7z/]U2j ?WJFNFnD&p[h81~?.+G-7Jr.k5}%RLMWb4
,>tvP1M:s&@QM+,3$2su|qiq=gihjA,a[%)_-BSLM%@g=O=JRmdjX]f<<1^HePS%Xj4[#W_qD[Qx
D"uWV4	J1v#9I-iiN^,3kHxX'dy;hS	{L1@B7Jn|Cf=Mm
.D5Jfe{^c/S5 f_Zm{-58?>=M]e\V!Ss*Qr'u5#eYRo 98noLZ]18HtZoW^o?e?6=}-$f3CVQnV	HJO+IwHk9p?pv0]A1QzinW=}6@Y1},"bC5e7:+LqO<DLD Qxe~(/~2s$<!$R2'=MSvrU0/m.[A~^=M#yut>)k@b@xD.IEZT}j2 +4UjzcKkY*j.w5O1(xaX3 6hy_dP8M.va)5j/!VTa=M&{BS!s~2z<
2,/h<B"-2T	V6}=}Z}?U.69YZ'VA	+	cTS7sTAO}Ab6CDil1,QGo>{G1|"-5!|bcC-*{*/|?/*|*0!m{~e=zxX!rZRfV* A~ 0|Svh*4!=MC|Q|h'x|r5R:Dn '*s=46q_]_m|=RNIVXQA,~-RfqJ:=}H)d&27n%BI=k^xEz|H61ceL_]sPRm82Z	vz]-A,@]kTod^XT/Xz  |7R}a8 0{G[_GRgzY9 Fj!-hRHR9JpY0	\s^Q:,=PQxhVGP)CN^R4H4QDQ/{HfW\m2,osf<9VcpjfC4>2sqxw![@5K=Y	Q>_%F>[$[pIN5=MvQ@]CbjIh/N=M-i"#jw{1AS_9P{=w{4o'U~bYl H@00oxhD]}Id'+fL_	flHwD/V8G&x?a6@p@ HY[i2;=}Rv#/"k_X:_mv>WPzqz (j-#*zs4y_wWp=}ehA5M)\|8 ?nR6*hj$+J kF~p;2s9W]$4es$X	@:HV	*.FEsm!Wr}mK!#?lfOu#%-4QH]^bhE/:XB85^n{AocAM"Pm4+#X_T4+iAHk0IQJT(_Qzq1\	|Z.S]i\9)cS9H]k/TcKNp	Iq#5(Oeo2?<F%e=}A!);@eG d)TrxsK*wHo.DtPerG-aW}2T2m\@2@jXhM9" #mNe~!c]	0s6^r 9E2B[:&b5/<-M)9;c wqOO*~vTB(;#=v:zVl4HqA*Q?d]j4?T7+	da~,/W-W7bC5G &)lq~@4t-?n@fBB?"3L5 Z.\^y> h$~?ZN>QGAh=}aJ(0J^ct=3MuTB5z4@mbei3y	=}[VlnMU{$SL5B{dkQ;4R.al8=}(f26G5QeG+&-R4/oO>:)r[="~%Lfc}t,?AK=MemM U7d^kshi,F~FAV3?IGFHP3usX<OJ{.G:A<j8efnAA2M,kneGXY-L;]wYBE>(iPXHb.)2=}0lX/sw^9Q;u_Z$Gxi\Y_2soH|d8tQB.l6ldkumi<,	*B
?F}.Pj)M+2gYUvfg-1#AJPxaVQR5kI>tM/I#Zg
 ~3Y<AiH||M JsUq)o H5[[dX9u[J=6A.@7qz+5*<HWC)ytm }UrK^cZVfuX:ng:MZ=M!&		*;S+=0nJDm0Q{}[:RC@(}/<@0n{!l*f=j,rfnnS
z
oWThHf7 <]}sC7K2S=M'@E%*s2/HZ5@y3*G%BF/#}C!8=}4#N7jbyO=10
>M=M,h$:w0 n=MM\-E'&4<*ib84qiE;SPc[e;i,x/4^%z\)@j<=}SKmgB}[%#3W<4IY@vSo0gz}Z@m32t->/h&]'U=}1sGPtd9S^\1!}c-((:sRJs5w6X>%.0;\xX9d"G{
ZEdUsohWFo| cp=}iv8+RCN(|8N($Nx0&uZ>b\=}&Y$}} R=J\w)9[HRJ27gv4:s"-'{@!@)IU1=d'i=}B"t:"/U6	X@iqz*h8(Q8NRk%>nEY]) v7(o?^B)0~NA#aq?1wt?-n{2c^S**	D}^AfmgLk\$yX^& V|2|;	^|.sQER@]/cLC 4S$H~h7j/c- JJ.-/=M 2uAL';NDs4H]t$8G63Cpm&Pt(U'(GNh!P )-XM d1{@=M:=}BTBS/$uA=M0:Bqm5:A&dfuMFs \6Uf;V]HwRC'2P"3p1PP\L0x>2*X53vgxbNWm?n",EyFEF&cvkTWCopZfudAfQ5/R	>uB'*p%Ky IY5=#r>4Dh1=}	;jom1rbaw;(uwZckgz]1Tz&j})es>qUa+<uc?[+:,4="K3>H4Xcg| m@^cmF]\9e0nt[sZSNf4IolUVt[=M^RAH@A_xt@_x|8]h:"G2(qq&gU	F2|L#)u@.me4/Uc^)>QR0Zlh")V\r&b%WQo3334  z;,Ltvx-[(7{K6*bWPRO*gK;18zjAi*;\P2"x9~b2$2YU
hbGBE\g}6qGfuc{w"c]/| yPu!omScBwwoI<Tod(~
T8oSY/$]>(mnCG&B@""du9om)a(e&r
q;tckt+w=MS!6Pv\A$_nf?V%;F^=MK3f=}q6?q~sropwATv;*538$d3{o@X;uQYE8PDUK8M V4WD"GT{"1$Nm#6+6vI
$8zC1?DS91GCo5w]
D2T;Ypyiah92BbQ|R]L;^HlL7"Dcp%Kc):b$J-+vFSJDWU=Gtckf{Az7:fvR]> VMRU3&6M}&VAS9poshyM,rA9\NMO+f9*=}"wc6]_FB<"$1+l (v:F bie2zTrwioY2 K5+9OX
4#$2+k,S2BG[Gds\S@; 1@)35N%s=}r(6[d+s(-2aM~699+ &k"7%7gPM!MHl=]rTXVk"i?;^{1ZtORN>g9nr=}=<x>dJ,?pS&bow9C)>Y5"0iIF)kdCGhV&,{*$[eg^_Z=M|}J(DP7eO?NCpg_oy:44-!m r&z(X,'
BJB> G,FF8+*gcI-4>8'N)"5i<C&I=}N[p4U#go5@9=}fj-G$[m5*:S	SFywQU<d]gq<v<'QWLS'SJf,9uF=M1edQJA8euJKX; ju0pj$?LB>H^ZDwl?KeA,y_trrLi=Uu)WqHTj^J*+-\~ay56h"ah=MhW;dOT].:|Jgm](=6FD]?4bjYE9|hwY8,uzrGLs&u8z"4^xk@ jtm)i3CF>^?yq]MLH]GTTn9NqqmQn5(^--8"{0u5mHHkad! 2A>TO=MTVr2# ;2ZffLF<DN,9iYRU,Fk!&+6P	1Ef;V,E^:k[!F4'u@2:ASFupG)m	~L+HxLrn$Knme?pOS(b!YCu!)OA0Hks}^N&Xzs D?qG;jlo
_nR\'zL^l4Bj-CW6W!8=}mE?/p%XfX8#HIMOFDf =Mmz:6^	P+7!gePXR
LF8f;sZ%&;L QK82x,9]aV>U(f)m?HUHMoW;<Pq6t ZJd1]}Tu4
PW%>pGi6+DoBw	4Q{(Ia$Y"[sRDw3{Z4E3Ej)+o9Y&t5YBEOIuLn{KrGj>Og.HijJWpBE{;e\xPXSnf1VIV{u~~=5R=}BpL|?klJniAyVG( --=My4%VROTHQ_[g9wcd8Oyt}EYhx4Y:YD'	H9DWDHl@.(TkE
HEQ&\YJ@kA	9fH.QA4iAT}rZf8/SnA=Kh?FjQLkCFFVD;+:Wy*YH*f'_FYVAZ)E2>m3nsh+Gd0Xph0{K}bJea=MH=TS!'e(0^MnLInpRxT{!_b:sE6-x=}^yqmF!tY@=}=c%K[EE:2)xA[NV>n=PJ^DH$78tGPTbjEg=M&#Ak"A=>LQ</cn=}|IX #]kKu^ ;*	1!BrY@xI}%3!i;sV9A_jQA.[?mn cKb=U.(kD6_P<"Ks	nNjBZV5M9YK4g2Y u=}4r~}M|4pg\=L"pP(mtiYoSM^Zp!HkWH3f@T:n@Z |R6m*j>ZQ=}k_~#T'g+m1M!p*SM9VBnT7Hs.k{>Eqi%a;rexyucJOv-MmMT+}=M"=M&dFXa{d.;
xMl.WaHT=Maj=}EV+8"/{C4r_Fx}=}q
4\E(5!3[3#u570Cv-(J4H~n_,&nyUJ'3|'H~s)d^v^/"1,BucGCC3E VI,dn[&$jNn_^$YDY|4IRz*@t,-S{b;$@>.r$?r**7 D[_1}/L-K?-bH3lV	sdw0X>-<q#}R,]!vyzu%)7	l?~lmA}@plUfZ>xf$6V}5=o>ei=MJv=Mb-SAU\X[o"z7!RQn\$B_f%-E*)$<'.f)'.Q"*>;C6S(MD,}XU0e#[=MnUgdYJd^X|e&=MHy@p2CcCj,Dj5pTMnZT=#'$A8,G%oS]s&iFS4TTq@lLEG5(=MWF:4!P1k}-n'rTd) hoI~W($5+|fE\?ksc6Sc}2'nkhL^@JS#s6
5jJg=&{<C5SFZ[ExOV	M_j/%9VKq7OJI5hfhMF
K?0:}zgB1kT8')NU yndzrv:#"(K]K c*]Q[$,=}1]dZp_bit;@%r; 5XCjFu'M6&L%CTA!^+Y1H^M/rbFl#B%F=Mm~~z50n'=Mn?.86n3)IL	03=}saaoDN2laNFE%3O)B|~26==MbJhr>M?Ao]z_]/tPH=M8c9]vF3N')6)L:jtUH7;bplF(B/;=3r_b\1*,41Y<q=}Q<sH4b?(q=k;Y{6_[Y!.}dQ^zYFoW:fp"@^AuhT>!/2cfNuQ%*%]#D<}HS_LM}agRE"O3jQNS~"k\?cT.z)K
wx^vv+(h"bg];z1Ak8d*?D.f?S1EC	JyC&)}37N"R~TWMb{KvMvQxD8K59^~Ifc94S'8:>5EAT/sBy.&Fa
.(g0U*Ru1LaLx5uO_=DZDV'T5l?R5TmSm~JFI7Qh+GIv5%fR%lu"A!%8H0fF_s~%JNlr,ya*/3}(cQxwc<Nf93F4!Y&r#v"a#\+?5<vPub85~c5?#S[$@+C7PS[>4"@:3c8t),mXnY;9mPu76mnb*&'t%9/|Qio8Sx$"o8=}[bT-Ut|Gz20y&e/<eB^TzuW'4smU5dhNYO<j))iAe9w_~MZp4N?J*[G G9,SL=M*(+Q5~]lTMe6Tf7;9?U}miIx^+6d-SvRqZv~$T{A$uj'3%mu9>{D'6Lo\>U9o9\b*LD,T_?p<S2S%x5h=MHCXjJ=Mmrx7Ks t@/
C&n]V
j93&Pb.T30}.Q+bgUmtgGvq#"ynN SHR%opUu4RaOkD&}D/P8t}"NlMAO=?zH%7
A G+zlhiHlo}=U_!Rb p%=}e3f5KwN%JT=MBUNfV*AT%MlPVs?f;6%vPoz5S@cC'NHr&!DM:5AY,BaOE{M]{T'zU&=}~"D"!UsrJ% **^  *AF)?fFL8*Py[#Q'e
ECRy!bNqO ?H-#!6x|.@(uzJu@5w!]2:3\;1FQS^MdcF^D!Glc]-}dcJ_*g}y%E1OT
_aao_>aGcq35yWO+6O4j!I>cgVh ?:;qY"69n<i	E][{^]&E+dv:][]:@"0);Un+;72;O>5{N&WqqpMetFjW-=M	s3G5a{=M[B\S+C+7x o+H,b'sw!\2\u9	;QIu \>5zxF #m4!/-txy0$&+VzF}<<TQ*4U_l0<pMHO+b#bM[D}c]ql!hwc)nGYq=M\As>MHwSB]~O='CP?y=5iq7{%[3 1nZ	Z-!0X>oY=hUsG@3~*w:(oJIf=}7R 'U&N|yP#b9cpTMqQ5	Dd&po5iim
:3=M1]R$1G0y/yY*p2RXB^f[S9{B50A(ODiCz!~x$pP wgRJ5Qf#IG.I pN/1&&q~(MbkbM;jD|_R6kU6[w.3*'qw5oA.ECJ>(IF{"|>pS_=}h ]-M<o);G:|GSo3cYY0TPh9ba<k2JD^GvbA;bVT {%_6&J|Tu~3{TQ K(}kB5+@4NTK<&U_1(aYvyB(xG7Bv:d	Y03$WN0|]:	bm'/5o:v3	27d/|"<VJ>SeSVX5q9wnH=M@BArSmm10"1( 8sD,Yj[#fbIVvW6~s#g}QC1M%#*Y390p^W
9qOkx$V:+~E=M\Fk_4BNwr=h,w+ ZAa^s2S!".TY-u"21o/Mt9G*n=}=M{?wI RF0Cz@
9}JqI}Wr	{62NTTBhlsn_Le'x>){6fr'$X2atOSbO:+"7gW0FFWu?G~+9:95?Z;
sVYI}=MY-R=}g\M+[jZ#o:0V{_fx/4
6Jg~Pd>BP|#o mU*]*# ]6rl$adyo:mc[za<h^*A9. 80qTVC=M=}#dCFUx?T~jSt  /v#
'c"4q3{v^:k3]z'gC?zS(OMQ}G)'=\plKj~QbW4Ou8DrL./?m5Fiq~OJ<j*klgm\_'v+ 99eN!Wf95DCt> 2<dax8d#wE%bZM?=ts?kn4P
vLK-@'Nom%4	 GA%p{nga_n'"a!,Ok?CwplfWkguZ@K {>e g@}Aa*jP7Rd|u
%l;a gUsayCma-Vs2p(K?)^p&ae?
xICVzC"p/;:dUR GSoa!wN5	"Qlou+fQb:e=}oy|N8v_ObD:N+) )
dwPk.|1FN0km\Z'u#*1M 1V	\	\f [!CG}G.~{e.9;1A=Mc@epr=0p1hV&+]4=Z pc5"i/a[4\eQ;YhE&d5dbgiU?NeSoK	/amSJE9PJM
nmsXx~	?BCOMYM_&Z.hs%v26>%LAl0&',N$*|+<89]$vb6XPHI*aH8\{4jUpg
c4VPdTtu_z5Y0!@Y6/v.cyTK$i%uQG682"u(L0'/D
Xp2cEQY$fs+f!	rZB-Vcqqa5QMgSU?dZAz  Dy61%+r,_	Y([ %s88skh5]Fnbiw=}O64?vd}GU
!m=r9^OlWeX 0%3CRIJy\&^!Lo=}!^|Y(y*T"ds}]U/|=MY(g-w=R=Msw(1fA%x/t'^~e8I6f9:wt&bb,j*$z/*#f9=q].5\59y,DRGgyN1:[[}#Cz}Amc7{U3=ccV(w.,z	8lR|V-M
PDr%t3kOp2uJj_=M
}TG;5@Or9l}/Zu@_/m5e(s !vrDEj[v4ng"n.SFi }a>A b&xahBFFt =MhA|7%=}@-&&F(,h^~B.G=Fg_7L.>z^nWggwo1UEOOI)_3P1c
U3Dj$(;=Mgo6/$_&B===}bj;~^2]w-W5YDNE;U5?8cf!3>me IAlr6X^S5fV^m#E3<$jncqwJ
6xg=z#\VIv	 Y	o-jSO-O;7w_MbwTKCaw46N|*=}ys@F"5lcvb||=}' /5b=.3wL~^=B<X%gYCEp5cad >/#]c([(QUyLV06]X\v9C]5dD ;Nm].>3^2'.")&6]=MjfFw7tcFO%8b|yKpFaH^[*iL'lhBy><+u=M~I=M=}	=M3}J<4co,GSU!I}6X(B_CTIAE)Iw;% C?=}+Do1)}*G<]q*N,_DF*t"|3.,aakNe@n=r#FW;{[l^#)R>tHRo+qBrO']Y}=}mL)sV UBomP&"mdCY)z ?c&u^Y7~L=}{	tPbLfH=M/VR-MtVB<[vMy;&	[297!h28dD21g#t&4kt%H}o t#887k.s.v}&R'^Rwx7G7}rx8v;JOHooc>u?I:nNA8BZQj@Of_1iX	Eu 4!d92BoF MIF}9<t'r"n$u]a;o)z	[M2vBMm_tY3
B>ykC%|x8/d-z%q"J-RkMUtXsAJz~^wS=} P5*^SxLXU0XHoQH(LZhDSG'v=} bLQ"D_Vr.ME	m	Ueyo!=}&#4B	_O!V-~cZ=mY=}O'.4j6?(g](7rPeW0! i?RQ[,VpS{L(M'hXMpfQ4q~@l=}=}[N.@=Mf'IwZI9
sCMAcK535YR5I%OM4pgozkI]a^@{:J$IA>h"Lm1HLcR:N:oN;(5CK=MilOHR/	l^3r
 lj.'procc-O~cw	{Yjo# O:Z&JIerTG3S;un uz =MBoE#6+a~z,8nZh:TczO	<_  
1~]b{;O@NM/a;K6PRH#KA]k8^@hT
Pm4Nfr<&0~9Sh-	C{U		OqO3(	,t;GfZcn%w,~XowymSkR_f/|x]/*PNaYr{Zo&4!+!I hzXLTQ)P,d~:Ot-g~&a=MdlhtGV=}1@DP-gnd*]6x6_:%jnIkEcz~9G\Om[V>S A=}iqg]emchFkf#"GUipP*T q@?y?~.=u3U Wt(zVrHQS2ZsXs@:|#wxd;u/Gwii8\;78nX0XLbs&@haxiJVAhy)=}'S C#*UzF~w7h[ N^IJI:'5Ih~9<5C.O=},$:rjs+vUb)MxSHiA$SZ=w|h;(ew?1n_rS-RUWP4ZCVdn?+3Ypaeq(oe~9,d-aU4 C+S&25qQ+l@Dwq&ZiM2Q]x/]ui~__M\MUTgEl7rM_4RI @z2h%n~%ni@r_v8^lhn5,=MKx7}	!1|
h3#wpX&H+a&7	>m/w=}B|MaJ^PAC#G]N76c+(z%Q1Z[m]o11	J~fZp#Q,nHd)J\h\OSZ/|Fi@:G[
 ^K:T~7_8>&#C:gDT:4qg=Nf5K,8RCw!=MY
Q=}HcBVi8pML<F:m[*0<;,T7.'\QibbD1V';ARWdQNCJ,>@V];R@w4jwNo4JmsA_0<C)eHf 5Py:+P5{RyF,=Mv54!hrv{%/h  8
qtWd/=}&/AJI5Cr;~p8Ve=,B|xPL,&6Mw|LFGv Z<23yOvxf2NR]SwZB(,Lw&s,ZRaGdqRP'%No%U>gn^nI%"<uZ8;UX)PHg{3V.a|fr	]! %z:)[8MR4D3}(NH<yk9+Ef6'1\R	=}J$+Q}n~t,@d4n$u(k*W,]~ik{Q:YtpuS/[H:=M7LQb3	3
Z)9NWH nY<Qej{ 428gMm	GeE0r4F4)=Da=m|z=Mc?U#1b}+gh~ho	&[eyfYg$&~Y d^]z|fzBlV<Dk*'G',Zz]f5|'nsO^A	?v7|{"\YQW"Rs.ww!=}Nj@=E| .2qE&S CU:R;=M!C394)mz]Wk
>p|	e	FjAP++yf:;kdcs!0-r,k7j qGn9SCEsM@@]ktD] |gW}?#l@h	C!
W!@k8^Q_=}W@:]=}9Uk2(;)xX$2(EY]DQtvY%=MdONoSU =?]zc[W5>wo!rY[}s+=}x(?q[$KyonwCm_Z3]NMo s5-zo7gO?*P8/L3S8c7w\v geNA9uQ&LPN9{w|!/>OGF WWiW'D>#R(\6i >Ei>iMP	a u66uF9=}cXtd+A<+0y9_pbx30jBGqs\K0?QTI K3!pLQ?1:an"Bdynm;uQ(m 5waG.on(LXz{^V1P:gRF5+7A-"Qku;lv7FB'Q?%1sS?D%/yWW5 Dv:bc"_mIP'ijRLoTCmV*TXQ!oY_[nkut5vT}exGHz2Kz<D!Xjge$No"hLl~Kw!u	I1s.y6b"3#=FR @f8l@U3u}y1~F2 O6MFc5DryAn_YF&#
:;]&[ui5f+Fd
%>"e{j]$yI}kVmynzg;;(keSB'5w	m[FPA#l+=coyM=[w|9o*}HVpD6=i
~mu&zWI{.8zhST2&[ XT1
p+ UL:0hw6l\Kn4s{.;	)5HnB)Fn55(TrMgUfN&jw6pl^rR%7A~/3"HDotxJv&VdP=}YEt.ta~CXJ(j#lv-]$[Jx:Y\xN=UH)vC	~^KN^kBR^Y^aAPMSBzxj)A?s(Mri$R/>9 ;!kN].amQ2"F.wE RCsOU7ea(%T>{=f0d*hQ3v,mr(~L3fMvIrrrrQS@wB2Sw$\<y0 )=MyNy/-qX_	Ql>gladp6*==}=}=E?Uo=}1=zZ4U%=%pi=iU!+^!\fHqeAJU"RQ(	=}iKss\& D:tbUIJ2OurCgCC }@CtECzX7+$v5k&8H=}=}_Y?
'=}~!iHJev"\QKsW lI"4sup	:u]nXb-VF _o+TA6pdBZ{B<=MkmleoPEY)uZ =Zv3N/!_rSl,!6W)z~;TqYi\YBNPKIex}x=MkN+-z=MbfWFu:#=Y1.Wir=uo@b4GlT}t\8C4'c,yJSY9QN4	#Y8)QAr4\J^v^}A,Vb
$B%k?oB/cvWxcT	m&JhYafR^E3jB{,KB=MjN_a<;!G/<T|h4A:1]|tf9vaQy_@(=} Ri{i=}>=),&(Q2	v6=d+&4lX%6i'YSVMJz=}QP(jtd}!bJ&(39kv|;2*HMZ?;bd7@	=u=MJVL1'Q?=}bi2e PL"ayO/knmlL8 	Bm+WF n39Lod\<&D2@\yr zn!*ZqLF"
=fb9=CtDAis=MLhc[@n^CIrv(WgRK>j]!\SSjre[HOh^L-/n[0&PBI8 WpR9;m*grcb5:.}nJ/ >=MtEQFM|T:W&Kk7okX$q	u!jQ VFTSv v7
x=}xal$cVHR#\V2.IGwH9e<o,xO~83##L60XC/SBKkY1Zo!Ip5k[g.5G{g!@gmvVK^MADrTr]H!Di?)gW]%2A!2f>=}=N3;wj"Rh4   jvrXa*i@TUv{E{=Mb'}qcG-mQiW\eP5i@0)#X1Nu)K'i\gGJDr~-+VaZxMPA."0~ #5-ep?
{zUR^D0wiK_}Gd9,(;$UVCuf&n4h0\qM[zL5G\jNq\1@J>fvngt3:Q]eW(d5MWQK"qW5dmG,$5|cJ+KN"4#R0J#:c"WEm4!8M3^FFFFFSWFeq|eU6VyzI$TTk L-~=}]Bm	a9H|{zVGFTNEFvpkPadZb1Y~1^fcL_4QaQ^hC"Hxt:}+<K83ZKpXY~(SF4O)8UR-/..4xJOmFVD2R!K!mt8[EZtEZZ8ZcYPQfpQc hg=l[b1d1Yrqe[cOAgZc^=eM!^!c}!ZaYg_jq=h#\g^(}f
pwt;KAiw]:~q\ !'C^.Qg]~Cg&baTkBj75ZAd=}%69X]Vb,dOkD7gz!a]:Q ]wUXlk	?%n SX </@EW>%
PxLniSq'9S!!a1bZ]h=TwF7lZ,*(!gt!4kKn,5bSTMw~l'wl$,Y
fU;g#3!$
VkquF11pGplnwo7kkmpnwogVmWpwQ#~!_Lz>f9'$<1+9$3v=}o}-
n~JN!<k~h2IVP=}+ x2:'=MmrR)mL)BvRoO|4?M<oC2O\&xxvs,~PWPiwVGAS,={O,=@$Lr$,D1RnQ'2ht=M*'\YY,bSwV?xVrPrxV]Gb:UGYr@jl@ =De=MuU~1kXmw$n~de|<m9Z4Q$n6K,U)b~MX.q:aaMhaK\Q-g	1SVWo_xS8w2WO8>re$RNKXR%	<
a: a'uaD\c]QB'=Mn1;GebN<
J
=Mc(4a3A^c^% D|_fG5aCgKzVdD(}QmDl$DTe/U^J~q&"y]nzzSZ	*'a	JZJB_PT;&)&pfnJ~wVZ;@J&-h AEvd=O6N;(1S>F3QHen=}\Ek
swR#O)eHr+NqnKz\,.	-.y;]Z9	{wrs>qzio@_y4f2Y?_=MR	'n&|WnTnh9<<F?VE|Y=}-e|?e<i*@
eeI
| gp9rmc{!XT<a}eJ
AkX<fXFgFFFvV7.6r2JD_AwoB&T-l4.Y3}b Lniy|Jsz3~{=M'C:Oum$fi'm_*{F]il=M.K=MxNdpAs.vu,F=@)#^.fq}!KF.}+fL=M<=MdKfj'_xNf500 Ca|I%p28 }7"3yjv5bM@;O!fi>V +}^$p*\tiK_DN:EU#6]-flI#cT{\aaXXxd+=M#}=MTGoLPrujwZDxI'-O^-Z+KKpU6[,v#V2]hvPjVRU7fT|X=plKH#CT 8S,*@f(uQ7AV=MNIuPZ.Y{)~)6d2zz7><Z93E
i)9}b!BlacB;Tj
Z*vBUY\V( /L{LV:DLi|NxR \J4x
uipY6k>~!rNsL!rgj93gTfEQ}@B$SkPi}LIv Fz Rl<_c8>gw!BOL4=Mt
#~G!H*+$b3VdS}}QV<W:nO,W<WS\<VE7 r(R4t
DL(I=M2LSu<PIhpEQ$! ;=} Ie6&Z"av&=MmNt[j='hC xf!b=b~X=}m=i)x[.	;v!d[*?:rhvYUqUq/}QauD9h	Y=M=,TgR'nE3gm$K- i'9?|X$iU
LK~|dJvih*!_Yd@PUJ!XQSv$e:|(t4pBZ@H[T!jlJIwAhad	8chcvl7~2=M!<MeC]QhF:&}=42a Q&\:fr{,<qhVfz"8hm>xHp_^'^wzY=M^EP}m!\nQ6fi.ua[jXd!\%p9v]b%=4XYxrWy=M\Ebes%+ jr2MR}YTR s
U9X	D>s=\P#f98tfsTDnLHJzz_*GlROiSqp<_UdZLu6	.@ZMxJ=|.5DA#= mN[pVe"8ieXg=\D;xS iT1EqhJ(Y,fx^@#LXkj(9w}^2++%+\o!c;	7j[jx{[iMi}z>FCzjH^qG3yV %OYesi'n4w	&~^=\>j(% lq"d@*t&I3kP:(pgVmZ1
0jSj)&KbF2F(<uWX3(b6PYU8"pDYsT}%|(;kzU7uI}J.cWX0|WAqC26o}#&YuRTFjC*N.+-n(.-nMJRMX	IIR#"8mM6\mF<2PtxpE#%
'~	\z}#k,	Fn.uN^0"s!gHXM#Z~QHfl,f&'rMug VKWZR\ #HE&}	,W8e
|NGei/W{\(@]B6o(/,dl)HJ, 7 X[cDE9xR1@wGwpiN|rE&D=}M/hYJSU1=M|ScVG$sT-;VmV:)}"T][*&'!^+Ux,[?.p?hXW1&fXp)*,pjphR=5jrW|']X%jc0bz	bs:#:/op	L]*g)MyIlu\J+c3e\r,4bc=BU|i8Pq,|TrI[s|a{U8RcDN)qR\Lyn[]obMatI(X<8j^Z.02v>UU%NUbVO7D#4% +Qc^vRv}e}=}
Vv8}1
"pj=3qr  &we.,aK>oxeC,Mm|=}"	G&up%JM0,7"v~gYZ{]13GMO1=b~rsH)d"3,|\SFZ|x)is
Cl iraX
KfWPsfzrCAc|	qv?B@mw=MSTvb-FF__+n9PHa:$MVwy4j[}I'JoJ) q:'oXn
I!]X8a98'u\=}OZ@t	V=Mu6"K +$M[Y^8L8d.	rZbNGTWT~8SZHces1W\k?q3$h!W+O4C\mXN$oYc/4?W&H<'TG'(/aJILAFbY2BUE)r5|<(%1y>EQDv6uWvYp].,q9P3QcKT0t!	Or9~W	X1xgbwu/4?D oG/T$Qa$	|9>c%Yh-qPo vF*VZ4^9RV0$\|UD$P 1oh7ZYc&<cIvl{ +E=Mr/On0^>nR+G)!Pb~Xb	-Ck
lm(#"S7feLMVk*w[z\e;OZqHwugZ*(fg}QXVDue7WZ ;:LNhIjh+4,DS4k\D'+1~LDs#([BpX $z[]RW"]xyu elds\mIR2Y[+P+qf0@zU#lSt3L :B8]AxDLqGv<+ixbBxF3 7'IfQozhoZ LvwT:WdH'vGe-Ix7iHl8@(%[L~<o arN[<D&pNMy3'w2T_-[Wb1Oo4CwWo"-#yHe_MlC87DtKzS9&~^H>XV1HBw/"-\H]rT-E-|UoSF6	;}O*KvJTwOTX=gmMTLd (7x'\Mkt(y6hV6.Z;.lT&y QW=rckMb<6=}4=yc 0~_Bi?zu\;Hz v[eb[D 69vM47%d49,oDST-T-0>y*%:M-"4:TEu6C,[}>0%+;F@PhQmT!-X|pIkv2
#z"X=M'fL/mQ%15tUIO>!=C-["X%a3\(XOvx'kMPAAlfO|EcuM._G=m,BMky[S]To2t^[.
0S)My'OHOR5Ijcm.2u=M:i{q"0LUAfH(G3K,v[#yJ> m,[KAPl{+.W;'voNKgr~R
7](@cm>Wp7hIvR
.lG8o~=WW,|z3
.[q*NvbZv$)T9d#=M)hs-VxuSAb#=KjZD1-$VW;C&b>M]i1)hXpY?*FC/RN&c]OC=MP(N, T]=L<?Soldht6#lC\_?=T.tKHvtA43nZ&H)Yy|S0y&;8w<o\y0G,jN6)R%;LO6tQPe N=M~9=MLq+.v-w2SRb<}2){2aQk[B4Sx(,If@Ng|]WIzCtOsMC)-9~x5)? tR).&hc"=Mln\==M6{X5x+sBmdM[#/@m=?=Mi^? %6.s=EXsGyO5k.%ieX\\?_%AUfgN+^K>Hz=}xZV%{ SQ}P#\CocC*
,\yDpj
E~"H%{)->CyssxX=<.5f,.jn[?Jh0jsD>q4z&=yv8m;a5S#a7y3IgNYy8gh?hxEXyjA+q@M6@XBj.O:PXXrt&.v<{Omm.q%=MZC)-kFAqDeL>[CXgwgC>,[v|u&d M}3	
 >{&C)6wB5z/T^Z&v!)N<lE]MyCRn3xmM<v[3&XcZ(y)>}~
	{	ai  qb[SH\HPV&H$jvuwhxP>8=EA0%9ub[4J;
JS=}e@	+v5f=M#s7}Jx2W&wWNU+"=Mb[|Oi/qYO$3<DZw3=T*rc=}.:0]HADH"duYR0@yf[j"cIr3Q7<twoRJ2
w29a(.|Ep3u]eY\~#t;1Yw< fkl@1aM<Z!MBFBukL(R}5g"9We_}^D"(1p$ESl{MDM2]rOpLWVFHl(dhbRreUr+#(dX?SqR=MTz7k.tH|\h/<:4\gRHc<=/t?-Qw=@<=}g.{1q=JXiK0A4]ns}*?PGKp
e-M-Wcnj1*5URsQP;\=*mL1Yt-bxS%X. UFiL=uAe10dNLQug~0g6-DfS#xdf6t#?=}1fpP)WV-},vaM?=/6:4^mwFvxd"Gp9ZsUtVsN%(3@2?q
*Ze&@ht0V
Yyjdh$i$=}wSiGN!~|ZGeo9.iYj7k=zMaAay GVnU%jxI\"$UPH79N1%K)B8czR0W.c_  -ruJE%OWRkk dr]s5=}@LPs ^(GB |f/BJGrg>OSmfKl-t=!g=A_2{~F,Axaze'F5c9!kP,5dlPK \a:=y}q]ss3>hO]Vl&|WS5!a4Z%7AnV@
*fU6ry~arE%<n#=} $J=M|MUrr~{jg^BCCj=}7~ko6_9nzO~XY9=
R!4;;5XBY|~!^Pl|a&@V138:f%?vJ1sY{t=}lNr}ft|F|N4B^LP4.D;Sj3xSvKRK>b=}ju5l!dJ&V=}l:X10 zLYx+	.xt,Cy-D)ou$pLcml>908f^JUg(a[CVq=#8[?qUL0J"2nRj>X
RmzKEC1G5h[K|0i3R*
4ps=}m7 #AoJ"Zl[E;v%tPq;mz%vD 	Xn$(EwaJg]5S:h1Npv v NX?3A.X7Ht^s#E 0p3&rCZq0xS|g@o"Scd?7=vp-}PLORE5$VB;cXa&[5ITA+/[gkpC-B"
 ,m<=}fbFS|&4wg\X2< nwhPj8WLshNG:4g<|D
"crh;MWT=MH9ch
FyLE(FUP}qA(?PkObq<
u7h2-L"(N7>#!V
DdPG;syTz\g{bTVWw?F_1]7z6fX1pX>COVCq/%/L[3Mgh%iHk+[p-D/
g%+/]8|<4iB J}! ;]7qqBbplPJ
gF @HEFF4FtD6NLMS:-ApX=YEq8*X-^lMq#invOV xj=MHb-[v3NvsfG(Oxm27dokPsc^=}CuSEei\4'SuGMR>*z96S_eP=Omaw]+?V=*6nN$	&lC5Lg0Uh*J2.Lxza$ :'Asr|aA1u]N|vb=FU2V"$xjd/+H&d2II	PRA8sZ[}JVz-=MPi.LkK3Y;~YY;~Ptw=}4&y1q
ii"p x}6;y1f%B.y1/G$ELm1!t=ppf/&?8Yyi	d?P6XJ-T\{OufO~Z8K$yR{eZ\]y1S2"[Pcx'I@>,l?t;hl![!	b_]JRUk}lV  W:,ba_2+p=MD7wW"231[^7`});var u,o,n,e,t,r,s,g,m;function y(){var X=m.buffer;u=new Int8Array(X),o=new Int16Array(X),e=new Uint8Array(X),t=new Uint16Array(X),n=new Int32Array(X),r=new Uint32Array(X),s=new Float32Array(X),g=new Float64Array(X)}function _(){f("missing function: INT123_compat_close")}_.stub=!0;var T=(X,ae,ve)=>e.copyWithin(X,ae,ae+ve),w=X=>{f("OOM")},x=X=>{var ae=e.length;X>>>=0,w(X)},S=new TextDecoder("utf8"),P=(X,ae)=>{if(!X)return"";for(var ve=X+ae,Ae=X;!(Ae>=ve)&&e[Ae];)++Ae;return S.decode(e.subarray(X,Ae))},C={varargs:void 0,get(){var X=n[+C.varargs>>2];return C.varargs+=4,X},getp(){return C.get()},getStr(X){var ae=P(X);return ae}},M=X=>52,j=(X,ae,ve,Ae)=>52,B=(X,ae)=>ae+2097152>>>0<4194305-!!X?(X>>>0)+ae*4294967296:NaN;function E(X,ae,ve,Ae,Se){var De=B(ae,ve);return 70}var V=[null,[],[]],O=(X,ae,ve)=>{for(var Ae=ae+ve,Se=ae;X[Se]&&!(Se>=Ae);)++Se;return S.decode(X.buffer?X.subarray(ae,Se):new Uint8Array(X.slice(ae,Se)))},k=(X,ae)=>{var ve=V[X];ae===0||ae===10?((X===1?l:c)(O(ve,0)),ve.length=0):ve.push(ae)},N=(X,ae,ve,Ae)=>{for(var Se=0,De=0;De<ve;De++){var Oe=r[ae>>2],Ce=r[ae+4>>2];ae+=8;for(var Fe=0;Fe<Ce;Fe++)k(X,e[Oe+Fe]);Se+=Ce}return r[Ae>>2]=Se,0},L={a:_,b:T,f:x,d:M,c:j,g:E,e:N};function z(X){X.i()}var J={a:L},Z,Q,ne,re,se,ge;this.setModule=X=>{b.setModule(mt,X)},this.getModule=()=>b.getModule(mt),this.instantiate=()=>(this.getModule().then(X=>WebAssembly.instantiate(X,J)).then(X=>{let ae=X.exports;Z=ae.j,Q=ae.k,ne=ae.m,re=ae.n,se=ae.o,ge=ae.p,m=ae.h,y(),z(ae),a()}),this.ready=new Promise(X=>{a=X}).then(()=>{this.HEAP=m.buffer,this.malloc=Z,this.free=Q,this.mpeg_decoder_feed=re,this.mpeg_decoder_read=se,this.mpeg_frame_decoder_create=ne,this.mpeg_frame_decoder_destroy=ge}),this)}function at(b={}){return this._init=()=>new this._WASMAudioDecoderCommon().instantiate(this._EmscriptenWASM,this._module).then(i=>{this._common=i,this._sampleRate=0,this._inputBytes=0,this._outputSamples=0,this._frameNumber=0,this._input=this._common.allocateTypedArray(this._inputSize,Uint8Array),this._output=this._common.allocateTypedArray(this._outputSize,Float32Array);let l=this._common.allocateTypedArray(1,Uint32Array);this._samplesDecodedPtr=this._common.allocateTypedArray(1,Uint32Array),this._sampleRatePtr=this._common.allocateTypedArray(1,Uint32Array),this._errorStringPtr=this._common.allocateTypedArray(1,Uint32Array);let c=this._common.wasm.mpeg_frame_decoder_create(l.ptr,b.enableGapless===!1?0:1);if(c)throw Error(this._getErrorMessage(c));this._decoder=l.buf[0]}),Object.defineProperty(this,"ready",{enumerable:!0,get:()=>this._ready}),this._getErrorMessage=i=>i+" "+this._common.codeToString(this._errorStringPtr.buf[0]),this.reset=()=>(this.free(),this._init()),this.free=()=>{this._common.wasm.mpeg_frame_decoder_destroy(this._decoder),this._common.wasm.free(this._decoder),this._common.free()},this.decode=i=>{let l=[],c=[],a=0;if(!(i instanceof Uint8Array))throw Error("Data to decode must be Uint8Array. Instead got "+typeof i);e:for(let f=0,p=0;f<i.length;f+=p){let d=i.subarray(f,this._input.len+f);p=d.length,this._inputBytes+=p,this._input.buf.set(d);let h=this._common.wasm.mpeg_decoder_feed(this._decoder,this._input.ptr,p);if(h===-10)continue e;t:for(;;){this._samplesDecodedPtr.buf[0]=0,h=this._common.wasm.mpeg_decoder_read(this._decoder,this._output.ptr,this._output.len,this._samplesDecodedPtr.ptr,this._sampleRatePtr.ptr,this._errorStringPtr.ptr);let u=this._samplesDecodedPtr.buf[0];if(this._outputSamples+=u,u&&(a+=u,l.push([this._output.buf.slice(0,u),this._output.buf.slice(u,u*2)])),h==-11)continue t;if(h===-10)continue e;if(h){let o=this._getErrorMessage(h);console.error("mpg123-decoder: "+o),this._common.addError(c,o,0,this._frameNumber,this._inputBytes,this._outputSamples)}}}return this._WASMAudioDecoderCommon.getDecodedAudioMultiChannel(c,l,2,a,this._sampleRatePtr.buf[0])},this.decodeFrame=i=>{let l=this.decode(i);return this._frameNumber++,l},this.decodeFrames=i=>{let l=[],c=[],a=0,f=0;for(;f<i.length;){let p=this.decodeFrame(i[f++]);l.push(p.channelData),c=c.concat(p.errors),a+=p.samplesDecoded}return this._WASMAudioDecoderCommon.getDecodedAudioMultiChannel(c,l,2,a,this._sampleRatePtr.buf[0])},this._isWebWorker=at.isWebWorker,this._WASMAudioDecoderCommon=at.WASMAudioDecoderCommon||ke,this._EmscriptenWASM=at.EmscriptenWASM||mt,this._module=at.module,this._inputSize=2**16,this._outputSize=2889*16*2,this._ready=this._init(),this}var xn=class extends nn{constructor(i){super(i,"mpg123-decoder",at,mt)}async decode(i){return this.postToDecoder("decode",i)}async decodeFrame(i){return this.postToDecoder("decodeFrame",i)}async decodeFrames(i){return this.postToDecoder("decodeFrames",i)}};tr(at,"MPEGDecoder");tr(xn,"MPEGDecoderWebWorker");var Sa=`
class OutputProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.msgs = {};
    this.seqNum = 0;
    this.bufPos = 0;
    this.paused = false;
    this.audioQueue = [];
    this.isProcessing = false;
    this.lastProcessedTime = currentTime;
    this.silenceFrames = 0;
    this.maxSilenceFrames = 256;
    this.silenceThreshold = 0.0002;
    this.consecutiveSilentChunks = 0;
    this.requiredSilentChunks = 3;

    this.port.onmessage = (e) => {
      const msg = e.data;
      
      if (msg.type === 'data') {
        this.silenceFrames = 0;
        this.consecutiveSilentChunks = 0;
        this.audioQueue.push({
          seqNum: msg.seqNum,
          channelData: msg.channelData,
          timestamp: currentTime
        });
        if (!this.isProcessing) {
          this.processQueue();
        }
      } else if (msg.type === 'advance') {
        this.seqNum = msg.seqNum;
        this.bufPos = 0;
        this.msgs = {};
        this.audioQueue = [];
        this.isProcessing = false;
        this.lastProcessedTime = currentTime;
        this.silenceFrames = 0;
        this.consecutiveSilentChunks = 0;
      } else if (msg.type === 'pause') {
        this.paused = true;
        this.silenceFrames = 0;
        this.consecutiveSilentChunks = 0;
      } else if (msg.type === 'resume') {
        this.paused = false;
        this.silenceFrames = 0;
        this.consecutiveSilentChunks = 0;
      }
    };
  }

  processQueue() {
    if (this.audioQueue.length === 0 || this.isProcessing) {
      return;
    }

    this.isProcessing = true;
    while (this.audioQueue.length > 0) {
      const chunk = this.audioQueue.shift();
      if (chunk) {
        this.msgs[chunk.seqNum] = chunk;
        this.lastProcessedTime = currentTime;
        this.silenceFrames = 0;
        this.consecutiveSilentChunks = 0;
      }
    }
    this.isProcessing = false;
  }

  process(inputs, outputs) {
    const output = outputs[0];
    const outLeft = output[0];
    const outRight = output[1];
    const outLen = outLeft.length;
    let outPos = 0;
    let filledAny = false;
    let isSilent = true;
    let maxAmplitude = 0;

    while (outPos < outLen) {
      const channelData = this.buf();
      if (!channelData) {
        break;
      }

      const bufLeft = channelData[0];
      const bufRight = channelData[1] || bufLeft;
      const len = Math.min(outLen - outPos, bufLeft.length - this.bufPos);

      outLeft.set(bufLeft.subarray(this.bufPos, this.bufPos + len), outPos);
      outRight?.set(bufRight.subarray(this.bufPos, this.bufPos + len), outPos);
      
      // Check for silence in this chunk
      for (let i = 0; i < len; i++) {
        const amplitude = Math.abs(bufLeft[this.bufPos + i]);
        maxAmplitude = Math.max(maxAmplitude, amplitude);
        if (amplitude > this.silenceThreshold) {
          isSilent = false;
          this.consecutiveSilentChunks = 0;
          break;
        }
      }

      outPos += len;
      this.bufPos += len;
      filledAny = true;

      if (this.bufPos === bufLeft.length) {
        const msg = this.msgs[this.seqNum];
        if (msg) {
          this.port.postMessage({ seqNum: msg.seqNum });
          delete this.msgs[msg.seqNum];
          this.seqNum++;
          this.bufPos = 0;
        }
      }
    }

    if (!filledAny || isSilent) {
      outLeft.fill(0, outPos);
      outRight?.fill(0, outPos);
      this.silenceFrames++;
      this.consecutiveSilentChunks++;
      
      // Only report silence if we've had enough consecutive silent chunks
      if (this.consecutiveSilentChunks >= this.requiredSilentChunks && this.silenceFrames >= this.maxSilenceFrames) {
        this.port.postMessage({ type: 'silence', frames: this.silenceFrames, maxAmplitude, consecutiveSilentChunks: this.consecutiveSilentChunks });
        this.silenceFrames = 0; // Reset but keep consecutiveSilentChunks
      }
    } else {
      this.silenceFrames = 0;
      this.consecutiveSilentChunks = 0;
    }

    return true;
  }

  buf() {
    const msg = this.msgs[this.seqNum];
    if (!msg || this.paused) {
      return null;
    }
    return msg.channelData;
  }
}

registerProcessor("output-processor", OutputProcessor);
`,nr=class{constructor(i,l){this.sampleRate=i;Y(this,"floatBuffer");this.floatBuffer=l}get floatData(){return this.floatBuffer}},$r=class{constructor(i){this.context=i;Y(this,"destNode");Y(this,"outputNode");Y(this,"analyzerNode");Y(this,"nextSeqNum",0);Y(this,"playing",!1);Y(this,"buffersProcessed",new Set);Y(this,"bufferDurationSec",.5);Y(this,"minBufferDurationSec",.3);Y(this,"maxSilenceDurationSec",2);Y(this,"bufferedData",[]);Y(this,"lastPlayedTimestamp",0);Y(this,"isBuffering",!1);Y(this,"audioQueue",[]);Y(this,"isProcessingQueue",!1);Y(this,"silenceDetected",!1);Y(this,"lastStateChange",0);Y(this,"onPlaying");Y(this,"onWaiting");Y(this,"onBuffersComplete");this.outputNode=new AudioWorkletNode(this.context,"output-processor"),this.destNode=this.context.createMediaStreamDestination(),this.analyzerNode=this.context.createAnalyser(),this.outputNode.connect(this.destNode),this.outputNode.connect(this.analyzerNode).connect(this.destNode),this.outputNode.port.onmessage=l=>{let c=l.data;c.type==="silence"?(this.silenceDetected=!0,this.flushBuffer(),this.checkPlaybackState()):c.seqNum!==void 0&&(this.buffersProcessed.add(c.seqNum),this.handleBufferProcessed(c.seqNum))}}get stream(){return this.destNode.stream}get streamId(){return this.destNode.stream.id}get analyzer(){return this.analyzerNode}appendBuffer(i){this.audioQueue.push(i),this.isProcessingQueue||this.processAudioQueue(),this.checkPlaybackState()}async processAudioQueue(){if(this.audioQueue.length===0||this.isProcessingQueue)return;this.isProcessingQueue=!0;let i=this.audioQueue.shift();if(i){let l=new nr(i.sampleRate,i.buffer);await this.appendPcmBuffer(l)}this.isProcessingQueue=!1,this.audioQueue.length>0?this.processAudioQueue():this.checkPlaybackState()}close(){this.outputNode.port.onmessage=null,this.outputNode.disconnect(),this.audioQueue=[],this.isProcessingQueue=!1,this.playing=!1,this.onWaiting?.(this.streamId)}advance(){this.buffersProcessed.clear(),this.isBuffering=!1,this.bufferedData=[],this.audioQueue=[],this.isProcessingQueue=!1,this.playing=!1,this.outputNode.port.postMessage({type:"advance",seqNum:this.nextSeqNum}),this.onWaiting?.(this.streamId)}pause(){this.playing=!1,this.isBuffering=!1,this.bufferedData=[],this.outputNode.port.postMessage({type:"pause"}),this.onWaiting?.(this.streamId)}resume(){this.isBuffering=!0,this.outputNode.port.postMessage({type:"resume"}),this.checkPlaybackState()}async appendPcmBuffer(i){let l=this.nextSeqNum++,c=i;c.sampleRate!=this.context.sampleRate&&(c=await this.resamplePcmBuffer(c)),this.appendNativeBuffer(l,c.floatData)}appendNativeBuffer(i,l){let c=[l],a=Date.now();this.bufferedData.push({seqNum:i,channelData:c,timestamp:a}),this.lastPlayedTimestamp=a,this.silenceDetected=!1,this.isBuffering?this.hasSufficientBuffer()&&(this.isBuffering=!1,this.flushBuffer()):this.shouldStartBuffering()?(this.isBuffering=!0,this.onWaiting?.(this.streamId)):this.outputNode.port.postMessage({type:"data",seqNum:i,channelData:c}),this.checkPlaybackState()}handleBufferProcessed(i){if(Array.from({length:i+1},(c,a)=>a).every(c=>this.buffersProcessed.has(c))&&i===this.nextSeqNum-1){let c=this.bufferedData.length===0&&this.audioQueue.length===0;this.lastPlayedTimestamp=this.context.currentTime*1e3,c?(this.playing&&!this.isBuffering&&(this.silenceDetected=!0,this.playing=!1,this.lastStateChange=this.context.currentTime*1e3,this.onWaiting?.(this.streamId),this.onBuffersComplete?.(this.streamId)),this.checkPlaybackState(),this.flushBuffer(),this.buffersProcessed.clear(),this.isBuffering=!1,this.isProcessingQueue=!1):(this.silenceDetected=!1,this.flushBuffer(),this.checkPlaybackState())}else if(this.silenceDetected&&this.playing){this.flushBuffer();let c=this.context.currentTime*1e3,a=c-this.lastPlayedTimestamp;a>500&&(this.playing=!1,this.lastStateChange=c,this.onWaiting?.(this.streamId),a>1e3&&this.onBuffersComplete?.(this.streamId))}}checkPlaybackState(){let i=Date.now(),l=this.bufferedData.length>0||this.audioQueue.length>0,c=i-this.lastPlayedTimestamp;if(i-this.lastStateChange<100)return;if(l&&c<1e3&&(this.silenceDetected=!1),l&&this.playing&&c>3e3){this.flushBuffer();return}!l&&c>3e3||this.silenceDetected&&c>3e3&&!l?this.playing&&(this.playing=!1,this.lastStateChange=i,this.onWaiting?.(this.streamId),c>3e3&&!l&&this.onBuffersComplete?.(this.streamId)):l&&!this.isBuffering&&(this.playing||(this.playing=!0,this.lastStateChange=i,this.lastPlayedTimestamp=i,this.silenceDetected=!1,this.onPlaying?.(this.streamId)))}resetState(){this.buffersProcessed.clear(),this.isBuffering=!1,this.isProcessingQueue=!1,this.silenceDetected=!1,this.playing=!1,this.lastStateChange=Date.now(),this.onWaiting?.(this.streamId),this.onBuffersComplete?.(this.streamId)}flushBuffer(){if(this.bufferedData.length===0&&!this.audioQueue.length){this.playing&&(this.playing=!1,this.lastStateChange=Date.now(),this.onWaiting?.(this.streamId));return}if(this.audioQueue.length>0){this.processAudioQueue();return}this.bufferedData.sort((i,l)=>i.seqNum-l.seqNum);for(let i of this.bufferedData)this.outputNode.port.postMessage({type:"data",seqNum:i.seqNum,channelData:i.channelData});this.bufferedData=[],this.lastPlayedTimestamp=Date.now(),this.silenceDetected=!1,setTimeout(()=>this.checkPlaybackState(),100)}shouldStartBuffering(){return this.getBufferedTime()<this.minBufferDurationSec&&this.audioQueue.length>0}hasSufficientBuffer(){return this.getBufferedTime()>=this.bufferDurationSec||this.audioQueue.length===0}getBufferedTime(){if(this.bufferedData.length===0)return 0;let i=this.context.sampleRate,l=0;for(let a of this.bufferedData)a.channelData[0]&&(l+=a.channelData[0].length);return l/i}async resamplePcmBuffer(i){let l=i.floatData,c=Math.floor(l.length*this.context.sampleRate/i.sampleRate),a=new OfflineAudioContext({sampleRate:this.context.sampleRate,numberOfChannels:1,length:c}),f=a.createBufferSource();f.buffer=new AudioBuffer({sampleRate:i.sampleRate,length:l.length,numberOfChannels:1}),f.buffer.copyToChannel(l,0),f.connect(a.destination),f.start(0);let p=await a.startRendering();return f.disconnect(),new nr(p.sampleRate,p.getChannelData(0))}},Lr=class extends EventTarget{constructor(){super(...arguments);Y(this,"context");Y(this,"streams",new Map);Y(this,"isWorkletSupported",!1)}async start(){if(!(this.context||typeof AudioContext>"u"))if(this.context=new AudioContext,this.isWorkletSupported=!!this.context.audioWorklet?.addModule,this.isWorkletSupported){let l=new Blob([Sa],{type:"application/javascript"}),c=URL.createObjectURL(l);await this.context.audioWorklet.addModule(c)}else console.warn("AudioWorklet not supported, falling back to ScriptProcessor")}stop(){this.context?.close(),this.context=void 0}createStream(){if(!this.context){console.error(new Error("AudioOutputManager not started"));return}if(this.context.resume(),!this.isWorkletSupported){let c=this.context.createMediaStreamDestination(),a=c.stream,f={stream:a,streamId:a.id,analyzer:this.context.createAnalyser(),destNode:c,close:()=>{},advance:()=>{},pause:()=>{},resume:()=>{},appendBuffer:()=>{}};return this.streams.set(a.id,f),a}let l=new $r(this.context);return l.onPlaying=c=>this.handleStreamStateChange(c,"playing"),l.onWaiting=c=>this.handleStreamStateChange(c,"waiting"),l.onBuffersComplete=c=>this.handleStreamStateChange(c,"buffersComplete"),this.streams.set(l.streamId,l),l.stream}destroyStream(l){this.getAudioStream(l).close(),this.streams.delete(l)}advanceStream(l){this.getAudioStream(l).advance()}pauseStream(l){this.getAudioStream(l).pause()}resumeStream(l){this.getAudioStream(l).resume()}getAudioStream(l){try{let c=this.streams.get(l);if(!c)throw new Error("Error getting audio analyser for stream: "+l);return c}catch(c){throw console.error(c),c}}getAnalyzer(l){return this.getAudioStream(l).analyzer}getMediaStreamDestNode(l){return this.getAudioStream(l).destNode}appendBuffer(l,c){this.getAudioStream(l).appendBuffer(c)}handleStreamStateChange(l,c){this.getAudioStream(l),this.dispatchEvent(new CustomEvent(c,{detail:l}))}},Fr=class{constructor(i,l){this.onData=i;this.onError=l;Y(this,"decoder");Y(this,"decoderReadyPromise");this.decoder=new at,this.decoderReadyPromise=this.decoder.ready}async addData(i){await this.decoderReadyPromise;let l=new Uint8Array(i),{channelData:c,samplesDecoded:a,sampleRate:f,errors:p}=this.decoder.decode(l);if(p.length>0)this.onError(new Error(p[0]?.message));else if(a>0&&c[0]){let d={sampleRate:f,buffer:c[0]};d.buffer.length>0&&this.onData(d)}}async reset(){await this.decoder.reset()}free(){this.decoder.free()}},rr=class{constructor(i){Y(this,"shouldPlay",null);Y(this,"streamId","");Y(this,"audio",new Audio);Y(this,"outputManager",new Lr);Y(this,"mp3Decoder");Y(this,"audioFormat");Y(this,"hasBufferedData",!1);Y(this,"lastPlaybackTime",0);Y(this,"silenceDetected",!1);Y(this,"isWaiting",!1);Y(this,"isPlaying",!1);Y(this,"lastStateChange",0);Y(this,"pendingPlay",!1);Y(this,"onPlay",()=>{});Y(this,"onStop",()=>{});Y(this,"onEmpty",()=>{});Y(this,"appendAudioChunk",i=>{let l=i.slice().buffer;this.audioFormat==="mp3"?(this.mp3Decoder||(this.mp3Decoder=new Fr(c=>{this.appendChunk(c),this.hasBufferedData=!0,this.lastPlaybackTime=Date.now(),this.silenceDetected=!1,this.isWaiting=!1,this.pendingPlay=!0,this.isPlaying||this.systemPlay()},c=>console.error("[ACP] MP3 decoder error:",c))),this.mp3Decoder.addData(l)):new AudioContext().decodeAudioData(l,a=>{this.appendChunk({sampleRate:a.sampleRate,buffer:a.getChannelData(0)}),this.hasBufferedData=!0,this.lastPlaybackTime=Date.now(),this.silenceDetected=!1,this.isWaiting=!1,this.pendingPlay=!0,this.isPlaying||this.systemPlay()})});Y(this,"advance",()=>{this.shouldPlay=!1,this.isPlaying=!1,this.hasBufferedData=!1,this.silenceDetected=!1,this.pendingPlay=!1,this.mp3Decoder&&this.mp3Decoder.reset(),this.outputManager.advanceStream(this.streamId),this.onEmpty(),this.onStop()});Y(this,"systemPlay",()=>{let l=Date.now()-this.lastPlaybackTime;if(this.silenceDetected&&l>2e3){this.hasBufferedData=!1,this.isPlaying=!1,this.onEmpty(),this.onStop();return}!this.isPlaying&&(this.hasBufferedData||this.pendingPlay)&&(this.shouldPlay=!0,this.audio.play().catch(c=>{this.isPlaying=!1,this.hasBufferedData=!1,this.pendingPlay=!0,this.onEmpty()}))});Y(this,"elOnWaiting",()=>{let i=Date.now();i-this.lastStateChange<100||(this.isPlaying=!1,this.isWaiting=!0,this.lastStateChange=i,(this.hasBufferedData||this.pendingPlay)&&this.systemPlay())});Y(this,"elOnPlay",()=>{let i=Date.now();i-this.lastStateChange<100||(this.isPlaying=!0,this.isWaiting=!1,this.lastStateChange=i,this.lastPlaybackTime=i,this.pendingPlay=!1,this.silenceDetected=!1,this.onPlay())});Y(this,"elOnPlaying",()=>{let i=Date.now();i-this.lastStateChange<100||(this.isPlaying=!0,this.isWaiting=!1,this.lastStateChange=i,this.lastPlaybackTime=i,this.pendingPlay=!1,this.silenceDetected=!1,this.onPlay())});Y(this,"elOnCanPlay",()=>{(this.pendingPlay||this.shouldPlay||this.shouldPlay===null)&&(this.hasBufferedData=!0,this.silenceDetected=!1,this.systemPlay())});Y(this,"elOnPause",()=>{let i=Date.now();i-this.lastStateChange<100||(this.isPlaying=!1,this.lastStateChange=i,this.onStop())});Y(this,"elOnEnded",()=>{let i=Date.now();i-this.lastStateChange<100||(this.isPlaying=!1,this.hasBufferedData=!1,this.lastStateChange=i,this.onEmpty(),(this.shouldPlay||this.pendingPlay)&&this.systemPlay())});Y(this,"onBuffersComplete",i=>{i.detail===this.streamId&&(this.hasBufferedData=!1,this.isPlaying=!1,this.onEmpty(),this.advance())});this.audioFormat=i.format}async init({onPlay:i,onStop:l,onEmpty:c}){await this.outputManager.start(),this.onPlay=i,this.onStop=l,this.onEmpty=c,this.audio.addEventListener("waiting",this.elOnWaiting),this.audio.addEventListener("play",this.elOnPlay),this.audio.addEventListener("playing",this.elOnPlaying),this.audio.addEventListener("canplay",this.elOnCanPlay),this.audio.addEventListener("pause",this.elOnPause),this.audio.addEventListener("ended",this.elOnEnded);let a=this.outputManager.createStream();if(!a)throw new Error("Failed to create audio stream");this.audio.srcObject=a,this.streamId=a.id,this.outputManager.addEventListener("buffersComplete",this.onBuffersComplete)}pause(){this.audio.paused||(this.shouldPlay=!1,this.isPlaying=!1,this.hasBufferedData=!1,this.silenceDetected=!1,this.audio.pause(),this.outputManager.pauseStream(this.streamId),this.onStop())}getIsPaused(){return!this.isPlaying||this.audio.paused}resume(){this.shouldPlay=!0,this.silenceDetected=!1,this.outputManager.resumeStream(this.streamId),this.hasBufferedData&&this.systemPlay()}clear(){this.audio.removeEventListener("waiting",this.elOnWaiting),this.audio.removeEventListener("play",this.elOnPlay),this.audio.removeEventListener("playing",this.elOnPlaying),this.audio.removeEventListener("canplay",this.elOnCanPlay),this.audio.removeEventListener("pause",this.elOnPause),this.audio.removeEventListener("ended",this.elOnEnded),this.outputManager.removeEventListener("buffersComplete",this.onBuffersComplete),this.streamId&&this.outputManager.destroyStream(this.streamId),this.outputManager.stop(),this.streamId="",this.audio.pause(),this.audio.srcObject=null,this.audio.currentTime=0,this.shouldPlay=null,this.isPlaying=!1,this.hasBufferedData=!1,this.silenceDetected=!1,this.isWaiting=!1,this.pendingPlay=!1,this.mp3Decoder&&(this.mp3Decoder.free(),this.mp3Decoder=void 0)}appendChunk(i){this.outputManager.appendBuffer(this.streamId,i)}get analyserNode(){return this.outputManager.getAnalyzer(this.streamId)}get mediaStreamDestNode(){return this.outputManager.getMediaStreamDestNode(this.streamId)}async startMicRecording(){if(!navigator.mediaDevices?.getUserMedia)throw new Error("Audio input is not supported in this browser. Please ensure you are using HTTPS and a supported browser.");try{return(await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}})).getTracks().forEach(l=>l.stop()),!0}catch(i){throw i instanceof Error?i.name==="NotAllowedError"||i.name==="PermissionDeniedError"?new Error("Microphone permission was denied"):new Error(`Failed to access microphone: ${i.message}`):new Error("Failed to access microphone")}}};var Sn=class{constructor(i){Y(this,"audioChunksQueue",[]);Y(this,"sourceBuffer");Y(this,"audioElement",document.createElement("audio"));Y(this,"audioContext",new AudioContext);Y(this,"onPlay",()=>{});Y(this,"onStop",()=>{});Y(this,"onEmpty",()=>{});Y(this,"shouldPlay",null);Y(this,"audioFormat");Y(this,"sampleRate");Y(this,"mediaSource");Y(this,"analyserNode",this.audioContext.createAnalyser());Y(this,"mediaStreamDestNode",this.audioContext.createMediaStreamDestination());Y(this,"elOnWaiting",()=>{console.log("WAITING"),this.onEmpty(),this.onStop()});Y(this,"elOnPlay",()=>{console.log("PLAY"),this.onPlay()});Y(this,"elOnPlaying",()=>{console.log("PLAYING"),this.onPlay()});Y(this,"elOnCanPlay",()=>{console.log("CANPLAY"),this.audioElement.play()});Y(this,"elOnPause",()=>{console.log("PAUSE"),this.onStop()});Y(this,"systemPlay",async()=>{await this.audioElement.play()});Y(this,"processAudioQueue",()=>{if(this.audioChunksQueue.length===0||!this.sourceBuffer||this.sourceBuffer.updating)return;let i=this.audioChunksQueue.shift();if(i)try{this.sourceBuffer.appendBuffer(i)}catch(l){console.error("Failed to append buffer:",l)}finally{this.processAudioQueue()}});Y(this,"onSourceOpen",async()=>{try{let i=this.getMimeType();this.sourceBuffer=this.mediaSource.addSourceBuffer(i),this.sourceBuffer?.addEventListener("updateend",()=>{this.mediaSource.readyState==="open"&&(this.audioChunksQueue.length>0&&this.processAudioQueue(),(this.shouldPlay||this.shouldPlay===null)&&this.systemPlay())})}catch(i){throw new Error(`Failed to create source buffer for ${this.audioFormat}: ${i}`)}});if(this.audioFormat=i.format,this.sampleRate=i.sampleRate||44100,!window.MediaSource)throw new Error("MediaSource API is not supported in this browser");let l=this.getMimeType();if(!MediaSource.isTypeSupported(l))throw new Error(`This browser does not support playback of ${this.audioFormat} (${l})`);this.mediaSource=new MediaSource,this.mediaSource.addEventListener("sourceopen",()=>void this.onSourceOpen()),this.audioElement.src=URL.createObjectURL(this.mediaSource),this.analyserNode.fftSize=512;let c=this.audioContext.createMediaElementSource(this.audioElement);c.connect(this.analyserNode),c.connect(this.audioContext.destination),c.connect(this.mediaStreamDestNode)}async init({onPlay:i,onStop:l,onEmpty:c}){this.onPlay=i,this.onStop=l,this.onEmpty=c,this.audioElement.addEventListener("waiting",this.elOnWaiting),this.audioElement.addEventListener("play",this.elOnPlay),this.audioElement.addEventListener("playing",this.elOnPlaying),this.audioElement.addEventListener("canplay",this.elOnCanPlay),this.audioElement.addEventListener("pause",this.elOnPause)}getIsPaused(){return this.audioElement.paused}appendAudioChunk(i){this.audioChunksQueue.push(i),this.processAudioQueue()}advance(){if(this.shouldPlay=!1,this.audioChunksQueue=[],this.audioElement.seekable.length>0){let i=this.audioElement.seekable.length-1;this.audioElement.currentTime=this.audioElement.seekable.end(i)}this.onStop()}pause(){this.audioElement.pause(),this.onStop(),this.shouldPlay=!1}resume(){if(this.shouldPlay=!0,this.audioElement.paused)this.elOnCanPlay();else throw new Error("resume: Audio element is not paused")}clear(){this.onStop(),this.audioElement.removeEventListener("waiting",this.elOnWaiting),this.audioElement.removeEventListener("playing",this.elOnPlaying),this.audioElement.removeEventListener("canplay",this.elOnCanPlay),this.audioElement.removeEventListener("pause",this.elOnPause),this.audioElement.removeEventListener("play",this.elOnPlay),this.audioElement.pause(),this.audioElement.src="",this.audioElement.load(),this.shouldPlay=!1}static isFormatSupported(i,l){if(!window.MediaSource)return!1;let c=i==="mp3"?"audio/mpeg":`audio/wav; sampleRate=${l||44100}`;return MediaSource.isTypeSupported(c)}getMimeType(){switch(this.audioFormat){case"mp3":return"audio/mpeg";case"wav":return`audio/wav; sampleRate=${this.sampleRate}`;case"mulaw":return`audio/basic; codec='ulaw'; sampleRate=${this.sampleRate}`;default:throw new Error(`Unsupported audio format: ${this.audioFormat}`)}}};function oo(b){return Sn.isFormatSupported(b.format,b.sampleRate)?new Sn(b):new rr(b)}var Aa='(function(){"use strict";class o{inputBuffer;constructor(){this.inputBuffer=[]}process=i=>{const s=[];for(const t of i)this.inputBuffer.push(t);for(;this.inputBuffer.length*16e3/sampleRate>1536;){const t=new Float32Array(1536);let e=0,r=0;for(;e<1536;){let u=0,n=0;for(;r<Math.min(this.inputBuffer.length,(e+1)*sampleRate/16e3);)u+=this.inputBuffer[r],n++,r++;t[e]=u/n,e++}this.inputBuffer=this.inputBuffer.slice(r),s.push(t)}return s}}class a extends AudioWorkletProcessor{resampler;_initialized=!1;constructor(){super(),this.resampler=new o,this._initialized=!0}process(i){const s=i[0][0];if(this._initialized&&s instanceof Float32Array){const t=this.resampler.process(s);for(const e of t)this.port.postMessage({message:"AUDIO_FRAME",data:e.buffer},[e.buffer])}return!0}}registerProcessor("resampler-worklet",a)})();',Ur;function so(){if(Ur===void 0){let b=new Blob([Aa],{type:"application/javascript"});Ur=URL.createObjectURL(b)}return Ur}var ir=class b{constructor(i,l,c){this.ctx=i;this.source=l;this.onAudioFrame=c;Y(this,"entryNode");Y(this,"init",async()=>{await this.ctx.audioWorklet.addModule(so());let i=new AudioWorkletNode(this.ctx,"resampler-worklet");this.entryNode=i,this.source.connect(this.entryNode),i.port.onmessage=this.onWorkletMessage});Y(this,"onWorkletMessage",i=>{if(i.data?.message==="AUDIO_FRAME"){let l=i.data.data,c=new Float32Array(l);this.onAudioFrame(c)}});Y(this,"disconnect",()=>{this.entryNode?.port.close(),this.entryNode?.disconnect()})}static async new(i,l,c){let a=new b(i,l,c);return await a.init(),a}};var or=class{constructor(i,l){this.modelProcessFunc=i;this.modelResetFunc=l;Y(this,"active",!1);Y(this,"reset",()=>{this.modelResetFunc()});Y(this,"pause",()=>{this.active=!1,this.reset()});Y(this,"resume",()=>{this.active=!0});Y(this,"process",async i=>{if(this.active)return await this.modelProcessFunc(i)});this.reset()}};var sr=typeof window<"u",jr=class{constructor(){Y(this,"logs",[])}add(i){if(!sr)return;let l=new Date().toISOString();this.logs.push(`[${l}] ${i}`),this.logs.length>1e3&&this.logs.shift()}getAll(){return sr?this.logs.join(`
`):""}clear(){sr&&(this.logs=[])}},Ee=new jr;sr&&(window.getDebugLog=()=>Ee.getAll());typeof window<"u"&&(window.ortWasmThreaded=!1,window.ortWasmSimd=!1);async function Oa(){try{Ee.add("Starting ONNX Runtime load..."),Ee.add(`User Agent: ${navigator.userAgent}`);let b=/iPad|iPhone|iPod/.test(navigator.userAgent);Ee.add(`Is iOS device: ${b}`);let i=b?{"ort-wasm.wasm":tt.CONVERSATION_ASSETS.wasm["ort-wasm.wasm"],"ort-wasm-simd.wasm":tt.CONVERSATION_ASSETS.wasm["ort-wasm-simd.wasm"]}:tt.CONVERSATION_ASSETS.wasm;Ee.add("Setting WASM paths:"),Ee.add(JSON.stringify(i)),Ee.add("Importing ONNX runtime with minimal config...");let l=await Promise.resolve().then(()=>yi(ao(),1)).catch(c=>{throw Ee.add(`Failed to import onnxruntime-web: ${c}`),c});return l.env.wasm.wasmPaths=i,l.env.wasm.numThreads=1,l.env.wasm.simd=!1,Ee.add("ONNX Runtime configured successfully"),l}catch(b){throw Ee.add(`ONNX Runtime initialization error: ${b}`),new Error("Failed to initialize ONNX Runtime",{cause:b})}}function Br(b){if(b instanceof Error){let i=b.cause?Br(b.cause):void 0,l=new Error(b.message);return i&&(l.cause=i),l}if(typeof b=="string")try{let i=JSON.parse(b);if(i.message)return Br(i)}catch{}return new Error(String(b))}var ur=class ur{constructor(){Y(this,"ort");Y(this,"_session");Y(this,"_h");Y(this,"_c");Y(this,"_sr");Y(this,"init",async()=>{try{Ee.add("Initializing Silero..."),this.ort=await Oa(),Ee.add("ONNX Runtime loaded successfully");let i=tt.CONVERSATION_ASSETS.sileroVad;Ee.add(`Loading VAD model from: ${i}`);let l;try{let c=await fetch(i);if(Ee.add(`Model fetch response: ${c.status} ${c.statusText}`),Ee.add(`Response headers: ${JSON.stringify(Object.fromEntries(c.headers))}`),!c.ok)throw new Error(`Failed to fetch model: ${c.status} ${c.statusText}`);l=await c.arrayBuffer(),Ee.add(`Model loaded, size: ${l.byteLength} bytes`)}catch(c){throw Ee.add(`Failed to fetch model: ${c}`),new Error("Failed to fetch VAD model",{cause:c})}try{Ee.add("Creating inference session..."),this._session=await this.ort.InferenceSession.create(l,{graphOptimizationLevel:"disabled",executionProviders:["wasm"],enableCpuMemArena:!1,enableMemPattern:!1}),Ee.add("Session created successfully")}catch(c){throw Ee.add(`Failed to create inference session: ${c}`),new Error("Failed to create inference session",{cause:c})}try{Ee.add("Initializing tensors..."),this._sr=new this.ort.Tensor("int64",[16000n]),this.reset_state(),Ee.add("Tensors initialized successfully")}catch(c){throw Ee.add(`Failed to initialize tensors: ${c}`),new Error("Failed to initialize tensors",{cause:c})}Ee.add("VAD initialization complete")}catch(i){throw Ee.add(`VAD initialization error: ${i}`),Br(i)}});Y(this,"reset_state",()=>{if(!this._session||!this.ort)throw new Error("Silero is not initialized");let i=Array(2*64).fill(0);this._h=new this.ort.Tensor("float32",i,[2,1,64]),this._c=new this.ort.Tensor("float32",i,[2,1,64])});Y(this,"process",async i=>{if(!this._session)throw new Error("Silero is not initialized");if(!this.ort)throw new Error("ONNX Runtime is not initialized");let c={input:new this.ort.Tensor("float32",i,[1,i.length]),h:this._h,c:this._c,sr:this._sr},a=await this._session.run(c);this._h=a.hn,this._c=a.cn;let[f]=a.output.data;return{notSpeech:1-f,isSpeech:f}})}};Y(ur,"new",async()=>{Ee.add("Creating new Silero instance...");let i=new ur;return await i.init(),i});var ar=ur;var lr=class b{constructor(i){this.options=i;Y(this,"audioContext");Y(this,"frameProcessor");Y(this,"audioResampler");Y(this,"initialized",!1);Y(this,"init",async()=>{if(this.initialized)return;this.initialized=!0;let i=await ar.new();this.frameProcessor=new or(i.process,i.reset_state),this.audioContext=new AudioContext;let l=new MediaStreamAudioSourceNode(this.audioContext,{mediaStream:this.options.stream});this.audioResampler=await ir.new(this.audioContext,l,this.onAudioFrame)});Y(this,"onAudioFrame",async i=>{if(this.frameProcessor===void 0)return;let l=await this.frameProcessor.process(i);l!==void 0&&this.options.onFrameProcessed(l,i)});Y(this,"start",()=>{this.frameProcessor?.resume()});Y(this,"destroy",()=>{this.frameProcessor?.pause(),this.audioResampler?.disconnect(),this.audioContext?.close()})}static async new(i){let l=new b(i);return await l.init(),l}};var Ea=500,Pa=15e3,Ia=30,Da={inputEncoding:"mulaw",inputSampleRate:16e3,outputFormat:"mp3",outputSampleRate:44100,shouldSendLanguage:!0},uo={DEFAULT_VAD_THRESHOLD:.85,DEFAULT_VAD_PAUSE_TIMEOUT:1e3,SILENCE_BUFFER_DURATION_MS:1e3,SAMPLES_PER_MS:16,SPEECH_CANCEL_THRESHOLD:.7,SPEECH_DURATION_MS:400,VAD_FRAMES_FOR_CANCEL:2,SILENCE_BUFFER_SIZE:1e3*16};async function ka(b,i={}){let{listeners:l={},debug:c=!1,...a}=i,f=null,p=null,d=null,h=null,u=null,o=null,n=Ca(c),e=[],t=!1,r=!1,s=!1,g=!1,m=null,y=null,_=!1,T=await w();return o=T.conversationId,l.onConnect?.(T.conversationId),{...T,mute:()=>g=!0,unmute:()=>g=!1,hangup:()=>x("user")};async function w(){try{return await C(),await M(),j(),await B(),await E()}catch(L){throw P(),new Error("Failed to start conversation with agent.",{cause:L})}}function x(L){t&&(L!=="error"&&e.length>0&&o&&(m=new Blob(e,{type:"audio/webm"}),S(m,o)),setTimeout(()=>{P(),l.onHangup?.(L)},500))}function S(L,z){if(!u||u.readyState!==WebSocket.OPEN){n.warn("Can't send audio data. WebSocket is not connected.");return}n.log("Sending conversation audio data over WebSocket");let J=new FileReader;J.onloadend=()=>{let Z=J.result?.toString().split(",")[1];if(!Z){n.error("Failed to convert audio blob to base64");return}let Q=64*1024,ne=Math.ceil(Z.length/Q);for(let re=0;re<ne;re++){let se=Z.substring(re*Q,(re+1)*Q);O({type:"conversationAudio",data:se,chunkIndex:re+1,totalChunks:ne,conversationId:z,mimeType:L.type||"audio/webm"})}},J.readAsDataURL(L)}function P(){t=!1,u?.close(),h?.destroy(),p?.clear(),d&&d.state!=="inactive"&&d.stop()}async function C(){try{let L=a.outputFormat||"mp3",z=a.outputSampleRate||44100;if(!["mp3","wav","mulaw"].includes(L))throw new Error(`Format ${L} (${z}Hz) is not supported in this browser`);p=oo({format:L,sampleRate:z}),await p.init({onPlay:()=>{s||(s=!0,l.onAgentStartedSpeaking?.()),$e.addMediaLog({type:"MEDIA_ON_PLAY",msg:"Agent speech started.",conversationId:o??"unknown",timestamp:Date.now().toString()},J=>{O({type:"mediaLog",payload:J})})},onStop:()=>{s&&(s=!1,l.onAgentStoppedSpeaking?.()),$e.addMediaLog({type:"MEDIA_ON_STOP",msg:"Agent speech stopped.",conversationId:o??"unknown",timestamp:Date.now().toString()},J=>{O({type:"mediaLog",payload:J})})},onEmpty:()=>{O({type:"bufferEmpty"}),$e.addMediaLog({type:"MEDIA_ON_EMPTY",msg:"Agent speech buffer is empty.",conversationId:o??"unknown",timestamp:Date.now().toString()},J=>{O({type:"mediaLog",payload:J})})}})}catch(L){throw new Error("Failed to initialize audio player.",{cause:L})}}async function M(){try{f=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,echoCancellation:!0,autoGainControl:!0,noiseSuppression:!0}})}catch(L){throw new Error("Failed to start recording. Microphone grant is required.",{cause:L})}}function j(){try{if(!f)throw new Error("Can't start recording. Microphone is not initialized.");if(!p)throw new Error("Can't start recording. MediaPlayer is not initialized.");let L=new AudioContext,z=L.createMediaStreamDestination(),J=L.createMediaStreamSource(f),Z=L.createGain();J.connect(Z),Z.connect(z);let Q=L.createMediaStreamSource(p.mediaStreamDestNode.stream),ne=L.createGain();return Q.connect(ne),ne.connect(z),d=new MediaRecorder(z.stream),d.ondataavailable=re=>e.push(re.data),d.onstop=()=>{d?.stream.getTracks().forEach(re=>re.stop()),f?.getTracks().forEach(re=>re.stop()),L.close(),t&&N("Recording stopped unexpectedly.",null,!0)},d.start(Ia),d}catch(L){throw new Error("Failed to start recording conversation.",{cause:L})}}async function B(){try{if(!f)throw new Error("Can't start VAD. Microphone is not initialized.");let L=!1,z=Cr(()=>{r&&(r=!1,p?.getIsPaused()&&(console.info("VAD: Resuming media player"),p?.resume()))},uo.DEFAULT_VAD_PAUSE_TIMEOUT),J=[],Z=Cr(()=>{if(J.length>0){let Q=Buffer.concat(J),ne=btoa(String.fromCharCode.apply(null,Q));O({type:"audioIn",data:ne}),J=[]}},Ea);try{h=await lr.new({stream:f,onFrameProcessed:(Q,ne)=>{try{if(!_)return;if(!t)return n.warn("Skipping VAD processing frame because agent is not connected yet.");if(g)return O({type:"audioIn",data:""});let re=Q.isSpeech>uo.DEFAULT_VAD_THRESHOLD;if(re?(console.info("VAD: Speech detected",{size:ne.length}),r||(r=!0,L=!0,l.onUserStartedSpeaking?.(),Ee.add("Pausing media player due to VAD: Speech detected"+JSON.stringify({size:ne.length})),p?.pause()),$e.addConvoLog({type:"CONVO_VOICE_ACTIVITY",msg:"User started speaking",conversationId:o??"unknown",timestamp:new Date().toISOString()}),z(),Z()):L&&(L=!1,$e.addConvoLog({type:"CONVO_USER_SPEECH_END",msg:"User stopped speaking according to VAD",conversationId:o??"unknown",timestamp:new Date().toISOString()}),console.info("VAD: User speech ended")),y==="arabic"){if(!re)return;let X=Mr(ne);J.push(Buffer.from(X));return}let se=Mr(ne),ge=btoa(String.fromCharCode.apply(null,se));O({type:"audioIn",data:ge})}catch(re){N("Error processing VAD frame.",re,!1)}}})}catch(Q){throw Q instanceof Error?new Error(`VAD initialization failed: ${Q.message}`,{cause:Q}):new Error("VAD initialization failed with unknown error")}try{h.start()}catch(Q){throw Q instanceof Error?new Error(`VAD start failed: ${Q.message}`,{cause:Q}):new Error("VAD start failed with unknown error")}return h}catch(L){throw cr(L)}}async function E(){let L=!1,z=new URL(`/v1/agents/${b}/start-conversation`,tt.CONVERSATION_WEBSOCKET_SERVER_URL);return new Promise((J,Z)=>{u=new WebSocket(z.toString());let Q=setTimeout(()=>{u?.close(),Z(new Error("WebSocket connection timed out."))},Pa);u.addEventListener("open",()=>{n.log("WebSocket connection opened."),V()}),u.addEventListener("message",ne=>{try{let re=JSON.parse(ne.data),se=to.safeParse(re);if(se.error){n.warn("Unexpected event received.",JSON.stringify(ne?.data),se.error.toString());return}let ge=se.data;ge.type==="init"&&(clearTimeout(Q),L=!0,t=!0,y=ge.language??null,J(ge)),k(ge)}catch(re){if(!L)return Z(new Error('Error processing message before receiving "init" message.',{cause:re}));N("Error processing WS message.",re,!0)}}),u.addEventListener("error",ne=>{clearTimeout(Q);let re=`Event details: ${JSON.stringify(ne)}`;if(!L)return Z(new Error(`WebSocket error before receiving "init" message. ${re}`));N("WebSocket error event.",ne,!0)}),u.addEventListener("close",ne=>{clearTimeout(Q);let re=`Event details: ${JSON.stringify(ne)}`;if(!L)return Z(new Error(`WebSocket closed before receiving "init" message. ${re}`));if(ne.wasClean)return x("agent");N("WebSocket closed unexpectedly.",ne,!0)})})}function V(){let L={...a,type:"setup"};O({...Da,...L})}function O(L){if(!(u?.readyState===WebSocket.OPEN))return n.warn("Can't send message. WebSocket is not connected.");n.log(`Sending WS message type ${L.type}`),u?.send(JSON.stringify(L))}function k(L){let{type:z}=L;if(n.log(`Received WS message with type '${z}'`),z==="SYS_LOG"&&$e.addSysLog(L.payload,o??L.payload.conversationId),!o){n.warn("Received message before conversation was initialized");return}switch(z){case"newAudioStream":$e.addConvoLog({type:"CONVO_NEW_AUDIO_STREAM",msg:"Advancing to next agent audio stream",conversationId:o,timestamp:new Date().toISOString()}),p?.advance();break;case"audioStream":{let J=L.data,Z=Uint8Array.from(atob(J),Q=>Q.charCodeAt(0));p?.appendAudioChunk(Z),$e.addConvoLog({type:"CONVO_AUDIO_STREAM",msg:"Appending audio chunk",conversationId:o,bytesLength:Z.length,timestamp:new Date().toISOString()});break}case"error":{$e.addConvoLog({type:"CONVO_SERVER_ERROR",msg:`\u274C ${L.message||"Unknown error"}`,conversationId:o,timestamp:new Date().toISOString()});let J=`Server error: ${L.message||"Unknown"}`;N(J,L.code,!0);break}case"hangup":$e.addConvoLog({type:"CONVO_AGENT_HANGUP",msg:"Agent ended call",conversationId:o,timestamp:new Date().toISOString()}),x("agent");break;case"voiceActivityEnd":$e.addConvoLog({type:"CONVO_VOICE_ACTIVITY_END",msg:"User turn completed",conversationId:o,timestamp:new Date().toISOString()}),l.onAgentDecidedToSpeak?.();break;case"onUserTranscript":$e.addConvoLog({type:"CONVO_USER_TRANSCRIPT",msg:`"${L.message}"`,conversationId:o,transcript:L.message,timestamp:new Date().toISOString()}),l.onUserTranscript?.(L.message);break;case"onAgentTranscript":$e.addConvoLog({type:"CONVO_AGENT_TRANSCRIPT",msg:`"${L.message}"`,conversationId:o,transcript:L.message,timestamp:new Date().toISOString()}),l.onAgentTranscript?.(L.message);break;case"onAgentGreeting":$e.addConvoLog({type:"CONVO_AGENT_GREETING",msg:`"${L.message}"`,conversationId:o,greeting:L.message,timestamp:new Date().toISOString()});break;case"onAgentGreetingEnd":_=!0,$e.addConvoLog({type:"CONVO_AGENT_GREETING_END",msg:"Agent greeting finished",conversationId:o,timestamp:new Date().toISOString()});break;case"audioStreamStart":$e.addConvoLog({type:"CONVO_AUDIO_STREAM_START",msg:"Agent speech started",conversationId:o,timestamp:new Date().toISOString()});break;case"audioStreamEnd":{let{message:J,jobId:Z}=L;l?.onAgentSpeechCompleted?.(J,Z),$e.addConvoLog({type:"CONVO_AUDIO_STREAM_END",msg:"Agent speech completed",conversationId:o,timestamp:new Date().toISOString()});break}case"init":case"voiceActivityStart":case"onAgentInterrupted":case"customEvent":case"llmStreamEnd":case"navigate":case"uiEvent":$e.addConvoLog({type:"CONVO_SERVER_EVENT",msg:`${z}`,conversationId:o,timestamp:new Date().toISOString()});break;default:L.type!=="SYS_LOG"&&$e.addConvoLog({type:"CONVO_UNKNOWN_EVENT",msg:`${z||"Unknown event"}`,conversationId:o,timestamp:new Date().toISOString()})}}function N(L,z,J){if(!t)return;let Z={description:L,isFatal:J,cause:z instanceof Error?cr(z):void 0};typeof z=="number"&&(Z.serverCode=z),z instanceof Event&&(Z.wsEvent=z),n.error("Error during conversation.",z),l.onError?.(Z),J&&x("error")}}function Ca(b){return{log:b?(i,...l)=>console.log(`[Play.ai SDK] ${i}`,...l):(...i)=>i,warn:b?(i,...l)=>console.warn(`[Play.ai SDK] ${i}`,...l):(...i)=>i,error:b?(i,...l)=>console.error(`[Play.ai SDK] ${i}`,...l):(...i)=>i}}function cr(b){if(b instanceof Error){let i=b.cause?cr(b.cause):void 0,l=new Error(b.message);return i&&(l.cause=i),l}if(typeof b=="string")try{let i=JSON.parse(b);if(i?.message)return cr(i)}catch{}return new Error(String(b))}var Zc=Ci;export{ka as connectAgent,Zc as open,Ci as openEmbed};
/*! Bundled license information:

onnxruntime-web/dist/ort.min.js:
  (*!
  * ONNX Runtime Web v1.16.3
  * Copyright (c) Microsoft Corporation. All rights reserved.
  * Licensed under the MIT License.
  *)
*/
